"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{14990:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(55452),o=n(11919),i=n(53738),a=n(91012),c=n(55966);n(2784);var s=n(52322),l=function(e){var t=e.createdByName,n=e.createdByProfileImageUrl,l=e.createdByYou,u=e.timestampDescription;return(0,s.jsxs)(o.k,{align:"center",children:[(0,s.jsx)(c.Vw,{display:"inline-block",size:"xs",fontSize:"xs",name:t,src:n,tooltipProps:{placement:"top"}}),(0,s.jsxs)(i.xu,{ml:2,mr:2,children:[(0,s.jsx)(a.x,{noOfLines:1,fontSize:"xs",children:l?(0,s.jsx)(r.cC,{id:"WZTg05"}):(0,s.jsx)(r.cC,{id:"pS1F3d",values:{createdByName:t}})}),u&&(0,s.jsx)(a.x,{noOfLines:1,fontSize:"11px",color:"gray.400",children:u})]})]})}},92931:function(e,t,n){n.d(t,{G:function(){return d}});var r=n(95235),o=n(82269),i=n(27440),a=n(25925);n(2784);var c=n(52322),s=["children"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){var t=e.children,n=(0,o.Z)(e,s);return(0,c.jsx)(i.r,u(u({templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6},n),{},{children:(0,c.jsx)(a.M,{children:t})}))}},63840:function(e,t,n){n.d(t,{Gd:function(){return r.G},F7:function(){return eo},Ot:function(){return $},_6:function(){return J}});var r=n(92931),o=n(95235),i=n(82269),a=n(87254),c=n(38717),s=n(8283),l=n(36895),u=n(80040),d=n(71170),f=n(11919),p=n(54336),m=n(53738),h=n(91012),g=n(93319),v=n(55966),b=n(2784),y=n(8388),x=n(9734),j=n(34860),w=n(67453),O=n(14990),k=n(90973),C=n(36471),P=n(8902),S=n(57895),A=n(7785),E=n(46510),D=n(22697),I=n(86273),z=n(7099),T=n(84798),M=n(94370),N=n(55452),R=n(49294),L=n(55479),_=n(75944),H=n(9088),Z=n(30893),B=n(67887),F=n(94301),W=n(40771),U=n(95258),G=n(82904),q=n(49929),V=n(52322),$=function(e){var t=e.href,n=e.title,r=e.createdByName,o=e.createdByEmail,i=e.createdTime,a=e.isDuplicateEnabled,c=e.isRenameEnabled,s=e.isShareEnabled,l=e.isTrashed,u=e.isFavorited,d=e.isTrashAndRestoreEnabled,f=e.isRemoveFromChannelEnabled,p=e.onDuplicate,g=e.onFavorite,b=e.onUnfavorite,x=e.onTrash,j=e.onPermanentDelete,w=e.onRestore,O=e.onShareClick,$=e.onRename,K=e.onRemoveFromChannel,Y=(0,R.V)("".concat(window.location.origin).concat(t)).onCopy,X=(0,L.p)(),J=(0,_.q)(),Q=J.isOpen,ee=J.onOpen,et=J.onClose;return(0,V.jsxs)(H.v,{isLazy:!0,closeOnSelect:!1,children:[(0,V.jsx)(Z.j,{"data-dashboard-doc-menu":!0,as:B.h,size:"xs",variant:"ghost",borderRadius:"full",onClick:ee,icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:M.cN}),color:"gray.400",_hover:{color:"gray.800",bg:"gray.200"},children:(0,V.jsx)(N.cC,{id:"7L01XJ"})}),Q&&(0,V.jsx)(F.h,{children:(0,V.jsxs)(W.q,{maxW:"sm",zIndex:"overlay",children:[(0,V.jsxs)(m.xu,{px:4,py:0,wordBreak:"break-word",children:[(0,V.jsx)(h.x,{children:n}),(0,V.jsx)(h.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,V.jsx)(N.cC,{id:"MXSt4t",values:{0:(0,y.p6)(i,"MMMM do, yyyy")}})}),o&&r&&(0,V.jsx)(v.kH,{label:o,children:(0,V.jsx)(h.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,V.jsx)(N.cC,{id:"Wpe4mQ",values:{createdByName:r}})})})]}),(s||c||f)&&(0,V.jsx)(U.R,{}),f&&(0,V.jsx)(G.s,{onClick:K,icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:T.gP}),children:(0,V.jsx)(N.cC,{id:"bv+Frh"})}),s&&(0,V.jsx)(G.s,{onClick:O,icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:z.zB}),children:(0,V.jsx)(N.cC,{id:"iyga2M"})}),c&&(0,V.jsx)(G.s,{onClick:$,icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:I.aJ}),children:(0,V.jsx)(N.cC,{id:"Cg4Iup"})}),(0,V.jsx)(U.R,{}),g?u?(0,V.jsx)(G.s,{icon:(0,V.jsx)(m.xu,{color:"yellow.400",children:(0,V.jsx)(q.G,{fixedWidth:!0,icon:k.T})}),onClick:b,children:(0,V.jsx)(N.cC,{id:"T/pF0Z"})}):(0,V.jsx)(G.s,{icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:D.T}),onClick:g,children:(0,V.jsx)(N.cC,{id:"pBsoKL"})}):null,a&&!!p&&(0,V.jsx)(G.s,{icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:E.WM}),onClick:p,children:(0,V.jsx)(N.cC,{id:"euc6Ns"})}),(0,V.jsx)(G.s,{icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:A.tF}),onClick:function(){Y(),X({title:(0,V.jsx)(N.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},children:(0,V.jsx)(N.cC,{id:"y1eoq1"})}),d&&(0,V.jsx)(U.R,{}),d?l?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(G.s,{icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:S.Ze}),onClick:w,children:(0,V.jsx)(N.cC,{id:"yKu/3Y"})}),j&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(U.R,{}),(0,V.jsx)(G.s,{color:"red",icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:P.faCircleXmark}),onClick:j,children:(0,V.jsx)(N.cC,{id:"0Lbaux"})})]})]}):(0,V.jsx)(G.s,{color:"red",icon:(0,V.jsx)(q.G,{fixedWidth:!0,icon:C.$}),onClick:function(){et(),null==x||x()},children:(0,V.jsx)(N.cC,{id:"1C/Yjq"})}):null]})})]})},K=["isFavorited","onFavorite","onUnfavorite"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J=function(e){var t=e.isFavorited,n=e.onFavorite,r=e.onUnfavorite,o=(0,i.Z)(e,K),c=(0,b.useState)(!1),s=c[0],l=c[1],u=(0,b.useCallback)(function(){if(!n||!r){console.error("[FavoriteButton] onFavorite or onUnfavorite is not defined");return}t?(l(!1),r()):(l(!0),setTimeout(function(){l(!1)},1e3),n())},[n,r]);return(0,V.jsx)(v.kH,{label:t?(0,V.jsx)(N.cC,{id:"T/pF0Z"}):(0,V.jsx)(N.cC,{id:"pBsoKL"}),placement:"top",children:(0,V.jsx)(B.h,X(X({},o),{},{zIndex:"1","data-favorite-button":!0,"aria-label":a.ag._({id:"pBsoKL"}),className:"star-wrapper ".concat(s?"active":""),onClick:u,variant:"ghost",size:"xs",color:t?"yellow.400":"gray.400",_hover:{color:t?"yellow.500":"gray.400",bg:t?void 0:"blackAlpha.100"},bg:t?"yellow.50":"transparent",borderRadius:"full",icon:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(q.G,{icon:t?k.T:D.T}),(0,V.jsxs)(m.xu,{fontSize:"2.5px",children:[(0,V.jsxs)("div",{className:"star",children:[(0,V.jsx)("div",{className:"tl"}),(0,V.jsx)("div",{className:"tr"}),(0,V.jsx)("div",{className:"bl"}),(0,V.jsx)("div",{className:"br"})]}),(0,V.jsx)("div",{className:"ring"}),(0,V.jsx)("div",{className:"circles"})]})]})}))})},Q=["id","title","thumbnailImageUrl","NextLink","href","createdByYou","createdByName","createdByEmail","createdTime","createdByProfileImageUrl","timestampDescription","editors","isDuplicateEnabled","isRenameEnabled","isShareEnabled","isTrashAndRestoreEnabled","isRemoveFromChannelEnabled","isTrashed","isFavorited","onDuplicate","onFavorite","onUnfavorite","onTrash","onPermanentDelete","onRestore","onShareClick","onRename","onRemoveFromChannel","cardThumbnails","context","tags","menuEnabled","openInNewWindow","activity"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en=function(e){var t=e.href,n=e.NextLink,r=e.target,o=e.children;return n?(0,V.jsx)(n,{href:t,passHref:!0,target:r,legacyBehavior:!0,children:(0,V.jsx)(c.A,{outline:"none",children:o})}):(0,V.jsx)(c.A,{outline:"none",href:t,target:r,children:o})},er=function(e){var t=e.cardThumbnails,n=e.hoveredIndex;return(0,V.jsx)(s.U,{justifyContent:"flex-start",alignItems:"top",w:"100%",position:"absolute",zIndex:2,top:0,spacing:0,children:t.map(function(e,t){return(0,V.jsx)(l.E,{className:"thumbnail-scrubber",src:e.previewUrl,fit:"cover",position:"absolute",left:0,pointerEvents:"none",transform:"translate(calc(calc(".concat(t," * 100%) - ").concat(n," * 100%),0px)")},e.id)})})},eo=b.forwardRef(function(e,t){var n=e.id,r=e.title,o=e.thumbnailImageUrl,s=e.NextLink,k=e.href,C=e.createdByYou,P=e.createdByName,S=e.createdByEmail,A=e.createdTime,E=e.createdByProfileImageUrl,D=e.timestampDescription,I=e.editors,z=e.isDuplicateEnabled,T=e.isRenameEnabled,M=e.isShareEnabled,N=e.isTrashAndRestoreEnabled,R=e.isRemoveFromChannelEnabled,L=e.isTrashed,_=e.isFavorited,H=void 0!==_&&_,Z=e.onDuplicate,B=e.onFavorite,F=e.onUnfavorite,W=e.onTrash,U=e.onPermanentDelete,G=e.onRestore,q=e.onShareClick,K=e.onRename,Y=e.onRemoveFromChannel,X=e.cardThumbnails,ee=e.context,eo=e.tags,ei=void 0===eo?[]:eo,ea=e.menuEnabled,ec=e.openInNewWindow,es=e.activity,el=void 0===es?void 0:es,eu=(0,i.Z)(e,Q),ed=(0,j.gF)(),ef=void 0!==ec&&ec?"_blank":void 0,ep=I&&I.length>0&&(0,V.jsx)(u.H,{size:"xs",max:5,fontSize:"xs",children:I.map(function(e){return(0,V.jsx)(v.Vw,{shadow:"md",borderWidth:"1px",name:ed?a.ag._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,y.Km)(e.lastEdited)}}):" ",src:e.user.profileImageUrl,tooltipProps:{placement:"top"}},"".concat(n,"-").concat(e.user.id))})}),em=(0,b.useState)(0),eh=em[0],eg=em[1],ev=(0,b.useCallback)(function(e){if(X){var t=e.currentTarget.getBoundingClientRect(),n=(e.pageX-t.left)/t.width;eg(Math.floor(X.length*n))}},[X]);return(0,V.jsx)(c.f,et(et({overflow:"hidden",ref:t,"data-doc-grid-item-id":n,bg:"linen.50",borderRadius:"5px",shadow:"md",as:d.P,_focusWithin:{shadow:"outline",_hover:{shadow:"outline"}},cursor:"pointer",_hover:{shadow:"lg",bgColor:"popover"===(void 0===ee?"grid":ee)?"white":"gray.100"},transition:"box-shadow .2s ease",role:"group",onMouseMove:ev,className:"highlight-mask"},eu),{},{children:(0,V.jsxs)(f.k,{direction:"column",wordBreak:"break-word",alignContent:"space-between",height:"100%",children:[o&&(0,V.jsx)(en,{NextLink:s,href:k,target:ef,children:(0,V.jsx)(p.o,{ratio:40/21,bgColor:"gray.100",children:(0,V.jsxs)(f.k,{borderBottomWidth:"1px",borderBottomColor:"gray.100",children:[(0,V.jsx)(er,{cardThumbnails:X||[],hoveredIndex:eh}),(0,V.jsx)(l.E,{src:null==o?void 0:o.src,fallbackSrc:null==o?void 0:o.fallbackSrc,fit:"cover"}),!!ep&&(0,V.jsx)(m.xu,{position:"absolute",right:0,bottom:0,borderRadius:"full",p:3,zIndex:1,children:ep})]})})}),(0,V.jsxs)(f.k,{p:3,position:"relative",direction:"column",justifyContent:"space-between",h:"100%",alignItems:"flex-start",children:[(0,V.jsx)(en,{NextLink:s,href:k,target:ef,children:(0,V.jsx)(h.x,{noOfLines:2,h:12,mb:2,children:(0,w.$)(r)})}),(0,V.jsxs)(f.k,{direction:"column",w:"100%",children:[ei&&ei.length>0&&s&&(0,V.jsx)(v.MY,{tags:ei,NextLink:s,overflowButtonLabel:"See all folders"}),(0,V.jsxs)(f.k,{mt:2,align:"flex-start",w:"100%",justify:"space-between",children:[el&&el,P&&(0,V.jsx)(O.l,{createdByYou:void 0!==C&&C,createdByName:P,createdByProfileImageUrl:E,timestampDescription:D}),(0,V.jsx)(g.L,{}),void 0!==ea&&ea&&(0,V.jsx)($,{href:k,title:(0,w.$)(r),createdByName:P,createdByEmail:S,createdTime:A,isDuplicateEnabled:void 0===z||z,isRenameEnabled:void 0!==T&&T,isShareEnabled:void 0!==M&&M,isTrashAndRestoreEnabled:void 0===N||N,isRemoveFromChannelEnabled:void 0!==R&&R,isTrashed:void 0!==L&&L,isFavorited:H,onDuplicate:Z,onFavorite:B,onUnfavorite:F,onTrash:W,onPermanentDelete:U,onRestore:G,onShareClick:q,onRename:K,onRemoveFromChannel:Y})]})]})]}),!!B&&!!F&&(0,V.jsx)(m.xu,{position:"absolute",top:3,right:3,zIndex:3,children:(0,V.jsx)(J,{isFavorited:H,onFavorite:B,onUnfavorite:F,opacity:H?1:(0,x.s2)()?1:0,_groupHover:(0,x.s2)()?void 0:{opacity:1},_focus:{opacity:1,shadow:"outline"}})})]})}),n)});eo.displayName="DocumentGridItem"},29395:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(13089),o=n(96412),i=n(95235),a=(0,r.Z)(function e(t){var n=t.key,r=t.description,a=t.classifyExamples,c=t.classifyReply,s=t.checkEnabled;(0,o.Z)(this,e),(0,i.Z)(this,"key",void 0),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"classifyExamples",void 0),(0,i.Z)(this,"classifyReply",void 0),(0,i.Z)(this,"checkEnabled",void 0),this.key=n,this.description=r,this.classifyExamples=a,this.classifyReply=c,this.checkEnabled=s})},24888:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(96412),o=n(13089),i=n(95235),a=n(9850),c=n.n(a),s=n(27191),l=n(41261),u=n(95472),d=n(12691),f=n(43981),p=function(){function e(t,n){(0,r.Z)(this,e),(0,i.Z)(this,"type","replace-content"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"rangeId",void 0),(0,i.Z)(this,"slice",void 0),(0,i.Z)(this,"content",void 0),this.description=n.description,this.rangeId=n.rangeId,this.content=n.content,this.slice=(0,f.Fr)(t,n.content)}return(0,o.Z)(e,[{key:"isApplied",value:function(e){var t=e.state.tr,n=null;try{n=this.transact(e,t,!1)}catch(e){return console.error("[isModificationActive] Could not transact modificatioon, returning false",e.message),!1}if(!n)return!1;var r=(0,f.m$)(e,this.rangeId);if(!r)return!1;try{var o=e.state.doc.slice(r.from,r.to),i=t.doc.slice(r.from,r.to),a=n.from===r.from&&n.to===r.to;return o.eq(i)&&a}catch(e){}return!1}},{key:"getPreviewJson",value:function(e){var t=e.state.tr;this.transact(e,t);var n=this.getParentCardId(e,t),r=c()(t.doc.toJSON());return(0,f.Y0)(r,n)}},{key:"getParentCardId",value:function(e,t){var n=(0,f.m$)(e,this.rangeId);if(!n)return null;var r=t.doc.resolve(n.from),o=(0,u.Ru)(r,d.KH)[0];return o&&o.node.attrs.id||null}},{key:"apply",value:function(e){var t=e.state.tr;this.transact(e,t),console.debug("[ReplaceContentModification] Applying modification",{modification:this,range:(0,f.m$)(e,this.rangeId)}),e.view.dispatch(t);var n=this.getParentCardId(e,t);(0,l.YS)({editor:e,cardId:n})}},{key:"transact",value:function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,f.m$)(e,this.rangeId);if(!r)return null;var o=e.state;t.replace(r.from,r.to,this.slice).setMeta("applyingAiModification",{rangeId:this.rangeId});var i=t.mapping.map(r.to),a={from:r.from,to:i};if(n){if(o.selection.empty)return t.setSelection(s.Y1.near(t.doc.resolve(r.from))),a;if(o.selection instanceof s.qv)return t.setSelection(s.qv.create(t.doc,r.from)),a;var c=s.Bs.between(t.doc.resolve(r.from),t.doc.resolve(i));t.setSelection(c)}return a}},{key:"getContentForTracking",value:function(){return this.content}}]),e}()},43981:function(e,t,n){n.d(t,{C$:function(){return s},Fr:function(){return c},Y0:function(){return a},m$:function(){return l}});var r=n(30764),o=n(47507),i=n(74993),a=function(e,t){if(!e.content||!e.content[0].content)return null;var n=e.content[0].content.find(function(e){return e.attrs&&e.attrs.id===t});return n?(e.content[0].content=[n],e):null},c=function(e,t){var n=null;if("html"===t.type)n=(0,i.T)(t.html,e.schema).slice;else if("json"===t.type){var o=r.HY.fromJSON(e.schema,t.json);n=new r.p2(o,0,0)}else throw Error("Unsupported Modification content type ".concat(t.type));return n},s=function(e,t,n){var r,i,a=o.i.getState(e.state);return a?(null==a?void 0:a.getExistingRangeId(e.state,n))||null||(null===(r=(i=e.commands).setInteractionRange)||void 0===r||r.call(i,t,n),t):t},l=function(e,t){var n=o.i.getState(e.state);return(null==n?void 0:n.getRange(e.state,t))||null}},68933:function(e,t,n){n.d(t,{$V:function(){return S},az:function(){return k},w6:function(){return C}});var r=n(20406),o=n(96412),i=n(13089),a=n(41701),c=n(90129),s=n(29017),l=n(48200),u=n(95235),d=n(28526),f=n.n(d),p=n(87254),m=n(29395),h=n(28248),g=n(64426),v=n(85942),b=n(68941),y=n(69862),x=n(24888),j=n(43981),w=n(39429),O=n(50265),k=function(){return p.ag._({id:"HNDdbS"})},C=function(e){(0,c.Z)(C,e);var t,n,d,m,w=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(C);if(t){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,s.Z)(this,e)});function C(e){var t;return(0,o.Z)(this,C),t=w.call(this,e),(0,u.Z)((0,a.Z)(t),"prompt",void 0),(0,u.Z)((0,a.Z)(t),"parseResponse",void 0),(0,u.Z)((0,a.Z)(t),"getTaskTarget",void 0),t.prompt=e.prompt,t.parseResponse=e.parseResponse||S,t.getTaskTarget=e.getTaskTarget,t}return(0,i.Z)(C,[{key:"getResponseMessages",value:(n=(0,r.Z)(f().mark(function e(t){var n,r,o,i,a,c,s,l,u,d,m,h;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,o=t.rangeId,a=(i=t.response).raw,c=i.suggestion,s=i.message,c){e.next=3;break}throw new y.$D("[SuggestContentTask] No html provided in prompt response",{chatMessage:s,inputMessage:r.message,resp:a,interactionId:r.interactionId});case 3:return e.next=5,(0,v.T)(c);case 5:return console.debug("[AIChat SuggestContentTask] modify suggestion",{transformedHtml:l=e.sent,html:c}),u=new x.O(n,{description:p.ag._({id:"nyQWMb"}),content:{type:"html",html:l},rangeId:o}),d={label:p.ag._({id:"nyQWMb"}),modification:u,jsonContentPreview:u.getPreviewJson(n)},m=this.getOriginalModifyContentSuggestion(n,r,o),h={from:"Designer",type:"suggestContent",resp:a,message:s||p.ag._({id:"pMSbe+"}),suggestions:[d,m],interactionId:r.interactionId},e.abrupt("return",{messages:[h],suggestionToApply:d});case 12:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"runPrompt",value:(d=(0,r.Z)(f().mark(function e(t){var n,r,o,i,a,c,s,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.input,r=t.context,o=t.variables,i=t.trackFns,c=void 0===(a=t.retries)?2:a,e.next=3,(0,g.I)(n,r.interactionId,{timeout:b.VH.get("aiRequestTimeouts").suggestContent});case 3:if(s=e.sent){e.next=6;break}throw new y.$D("Couldn't get response from prompt",{resp:s,inputMessage:r.message,interactionId:r.interactionId});case 6:if(!(l=this.parseResponse(s,o)).shouldRetry){e.next=12;break}if(!(c<=0)){e.next=10;break}throw new y.eo("Could not parse response properly after retries",{chatMessage:k(),inputMessage:r.message,resp:s,interactionId:r.interactionId});case 10:return i.trackRequestRetry({interactionId:r.interactionId,retriesRemaining:c,resp:s}),e.abrupt("return",this.runPrompt({input:n,context:r,retries:c-1,trackFns:i,variables:o}));case 12:return e.abrupt("return",{parsed:l,resp:s});case 13:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"run",value:(m=(0,r.Z)(f().mark(function e(t){var n,r,o,i,a,c,s,l,u,d,p,m,g,v,b,y,x,w,k,C,P;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editor,r=t.context,o=t.addMessage,i=t.history,a=t.trackFns,c=t.themeModificationController,s=t.provider,u=(l=this.determineTaskTarget(r.editorContext)).html,d=l.range,a.trackInputContent({taskContext:r,inputContent:u}),p={message:r.message,html:u,outline:r.editorContext.outline},m=(0,j.C$)(n,r.interactionId,d),g=(0,O.x)(i||[]),v=this.prompt.prepare({variables:p,history:g,interactionId:r.interactionId,params:{provider:s}}),console.debug("[AIChat SuggestContentTask] run",{html:p.html,input:v,suggestHistory:g,range:(0,j.m$)(n,m)}),e.next=10,(0,h.oO)(v);case 10:return b=e.sent,e.next=13,this.runPrompt({input:b,context:r,variables:p,trackFns:a,retries:1});case 13:return x=(y=e.sent).parsed,w=y.resp,e.next=18,this.getResponseMessages({editor:n,context:r,rangeId:m,response:x,themeModificationController:c});case 18:C=(k=e.sent).messages,P=k.suggestionToApply,console.debug("[AIChat SuggestContentTask] completed",{suggestion:x.suggestion,resp:w,parsed:x,messages:C,suggestionToApply:P}),this.autoApplySuggestion({context:r,editor:n,suggestionToApply:P,resp:w,trackFns:a,themeModificationController:c}),C.forEach(function(e){return o(e)}),a.trackRequestComplete({taskContext:r,outputMessage:x.message,outputContent:x.suggestion,resp:w});case 25:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"determineTaskTarget",value:function(e){return this.getTaskTarget?this.getTaskTarget(e):e.defaultRange}},{key:"getOriginalModifyContentSuggestion",value:function(e,t,n){var r=new x.O(e,{description:p.ag._({id:"HxF6Fk"}),content:{type:"html",html:this.determineTaskTarget(t.editorContext).html},rangeId:n});return{label:p.ag._({id:"HxF6Fk"}),modification:r,jsonContentPreview:r.getPreviewJson(e)}}},{key:"autoApplySuggestion",value:function(e){var t=e.context,n=e.editor,r=e.suggestionToApply,o=e.resp,i=e.trackFns,a=e.themeModificationController;if(r){if(r.modification.isApplied(n,a))throw console.debug("[SuggestContentTask] suggestion does not change the content",r),new y.ME("Suggestion does not change content",{resp:o,interactionId:t.interactionId,chatMessage:k()});try{var c=r.modification;c.apply(n,a),i.trackSuggestionApplied({interactionId:t.interactionId,suggestionContent:c.getContentForTracking(),suggestionLabel:c.description,suggestionType:c.type,autoApplied:!0})}catch(e){throw new y.An("Could not apply suggestion",{interactionId:t.interactionId})}}}}]),C}(m.B),P=/([\s\S]*?)```[A-Za-z]*\n([\s\S]*?)\n```([\s\S]*?)$/im,S=function(e){var t=e.match(P),n=[],r=void 0;if(t)n=[t[1],t[3]],r=t[2];else{var o=e.split("```");if(0===o.length)throw Error("Could not extract code from response");if(1===o.length)return(0,w.y)(o[0])?{suggestion:void 0,raw:e,message:e,shouldRetry:!0}:{suggestion:void 0,raw:e,message:e.replaceAll(/(HTML|code)/gi,"content")};n=[o[0]],r=o[1].trim()}return{suggestion:r,message:n.map(function(e){return e.trim()}).filter(function(e){return e.length>0}).join("\n\n").replaceAll(/(HTML|code)/gi,"content").replaceAll(/(slide)/gi,"card"),raw:e}}},71949:function(e,t,n){n.d(t,{L:function(){return a},a:function(){return c}});var r=n(16034),o=n(23313),i=n(68933),a=new r.V({systemPromptOperation:o.Run.ChangeContentLayoutSystem,userPromptOperation:o.Run.ChangeContentLayoutUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),c=new i.w6({key:"CHANGE_LAYOUT",description:"Change the display of information to use a different layout (like timeline, bullets, boxes, columns, table) or rearrange elements within a layout",classifyExamples:["turn this into a table","make each bullet into a box","could you split this into columns?","make this a timeline","could you make this more visual?","visualize this as a timeline"],classifyReply:"Sure, I'll start reformatting this as a table...",getTaskTarget:function(e){return"selectionRange"!==e.selectedDefaultRange?e.defaultRange:0===e.selectionRange.html.trim().length?e.cardContent:e.blockRange},prompt:a})},39429:function(e,t,n){n.d(t,{y:function(){return r}});var r=function(e){return Array.from(new DOMParser().parseFromString(e,"text/html").body.childNodes).some(function(e){return 1===e.nodeType})}},50265:function(e,t,n){n.d(t,{x:function(){return r}});var r=function(e){return e.slice(-7).map(function(e){return"User"===e.from?{role:"user",content:e.message}:e.isClassification?{role:"assistant",content:e.message}:e.resp?{role:"assistant",content:e.resp}:null}).filter(function(e){return!!(null!=e&&e.content)})}},26657:function(e,t,n){n.d(t,{L:function(){return r}});var r="ai-parsed-attrs"},60081:function(e,t,n){n.d(t,{C6:function(){return D},rD:function(){return A}});var r,o,i,a,c=n(12741),s=n(95235),l=n(20406),u=n(28526),d=n.n(u),f=n(28139),p=n(21124),m=n(67273),h=n(40323),g=n(43862),v=n(73805),b=n(63982),y=n(3915),x=n(31889),j=n(26657);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(k=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new k(e)}var C=new Map,P=new Map,S={},A=function(){for(var e in S)delete S[e]},E=(r=(0,l.Z)(d().mark(function e(t,n,r){var o,i,a,c,s;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o="".concat(n,"___").concat(t.join(",")),!C.has(o)){e.next=3;break}return e.abrupt("return",C.get(o)||[]);case 3:if(!P.has(o)){e.next=10;break}return e.next=6,P.get(o);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=[];case 9:return e.abrupt("return",e.t0);case 10:return i="bing"===n?{}:{minHeight:1e3},a="bing"===n?m.x.count:5,c=(0,p.J)({queries:t,count:a,provider:n,prefetch:!1,options:O({minWidth:m.x.minWidth,maxWidth:m.x.maxWidth,license:r.license,gammaFeature:"aiWizard"},i)}),P.set(o,c),e.next=16,c;case 16:return s=e.sent,C.set(o,s),e.abrupt("return",s);case 19:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),D=(o=(0,l.Z)(d().mark(function e(t,n){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((0,c.Z)((0,b.F)(t,"img[searches]").map(function(e){return M(e,n)})));case 2:(0,b.F)(t,"images").forEach(z);case 3:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),I=function(e){S[e.id||e.imageUrl]=!0},z=function(e){(0,b.F)(e,"div > img:first-child").forEach(function(e){var t=e.parentElement;if(t){var n=JSON.parse(e.getAttribute(j.L)||"{}");t.setAttribute("data-image",JSON.stringify(n)),e.remove()}})},T=(i=(0,l.Z)(d().mark(function e(t){var n,r,o,i,a,c,s,l;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=!1,o=!1,e.prev=3,a=function(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new k(t.call(e));n="@@asyncIterator",r="@@iterator"}throw TypeError("Object is not async iterable")}(t);case 5:return e.next=7,a.next();case 7:var u;if(!(r=!(c=e.sent).done)){e.next=23;break}if(!(S[(u=l=(s=c.value).image).id||u.imageUrl]||!(0,x.VE)(l.imageUrl))){e.next=12;break}return e.abrupt("continue",20);case 12:return e.next=14,(0,x.KI)(l.imageUrl);case 14:if(e.sent){e.next=18;break}return I(l),console.error("Got un-downloadable image url from provider=".concat(s.provider," with query=").concat(s.query),s.image),e.abrupt("continue",20);case 18:return n=s,e.abrupt("break",23);case 20:r=!1,e.next=5;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(3),o=!0,i=e.t0;case 29:if(e.prev=29,e.prev=30,!(r&&null!=a.return)){e.next=34;break}return e.next=34,a.return();case 34:if(e.prev=34,!o){e.next=37;break}throw i;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.abrupt("return",n);case 40:case"end":return e.stop()}},e,null,[[3,25,29,39],[30,,34,38]])})),function(e){return i.apply(this,arguments)}),M=(a=(0,l.Z)(d().mark(function e(t,n){var r,o,i,a,c,s,l,u,p,m,b,x;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getAttribute("bookmark")){e.next=2;break}return e.abrupt("return");case 2:var d,w;return d=r=n.provider||"web",o=(w=t.getAttribute("searches"))?"bing"===d?[w.split(", ")[0]]:w.split(", "):[],e.next=6,E(o,r,n);case 6:return i=e.sent,e.next=9,T(i);case 9:if(a=e.sent){e.next=13;break}return t.setAttribute("placeholder","true"),e.abrupt("return");case 13:if(c=a.query,s=a.image,l=h.Q[r],u=n.uploadImages&&["google","bing","web"].includes(r),I(s),!u){e.next=30;break}return e.prev=18,e.next=21,Promise.race([new Promise(function(e,t){(0,f.WY)(s.imageUrl,(0,y.n_)(),{onOriginalFileUpload:function(t){console.debug("uploadResult",{uploadResult:t}),e(t)},onUploadFailed:function(e){console.debug("onUploadFailed",{err:e}),t(e)}})}),new Promise(function(e,t){setTimeout(function(){return t(Error("Image upload timed out"))},15e3)})]);case 21:return m={src:(p=e.sent).src,tempUrl:p.src,meta:p.meta,query:c,source:l},t.setAttribute(j.L,JSON.stringify(m)),e.abrupt("return");case 27:e.prev=27,e.t0=e.catch(18),console.warn("Failed to upload image",{err:e.t0});case 30:b="aiGenerated"===r?g.D.Done:g.D.Queued,x=O(O({},(0,v.C)(s,c,r)),{},{uploadStatus:b}),t.setAttribute(j.L,JSON.stringify(x));case 33:case"end":return e.stop()}},e,null,[[18,27]])})),function(e,t){return a.apply(this,arguments)})},2492:function(e,t,n){n.d(t,{y:function(){return d}});var r,o=n(20406),i=n(28526),a=n.n(i),c=n(72338),s=n(36738),l=n(74993),u=n(85942),d=(r=(0,o.Z)(a().mark(function e(t){var n,r,o,i,d=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,(0,u.T)(t,n);case 3:return r=e.sent,o=(0,s.yg)(),i=(0,c.J1)(o),e.abrupt("return",(0,l.T)(r,i));case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},85942:function(e,t,n){n.d(t,{T:function(){return s}});var r,o=n(20406),i=n(28526),a=n.n(i),c=n(60081),s=(r=(0,o.Z)(a().mark(function e(t){var n,r,o=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.prev=1,r=new DOMParser().parseFromString(t,"text/html"),n.removeImagesFromLayouts&&l(r),e.next=6,(0,c.C6)(r,n);case 6:return!1!==n.resetImageSearches&&(0,c.rD)(),e.abrupt("return",r.body.innerHTML);case 10:return e.prev=10,e.t0=e.catch(1),console.error("Error transforming AI HTML",e.t0),e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[1,10]])})),function(e){return r.apply(this,arguments)}),l=function(e){e.querySelectorAll(":is(boxes, timeline, table, columns, bullets) img").forEach(function(e){e.remove()})}},66825:function(e,t,n){n.d(t,{T:function(){return r}});var r=new(n(98555)).v},69936:function(e,t,n){n.d(t,{B:function(){return k},b:function(){return C}});var r,o=n(95235),i=n(20406),a=n(28526),c=n.n(a),s=n(87254),l=n(9850),u=n.n(l),d=n(37164),f=n(2784),p=n(68933),m=n(71949),h=n(64426),g=n(12172),v=n(6201),b=n(2492),y=n(68941),x=n(46358),j=n(82511);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k="Translate this to Spanish please",C=function(e){var t,n=e.editor,r=(0,x.TL)();return(0,f.useCallback)((t=(0,i.Z)(c().mark(function e(t){var o,a,l,d,f;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.doc,a=t.cardId,l=t.message,n){e.next=3;break}return e.abrupt("return");case 3:d={},o.descendants(function(e){if("card"===e.type.name){var t=e.attrs.id;if(a!==t)return!1;var r=(0,g.c)(n,e.content);return d[t]={html:r,node:e},!1}return!0}),f=Object.values(d).map(function(e){var t=e.node;return{cardId:a,variant:{label:s.ag._({id:"HxF6Fk"}),card:u()(t.toJSON()),id:"original"},autoselect:!0}}),r((0,j.pg)(f)),Object.values(d).forEach(function(){var e=(0,i.Z)(c().mark(function e(t){var n,o,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node,o=t.html,e.next=3,P({html:o,node:n,message:l});case 3:i=e.sent,r((0,j.pg)([{cardId:a,variant:i,autoselect:!0}]));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[r,n])},P=(r=(0,i.Z)(c().mark(function e(t){var n,r,o,i,a,l,u,f,g;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.html,r=t.node,o=t.message,i=(0,v.nZ)(),a=m.L.prepare({variables:{html:n,message:o}}),e.next=5,(0,h.I)(a,i,{timeout:y.VH.get("aiRequestTimeouts").suggestContent});case 5:return l=e.sent,u=(0,p.$V)(l).suggestion,e.next=9,(0,b.y)(u);case 9:return f=e.sent.content,g=O(O({},r.toJSON()),{},{content:f.toJSON()}),e.abrupt("return",{id:(0,d.x0)(5),label:s.ag._({id:"nyQWMb"}),card:g});case 13:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},43602:function(e,t,n){n.d(t,{A2:function(){return N},$m:function(){return D.$m},DD:function(){return U}});var r=n(95235),o=n(20406),i=n(82269),a=n(5715),c=n(92452),s=n(5961),l=n(49002),u=n(96251),d=n(28526),f=n.n(d),p=n(55452),m=n(87254),h=n(55479),g=n(94659),v=n(8283),b=n(50390),y=n(91012),x=n(71354),j=n(45650),w=n(84103),O=n(53738),k=n(49929),C=n(53794),P=n(23027),S=n(76445),A=n(75085),E=n(10710),D=n(77381),I=n(52322),z=["accessLink","doc","refetchFn"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(e){var t,n,r,a,d=e.accessLink,O=e.doc,T=e.refetchFn,N=(0,i.Z)(e,z),L=(0,h.p)(),_=(0,E.SE)().refetch,H=T||_,Z=function(e){var t=S.T[e]||{title:(0,I.jsx)(p.cC,{id:"U7nnQt"}),description:e},n=t.title,r=t.description;L.isActive(e)||L({title:n,description:r,position:"top",id:e,status:"error",isClosable:!0,duration:null})},B=null!==(n=null==d?void 0:d.permission)&&void 0!==n?n:"view",F={manage:(0,I.jsx)(p.cC,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc}}),edit:(0,I.jsx)(p.cC,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc}}),comment:(0,I.jsx)(p.cC,{id:"gu6c+c",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc}}),view:(0,I.jsx)(p.cC,{id:"LoR9yH",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc}})}[B],W={manage:(0,I.jsx)(p.cC,{id:"MEeXaP"}),edit:(0,I.jsx)(p.cC,{id:"MEeXaP"}),comment:(0,I.jsx)(p.cC,{id:"dx3Kfr"}),view:(0,I.jsx)(p.cC,{id:"R2ZEYO"})}[B],U={manage:{icon:l.Tz,colorScheme:"cyan"},edit:{icon:l.Tz,colorScheme:"cyan"},comment:{icon:s.Mz,colorScheme:"yellow"},view:{icon:c.Pk,colorScheme:"green"}},G=null!==(r=null==O?void 0:null===(a=O.editors)||void 0===a?void 0:a.map(function(e){return e.user.displayName}))&&void 0!==r?r:[],q=function(){switch(B){case"manage":case"edit":switch(G.length){case 0:return(0,I.jsx)(p.cC,{id:"bspMVx",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc},components:{0:(0,I.jsx)("span",{role:"img","aria-label":m.ag._({id:"JGFG6q"})}),1:(0,I.jsx)("strong",{})}});case 1:return(0,I.jsx)(p.cC,{id:"w49thS",values:{0:G[0],GAMMA_ARTIFACT_PROPER_NOUN:A.Yc},components:{0:(0,I.jsx)("span",{role:"img","aria-label":m.ag._({id:"JGFG6q"})}),1:(0,I.jsx)("strong",{})}});case 2:return(0,I.jsx)(p.cC,{id:"Tz4Wi7",values:{0:G[0],1:G[1]},components:{0:(0,I.jsx)("span",{role:"img","aria-label":m.ag._({id:"7Lrnj6"})}),1:(0,I.jsx)("strong",{}),2:(0,I.jsx)("strong",{})}});default:return(0,I.jsx)(p.cC,{id:"VhIJ/j",values:{0:G[0],1:G.length-1},components:{0:(0,I.jsx)("span",{role:"img","aria-label":m.ag._({id:"7Lrnj6"})}),1:(0,I.jsx)("strong",{})}})}case"comment":return(0,I.jsx)(p.cC,{id:"vIOI7i",components:{0:(0,I.jsx)("span",{role:"img","aria-label":m.ag._({id:"OoNfwA"})}),1:(0,I.jsx)("strong",{}),2:(0,I.jsx)("strong",{})}});default:return(0,I.jsx)(p.cC,{id:"k/HcwJ",values:{GAMMA_ARTIFACT_PROPER_NOUN:A.Yc},components:{0:(0,I.jsx)("strong",{})}})}}(),V=(t=(0,o.Z)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,H();case 3:(0,D.bC)();case 4:L.isActive("login-complete")||L({title:(0,I.jsx)(p.cC,{id:"yFvQAN"}),description:F,position:"top",id:"login-complete",status:"success",isClosable:!0,duration:5e3});case 5:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,I.jsxs)(g.g,M(M({align:"stretch"},N),{},{children:[(0,I.jsxs)(v.U,{spacing:4,mr:6,children:[(0,I.jsx)(R,{icon:(0,I.jsx)(k.G,{icon:U[B].icon}),colorScheme:U[B].colorScheme}),(0,I.jsx)(b.X,{size:"sm",children:W})]}),(0,I.jsx)(y.x,{fontSize:"sm",children:q}),(0,I.jsxs)(x.K,{children:[(0,I.jsx)(j.z,{variant:"solid",leftIcon:(0,I.jsx)(k.G,{icon:u.xY}),size:"md",onClick:function(){(0,P.DW)({type:P._M.DOC_ACCESS_LINK,params:{docId:null==O?void 0:O.id,shareToken:d.token},errorCallback:Z,doneCallback:V})},children:(0,I.jsx)(p.cC,{id:"oZyG4C"})}),(0,I.jsx)(y.x,{fontSize:"xs",color:"gray.600",children:(0,I.jsx)(p.cC,{id:"oXChp6",values:{GAMMA_PROPER_NOUN:A.N6},components:{0:(0,I.jsx)(w.r,{href:C.B,isExternal:!0,fontWeight:"bold"}),1:(0,I.jsx)(w.r,{href:C.h,isExternal:!0,fontWeight:"bold"})}})})]})]}))},R=function(e){var t=e.icon,n=e.colorScheme;return(0,I.jsxs)(O.Cd,{size:10,bg:"linear-gradient(to bottom, var(--chakra-colors-".concat(n,"-200), var(--chakra-colors-").concat(n,"-300))"),position:"relative",children:[(0,I.jsx)(O.xu,{color:"".concat(n,".600"),display:"block",mt:"0.5",textAlign:"center",children:t}),(0,I.jsx)(O.Cd,{size:5,position:"absolute",bottom:-1,right:-1,color:"".concat(n,".800"),bg:"".concat(n,".100"),boxShadow:"base",fontSize:"xs",children:(0,I.jsx)(k.G,{icon:a.r8})})]})},L=n(97907),_=n(2784),H=n(58118),Z=["onClose","doc"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=function(e){var t=e.onClose,n=e.doc,r=(0,i.Z)(e,Z);return(0,I.jsxs)(O.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",maxWidth:"calc(".concat(H.pn,"px - 1rem)"),display:"column",p:4,position:"relative",children:[(0,I.jsx)(L.P,{size:"sm",onClick:t,position:"absolute",top:2,right:2}),(0,I.jsx)(N,F(F({},r),{},{doc:n,spacing:4}))]})},U=function(e,t){var n=(0,E.SE)(),r=n.isUserLoading,o=n.user,i=n.refetch,a=(0,D.$m)(e,o),c=(0,h.p)(),s=(0,_.useRef)();(0,_.useEffect)(function(){var n=t&&!o&&!r&&e&&a&&"view"!==a.permission;s.current&&c.close(s.current),n&&(s.current=c({position:"bottom-left",render:function(t){return W({refetchFn:i,doc:e,accessLink:a,onClose:t.onClose})},isClosable:!0,duration:null}))},[i,o,r,a,c,e,t])}},77381:function(e,t,n){n.d(t,{$m:function(){return h},bC:function(){return p},ts:function(){return m}});var r=n(95235),o=n(81333),i=n(2784),a=n(37914),c=n(23313),s=n(1368),l=n(10710),u=n(34860);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(){if(""!==a.v.SHARE_TOKEN){var e=new URL(window.location.href).searchParams;e.delete("token");var t=Object.fromEntries(e.entries());(0,s.lO)({query:t})}},m=function(e){var t=(0,l.SE)().user,n=(0,c.E3j)(),r=(0,o.Z)(n,2),s=r[0],d=r[1].error;(0,u.GJ)("[useAccessLinkCollaborator]: Error updating collaborator.",d),(0,i.useEffect)(function(){if(t&&e){var n,r=null===(n=e.accessLinks)||void 0===n?void 0:n.find(function(e){return e.token===a.v.SHARE_TOKEN});if(r){var o=l.gj.createForUser(f(f({},t),{},{__typename:"User"}));r.permission&&r.permission!==c.y3$.View&&o.cannot(r.permission,e)?s({variables:{docId:e.id}}).then(function(){p(),(0,a.M)("SHARE_TOKEN","")}).catch(function(e){return console.error("[useAccessLinkCollaborator]: Error adding collaborator.",e)}):p()}}},[s,e,t])},h=function(e,t){if(!e||t)return null;var n,r=null==e?void 0:null===(n=e.accessLinks)||void 0===n?void 0:n.find(function(e){return e.token===a.v.SHARE_TOKEN});return r&&r.permission?r:null}},23027:function(e,t,n){n.d(t,{DW:function(){return C},Mj:function(){return i},_M:function(){return a},r9:function(){return O}});var r,o,i,a,c=n(37914),s=n(23313),l=n(60747),u=n(77308),d=n(32333),f=n(10710),p=n(71672),m=n(49392),h=n(42045),g=null,v=null;(r=i||(i={})).LOGIN_COMPLETE="loginComplete",r.LOGIN_FAILURE="loginFailure",r.SIGNUP_COMPLETE="signupComplete";var b=function(e){if(e){var t=e.userId,n=e.workspaceId;d.co.identify(t,{user_org_id:n,anonymous_user:!1,gamma_user_id:t})}},y=function(){var e=(0,l.py)(),t=(0,f.Yu)({set:{locale:e}});return(0,s.WQq)().mutate({mutation:s.POY,variables:{patch:t}})},x=function(e){return["docAccessLink","docInvitation"].includes(e)},j=function(e){var t=e.data,n=e.redirectTo||(0,h.w)();if(t){var r=t.welcomeDocId,o=t.newWorkspace,i=t.signupFlow;if(r)try{p.W.setItem(m.H.welcomeDocId,JSON.stringify(r))}catch(e){}if(x(i))return n;o&&(n="/welcome?newWorkspace=true")}return n},w=function(e){var t=e.event,n=e.errorCallback,r=e.redirectTo,o=e.doneCallback,a=(0,u.K)().get();if(t.origin===window.location.origin||t.origin===c.v.FRONTEND_URL){var f=t.data;if(f.type===i.LOGIN_COMPLETE){var p,m,h,v,w,O,k=r||"/";if(b(null==f?void 0:null===(p=f.payload)||void 0===p?void 0:p.data),d.co.track(d.AA.LOGIN,{provider:"google"},{context:a}),null===(m=g)||void 0===m||m.close(),!r&&o){o();return}(null==f?void 0:null===(h=f.payload)||void 0===h?void 0:null===(v=h.data)||void 0===v?void 0:v.isFirstWorkspace)&&null!=f&&null!==(w=f.payload)&&void 0!==w&&w.data&&(k=j({data:null===(O=f.payload)||void 0===O?void 0:O.data,redirectTo:r})),window.location.href=k}if(f.type===i.SIGNUP_COMPLETE){b(null==f?void 0:null===(C=f.payload)||void 0===C?void 0:C.data),d.co.track(d.AA.SIGNUP,{flow:null==f?void 0:null===(P=f.payload)||void 0===P?void 0:null===(S=P.data)||void 0===S?void 0:S.signupFlow,provider:"google"},{context:a});var C,P,S,A,E,D,I,z,T,M,N=null==f?void 0:null===(A=f.payload)||void 0===A?void 0:null===(E=A.data)||void 0===E?void 0:E.userId,R=N&&c.v.IS_USER_TESTING_SESSION?(0,s.WQq)().mutate({mutation:s.ftw,variables:{input:{id:N,referrer:"USER_TESTING"}}}):Promise.resolve();N&&(0,l.u_)()&&y(),null===(D=g)||void 0===D||D.close();var L=r||"/",_=null==f?void 0:null===(I=f.payload)||void 0===I?void 0:null===(z=I.data)||void 0===z?void 0:z.isFirstWorkspace;if(!r&&o&&!_){o();return}if(_&&null!=f&&null!==(T=f.payload)&&void 0!==T&&T.data){if(x(f.payload.data.signupFlow)&&o){o();return}L=j({data:null===(M=f.payload)||void 0===M?void 0:M.data,redirectTo:r})}R.then(function(){window.location.href=L})}if(f.type===i.LOGIN_FAILURE){var H,Z,B,F=null==t?void 0:null===(H=t.data)||void 0===H?void 0:null===(Z=H.payload)||void 0===Z?void 0:Z.code;if(!n){console.error("No error callback defined");return}if(!F){console.error("No code defined");return}null===(B=g)||void 0===B||B.close(),n(F)}}};(o=a||(a={})).ACCEPT_DOC_INVITATION="accept-doc-invitation",o.ACCEPT_WORKSPACE_INVITATION="accept-workspace-invitation",o.DOC_ACCESS_LINK="doc-access-link",o.JOIN_WITH_CODE="join-with-code",o.DEFAULT_LOGIN="login",o.SIGNUP="signup";var O={"accept-doc-invitation":"docInvitation","accept-workspace-invitation":"workspaceInvitation","doc-access-link":"docAccessLink","join-with-code":"joinLink",login:"signup",signup:"signup"},k=function(e,t){switch(e){case a.JOIN_WITH_CODE:var n=t.slug,r=t.inviteCode,o=t.referredByUserId,i=new URL("".concat(c.v.API_HOST||"https://gamma.app","/organizations/").concat(n,"/join/").concat(r));return o&&i.searchParams.set("referredByUserId",o),i.toString();case a.ACCEPT_DOC_INVITATION:var s=t.docId,l=t.email,u=t.inviteCode;return"".concat(c.v.API_HOST,"/invitations/docs/").concat(s,"/?inviteCode=").concat(u,"&email=").concat(l);case a.ACCEPT_WORKSPACE_INVITATION:var d=t.workspaceId,f=t.email,p=t.inviteCode;return"".concat(c.v.API_HOST,"/invitations/workspaces/").concat(d,"?inviteCode=").concat(p,"&email=").concat(f);case a.DOC_ACCESS_LINK:var m=t.docId,h=t.shareToken;return"".concat(c.v.API_HOST,"/access-links/docs/").concat(m,"/?token=").concat(h);case a.SIGNUP:var g=t.inviteCode,v=t.referredByUserId,b=t.partnerStackClickId,y=t.partnerStackPartnerId,x=new URL("".concat(c.v.API_HOST||"https://gamma.app","/signup"));return g&&x.searchParams.set("inviteCode",g),v&&x.searchParams.set("referredByUserId",v),b&&x.searchParams.set("partnerStackClickId",b),y&&x.searchParams.set("partnerStackPartnerId",y),x.toString();default:return"".concat(c.v.API_HOST,"/login")}},C=function(e){var t=e.type,n=e.params,r=e.errorCallback,o=e.redirectTo,i=e.doneCallback,a=k(t,n),c=function(e){w({event:e,errorCallback:r,redirectTo:o,doneCallback:i})};window.removeEventListener("message",c);var s="toolbar=no, menubar=no, width=600, height=700, top=100, left=100";null===g||g.closed?g=window.open(a,t,s):v!==a?null!==(g=window.open(a,t,s))&&g.focus():g.focus(),window.addEventListener("message",c,!1),v=a}},42045:function(e,t,n){n.d(t,{w:function(){return i}});var r=n(98875),o={GENERATE:"/generate",GET_STARTED:"/?getStarted=true",HOME:"/"},i=function(){var e=r.VH.get("openAiStatus"),t="/";return r.VH.get("signupRedirectTo")&&(t="DOWN"===e?"/?getStarted=true":o[r.VH.get("signupRedirectTo")]),t}},34455:function(e,t,n){n.d(t,{A:function(){return d}});var r=n(95235),o=n(82269),i=n(11919);n(2784);var a=n(52322),c=["initialUrl","frameRef","iframeOptions","backgroundColor"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={allowPopups:!1,noSandbox:!1,preventScroll:void 0},d=function(e){var t=e.initialUrl,n=e.frameRef,r=e.iframeOptions,s=e.backgroundColor,d=(0,o.Z)(e,c),f=r||u,p=f.allowPopups,m=f.preventScroll,h=f.noSandbox;return(0,a.jsx)(i.k,l(l({w:"100%",h:"100%",direction:"column",background:void 0===s?"white":s},d),{},{children:(0,a.jsx)("iframe",{ref:n,src:t,frameBorder:"0",width:"100%",height:"100%",allow:"encrypted-media; camera; microphone",allowFullScreen:!0,title:"Embedded app",sandbox:h?void 0:"allow-forms allow-scripts allow-same-origin allow-modals allow-pointer-lock ".concat(p?"allow-popups":""),scrolling:m?"no":void 0,style:{flex:1}})}))}},76445:function(e,t,n){n.d(t,{T:function(){return u}});var r,o,i,a=n(95235),c=n(55452),s=n(75085),l=n(52322);(r=i||(i={})).invalid_signup_code="invalid_signup_code",r.invalid_reset_code="invalid_reset_code",r.invalid_user="invalid_user",r.other_workspace_member="other_workspace_member";var u=(o={},(0,a.Z)(o,i.invalid_signup_code,{title:(0,l.jsx)(c.cC,{id:"F6yt1L",values:{GAMMA_PROPER_NOUN:s.N6}}),description:(0,l.jsx)(c.cC,{id:"hVNvhu"})}),(0,a.Z)(o,i.invalid_reset_code,{title:(0,l.jsx)(c.cC,{id:"SvShcH"}),description:(0,l.jsx)(c.cC,{id:"Vm3y4h"})}),(0,a.Z)(o,i.invalid_user,{title:(0,l.jsx)(c.cC,{id:"a2AYF6"}),description:(0,l.jsx)(c.cC,{id:"x9CdxW",values:{GAMMA_PROPER_NOUN:s.N6}})}),(0,a.Z)(o,i.other_workspace_member,{title:(0,l.jsx)(c.cC,{id:"J5F9Vo"}),description:(0,l.jsx)(c.cC,{id:"CTBeTd",values:{GAMMA_PROPER_NOUN:s.N6}})}),o)},93148:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(12741),o=n(55452),i=n(2784);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,o.mV)();return(0,i.useMemo)(e,[n,e].concat((0,r.Z)(t)))}},9846:function(e,t,n){n.d(t,{V:function(){return p}});var r=n(95235),o=n(82269),i=n(55452),a=n(11919),c=n(91012),s=n(2784),l=n(52322),u=["label","isConnected"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=(0,s.memo)(function(e){var t=e.label,n=e.isConnected,r=(0,o.Z)(e,u);return void 0===n||n?null:(0,l.jsxs)(a.k,f(f({bg:"gray.50",p:4,borderRadius:"lg",textAlign:"center",alignItems:"center",direction:"column"},r),{},{children:[(0,l.jsx)(c.x,{fontSize:"sm",fontWeight:"bold",children:(0,l.jsx)(i.cC,{id:"ysdDIA"})}),(0,l.jsx)(c.x,{fontSize:"sm",children:t})]}))});p.displayName="OfflineInfoBox"},67701:function(e,t,n){n.d(t,{BU:function(){return s},My:function(){return a}});var r=n(2784),o=n(52322),i=r.createContext({previewModeEnabled:!1}),a=function(){return(0,r.useContext)(i)},c={previewModeEnabled:!0},s=function(e){var t=e.children;return(0,o.jsx)(i.Provider,{value:c,children:t})}},15087:function(e,t,n){n.d(t,{y5:function(){return eu},Pu:function(){return v},H9:function(){return eh}});var r=n(87254),o=n(46949),i=n(21891),a=n(35316),c=n(27777),s=n(91012),l=n(55966),u=n(2784),d=n(43997),f=n(93148),p=n(9734),m=n(47381),h=n(52322),g=function(){return r.ag._({id:"NiZZRh"})},v=function(){var e=(0,d.I0)(),t=(0,f.A)(g),n=(0,u.useCallback)(function(){e((0,m.Hm)({isOpen:!0}))},[e]),r=(0,u.useCallback)(function(t){e((0,m.Hm)({isOpen:!0,initialQuery:t.target.value}))},[e]);return(0,h.jsxs)(i.B,{mt:4,children:[(0,h.jsx)(a.Z,{pointerEvents:"none",children:(0,h.jsx)(o.W,{color:"gray.300"})}),(0,h.jsx)(c.I,{placeholder:t,_placeholder:{opacity:1},onChange:r,onClick:n,value:""}),!(0,p.s2)()&&(0,h.jsx)(a.x,{pointerEvents:"none",children:(0,h.jsx)(s.x,{mr:6,fontWeight:"600",color:"gray.400",fontSize:"sm",bg:"gray.50",px:1,borderRadius:"md",children:(0,l.cE)("Mod+K")})})]})},b=n(20010),y=n(56915),x=n(48273),j=n(2167),w=n(46358),O=n(13720),k=n(87202),C=n(56692),P=n(10710),S=(0,k.ZP)("mod+K"),A=function(e){var t=e.isEnabledFn,n=void 0===t?function(){return!0}:t,r=e.isOpen,o=void 0!==r&&r,i=(0,P.SE)().user,a=(0,d.I0)();(0,u.useEffect)(function(){if(!(0,p.s2)()&&i)return C.F7.on("keydown","GLOBAL_SEARCH",function(e){return!!(S(e)&&n())&&(e.preventDefault(),a((0,m.Hm)({isOpen:!o})),!0)})},[a,n,i,o])},E=n(81333),D=n(55452),I=n(11919),z=n(64827),T=n(27875),M=n.n(T),N=n(23313),R=n(9846),L=n(34860),_=n(93858),H=n(49392),Z=n(420),B=function(e){var t=e.onChange,n=e.query,s=e.isDisabled,l=e.isLoading;return(0,h.jsxs)(i.B,{size:"lg",variant:"unstyled",children:[(0,h.jsx)(a.Z,{p:4,pointerEvents:"none",color:"gray.300",children:(0,h.jsx)(o.W,{})}),(0,h.jsx)(c.I,{isDisabled:s,placeholder:r.ag._({id:"NiZZRh"}),p:3,pl:12,border:"none",outline:"none",shadow:"none",value:n,onChange:t,_placeholder:{opacity:1,color:"gray.300"}}),(0,h.jsx)(a.x,{p:4,pointerEvents:"none",color:"gray.500",opacity:l?1:0,transitionProperty:"common",transitionDuration:"normal",mr:(0,p.s2)()?8:0,children:(0,h.jsx)(Z.$,{size:"sm"})})]})},F=n(82642),W=n(49747),U=n(40110),G=n(8283),q=n(96530),V=n(93319),$=n(67887),K=function(e){var t=e.onClose,n=e.showTip;return(0,h.jsxs)(W.U,{in:n,children:[(0,h.jsx)(U.i,{}),(0,h.jsxs)(G.U,{p:4,px:6,children:[(0,h.jsxs)(s.x,{fontSize:"sm",color:"gray.600",children:[(0,h.jsxs)("span",{role:"img","aria-label":"Wave",children:["\uD83D\uDC4B"," "]}),(0,h.jsx)(D.cC,{id:"3SXj0j",values:{0:(0,l.cE)("Mod+K")},components:{0:(0,h.jsx)(q.T,{})}})]}),(0,h.jsx)(V.L,{}),(0,h.jsx)($.h,{"aria-label":r.ag._({id:"yz7wBu"}),icon:(0,h.jsx)(F.T,{boxSize:2.5}),isRound:!0,size:"xs",variant:"ghost",onClick:t})]})]})},Y=n(71354),X=n(38717),J=n(53738),Q=n(49929),ee=n(16092),et=n(51823),en=function(e){var t=e.result,n=e.isActive,o=e.focusedItemEl,i=e.onMouseEnter,a=t.name,c=t.id,u=t.slug,d=t.isMember,f=t.memberCount,p=t.members;return(0,h.jsx)(X.f,{children:(0,h.jsxs)(G.U,{ref:n?o:null,className:"search-result",wordBreak:"break-word",onMouseEnter:i,p:3,align:"flex-start",alignItems:"center",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},children:[(0,h.jsx)(J.xu,{p:2,children:(0,h.jsx)(Q.G,{icon:ee.Ty})}),(0,h.jsx)(Y.K,{spacing:2,flex:"1",children:(0,h.jsxs)(X.A,{href:(0,et.j)({id:c,slug:u}),children:[(0,h.jsx)(s.x,{children:a}),(0,h.jsx)(s.x,{fontSize:"sm",color:"gray.400",children:d?(0,h.jsx)(D.cC,{id:"tWPlLK",values:{0:f||0}}):(0,h.jsx)(D.cC,{id:"pkIIls",values:{0:f||0}})})]})}),(0,h.jsx)(V.L,{}),(0,h.jsx)(l.NL,{overflowTooltipLabel:r.ag._({id:"25VyZX"}),size:"xs",avatars:p||[],max:3})]})})},er=n(36895),eo=n(80040),ei=n(14304),ea=n.n(ei),ec=n(34717),es=n(98875),el=n(81188),eu=function(e){var t=e.result,n=e.isActive,r=e.focusedItemEl,o=e.onMouseEnter,i=e.context,a=void 0===i?"globalSearch":i,c=(0,es.ye)("screenshotsEnabled"),u=t.title,d=t.text,f=t.previewUrl,m=t.editors,g=t.editedTime,v=t.id,b=t.createdBy,y="mentionsList"===a;return(0,h.jsx)(X.f,{children:(0,h.jsxs)(G.U,{ref:n?r:null,className:"search-result",wordBreak:"break-word",onMouseEnter:o,p:y?0:[2,3],py:y?.5:void 0,align:"flex-start",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},children:[(0,h.jsx)(er.E,{display:{base:"none",xs:"block"},h:"100%",src:c?f:ec.Z.src,w:{base:"0px",sm:"25%"},border:"1px solid",borderColor:"gray.200",borderRadius:"md",shadow:"lg",fallbackSrc:ec.Z.src}),(0,h.jsxs)(Y.K,{spacing:(0,p.s2)()?1:2,flex:"1",children:[(0,h.jsxs)(X.A,{href:"globalSearch"===a?(0,et.Gn)({docId:v}):void 0,children:[(0,h.jsx)(s.x,{fontSize:"md",fontWeight:"600",noOfLines:y?1:2,dangerouslySetInnerHTML:{__html:u?ea().sanitize(u):""}}),(null==b?void 0:b.displayName)&&(0,h.jsx)(s.x,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,h.jsx)(D.cC,{id:"ab98Hp",values:{0:null==b?void 0:b.displayName}})})]}),(0,h.jsx)(s.x,{fontSize:y?"xs":"sm",noOfLines:2,whiteSpace:"normal",wordBreak:"break-word",dangerouslySetInnerHTML:{__html:d?ea().sanitize(d):""}}),(0,h.jsxs)(G.U,{children:[m&&m.length>0&&(0,h.jsx)(eo.H,{size:"xs",fontSize:"xs",max:5,children:null==m?void 0:m.map(function(e){var t=e.user,n=t.id,r=t.displayName,o=t.profileImageUrl;return(0,h.jsx)(l.Vw,{label:r,src:o,shadow:"base"},n)})}),g&&(0,h.jsx)(s.x,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,h.jsx)(D.cC,{id:"5cC8f2",values:{0:(0,el.P9)(g)}})})]})]})]})})},ed=function(e){var t=e.results,n=e.focusedIndex,r=e.focusedItemEl,o=e.onMouseEnter;return(0,h.jsx)(Y.K,{spacing:1,px:4,h:["lg","xl"],maxHeight:["lg","xl"],pb:4,overflow:"auto","data-testid":"search-results-wrapper",children:t.map(function(e,t){return"DocResult"===e.__typename||"PseudoDocResult"===e.__typename?(0,h.jsx)(eu,{result:e,isActive:n===t,focusedItemEl:r,onMouseEnter:function(){o(t)}},e.id):"Channel"===e.__typename?(0,h.jsx)(en,{result:e,isActive:n===t,focusedItemEl:r,onMouseEnter:function(){o(t)}},e.id):null})})},ef=(0,k.ZP)("mod+K"),ep=function(e){var t=e.query,n=e.isOpen,r=e.setResults,o=e.currentWorkspaceId,i=(0,N.plz)({variables:{first:5,workspaceId:o,archived:!1,sortBy:{field:N.IX5.LastViewed,direction:N.SrV.Desc}},fetchPolicy:"cache-first",skip:!n}).data;(0,u.useEffect)(function(){!(t.length>0)&&n&&r(((null==i?void 0:i.docs.edges.map(function(e){return e.node}))||[]).slice(0,5).map(function(e){var t=e.id,n=e.title,r=e.archived,o=e.titleCard,i=e.createdBy,a=e.editors,c=e.createdTime,s=e.editedTime,l=e.updatedTime;return{id:t,title:n,archived:r,previewUrl:null==o?void 0:o.previewUrl,createdBy:i,editors:a,text:"",createdTime:c,editedTime:s,updatedTime:l,__typename:"PseudoDocResult"}}))},[n,t.length,null==i?void 0:i.docs.edges,r])},em=function(){var e=(0,P.SE)(),t=e.user,n=e.currentWorkspace,r=(0,N.$gs)().isConnected,o=(0,w.CG)(m.Ct),i=(0,u.useState)([]),a=i[0],c=i[1],s=(0,u.useState)(0),d=s[0],f=s[1],g=(0,_._)(H.H.hasDismissedSearchTip,!1),v=(0,E.Z)(g,2),b=v[0],y=v[1],x=(0,u.useRef)(null),j=(0,u.useState)(!1),O=j[0],k=j[1],S=(0,w.CG)(m.ak),A=(0,u.useState)(function(){return S||""}),T=A[0],Z=A[1],F=(0,N.SVp)(),W=(0,E.Z)(F,2),U=W[0],G=W[1],q=G.data,V=G.loading;ep({query:T,isOpen:o,setResults:c,currentWorkspaceId:null==n?void 0:n.id});var $=(0,L.Kt)(U,600);(0,u.useEffect)(function(){0!=S.length&&Z(S)},[S]);var Y=(0,u.useCallback)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{target:"_self"},n=(t||{}).target,r=(null==x?void 0:null===(e=x.current)||void 0===e?void 0:e.querySelector("[href]")).href;r||console.error("[SearchModal] No href found"),window.open(r,n)},[x]),X=(0,u.useRef)({focusedIndex:d,results:a,goToItem:Y});X.current={focusedIndex:d,results:a,goToItem:Y},(0,u.useEffect)(function(){if(o)return C.F7.on("keydown","GLOBAL_SEARCH",function(e){var t=e.key;if(ef(e))return!0;var n=X.current;switch(t){case"Escape":return e.preventDefault(),e.stopPropagation(),!0;case"Tab":return e.preventDefault(),!0;case"Enter":return e.preventDefault(),n.results.length>0&&n.goToItem({target:e.metaKey||e.ctrlKey?"_blank":"_self"}),!0;case"ArrowUp":return e.preventDefault(),n.focusedIndex<=0?f(n.results.length-1):f(M()(n.focusedIndex-1,0,n.results.length-1)),k(!0),!0;case"ArrowDown":return e.preventDefault(),n.focusedIndex>=n.results.length-1?f(0):f(M()(n.focusedIndex+1,0,n.results.length-1)),k(!0),!0;default:return!1}})},[o]),(0,u.useEffect)(function(){null!=q&&q.search&&c(null==q?void 0:q.search.filter(function(e){return void 0!==e&&("DocResult"===e.__typename||"Channel"===e.__typename)}))},[null==q?void 0:q.search]);var J=(0,u.useCallback)(function(e){var t=e.target.value;t?(Z(t),$({variables:{workspaceId:null==n?void 0:n.id,query:t}})):($.cancel(),Z(""),c([]),f(0))},[null==n?void 0:n.id,$]),Q=(0,u.useCallback)(function(e){k(!1),f(e)},[]),ee=!b&&a.length>0;(0,u.useEffect)(function(){var e;x.current&&O&&(null==x||null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},[d,O]);var et=T.length>0?(0,h.jsx)(D.cC,{id:"5WYZKZ"}):(0,h.jsx)(D.cC,{id:"AOvC3b"});return t?(0,h.jsxs)(I.k,{direction:"column",children:[(0,h.jsx)(B,{onChange:J,query:T,isDisabled:!r,isLoading:V}),(0,h.jsx)(R.V,{mx:4,mt:2,mb:4,isConnected:r,label:(0,h.jsx)(D.cC,{id:"R4lJxt"})}),r&&(0,h.jsx)(l.NZ,{p:4,children:et}),r&&a&&a.length>0&&(0,h.jsx)(ed,{focusedItemEl:x,results:a,focusedIndex:d,onMouseEnter:Q}),!(0,p.s2)()&&(0,h.jsx)(K,{onClose:function(){y(!0)},showTip:ee}),(0,p.s2)()&&(0,h.jsx)(z.o,{})]}):null},eh=function(e){var t=e.isEnabledFn,n=(0,w.CG)(m.Ct);A({isEnabledFn:t,isOpen:n});var r=(0,d.I0)(),o=(0,O.i)({base:"sm",sm:"md",md:"lg",lg:"2xl"}),i=(0,u.useCallback)(function(){r((0,m.Hm)({isOpen:!1,initialQuery:""}))},[r]);return(0,h.jsxs)(b.u_,{isOpen:n,onClose:i,size:o,onOverlayClick:i,returnFocusOnClose:!1,children:[(0,h.jsx)(y.Z,{}),(0,h.jsx)(x.h,{children:(0,h.jsx)(j.f,{p:0,children:(0,h.jsx)(em,{})})})]})}},64457:function(e,t,n){n.d(t,{j:function(){return d}});var r=n(54906),o=n(55452),i=n(11919),a=n(71354),c=n(91012),s=n(93319),l=n(49929),u=n(52322),d=function(e){var t=e.formatLabel,n=e.icon,d=e.accentColor,f=e.onClick,p=e.exportInProgress,m=e.exportInProgressNote,h=e.badge;return(0,u.jsxs)(i.k,{alignItems:"stretch",overflow:"hidden",onClick:f,borderRadius:"md",border:"1px",borderColor:"gray.200",bgColor:p?"gray.50":"white",cursor:p?"progress":void 0,disabled:p,as:"button",transitionProperty:"common",transitionDuration:"normal",_hover:p?{}:{boxShadow:"var(--chakra-shadows-md)",borderColor:"var(--chakra-colors-".concat(d,"-300)"),color:"var(--chakra-colors-".concat(d,"-700)")},children:[(0,u.jsx)(i.k,{bgColor:p?"gray.200":"".concat(d,".100"),color:"".concat(p?"gray":d,".500"),width:16,minH:16,alignItems:"center",justifyContent:"center",fontSize:"2xl",children:(0,u.jsx)(l.G,{icon:n,fixedWidth:!0})}),(0,u.jsxs)(a.K,{alignItems:"flex-start",spacing:0,p:4,justifyContent:"center",children:[(0,u.jsxs)(c.x,{fontWeight:"medium",children:[(0,u.jsx)(o.cC,{id:"i3Tbgc",values:{formatLabel:t}})," ",h]}),p&&(0,u.jsxs)(c.x,{color:"gray.600",fontSize:"xs",children:[(0,u.jsx)(o.cC,{id:"wRvCQ6",values:{formatLabel:t}})," ",m]})]}),(0,u.jsx)(s.L,{}),!p&&(0,u.jsx)(i.k,{alignItems:"center",pl:4,pr:6,children:(0,u.jsx)(l.G,{icon:r.fu,size:"1x"})})]})}},16092:function(e,t,n){n.d(t,{Ty:function(){return f},ei:function(){return g},l7:function(){return p},tN:function(){return m}});var r=n(47921),o=n(24799),i=n(54906),a=n(83749),c=n(8649),s=n(1027),l=n(55452),u=n(87254),d=n(52322),f=s.Pk,p=r.cC,m=function(){return u.ag._({id:"4BKB+B"})},h=["invite","public","export","embed"],g=function(e){var t=e.showSharePublic,n=void 0===t||t,r=e.showEmbed,s=void 0===r||r;return h.map(function(e){return({invite:{ariaLabel:u.ag._({id:"NJorPJ"}),label:(0,d.jsx)(l.cC,{id:"NJorPJ"}),icon:c.FK,viewKey:"invite"},public:{ariaLabel:u.ag._({id:"emf/fd"}),label:(0,d.jsx)(l.cC,{id:"emf/fd"}),icon:a.faEarthAmericas,viewKey:"public"},export:{ariaLabel:u.ag._({id:"GS+Mus"}),label:(0,d.jsx)(l.cC,{id:"GS+Mus"}),icon:i.fu,viewKey:"export"},embed:{ariaLabel:u.ag._({id:"KKBlUU"}),label:(0,d.jsx)(l.cC,{id:"KKBlUU"}),icon:o.dT,viewKey:"embed"}})[e]}).filter(function(e){return"public"===e.viewKey?n:"embed"!==e.viewKey||s})}},42789:function(e,t,n){n.d(t,{H:function(){return d}});var r=n(5632),o=n(2784),i=n(44595),a=n(46358),c=n(62141),s=n(13306),l=n(94864),u=n(42879),d=function(e){var t=e.url,n=e.nonPublishedUrl,d=(0,r.useRouter)().push,f=(0,a.CG)(c.yx),p=(0,l.C7)(),m=(0,a.CG)(i.Lw),h=p?(0,s.Op)({url:t,doc:f,previewEnabled:m}):n||t,g=(0,o.useCallback)(function(e){(0,u.Eh)(h)&&(e.preventDefault(),d(h))},[h,d]);return(0,o.useMemo)(function(){return{linkUrl:h,handleClick:m?g:void 0}},[g,h,m])}},53634:function(e,t,n){n.d(t,{U:function(){return w}});var r=n(95235),o=n(2321),i=n(36471),a=n(55452),c=n(87254),s=n(5766),l=n(71170),u=n(53738),d=n(45650),f=n(67887),p=n(4448),m=n(27302),h=n(49929),g=n(55966),v=n(2784),b=n(35231),y=n(52322);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(e){var t=e.accentImages,n=e.isDark,r=e.handleDelete,x=e.handleItemClick,w=e.currentAttributes,O=(0,v.useCallback)(function(e){return function(t){r&&(t.stopPropagation(),r(e))}},[r]),k=(0,v.useCallback)(function(e){return function(){x&&x(e)}},[x]);return(0,y.jsx)(s.M,{gap:2,columns:{base:2,"2xl":3},children:t.map(function(e){var t=(0,b.wh)(e,n,!0),s=(null==w?void 0:w.accentId)===e.accentId;return(0,y.jsx)(l.P,{children:(0,y.jsxs)(u.xu,j(j({as:d.z,variant:"unstyled",backgroundColor:n?"black":"white",cursor:x?"pointer":void 0},t),{},{opacity:1,width:"100%",borderRadius:"base",shadow:"md",minH:"100px",position:"relative",role:"group",onClick:k(e),children:[r&&(0,y.jsx)(g.kH,{label:(0,y.jsx)(a.cC,{id:"Rz0Yis"}),placement:"top",children:(0,y.jsx)(f.h,{"aria-label":c.ag._({id:"Rz0Yis"}),icon:(0,y.jsx)(h.G,{icon:i.$}),onClick:O(e),isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),w&&(0,y.jsx)(p.p,{in:s,children:(0,y.jsx)(u.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,y.jsx)(m.M,{h:"100%",w:"100%",children:(0,y.jsx)(h.G,{icon:o.LE})})})})]}))},e.accentId)})})}},56345:function(e,t,n){n.d(t,{M:function(){return E}});var r=n(46663),o=n(55452),i=n(94659),a=n(40110),c=n(11919),s=n(45650),l=n(49929),u=n(2784),d=n(32333),f=n(87254),p=n(91930),m=n(5766),h=n(49626),g=n(55966),v=n(52322),b=function(e){var t=e.onClick,n=e.label;return(0,v.jsx)(g.kH,{label:n,placement:"top",children:(0,v.jsx)(s.z,{display:"inline-flex",alignSelf:"center",boxSize:"26px",borderRadius:"md",border:"1px solid",borderColor:"blackAlpha.300",bgColor:"gray.50",onClick:t,variant:"unstyled",minW:0,fontSize:"xs",transitionProperty:"border",transitionDuration:"normal",textAlign:"center",children:(0,v.jsx)(c.k,{justify:"center",align:"center",children:(0,v.jsx)(l.G,{icon:h.r8})})})})},y=n(56581),x=n(23533),j=function(e){var t=e.color,n=e.setColor,r=e.isActive,o=e.name,i=(0,x.DP)(t)?"white":"black";return(0,v.jsx)(g.kH,{label:o||t.toUpperCase(),placement:"top",children:(0,v.jsx)(s.z,{display:"inline-block",alignSelf:"center",boxSize:"26px",borderRadius:"md",border:"1px solid",borderColor:"blackAlpha.300",color:i,bgColor:null!=t?t:"#FFFFFF",onClick:function(){return n(t)},variant:"unstyled",minW:0,fontSize:"xs",transitionProperty:"border",transitionDuration:"normal",children:r&&(0,v.jsx)(y.n,{})})})},w=function(e){var t=e.label,n=e.colors,r=e.setColor,o=e.currentColor,i=e.isDefault,a=e.handleAddColorButtonClick,c=e.addColorLabel;return(0,v.jsx)(p.k,{title:t,children:(0,v.jsxs)(m.M,{gap:1.5,columns:6,p:2,children:[n.map(function(e,t){var n=e.hex,a=e.name;return(0,v.jsx)(j,{name:a,color:n,setColor:r,isActive:i?null===o:o===n},t)}),a&&(0,v.jsx)(b,{onClick:a,label:void 0===c?"Add color":c})]})})},O=function(e){var t=e.setColor,n=e.currentColor;return(0,v.jsx)(w,{label:f.ag._({id:"Zp2USm"}),colors:[{key:"black",hex:"#000000",name:f.ag._({id:"THokF3"})},{key:"dark-gray",hex:"#4D4D4D",name:f.ag._({id:"uUMrFZ"})},{key:"gray",hex:"#808080",name:f.ag._({id:"qS5//Q"})},{key:"light-gray",hex:"#CCCCCC",name:f.ag._({id:"xa/b9m"})},{key:"white-smoke",hex:"#F2F2F2",name:f.ag._({id:"rGj3KB"})},{key:"white",hex:"#FFFFFF",name:f.ag._({id:"5Ex+AP"})},{key:"light-sun",hex:"#FCEC99",name:f.ag._({id:"nOXj3q"})},{key:"peach",hex:"#FFD1A7",name:f.ag._({id:"68+2yw"})},{key:"salmon",hex:"#FAA1A1",name:f.ag._({id:"TrGQaZ"})},{key:"lavender",hex:"#D8AFF8",name:f.ag._({id:"gc4DdH"})},{key:"baby-blue",hex:"#AFCBF8",name:f.ag._({id:"+bmpN5"})},{key:"pale-green",hex:"#AEE4BD",name:f.ag._({id:"hUOhvE"})},{key:"gold",hex:"#F9D933",name:f.ag._({id:"FYlHHU"})},{key:"orange",hex:"#FFA44F",name:f.ag._({id:"4OE5Sf"})},{key:"red",hex:"#F44444",name:f.ag._({id:"wRTiSD"})},{key:"purple",hex:"#B05EF1",name:f.ag._({id:"mF9LxA"})},{key:"blue",hex:"#5E98F1",name:f.ag._({id:"Zn5crm"})},{key:"green",hex:"#5CC97B",name:f.ag._({id:"VmkjGB"})},{key:"dark-goldenrod",hex:"#957D00",name:f.ag._({id:"vWWr+k"})},{key:"brown",hex:"#995515",name:f.ag._({id:"JLxwQS"})},{key:"maroon",hex:"#910D0D",name:f.ag._({id:"cg4yu3"})},{key:"dark-purple",hex:"#5E208E",name:f.ag._({id:"oqSDkM"})},{key:"midnight-blue",hex:"#204C8E",name:f.ag._({id:"QCyMdk"})},{key:"forest-green",hex:"#1F7135",name:f.ag._({id:"HVCLqF"})}],setColor:t,currentColor:n})},k=n(46358),C=n(53865),P=n(2875),S=n(62141),A=function(e){var t=e.setColor,n=e.currentColor,r=(0,k.CG)(S.Pu),o=(0,C.Wz)(r).map(function(e){return{hex:e,key:e}});return(0,v.jsx)(w,{label:f.ag._({id:"J1XRO3"}),colors:o,setColor:t,currentColor:n,handleAddColorButtonClick:function(){P.pw.emit(P.TI.OPEN_THEME_EDITOR,{})},addColorLabel:null===r.workspaceId?f.ag._({id:"0TWTg2"}):f.ag._({id:"TExCtI"})})},E=function(e){var t=e.currentColor,n=e.setColor,f=e.unsetColor,p=void 0===f?function(){return n(null)}:f,m=e.source,h=(0,d.z$)(),g=(0,u.useCallback)(function(e){null==h||h.track(d.AA.COLOR_PICKER_SET_COLOR,{color:e,source:m}),n(e)},[n,h,m]),b=(0,u.useCallback)(function(){null==h||h.track(d.AA.COLOR_PICKER_RESET,{source:m}),p()},[p,h,m]);return(0,d.If)(function(e){e.track(d.AA.COLOR_PICKER_OPENED,{source:m})},[m]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.g,{divider:(0,v.jsx)(a.i,{}),p:0,align:"start",children:[(0,v.jsx)(A,{setColor:g,currentColor:t}),(0,v.jsx)(O,{setColor:g,currentColor:t})]}),(0,v.jsx)(c.k,{px:5,py:3,bg:"gray.100",alignItems:"center",justifyContent:"center",mx:-2,mb:-2,mt:2,children:(0,v.jsx)(s.z,{onClick:b,variant:"link",size:"sm",colorScheme:"gray",leftIcon:(0,v.jsx)(l.G,{icon:r.X7}),children:(0,v.jsx)(o.cC,{id:"L+rMC9"})})})]})}},63248:function(e,t,n){n.d(t,{J:function(){return c},P:function(){return s}});var r=n(84103),o=n(2784),i=n(55372),a=n(52322),c=function(e){var t=e.fonts,n=null==t?void 0:t.find(function(e){return"Eudoxus Sans"===e.id}),c=(0,o.useMemo)(function(){return(null==t?void 0:t.filter(function(e){return e.url}))||[]},[t]);return(0,a.jsxs)(a.Fragment,{children:[n?(0,a.jsx)(i.ZP,{}):null,c.map(function(e){return(0,a.jsx)(r.r,{as:"link",href:e.url,rel:"stylesheet","data-gamma-font":e.id},e.id)})]})},s=function(e){var t=e.theme;return(0,a.jsx)(c,{fonts:null==t?void 0:t.fonts})}},32736:function(e,t,n){n.d(t,{TY:function(){return j},Yy:function(){return O},bb:function(){return k},c2:function(){return C},vi:function(){return w}});var r=n(95235),o=n(20406),i=n(81333),a=n(12741),c=n(28526),s=n.n(c),l=n(2784),u=n(23313),d=n(1368),f=n(46358),p=n(2875),m=n(62141),h=n(51823),g=n(35878),v=n(35634),b=n(53865);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=(0,u.HW1)().data,n=(0,u.LkU)({variables:{workspaceId:e,sortBy:{field:u.eTF.Name,direction:u.SrV.Asc}},skip:!e}).data,r=(0,l.useMemo)(function(){var e=(null==t?void 0:t.fonts)||[],r=(null==n?void 0:n.fonts)||[],o=[].concat((0,a.Z)(e),(0,a.Z)(r));return[e,r,o.reduce(function(e,t){return e[t.id]=t,e},{}),o.map(function(e){return{id:e.id,name:e.name,url:e.cssUrl}})]},[null==t?void 0:t.fonts,null==n?void 0:n.fonts]);return{globalFonts:r[0],workspaceFonts:r[1],fontsMap:r[2],allThemeFonts:r[3]}},w=function(e){var t,n=e.docId,r=e.editor,a=(0,u.UoQ)(),c=(0,i.Z)(a,1)[0];return{updateDocThemeWithAccentImages:(0,l.useCallback)((t=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",c({variables:{id:n,themeId:t}}).then(function(e){var t,n,o=e.data;r&&r.commands.updateThemeAccentImages(null==o?void 0:null===(t=o.updateDoc)||void 0===t?void 0:null===(n=t.theme)||void 0===n?void 0:n.config.accentBackgrounds)}));case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[n,r,c])}},O=function(){var e=(0,f.CG)(m.Pu);return(0,b.wj)(e)},k=function(e,t){var n=(0,f.CG)(m.Pu);(0,l.useEffect)(function(){var e=p.pw.on(p.TI.OPEN_THEME_EDITOR,function(){null===n.workspaceId?t((0,v.mg)(n,!0)):t(n)});return function(){e()}},[n,t]),(0,l.useEffect)(function(){var n=(0,h.SJ)();e&&"true"===n.openThemeEditor&&(t(),(0,d.lO)({query:x(x({},(0,h.SJ)()),{},{openThemeEditor:void 0}),emitChange:!1}))},[e,t])},C=function(e){var t=(0,u.rxn)({variables:{id:e},fetchPolicy:"cache-first"}).data;return(null==t?void 0:t.theme)||g.mU}},57474:function(e,t,n){n.d(t,{J:function(){return l}});var r=n(95235),o=n(6057),i=n(59910),a=n(69551);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=function(e,t){return s(s(s({},(0,a.A3)(e)),(0,i.WX)(e,t)),{},(0,r.Z)({},".".concat(o.vD," .").concat(o.pL),e.config.contentStyles))}},55921:function(e,t,n){n.d(t,{l:function(){return h}});var r=n(95235),o=n(6238),i=n.n(o),a=n(26806),c=n(23533),s=n(80398),l=n(35878),u=n(9121),d=n(77032),f=n(35634);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=i()(function(e,t,n,r){var o,i,p=(0,a.Jh)(e),h=e.bodyFont,g=e.headingFont,v=e.fonts,b=(0,d.Yw)(v,h)||l.ke.bodyFont,y=(0,d.Yw)(v,g)||l.ke.headingFont,x=(0,f.e9)(e),j=null!==(o=null!=t?t:r?(0,c.DP)(r):void 0)&&void 0!==o?o:n?(0,c.DP)(n):(0,f.wj)(e),w=e.config,O=w.bodyColor,k=void 0===O?j?l.Z_:l.zL:O,C=w.headingColor,P=void 0===C?j?l.Qw:l.l0:C,S=w.headingGradient,A=w.accentGradient,E=w.disableReadabilityAdjustment,D=null!=n?n:(0,a.BA)(e,m(m({},p),{},{isDark:j})),I=void 0!==t||void 0!==n||void 0!==r,z=!E||I,T=I?6:4.5,M=I?4.5:3,N=null!=r?r:D,R=z?(0,c.e5)(x,N,M,!1):x,L=z?(0,c.e5)(k,N,T,I):k,_=z?(0,c.e5)(P,N,M,I):P,H=(0,f.lQ)(e).map(function(e){return z?(0,c.e5)(e,N,T,!1):e}),Z=(0,u.c)(e),B=(null===(i=Z.getCSSVars)||void 0===i?void 0:i.call(Z,{cardColor:D,accentColor:x,boxColor:r,accentPalette:H}))||{};return m({"--body-font":'"'.concat(b,'"'),"--heading-font":'"'.concat(y,'"'),"--heading-font-weight":(0,d.On)(e,"heading"),"--body-font-weight":(0,d.On)(e,"body"),"--accent-color":x,"--accent-gradient-background":(0,s.wZ)((0,s.UL)(A,j?.25:.9)),"--accent-color-background":j?(0,c.m2)(x,.25):(0,c.m2)(x,.9),"--accent-color-border":j?(0,c.m2)(x,.3):(0,c.m2)(x,.8),"--accent-color-background-muted":j?(0,c.m2)(x,.15):(0,c.m2)(x,.95),"--accent-color-100":(0,c.m2)(x,.9),"--accent-color-500":(0,c.m2)(x,.5),"--accent-gradient":(0,s.wZ)(z?(0,s.Ux)(A,N,M,!1):A),"--expandable-hover-background":(0,c.tT)(R,.1),"--link-color":R,"--link-color-hover":(0,c.tG)(R,-10),"--body-color":L,"--body-color-muted":(0,c.tT)(L,.5),"--body-color-inverted":j?"#000":"#fff","--link-color-inverted":(0,c.DP)(R)?"#fff":"#000","--highlight-color-dark":j?"var(--body-color)":"var(--body-color-inverted)","--highlight-color-light":j?"var(--body-color-inverted)":"var(--body-color)","--heading-color":_,"--heading-gradient":(0,s.wZ)(z?(0,s.Ux)(S,N,M,I):S),"--card-color":D,"--card-color-mask":(0,c.tT)(D,(0,c.DP)(D)?.8:.85),"--link-box-shadow":"0 0 0px 3px ".concat((0,c.tT)(R,1))},B)})},77032:function(e,t,n){n.d(t,{On:function(){return i},W9:function(){return l},YO:function(){return s},Yw:function(){return c},eu:function(){return a},s8:function(){return u}});var r=n(41261),o=n(35878),i=function(e,t){var n;return null!==(n=e["body"===t?"bodyFontWeight":"headingFontWeight"])&&void 0!==n?n:o.ZT[t]},a=function(e){return e&&["adonis-web","p22-mackinac-pro"].includes(e)},c=function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return r&&a(t)?t:null==e?void 0:null===(n=e.find(function(e){return e&&e.id===t}))||void 0===n?void 0:n.name},s=function(e,t){var n=c(t.fonts,t.headingFont)||o.ke.headingFont,i=c(t.fonts,t.bodyFont)||o.ke.bodyFont;return".".concat(r.pL," {\n    --heading-font: ",'"'.concat(n,'", ')).concat(e,", sans-serif;\n    --body-font: ",'"'.concat(i,'", ')).concat(e,", sans-serif;\n  }")},l=function(e){if(!e)return[];if(null===e.workspaceId&&(null===(t=e.fontFiles)||void 0===t?void 0:t.length)===0)return[400,600,700];var t,n=(e.fontFiles||[]).map(function(e){return e.weight});return Array.from(new Set(n)).sort(function(e,t){return e-t})},u=function(e){var t=e.fontsMap,n=e.bodyFontId,r=e.headingFontId,i=t[o.ke.headingFont],a=t[o.ke.bodyFont],c=t[n]||a,s=t[r]||i;return[{id:c.id,name:c.name,url:c.cssUrl},{id:s.id,name:s.name,url:s.cssUrl}]}},21755:function(e,t,n){n.d(t,{n:function(){return c}});var r=n(62564),o=n(2784),i=n(37914),a=n(98875),c=function(e){var t=(0,a.ye)("debugLogging");(0,o.useEffect)(function(){if(e){if(t){console.debug("[Prosemirror DevTools] Activating prosemirror-dev-tools");try{(0,r.h)(e.view)}catch(e){}}else(0,r.P)();return i.v.DEBUG_ENABLED&&(window.openPMDT=function(){return(0,r.h)(e.view)}),function(){(0,r.P)(),delete window.openPMDT}}},[e,t])}},44499:function(e,t,n){n.d(t,{S:function(){return H}});var r=n(95235),o=n(82269),i=n(97948),a=n(55452),c=n(34638),s=n(53738),l=n(11919),u=n(49747),d=n(8283),f=n(93319),p=n(45650),m=n(49929),h=n(55966),g=n(87202),v=n(2784),b=n(43997),y=n(34860),x=n(13121),j=n(62141),w=n(95472),O=n(70675),k=n(85311),C=n(61753),P=n(15225),S=n(52347),A=n(50803),E=n(92470),D=n(89997),I=n(89648),z=n(11723),T=n(52322),M=["clearContentOnSave","editable","saveButtonText","saveButtonIcon","initialContent","placeholder","showBorder","onCancelEditingClick","onCommentSave","onCreate","onUpdate","shouldFocus","alwaysShowButtons"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=(0,g.P6)("mod+Enter"),_=(0,g.P6)("mod+a"),H=v.memo(function(e){var t=e.clearContentOnSave,n=void 0!==t&&t,r=e.editable,g=void 0===r||r,N=e.saveButtonText,H=void 0===N?(0,T.jsx)(a.cC,{id:"tfDRzk"}):N,Z=e.saveButtonIcon,B=void 0===Z?(0,T.jsx)(m.G,{icon:i.XC}):Z,F=e.initialContent,W=void 0===F?"":F,U=e.placeholder,G=e.showBorder,q=e.onCancelEditingClick,V=e.onCommentSave,$=e.onCreate,K=void 0===$?function(){}:$,Y=e.onUpdate,X=void 0===Y?function(){}:Y,J=e.shouldFocus,Q=void 0===J||J,ee=e.alwaysShowButtons,et=(0,o.Z)(e,M),en=(0,v.useMemo)(function(){return[k.Z.configure({horizontalRule:!1,codeBlock:!1}),I.L,O.Z.configure({openOnClick:!1}),P.d,A.E,D.cB,D.s6,D.nk,S.Hy,C.l,S.Pi,E.R,z.Jn]},[]),er=(0,b.v9)(j.ke),eo=(0,b.v9)(j.KV),ei=(0,x.jE)({extensions:en,content:W,onCreate:function(e){var t=e.editor;K({editor:t}),t.gammaDocId=er,t.gammaOrgId=eo},onUpdate:function(e){X({editor:e.editor,transaction:e.transaction})}});(0,v.useEffect)(function(){ei&&ei.setOptions({editable:g})},[ei,g]),(0,y.vm)(function(){ei&&Q&&ei.isEditable&&ei.commands.focus("end")},[ei,Q],[ei]),(0,v.useEffect)(function(){ei&&!g&&(null==ei||ei.commands.setContent(W))},[ei,W,g]);var ea="light"===(0,c.If)().colorMode,ec=function(e){_(e)&&(e.preventDefault(),null==ei||ei.commands.selectAll()),L(e)&&(e.preventDefault(),e.stopPropagation(),es())},es=function(){!(!V||!ei||(0,w.$y)(ei.state.doc)||(0,w.WL)(ei.state.doc))&&(V(ei.getJSON()),n&&ei.commands.clearContent(!0))};return g?(0,T.jsxs)(l.k,R(R({"data-gamma-child-tiptap-editor":"comment-editor",direction:"column"},et),{},{children:[(0,T.jsx)(s.xu,R(R({tabIndex:0,w:"100%",onKeyDownCapture:ec,onKeyPressCapture:ec,className:"comment-editor",color:ea?"gray.800":"gray.200",bg:ea?"white":"gray.800"},void 0===G||G?{border:"1px solid",borderColor:ea?"gray.200":"gray.700",borderRadius:"md"}:{}),{},{sx:{"p:first-of-type::before":null!=ei&&ei.isEmpty?{content:'"'.concat(void 0===U?"Reply":U,'"'),float:"left",color:ea?"gray.400":"gray.500",pointerEvents:"none",height:"0"}:""},fontSize:"sm",children:(0,T.jsx)(x.kg,{editor:ei,className:"comment-editor",style:{wordBreak:"break-word",width:"100%"}})})),(0,T.jsxs)(u.U,{in:!!(void 0!==ee&&ee||ei&&!ei.isEmpty),children:[(0,T.jsx)(s.xu,{h:3,children:(0,T.jsx)(T.Fragment,{})}),(0,T.jsxs)(d.U,{children:[(0,T.jsx)(f.L,{}),!!q&&(0,T.jsx)(h.kH,{label:(0,T.jsx)(a.cC,{id:"zeQdHz"}),placement:"top",children:(0,T.jsx)(p.z,{size:"sm",variant:"ghost",onClick:function(){q&&q(),null==ei||ei.commands.clearContent(!0)},colorScheme:"red",children:(0,T.jsx)(a.cC,{id:"dEgA5A"})})}),(0,T.jsx)(p.z,{size:"sm",variant:"solid",leftIcon:B,isDisabled:(null==ei?void 0:ei.isEmpty)||(0,w.WL)(null==ei?void 0:ei.state.doc),onClick:es,"data-testid":"post-comment",children:H})]})]})]})):(0,T.jsx)(s.xu,{fontSize:"sm",children:(0,T.jsx)(x.kg,{editor:ei})})})},19700:function(e,t,n){n.d(t,{c:function(){return s}});var r=n(58125),o=n(2784),i=n(65185),a=n(46358),c=n(62141),s=function(e){var t=(0,o.useState)(function(){return(0,r.xC)({reducer:a.Ct})})[0];return(0,o.useEffect)(function(){null!=e&&e.cards&&t.dispatch((0,i.eJ)({cards:e.cards})),null!=e&&e.doc&&t.dispatch((0,c.pl)({doc:e.doc}))},[e,t]),t}},4707:function(e,t,n){n.d(t,{y:function(){return u6},e:function(){return u4}});var r,o,i,a,c,s,l,u=n(95235),d=n(82269),f=n(20406),p=n(28526),m=n.n(p),h=n(53738),g=n(36518),v=n(78563),b=n(39615),y=n(2784),x=n(43997),j=n(37914),w=n(91354),O=n(46358),k=n(30341),C=n(11919),P=n(55966),S=n(32736),A=n(27910),E=n(81333),D=n(4519),I=n(8280),z=n(55452),T=n(87254),M=n(34638),N=n(74637),R=n(71354),L=n(45650),_=n(4036),H=n(40110),Z=n(49929),B=n(66825),F=n(69936),W=n(98875),U=n(93148),G=n(81234),q=n(27321),V=n(8283),$=n(36895),K=n(91012),Y=n(54728),X=n(51434),J=n(67887),Q=n(94301),ee=n(91333),et=n(32333),en=n(16975),er=n(90399),eo=n(23015),ei=n(54735),ea=n(95472),ec=n(52322),es=function(e){var t=e.item,n={iconColor:(0,M.ff)("trueblue.600","trueblue.100"),bgColor:(0,M.ff)("gray.50","gray.700"),textColor:(0,M.ff)("gray.800","gray.100"),invertFilter:(0,M.ff)("invert(0)","invert(.7) brightness(1.2)"),iconBgColor:(0,M.ff)("white","gray.800")},r=t.previewImage,o=t.shortcut,i=t.name;return(0,ec.jsxs)(V.U,{spacing:4,children:[(null==r?void 0:r.src)&&(0,ec.jsx)(C.k,{w:"110px",flex:"1 0 auto",bg:n.iconBgColor,borderRadius:"md",children:(0,ec.jsx)($.E,{filter:n.invertFilter,src:r.src,w:"100%",alt:i()})}),(0,ec.jsxs)(K.x,{w:"100%",fontWeight:"600",fontSize:"sm",color:n.textColor,children:[i(),o&&(0,ec.jsx)(K.x,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:o})]})]})},el=function(e){var t=e.item,n=e.onDragStart,r=e.onDragEnd,o=e.onClick,i=(0,A.D)(n,r,o),a=i.isDragging,c=i.isMouseDown,s=i.handleDragStart,l=i.handleDragEnd,u=i.handleClick,d=i.onMouseDown,f=i.onMouseUp,p=t.key,m=t.name,g=t.description,v=t.type,b=t.image,y=t.shortcut,x=t.icon,j=t.previewImage,w=t.nodeName,O=t.badge,k={iconColor:(0,M.ff)("trueblue.600","trueblue.100"),bgColor:(0,M.ff)("gray.50","gray.900"),textColor:(0,M.ff)("gray.800","gray.100"),borderColor:(0,M.ff)("gray.200","gray.700")};return(0,ec.jsx)(P.kH,{closeOnMouseDown:!0,closeOnClick:!0,isOpen:!a&&void 0,label:(0,ec.jsxs)(h.xu,{as:"span",display:"inline",children:[(0,ec.jsx)(Z.G,{icon:q.io})," ",(0,ec.jsx)(K.x,{display:"inline",children:(0,ec.jsx)(z.cC,{id:"Dd9uag"})})]}),"aria-label":T.ag._({id:"Dd9uag"}),placement:"top",children:(0,ec.jsxs)(V.U,{"data-testid":"".concat(p,"-insert-button"),draggable:!0,onDragStart:s,onDragEnd:l,onClick:u,onMouseDown:d,onMouseUp:f,onMouseLeave:f,bg:k.bgColor,p:2,px:3,spacing:4,align:"start",shadow:"sm",borderRadius:"xl",_hover:{transform:"scale(1.05) rotate(-0.25deg)",shadow:"lg"},cursor:"grab",transitionProperty:"common",transitionDuration:"normal",border:"1px",borderColor:k.borderColor,transform:"rotate(".concat(c&&!a?-1:0,"deg) translate(0, 0);"),children:["card"===w?(0,ec.jsx)(es,{item:t}):(0,ec.jsxs)(R.K,{spacing:0,textAlign:"left",whiteSpace:"break-spaces",flex:"1",children:[(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(K.x,{color:k.textColor,fontWeight:"600",fontSize:"sm",children:m()}),O&&(0,ec.jsx)(_.C,{colorScheme:"green",children:O()})]}),g&&(0,ec.jsx)(K.x,{fontSize:"xs",color:"gray.500",fontWeight:"500",mt:1,children:g()}),y&&(0,ec.jsx)(K.x,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:y}),j&&(0,ec.jsx)($.E,{src:j.src,w:"100%",maxH:"6em",pointerEvents:"none"})]}),"cardTemplate"!==v&&(0,ec.jsx)(C.k,{justifyContent:"center",alignItems:"flex-start",color:k.iconColor,py:1,children:b?(0,ec.jsx)($.E,{src:b.src,borderRadius:"sm",h:"1.25em",w:"1.25em",objectFit:"contain"}):(0,ec.jsx)(Z.G,{icon:x})})]})})},eu=function(e){var t=e.icon,n=e.name,r=e.itemGroups,o=e.editor,i=e.setOpenButton,a=e.isOpen,c=(0,y.useRef)(null),s=(0,P.o5)(),l=s.GammaTooltipHiderContext,u=s.hideTooltips,d={iconColor:(0,M.ff)("trueblue.600","trueblue.200"),hoverColor:(0,M.ff)("gray.100","whiteAlpha.100"),activeColor:(0,M.ff)("gray.200","whiteAlpha.200"),popoverBorderColor:(0,M.ff)("whiteAlpha.600","whiteAlpha.300"),popoverBackgroundColor:(0,M.ff)("#F9FAFBFA","blackAlpha.900")},f=(0,y.useCallback)(function(){i(null)},[i]);return(0,y.useEffect)(function(){a&&c.current&&c.current.scrollTo({top:0})},[a]),(0,ec.jsxs)(Y.J,{placement:"start",isOpen:a,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,ec.jsx)(P.kH,{label:n,modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":n,placement:"left",portalProps:{appendToParentPortal:!0},children:(0,ec.jsx)(X.x,{children:(0,ec.jsx)(J.h,{"aria-label":n,"data-testid":"".concat(n.toLowerCase().split(" ").join("-"),"-widget-inner-button"),size:"md",icon:(0,ec.jsx)(Z.G,{icon:t}),color:d.iconColor,fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:a?d.activeColor:void 0,_hover:{bg:a?d.activeColor:d.hoverColor},textShadow:"0px 1px 0px rgba(0,0,0,0)",onMouseDown:function(e){return o.isFocused&&(0,eo.br)(e),i(function(e){return e===n?null:n}),!0}})})}),(0,ec.jsx)(Q.h,{children:(0,ec.jsx)(ee.y,{bg:d.popoverBackgroundColor,borderWidth:"1px",borderColor:d.popoverBorderColor,borderRadius:"xl",shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"80vh",p:0,className:"insert-widget-popover",children:(0,ec.jsx)(C.k,{overflow:"hidden auto",direction:"column",h:"100%",ref:c,flex:1,"data-insert-widget-popover":!0,children:(0,ec.jsx)(l,{children:r.map(function(e,t){var n=e.subcategory,i=e.items;return 1==r.length?(0,ec.jsx)(R.K,{p:2,children:i.map(function(e){return(0,en.pP)(o,e,!1)?null:(0,ec.jsx)(el,{item:e,onDragStart:function(t){return ep(e,o,f,u)},onDragEnd:function(t){return ef(e,o,t)},onClick:function(){return ed(e,o,f)}},e.key)})},t):(0,ec.jsxs)(R.K,{p:2,mt:t>0?1:0,children:[(0,ec.jsx)(P.NZ,{flex:"1",textAlign:"left",children:n}),i.map(function(e){return(0,en.pP)(o,e,!1)?null:(0,ec.jsx)(el,{item:e,onClick:function(t){return ed(e,o,f)},onDragStart:function(t){return ep(e,o,f,u)},onDragEnd:function(t){return ef(e,o,t)}},e.key)})]},t)})})})})})]})},ed=function(e,t,n){!(!(0,ea.KB)(t)||(0,en.pP)(t,e))&&t.state.selection.empty&&(n(),(0,en.ZT)(e,et.fe.INSERT_WIDGET),e.execute(t))},ef=function(e,t,n){n.preventDefault(),n.stopPropagation();var r=e.dragEndFn;try{r&&r(t),(0,en.ZT)(e,et.fe.INSERT_WIDGET)}catch(e){console.error("[InsertWidget] dragEndFn error:",e)}},ep=function(e,t,n,r){setTimeout(function(){n()});var o="card"===e.nodeName?(0,er.Zs)(ei.e[e.key]):ei.e[e.key],i=e.dragStartFn?e.dragStartFn:o?function(){return(0,en.UV)(t,o)}:void 0;if(!i){console.error("[InsertWidget] dragStartFn undefined",e);return}i(t),null==r||r()},em=n(12741),eh=n(29736),eg=n(16599),ev=n(31336),eb=n(46875),ey=n(49119),ex=n(56677),ej=n(19774),ew=n(48659),eO=n(65530),ek=n(82577),eC=n(71405),eP=n(95141),eS=n(31619),eA=n(12823);(r=c||(c={})).Cards="cards",r.Images="images",r.Apps="apps",r.Videos="videos",r.Layouts="layouts",r.Drawings="drawings",r.Text="text",r.Callouts="callouts",r.Forms="forms",(o=s||(s={})).Uncategorized="Other",o.Table="Table",o.Grid="Grid",o.SmartLayout="Smart layouts",o.Lists="Lists",o.Headings="Headings",o.Diagrams="Diagrams",o.New="New",o.Callouts="Callout boxes";var eE=(a={},(0,u.Z)(a,s.Uncategorized,(0,ec.jsx)(z.cC,{id:"/IX/7x"})),(0,u.Z)(a,s.Table,(0,ec.jsx)(z.cC,{id:"4hJhzz"})),(0,u.Z)(a,s.Grid,(0,ec.jsx)(z.cC,{id:"CXDHcv"})),(0,u.Z)(a,s.SmartLayout,(0,ec.jsx)(z.cC,{id:"uNnHCK"})),(0,u.Z)(a,s.Lists,(0,ec.jsx)(z.cC,{id:"h16FyT"})),(0,u.Z)(a,s.Headings,(0,ec.jsx)(z.cC,{id:"PKjGhT"})),(0,u.Z)(a,s.Diagrams,(0,ec.jsx)(z.cC,{id:"muZ1GG"})),(0,u.Z)(a,s.New,(0,ec.jsx)(z.cC,{id:"isRobC"})),(0,u.Z)(a,s.Callouts,(0,ec.jsx)(z.cC,{id:"uJ8xrP"})),a),eD=function(){var e,t=(0,en.zm)();return e={},(0,u.Z)(e,c.Cards,{name:T.ag._({id:"4z8XKi"}),icon:eO.rZ,itemGroups:(0,eC.ON)()}),(0,u.Z)(e,c.Images,{name:T.ag._({id:"5phU36"}),icon:ew.Vm,itemGroups:[{subcategory:eE[s.Uncategorized],items:[].concat((0,em.Z)(eP.c.filter(function(e){return"image"===e.nodeName})),[t.gallery])}]}),(0,u.Z)(e,c.Apps,{name:T.ag._({id:"Nz7jbx"}),icon:ej.m6,itemGroups:[{subcategory:eE[s.Uncategorized],items:(0,em.Z)(eP.c.filter(function(e){return"embed"===e.nodeName&&(!e.categories||e.categories.includes("app"))}))}]}),(0,u.Z)(e,c.Videos,{name:T.ag._({id:"h+L6zI"}),icon:ex.Cj,itemGroups:[{subcategory:eE[s.Uncategorized],items:(0,em.Z)(eP.c.filter(function(e){return"video"===e.nodeName}))}]}),(0,u.Z)(e,c.Layouts,{name:T.ag._({id:"GQDSBN"}),icon:ey.Y$,itemGroups:[{subcategory:eE[s.Grid],items:[t.columns2,t.columns3,t.columns4,t.gallery]},{subcategory:eE[s.Table],items:[t.table2,t.table3,t.table4]},{subcategory:eE[s.SmartLayout],items:eS.js}]}),(0,u.Z)(e,c.Drawings,{name:T.ag._({id:"m/Gw0O"}),icon:eb.K,featureFlag:"drawingBlock",itemGroups:[{subcategory:eE[s.SmartLayout],items:eS.ne},{subcategory:eE[s.Diagrams],items:eA.h}]}),(0,u.Z)(e,c.Text,{name:T.ag._({id:"maNyuq"}),icon:ev.nU,itemGroups:[{subcategory:eE[s.Headings],items:[t.title,t.h1,t.h2,t.h3,t.h4]},{subcategory:eE[s.Lists],items:[t.bulletedList,t.numberedList,t.todoList]},{subcategory:eE[s.Uncategorized],items:[t.codeBlock,t.mathBlock,t.footnote,t.toggle,t.contributors,t.divider,t.tableOfContents,t.normalText]}]}),(0,u.Z)(e,c.Callouts,{name:T.ag._({id:"F/mZFc"}),icon:eg._S,itemGroups:[{subcategory:eE[s.Callouts],items:(0,ek.Di)()},{subcategory:eE[s.Uncategorized],items:[t.blockquote]}]}),(0,u.Z)(e,c.Forms,{name:T.ag._({id:"4Kic3M"}),icon:eh.aJ,itemGroups:[{subcategory:eE[s.Uncategorized],items:[t.buttonGroup].concat((0,em.Z)(eP.c.filter(function(e){var t;return"embed"===e.nodeName&&(null===(t=e.categories)||void 0===t?void 0:t.includes("form"))})))}]}),e},eI=function(){return[[c.Cards,c.Text,c.Callouts,c.Layouts,c.Drawings],[c.Images,c.Videos,c.Apps,c.Forms]].map(function(e){return e.map(function(e){return eD()[e]})})},ez=function(e){var t=e.editor,n=(0,U.A)(eI),r=(0,W.Zd)(),o=y.useState(null),i=(0,E.Z)(o,2),a=i[0],c=i[1],s=(0,y.useRef)(null),l=(0,W.ye)("aiChat"),u=(0,W.ye)("aiCardDesigner"),d={bg:(0,M.ff)("#F9FAFBDD","gray.900"),border:(0,M.ff)("whiteAlpha.600","whiteAlpha.100"),iconColor:(0,M.ff)("trueblue.600","trueblue.200"),dividerColor:(0,M.ff)("blackAlpha.200","whiteAlpha.200")};return(0,N.O)({ref:s,handler:function(e){e.target.closest("[data-insert-widget-popover]")||c(null)}}),(0,ec.jsxs)(ec.Fragment,{children:[l&&(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"EVnzPs"}),placement:"left",children:(0,ec.jsx)(R.K,{position:"relative",children:(0,ec.jsxs)(L.z,{"data-guider-highlight":"design-partner-button",position:"relative",color:d.iconColor,"aria-label":T.ag._({id:"EVnzPs"}),bg:d.bg,p:1,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"lg",mb:3,onClick:function(){G.T.emit("toggle",{})},height:12,fontSize:"lg",children:[(0,ec.jsx)(Z.G,{icon:I.KC}),(0,ec.jsx)(_.C,{colorScheme:"trueblue",position:"absolute",bottom:1,right:1,children:(0,ec.jsx)(z.cC,{id:"jsQZMk"})})]})})}),u&&(0,ec.jsx)(P.kH,{label:"Design with AI",placement:"left",children:(0,ec.jsxs)(L.z,{color:d.iconColor,"aria-label":"Design with AI",bg:d.bg,p:1,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"xl",mb:3,onClick:function(){var e=prompt("What do you want to change?",F.B);e&&B.T.emit("openSuggestionEditor",{cardId:null,userMessage:e})},children:[(0,ec.jsx)(Z.G,{icon:D.Hh}),(0,ec.jsx)(_.C,{colorScheme:"trueblue",position:"absolute",bottom:1,right:1,children:(0,ec.jsx)(z.cC,{id:"jsQZMk"})})]})}),(0,ec.jsx)(R.K,{bg:d.bg,color:d.iconColor,p:1,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"lg",ref:s,overflow:"hidden",spacing:1,children:n.map(function(e,n){return(0,ec.jsxs)(y.Fragment,{children:[n>0&&(0,ec.jsx)(H.i,{borderColor:d.dividerColor}),e.map(function(e){var n=e.name,o=e.itemGroups,i=e.icon,s=e.featureFlag;return s&&!r[s]?null:(0,ec.jsx)(eu,{itemGroups:o,icon:i,name:n,editor:t,setOpenButton:c,isOpen:a===n},n)})]},n)})})]})},eT=(0,y.memo)(function(e){var t=e.editor,n=(0,S.Yy)();return(0,A.k)()?(0,ec.jsx)(P.Wk,{isDark:n,children:(0,ec.jsx)(C.k,{position:"fixed",w:"0%",h:"0%",right:6,top:"50%",alignItems:"center",zIndex:"sticky","data-testid":"insert-widget-wrapper",children:(0,ec.jsx)(C.k,{position:"absolute",right:0,"data-guider-highlight":"insert-widget",direction:"column",className:"insert-widget",children:(0,ec.jsx)(ez,{editor:t})})})}):null}),eM=n(60636),eN=n(10710),eR=n(34860),eL=n(78116),e_=n(56915),eH=n(16796),eZ=n(92619),eB=n(2167),eF=n(64827),eW=n(34676),eU=n(27191),eG=n(23313),eq=n(43862),eV=n(10063),e$=function(e){var t=e.currentAttributes,n=e.updateAttributes,r=e.editor,o=e.isMounted,i=(0,y.useRef)({currentAttributes:t,updateAttributes:n,sourceKey:t.source});i.current.currentAttributes=t,i.current.updateAttributes=n,(0,y.useEffect)(function(){i.current.sourceKey=i.current.currentAttributes.source},[t.tempUrl,t.src]),(0,y.useEffect)(function(){if(r&&!o){var e=i.current.currentAttributes,t=e.src,n=e.tempUrl,a=e.uploadStatus;n&&!t&&a!==eq.D.Uploading&&(console.log("[useUploadOnUnmount] uploading tempUrl:",n),i.current.updateAttributes({uploadStatus:eq.D.Uploading,source:i.current.sourceKey}),(0,eV.Sm)(r,n))}},[r,o])},eK=n(16529),eY=n(9846),eX=n(21529),eJ=n(39965),eQ=n(24224),e0=n(62141),e1=n(90254),e2=n(31702),e3=n(43330),e4=eK.i.key,e5=y.memo(function(e){var t=e.editor;(0,eQ.F1)(t);var n=(0,eG.$gs)().isConnected,r=(0,e3.Bh)(),o=(0,O.CG)(e0.hN),i=t.state.selection,a=(0,y.useMemo)(function(){return(0,e3.Q3)(t,i)},[t,i]),c=(0,O.CG)(e0.tY),s=a&&(0,e3.CK)(a.type),l=!!(c&&s&&o),u=(0,y.useRef)(null),d=(0,y.useCallback)(function(){r(!1),i instanceof eU.qv&&t.chain().selectNodeAtPos(i.from,!1).focus().run()},[t,i,r]),f=(0,eX.A)(t);(0,y.useEffect)(function(){s||r(!1)},[s,r]),(0,y.useEffect)(function(){l&&setTimeout(function(){if(u.current){var e=(0,eW.t5)(u.current);e&&!(e.length<1)&&(0,eW.T_)(e[0],{nextTick:!0})}},100)},[l,t]),(0,y.useEffect)(function(){a&&(0,e3.CK)(a.type)&&g(a.attrs.source||e4)},[a]);var p=(0,y.useState)(e4),m=p[0],g=p[1],v=eJ.ah[m];(0,y.useEffect)(function(){v||g(e4)},[v]);var b=(0,y.useCallback)(function(e){(0,e3.Yc)({editor:t,selection:i,sourceKey:m,attrs:e,resizeToFit:v.resizeToFit})},[t,m,i,v.resizeToFit]),x=(null==a?void 0:a.attrs)||{};e$({currentAttributes:x,updateAttributes:b,editor:t,isMounted:l});var j=(0,y.useCallback)(function(){(0,e3.Yc)({editor:t,selection:i,sourceKey:m,attrs:{source:m},nodeName:"mediaPlaceholder",resetAttrs:!0})},[m,i,t]),w=(0,e1.g)(),k=!!(n||(null==v?void 0:v.availableOffline)),C=(null==a?void 0:a.editType)||"node",P=(0,y.useCallback)(function(e){return(null==a?void 0:a.type.name)==="link"?"embed"===e.nodeName||"video"===e.nodeName:(null==a?void 0:a.type.name)==="smartLayoutCell"?"image"===e.nodeName:!!e.nodeName},[a]);return(0,ec.jsxs)(eL.d,{isOpen:l,onClose:d,size:w,trapFocus:!1,children:[(0,ec.jsx)(e_.Z,{background:"none"}),(0,ec.jsxs)(eH.s,{onKeyDown:f,"data-in-editor-focus":!0,"data-testid":"media-drawer","data-test-media-source":m,children:[(0,ec.jsx)(eZ.x,{children:(0,ec.jsx)(z.cC,{id:"xYilR2"})}),(0,ec.jsxs)(eB.f,{children:[(0,ec.jsx)(eY.V,{isConnected:k,label:(0,ec.jsx)(z.cC,{id:"2y7sUG"}),mb:6}),(0,ec.jsx)(e2.M,{currentSource:v,onChange:g,isValidSource:P}),v&&(0,ec.jsx)(h.xu,{ref:u,opacity:k?1:.4,pointerEvents:k?"initial":"none",children:(0,ec.jsx)(v.Panel,{editor:t,updateAttributes:b,currentAttributes:x,resetToPlaceholder:j,editType:C})})]}),(0,ec.jsx)(eF.o,{"data-testid":"media-drawer-close"})]})]})});e5.displayName="MediaDrawer";var e8=n(72338),e6=n(42545),e9=n(66558),e7=n(42734),te=n(20046),tt=n(82360),tn=n(29262),tr=n(12691),to=n(72043),ti=n(41962),ta=function(e){var t=(0,y.useRef)(null),n=(0,to.nm)(),r=e.editor,o=e.tippyOptions,i=e.onHide;return(0,y.useEffect)(function(){r&&r.commands.command(function(e){return e.tr.setMeta(ti.eq,{element:t.current,tippyOptions:o,panelLifecycle:n,onHide:i}),!0})},[r,o,n,i]),(0,ec.jsx)("div",{ref:t,className:e.className,style:{visibility:"hidden"},children:e.children})},tc=n(87819),ts=n(50158),tl=n(69943),tu=n(4389),td=n(36471),tf=n(73008),tp=function(e){var t=e.editor,n=e.handleDelete,r=(0,y.useCallback)(function(){t.chain().deleteSelectionAndSelectNear().run()},[t]);return(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"cnGeoo"}),icon:td.$,onClick:n||r,testId:"delete-node-button",color:"red.500"})},tm=n(27302),th=function(){return(0,ec.jsx)(tm.M,{h:"20px",children:(0,ec.jsx)(H.i,{mx:1,borderColor:"gray.300",orientation:"vertical"})})},tg=n(60239),tv=n(73168),tb=n(46973),ty=n(53579),tx=n(27777),tj=n(63419),tw=n(92771),tO=n(4762),tk=n(92639),tC=n(73666),tP=n(26673),tS=n(56581),tA=n(9088),tE=n(30893),tD=n(40771),tI=n(89190),tz=n(73848),tT=n(24798),tM=n(84520),tN=n(95085),tR=n(98621),tL=n.n(tR),t_=n(56345);function tH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tB=function(e,t){var n,r=new Set,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tH(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(r.add(i[t]),r.size>1)return!1}}catch(e){o.e(e)}finally{o.f()}return(0,em.Z)(r)[0]},tF=function(e,t,n){var r,o,i,a,c,s;return tB((r=function(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}(t,e.schema),i=(o=e.selection).from,a=o.to,c=o.empty,s=[],c?(e.storedMarks&&s.push.apply(s,(0,em.Z)(e.storedMarks)),s.push.apply(s,(0,em.Z)(e.selection.$head.marks()))):e.doc.nodesBetween(i,a,function(e){s.push.apply(s,(0,em.Z)(e.marks))}),s.filter(function(e){return e.type.name===r.name}).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.attrs)})),n)},tW=n(47678),tU=function(e){var t=e.editor,n=t.state,r=n.selection,o=n.doc,i=n.schema,a=r.from,c=r.to,s=o.rangeHasMark(a,c,i.marks.highlight)?null:o.rangeHasMark(a,c,i.marks.textColor)?tF(t.state,"textColor","hex")||null:tq(t),l=o.rangeHasMark(a,c,i.marks.textColor)?null:o.rangeHasMark(a,c,i.marks.highlight)&&tF(t.state,"highlight","hex")||null,u=(0,y.useCallback)(function(e){return t.chain().focus().setHighlightColor(e).run()},[t]),d=(0,y.useCallback)(function(e){return t.chain().focus().setTextColor(e).run()},[t]);return{highlightValue:l,resetColorAndHighlight:(0,y.useCallback)(function(){t.chain().focus().unsetMark("textColor").unsetMark("highlight").run()},[t]),setHighlightColor:u,setTextColor:d,textColorValue:s}},tG=function(e){var t=e.editor,n=e.testId,r=e.disabled,o=tU({editor:t}),i=o.textColorValue,a=o.highlightValue,c=o.setHighlightColor,s=o.setTextColor,l=o.resetColorAndHighlight;return(0,ec.jsxs)(tA.v,{isLazy:!0,onClose:function(){return(0,tW.L)(t)},children:[(0,ec.jsx)(P.kH,{placement:"top",label:(0,ec.jsx)(z.cC,{id:"76ESgh"}),children:(0,ec.jsx)(tE.j,{isDisabled:r,as:L.z,variant:"toolbar",rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),"data-testid":n,onMouseDown:eo.br,size:"sm",children:(0,ec.jsx)(tV,{color:a||i||void 0})})}),(0,ec.jsx)(tD.q,{overflow:"hidden",children:(0,ec.jsxs)(tI.m,{isFitted:!0,variant:"soft-rounded",size:"sm",defaultIndex:a?1:0,children:[(0,ec.jsxs)(tz.t,{children:[(0,ec.jsx)(tT.O,{children:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(Z.G,{icon:tC.yG}),(0,ec.jsx)(K.x,{children:(0,ec.jsx)(z.cC,{id:"xeiujy"})})]})}),(0,ec.jsx)(tT.O,{children:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(Z.G,{icon:tk.hj}),(0,ec.jsx)(K.x,{children:(0,ec.jsx)(z.cC,{id:"gtEbeW"})})]})})]}),(0,ec.jsxs)(tM.n,{children:[(0,ec.jsx)(tN.x,{p:0,pt:2,children:(0,ec.jsx)(t_.M,{currentColor:i||null,setColor:s,unsetColor:l,source:"TextColor"})}),(0,ec.jsx)(tN.x,{p:0,pt:2,children:(0,ec.jsx)(t_.M,{currentColor:a||"",setColor:c,unsetColor:l,source:"TextHighlight"})})]})]})})]})},tq=function(e){var t=e.state.selection.from,n=e.view.domAtPos(t),r=n.node instanceof HTMLElement?n.node:n.node.parentElement;if(!r)return null;var o=getComputedStyle(r).getPropertyValue("color");return o&&"rgba(0, 0, 0, 0)"!==o?tL()(o).toHexString().toUpperCase():null},tV=function(e){var t=e.color,n=e.fixedWidth,r=e.isChecked;return(0,ec.jsxs)(R.K,{spacing:"2px",children:[(0,ec.jsx)(K.x,{children:r?(0,ec.jsx)(tS.n,{}):(0,ec.jsx)(Z.G,{icon:tO.yG,fixedWidth:n,size:t?"sm":void 0,transform:{y:t?3:0}})}),t&&(0,ec.jsx)(C.k,{w:5,h:1.5,bg:t,borderRadius:"sm",borderWidth:"1px",borderColor:"blackAlpha.400"})]})},t$=n(46398),tK=n(60670),tY=n(94540),tX=n(76648),tJ=n(63849),tQ=n(2575),t0=n(61686),t1=n(98551),t2=n(26236),t3=function(e){var t=e.editor,n=e.selection,r=n instanceof eU.Bs?"link":n.node.type.name,o="link"===r,i=t.getAttributes(r);i.embed;var a=i.source,c="embed.twitter"===(0,t1.v0)(a||void 0).key,s={link:{title:T.ag._({id:"yzF66j"})},preview:{title:T.ag._({id:"rdUucN"})},inline:{title:T.ag._({id:"HY4nP5"})}},l=(0,y.useCallback)(function(e){if("link"===r&&"link"!==e)t.commands.convertLinkToMedia(e);else if("link"===e){t.commands.convertMediaToLink();return}t.commands.updateAttributes(r,{displayStyle:e})},[t,r]);if("href"in i&&(0,tw.H7)(i.href)||c)return null;var u=o?"link":"displayStyle"in i&&i.displayStyle||"inline";return(0,ec.jsxs)(tA.v,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,ec.jsx)(tE.j,{size:"sm",as:L.z,rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),variant:"toolbar",pl:2,onMouseDown:eo.br,"data-testid":"display-style-dropdown",children:s[u].title}),(0,ec.jsx)(tD.q,{children:(0,ec.jsx)(tJ._,{type:"radio",onChange:l,value:u,children:Object.entries(s).map(function(e){var t=(0,E.Z)(e,2),n=t[0],r=t[1].title;return(0,ec.jsx)(tQ.i,{value:n,onMouseDown:eo.br,"data-testid":"display-style-option-".concat(n),children:(0,ec.jsx)(K.x,{children:r})},n)})})})]})},t4=function(e){var t=e.href,n=e.updateHref,r=e.unlink,o=e.editor,i=e.allowEditMetadata,a=(0,y.useRef)(null),c=(0,y.useState)(t),s=c[0],l=c[1],u=(0,O.CG)(e0.xb),d=(0,ea.NC)(t,u),f=function(e){if(e){var t=(0,t$.kr)(e)||(0,tw.H7)(e)?e:"http://"+e;if(!(0,t$.jv)(t)){n("");return}n(t)}},p=(0,y.useCallback)(function(){try{window.open(t,"_blank")}catch(e){console.error("(caught) Link Formatting Menu error",e)}},[t]),m=(0,y.useCallback)(function(e){if(d){var n=(0,ea.g)(t);(0,tj.l)(o,e,n)}},[o,t,d]);(0,y.useEffect)(function(){!t&&a.current&&setTimeout(function(){var e;null==a||null===(e=a.current)||void 0===e||e.focus()})},[t]),(0,y.useEffect)(function(){l(t)},[t]);var h=(0,e3.Bh)(),g=(0,y.useCallback)(function(e){h(!0),e.stopPropagation()},[h]);return(0,ec.jsxs)(V.U,{spacing:2,py:1,mx:2,children:[(0,ec.jsx)(tx.I,{value:s,ref:a,onChange:function(e){return l(e.target.value)},onBlur:function(){f(s)},onKeyPress:function(e){"Enter"===e.key&&(f(s),o.commands.focus())},placeholder:T.ag._({id:"Ilf1mg"}),width:"250px",size:"sm","data-testid":"link-input"}),r&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"484LKL"}),icon:ty.AE,onClick:r}),d&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"9FNPgA"}),icon:tb.eF,onClick:m}),t&&(0,ec.jsx)(tf.h,{label:d?(0,ec.jsx)(z.cC,{id:"RMJwZi"}):(0,ec.jsx)(z.cC,{id:"fOj0+R"}),icon:tv.gJ,onClick:p}),t&&void 0!==i&&i&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ePK91l"}),icon:tg.Tz,onClick:g})]})},t5=n(84798),t8=n(35211),t6=n(54906),t9=n(15740),t7=n(20176),ne=n(85249),nt=n(46510),nn=n(55479),nr=n(84103),no=n(56143),ni=n(65742),na=n(30118),nc=n(14653),ns=n(60831),nl=n(20010),nu=n(48273),nd=n(94659),nf=n(80353),np=n(64457),nm=n(2875),nh=function(e){var t,n=e.isOpen,r=e.onClose,o=e.cardId,i=e.editor,a=(0,et.z$)(),c=(0,y.useState)(!1),s=c[0],l=c[1],u=(0,y.useState)(!1),d=u[0],p=u[1],h=(0,nn.p)(),g=(0,y.useRef)(null),v=(0,y.useCallback)(function(){g.current&&h.update(g.current,{status:"success",title:(0,ec.jsx)(z.cC,{id:"pK8dQg"}),description:(0,ec.jsx)(K.x,{children:(0,ec.jsx)(z.cC,{id:"IxXthU"})}),isClosable:!0})},[h]),b=(0,y.useCallback)(function(){g.current&&h.update(g.current,{title:(0,ec.jsx)(z.cC,{id:"FE5kcD"}),status:"error",duration:null,isClosable:!0})},[h]),x=(0,y.useCallback)((t=(0,f.Z)(m().mark(function e(t){var n,r,c,s,u,d,f,y;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="png"===e.t0?3:"jpeg"===e.t0?5:6;break;case 3:return l(!0),e.abrupt("break",6);case 5:p(!0);case 6:return n=i.getJSON(),r="".concat(j.v.API_HOST,"/export/cards/").concat(o,"/image"),g.current=h({id:"export-toast-".concat(o,"-").concat(t),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:(0,ec.jsx)(z.cC,{id:"eJOEBy"})}),e.prev=9,e.next=12,fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({docContent:n,fileType:t})});case 12:return s=e.sent,e.next=15,s.blob();case 15:if(u=e.sent,s.ok){e.next=18;break}throw Error("Export failed.");case 18:d=window.URL.createObjectURL(u),f=document.createElement("a"),y=decodeURIComponent((null===(c=(s.headers.get("Content-Disposition")||"").split(";").find(function(e){return e.includes("filename=")}))||void 0===c?void 0:c.replace("filename=","").trim())||"".concat(o,".").concat(t)),f.download=y,f.href=d,document.body.appendChild(f),f.click(),f.remove(),null==a||a.track(et.AA.CARD_EXPORTED,{cardId:o,format:"image",fileType:t}),setTimeout(function(){switch(t){case"png":l(!1);break;case"jpeg":p(!1)}v()},300),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(9),b();case 33:return e.prev=33,l(!1),p(!1),e.finish(33);case 37:case"end":return e.stop()}},e,null,[[9,30,33,37]])})),function(e){return t.apply(this,arguments)}),[a,o,i,b,v,h]);return(0,ec.jsxs)(nl.u_,{isOpen:n,onClose:r,size:"lg",children:[(0,ec.jsx)(e_.Z,{}),(0,ec.jsxs)(nu.h,{children:[(0,ec.jsxs)(eZ.x,{children:[(0,ec.jsx)(z.cC,{id:"xRJ+bN"}),(0,ec.jsx)(_.C,{colorScheme:"green",fontSize:"lg",ml:2,children:(0,ec.jsx)(z.cC,{id:"YBt9YP"})})]}),(0,ec.jsx)(eF.o,{}),(0,ec.jsx)(H.i,{}),(0,ec.jsx)(eB.f,{pt:"6",children:(0,ec.jsxs)(nd.g,{spacing:4,align:"start",children:[(0,ec.jsx)(K.x,{fontSize:"sm",color:"gray.600",children:(0,ec.jsx)(z.cC,{id:"XGuz9X"})}),(0,ec.jsx)(R.K,{spacing:2,w:"100%",children:(0,ec.jsx)(np.j,{onClick:function(){return x("png")},exportInProgress:s,accentColor:"purple",icon:ns.Vm,formatLabel:"PNG"})}),(0,ec.jsx)(K.x,{fontSize:"sm",color:"gray.600",children:(0,ec.jsx)(z.cC,{id:"8LhjM/",components:{0:(0,ec.jsx)(L.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){r(),nm.pw.emit(nm.TI.OPEN_PAGE_SETUP,"cards")}})}})})]})}),(0,ec.jsx)(nf.m,{children:(0,ec.jsx)(tX.h,{children:(0,ec.jsx)(L.z,{isLoading:d||s,onClick:function(){r()},children:(0,ec.jsx)(z.cC,{id:"DPfwMq"})})})})]})]})},ng=n(49294),nv=n(81212),nb=n(29787),ny=n(26087),nx=n(51823),nj=function(e){var t=e.attrs,n=(0,O.CG)(e0.gh),r=(0,O.CG)(e0.yx),o=t.id,i=(0,nx.gq)({cardId:o,docId:null==r?void 0:r.id,isPresentMode:n===ny.q.SLIDE_VIEW}),a=(0,nn.p)(),c=(0,ng.V)(i).onCopy,s=(0,y.useCallback)(function(e){var t;if(e.target&&null!==(t=e.target)&&void 0!==t&&t.closest('[data-testid="open-share"]')){e.preventDefault();return}c(),a({title:T.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[c,a]),l=(0,nb.K)();return(0,ec.jsx)(tf.h,{onClick:s,label:(0,ec.jsx)(z.cC,{id:"F0YmUY"}),children:(0,ec.jsx)(nv.x,{isLocked:!l})})},nw=n(68089),nO=n(27948),nk=n(26151),nC=n(52780),nP=n(44595),nS=n(21842),nA=n(43628),nE=n(34264),nD=n(46695),nI=n(95922),nz=n(76451),nT=n(31889),nM=n(72438);function nN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nN(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nL=function(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r||r.inside<0)return null;var o=e.state.doc,i=r.inside,a=o.resolve(i),c=(0,ea.Ru)(a,e6.pt),s=(0,ea.Ru)(a,tr.KH)[0],l=n&&(0,nM.O)(n),u=(0,ea.Fu)(i,e);if(0===c.length||!u||!s)return null;if(!l){var d=(0,eV.RC)(t).filter(function(e){return(0,nT.fU)(e.type)});return 1!==d.length?null:{pos:i,rect:u,isImageUpload:!0,file:d[0]}}return l&&"image"===l.type.name?{pos:i,rect:u,isImageUpload:!1,background:{type:nz.E.IMAGE,source:l.attrs.source,image:l.attrs}}:null},n_=function(e,t,n){try{if(!(r=nL(e,t,n)))return!1}catch(e){return console.error("(caught) [CardLayoutPlugin] handleDrop checkGalleryDropTarget error:",e),!1}if(!r||r.isImageUpload)return!1;var r,o=e.state.tr;return o.setNodeAttribute(r.pos,"background",r.background),o.deleteSelection(),e.dispatch(o),!0},nH=function(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r||r.inside<0)return null;var o=e.state.doc,i=r.inside,a=o.resolve(i),c=o.nodeAt(i);if(!c)return null;var s=(0,ea.Ru)(a,tr.KH),l=(0,nI.Z)(s),u=l[0],d=l.slice(1),f=n&&(0,nM.O)(n),p=(0,ea.Fu)(i,e),m="cardLayoutItem"===c.type.name;if(!u||!p||!m||d.length>0)return null;var h=u.node.attrs,g="blank"===h.layout?nB(t,p):"behind"===h.layout?nZ(t,p):null;if(!g)return null;if(!f){var v=(0,eV.RC)(t).filter(function(e){return(0,nT.fU)(e.type)});return 1!==v.length?null:nR({pos:u.pos,isImageUpload:!0,file:v[0]},g)}return f&&"image"===f.type.name?nR(nR({pos:u.pos},g),{},{isImageUpload:!1,background:{type:nz.E.IMAGE,source:f.attrs.source,image:f.attrs}}):null},nZ=function(e,t){return e.clientY<t.top+80||e.clientX<t.left+80||e.clientX>t.right-80?{layout:"behind",rect:t}:null},nB=function(e,t){var n=t,r=void 0,o=Math.min(t.height/3,100);if(e.clientX<t.left+t.width/4)r="left",n=nR(nR({},t.toJSON()),{},{left:t.left,right:t.left+t.width/3,top:t.top,bottom:t.bottom});else if(e.clientX>t.right-t.width/4)r="right",n=nR(nR({},t.toJSON()),{},{right:t.right,left:t.right-t.width/3,top:t.top,bottom:t.bottom});else{if(!(e.clientY<t.top+o))return null;r="top",n=nR(nR({},t.toJSON()),{},{left:t.left,right:t.right,top:t.top,bottom:t.top+Math.min(t.height/3,200)})}return{rect:n,layout:r}},nF=function(e,t,n,r){try{if(!(o=nH(t,n,r)))return!1}catch(e){return console.error("(caught) [handleImageDropCreateAccent] handleDrop checkCreateCardAccentDropTarget error:",e),!1}if(!o||o.isImageUpload||!o.layout)return!1;var o,i=o.background,a=t.state.tr;a.deleteSelection(),(0,nD.G)(e,a,o.pos,o.layout);var c=(0,e6.wz)(a,o.pos).accent;return c&&(a.setNodeAttribute(c.pos,"background",i),a.setSelection(eU.qv.create(a.doc,c.pos))),t.dispatch(a),!0},nW=new eU.H$("cardLayoutPlugin"),nU=function(e){var t=e.find(function(e){return e.spec.isCardLayoutDecoration});return null==t?void 0:t.spec},nG=n(89571),nq=n(75944),nV=n(83897),n$=n(54336),nK=n(27875),nY=n.n(nK),nX=n(68015),nJ=n.n(nX),nQ=n(39428),n0=n(50087);function n1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n1(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n3=function(e){var t=(0,y.useState)(null),n=t[0],r=t[1];return(0,y.useEffect)(function(){var t;return(t=new Image).src=e,t.onload=function(){r(t.naturalWidth/t.naturalHeight)},function(){r(null)}},[e]),n},n4=function(e,t,n){var r=e.view.domAtPos(t);if(r){var o=r.node,i=r.offset,a=o.childNodes[i].querySelector("[data-change-focus-point-el]");a&&(a.style.backgroundPosition=n?"".concat(n.x,"% ").concat(n.y,"%"):"")}},n5=function(e){var t;return null===(t=(0,n0.XU)(e))||void 0===t?void 0:t.backgroundPos},n8=function(e,t,n){if(t&&n){var r=(0,nQ.XV)(e.state,n);if(!r){console.error("ChangeFocusPoint - relative pos is null");return}n4(e,r,null);var o=e.state.doc.nodeAt(r);if(o){var i=(0,n0.XU)(o),a=(0,n0.j6)(o,n2(n2({},i),{},{backgroundPos:t}));e.commands.updateAttributesAtPos(r,a)}}},n6=function(e){var t=e.editor,n=e.pos,r=e.node,o=(0,y.useRef)(null),i=(0,y.useRef)(null),a=(0,y.useRef)(null),c=(0,y.useState)(!1),s=c[0],l=c[1],u=(0,y.useRef)(),d=(0,y.useCallback)(function(e){var r=o.current;if(r){if(u.current=e,!e){r.style.left="calc(50% - 10px)",r.style.top="calc(50% - 10px)",l(!1);return}r.style.left="calc(".concat(e.x,"% - 10px)"),r.style.top="calc(".concat(e.y,"% - 10px)"),n4(t,n,e),l(50!==e.x||50!==e.y)}},[t,n]),f=(0,nq.q)(),p=f.onOpen,m=f.onClose,h=f.isOpen,g=(0,y.useCallback)(function(){d(n5(r)),p()},[r,p,d]),v=(0,y.useCallback)(function(){var e={x:50,y:50};d(e);var r=(0,nQ.jS)(t.state,n);n8(t,e,r)},[d,t,n]),b=(0,y.useCallback)(function(e){var t=i.current;if(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height,a=(e.clientX-n.left)/r,c=(e.clientY-n.top)/o;d({x:nJ()(100*nY()(a,0,1),2),y:nJ()(100*nY()(c,0,1),2)})}},[d]);return(0,y.useEffect)(function(){var e=o.current,r=i.current;if(e&&r){a.current=(0,nQ.jS)(t.state,n);var c=function(){r.addEventListener("mousemove",b),window.addEventListener("mouseup",s)},s=function e(){r.removeEventListener("mousemove",b),window.removeEventListener("mouseup",e),n8(t,u.current,a.current)};return e.addEventListener("mousedown",c),function(){e.removeEventListener("mousedown",c)}}},[t,b,n]),(0,y.useEffect)(function(){var e=i.current;if(e){a.current=(0,nQ.jS)(t.state,n);var r=function(t){e.addEventListener("mousemove",b),window.addEventListener("mouseup",o),b(t)},o=function n(){e.removeEventListener("mousemove",b),window.removeEventListener("mouseup",n),n8(t,u.current,a.current)};return e.addEventListener("mousedown",r),function(){e.removeEventListener("mousedown",r)}}},[t,b,n]),{onOpen:g,onClose:m,isOpen:h,dotRef:o,dotContainerRef:i,canReset:s,resetDotPosition:v}},n9=function(e){var t=e.editor,n=e.pos,r=e.node,o=n6({editor:t,pos:n,node:r}),i=o.onOpen,a=o.onClose,c=o.isOpen,s=o.dotRef,l=o.dotContainerRef,u=o.canReset,d=o.resetDotPosition,f=(0,n0.XU)(r),p=(null==f?void 0:f.src)||(null==f?void 0:f.tempUrl),m=n3(p);return(0,ec.jsxs)(Y.J,{strategy:"absolute",placement:"top",isOpen:c,onOpen:i,onClose:a,children:[(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"BmxaoW"}),children:(0,ec.jsx)(h.xu,{my:1,children:(0,ec.jsx)(X.x,{children:(0,ec.jsx)(J.h,{variant:"toolbar",size:"sm",icon:(0,ec.jsx)(Z.G,{icon:nG.Yh}),boxSize:7,p:0,my:0,"aria-label":T.ag._({id:"BmxaoW"})})})})}),(0,ec.jsx)(ee.y,{children:(0,ec.jsx)(nV.b,{p:1,children:(0,ec.jsxs)(h.xu,{ref:l,userSelect:"none",position:"relative",children:[(0,ec.jsx)(h.xu,{ref:s,borderRadius:"full",boxSize:5,pos:"absolute",zIndex:"overlay",border:"2px solid",borderColor:"gray.100",pointerEvents:"none",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white"}),p&&(0,ec.jsx)(n$.o,{maxW:"300px",ratio:m||1,position:"relative",children:(0,ec.jsx)($.E,{pointerEvents:"none",src:(0,nT.SN)(p,nT.Iv,f.meta),fallbackSrc:p,objectFit:"cover",position:"absolute",top:0,left:0,width:"100%",height:"100%"})}),(0,ec.jsx)(L.z,{opacity:u?1:0,pos:"absolute",bottom:3,right:3,variant:"plain",size:"xs",onClick:d,children:(0,ec.jsx)(z.cC,{id:"OfhWJH"})})]})})})]})},n7=["openBackgroundTab"];function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rn=n(74056),rr=n(32649),ro=n(477),ri=n(30822),ra=n(2321),rc=n(61309),rs=n(50050),rl=n(70922),ru=n(86733),rd=n(18149),rf=n.n(rd),rp=n(7427),rm=n(26274),rh=n(45959),rg=n(23078),rv=function(e){var t=e.editor,n=e.label,r=e.icon;return(0,ec.jsx)(tf.h,{label:n,onClick:function(){t.chain().selectParentNode().run()},children:r?(0,ec.jsx)(Z.G,{icon:r}):(0,ec.jsx)(Z.G,{icon:rg.pQ,flip:"horizontal"})})},rb=n(84690);function ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ry(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ry(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rj=function(){return{inset:{title:T.ag._({id:"Jn5DbR"})},circle:{title:T.ag._({id:"7xMmki"})}}},rw=function(e){var t=e.clipType,n=e.onChange;return t?(0,ec.jsxs)(rb.Lt,{children:[(0,ec.jsx)(rb.PS,{size:"sm",borderRadius:"full",minWidth:"105px",rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),variant:"toolbar",pl:2,onMouseDown:eo.br,children:rj()[t].title}),(0,ec.jsx)(rb.sV,{children:Object.entries(rj()).map(function(e){var r=(0,E.Z)(e,2),o=r[0],i=r[1].title;return(0,ec.jsx)(rb.hP,{value:o,fontSize:"sm",fontWeight:600,icon:(0,ec.jsx)(h.xu,{visibility:o===t?"visible":"hidden",children:(0,ec.jsx)(Z.G,{icon:ra.LE})}),onMouseDown:eo.br,onClick:function(){n(o)},children:(0,ec.jsx)(K.x,{children:i})},o)})})]}):null},rO=n(74878),rk=n(86527),rC=n(65186),rP={type:"gridCell",content:[{type:"paragraph"}]},rS=function(e){var t=e.editor,n=e.selection,r=e.handleDuplicate,o=(0,y.useCallback)(function(){t.chain().insertContentAt(n.from+n.node.nodeSize,n.node.toJSON()).selectInsertedNode().run()},[t,n]);return(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"euc6Ns"}),icon:nt.WM,onClick:r||o,testId:"duplicate-node-button"})},rA={src:"/_next/static/media/layout-3-cols.478d87d6.svg",height:25,width:20,blurWidth:0,blurHeight:0},rE={src:"/_next/static/media/layout-30-70.019e8aa0.svg",height:25,width:20,blurWidth:0,blurHeight:0},rD={src:"/_next/static/media/layout-4-cols.bc7869e3.svg",height:25,width:20,blurWidth:0,blurHeight:0},rI={src:"/_next/static/media/layout-50-50.a28ea4d4.svg",height:25,width:20,blurWidth:0,blurHeight:0},rz={src:"/_next/static/media/layout-70-30.abcf64e9.svg",height:25,width:20,blurWidth:0,blurHeight:0},rT=n(57863),rM=n(71756),rN=n(16825);function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r_=n(90046),rH=n(70743),rZ=n(13121),rB=n(66902),rF=n(88646),rW=n(49626),rU=n(59910),rG=n(9121),rq=n(80318),rV=n(99638),r$=n(15723),rK=["numColumns","selectedColumn","getColumnPosition"],rY=["colNumber","selectColumn"];function rX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rX(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rQ=function(e){var t=e.colWidths;return(0,ec.jsxs)("colgroup",{children:[(0,ec.jsx)("col",{style:{width:"0%"}}),t.map(function(e,t){return(0,ec.jsx)("col",{className:"col-width-control",style:{width:"".concat(e,"%")}},t)})]})};rQ.displayName="ColGroup";var r0=function(e){var t,n=(0,eQ.TZ)(),r=e.node,o=e.editor,i=e.getPos,a=e.decorations,c=e.updateAttributes,s=o.schema.nodes.table.spec,l=s.colMinPercent,u=s.newColSize,d=(0,rH.Ux)(r.attrs.colWidths,u,l),f=tn.rU.get(r),p=a.some(function(e){return e.spec.isFocusedInside}),m=null===(t=a.find(function(e){return e.spec.isColumnSelected}))||void 0===t?void 0:t.spec.colNumber,g=r.attrs.colWidths,v=(0,O.CG)(e0.Pu),b=(0,rG.c)(v),x=(0,eR.gF)();(0,y.useEffect)(function(){f.width!==g.length&&setTimeout(function(){c({colWidths:(0,rH.RS)(f.width)})},0)},[f.width,g,c]);var j=(0,y.useCallback)(function(e){return i()+1+f.positionAt(0,e,r)},[i,r,f]),w=(0,y.useCallback)(function(e){var t=j(e+1)+1;o.chain().addColumnAfter(e).command(function(e){var n=e.tr,r=(0,eM.t)(n.doc.resolve(t));return r&&n.setSelection(r),!0}).run()},[o,j]),k=(0,y.useCallback)(function(){w(f.width-1)},[w,f.width]),C=nJ()(r.attrs.colWidths.reduce(function(e,t){return e+t},0),20);return x?(0,ec.jsx)(rq.lO,rJ(rJ(rJ({as:"div"},e),r.attrs),{},{children:(0,ec.jsxs)(h.xu,{w:"fit-content",overflowX:n?"auto":void 0,position:"relative",width:"100%",className:(0,eW.cx)("table-wrapper"),"data-selection-ring":!0,sx:b.tableSx,children:[(0,ec.jsxs)("table",{style:{width:n?"max-content":"".concat(C,"%"),minWidth:n?"100%":void 0,maxWidth:n?"200vw":void 0,tableLayout:n?"auto":"fixed",position:"relative"},children:[(0,ec.jsx)(rQ,{cols:f.width,colWidths:g}),(0,ec.jsx)("thead",{children:(0,ec.jsx)(r1,rJ({numColumns:f.width,selectedColumn:m,getColumnPosition:j},e))}),(0,ec.jsx)(rZ.ms,{as:"tbody",className:"table-content"})]}),(0,ec.jsx)(r$.A,rJ(rJ({},e),{},{"data-testid":"select-table-button",onClick:function(){var e=j(0);o.chain().focus().selectTable(e).run()},label:T.ag._({id:"3xRGMR"})})),p&&(0,ec.jsxs)(h.xu,{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,ec.jsx)(P.kH,{placement:"right",label:T.ag._({id:"AgvHni"}),children:(0,ec.jsx)(L.z,{position:"absolute",left:"100%",top:"0",height:"100%",onClick:k,onMouseDown:eo.br,minWidth:"0",width:"auto",isDisabled:!d,zIndex:1,"data-testid":"add-col-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:rU.wY,backgroundColor:"var(--clickable-background-color)",ml:1,w:5,children:(0,ec.jsx)(Z.G,{icon:rW.r8})})}),(0,ec.jsx)(P.kH,{placement:"bottom",label:T.ag._({id:"qZd/ph"}),children:(0,ec.jsx)(L.z,{position:"absolute",left:"0",top:"100%",width:"100%",onClick:function(){var e=i()+1,t=f.height-1,n=f.width-1,a=e+f.positionAt(t,n,r);o.chain().focus(a).addRowAfter().run(),requestAnimationFrame(function(){return o.chain().focus(a).goToNextCell().run()})},onMouseDown:eo.br,minHeight:"0",height:6,zIndex:4,"data-testid":"add-row-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:rU.wY,mt:1,children:(0,ec.jsx)(Z.G,{icon:rW.r8})})})]})]})})):null},r1=function(e){var t=e.numColumns,n=e.selectedColumn,r=e.getColumnPosition,o=(0,d.Z)(e,rK),i=o.editor,a=(0,y.useCallback)(function(e){var t=r(e);i.chain().focus().selectColumn(t).run()},[i,r]);if(!t)return null;var c=Array.from(Array(t).keys());return(0,ec.jsxs)("tr",{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,ec.jsx)("th",{style:{padding:0}}),c.map(function(e){return(0,ec.jsx)(r2,rJ({colNumber:e,selectColumn:a,isSelected:e===n},o),e)})]})},r2=(0,y.memo)(function(e){var t=e.colNumber,n=e.selectColumn,r=(0,d.Z)(e,rY),o=r.decorations,i=(0,rV.Sz)(o).colHover,a=(0,rV.vz)(o).colFocus,c=(0,y.useCallback)(function(){return n(t)},[t,n]);return(0,ec.jsx)("th",{style:{position:"relative",padding:0,border:0},className:"table-col-control",children:(0,ec.jsx)(r$.A,rJ(rJ({},r),{},{handlePlacement:"top",label:T.ag._({id:"K3GOZ1"}),zIndex:"3",isVisible:i===t||a===t,onClick:c,"data-test-column-control":t}))},t)});r2.displayName="SelectColumnHeader";var r3=e8.NB.create({name:"table",priority:rB.a.Table,containerHandle:!0,addNodeView:function(){return(0,rZ.fW)(r0,{update:rF.E7})},addOptions:function(){return{resizable:!0,handleWidth:10,colMinPercent:10,newColSize:20,lastColumnResizable:!1,allowTableNodeSelection:!0}},content:"tableRow+",tableRole:"table",isolating:!0,allowGapCursor:!1,group:"cardBlock layoutBlock footnoteBlock calloutBlock",parseHTML:function(){return[{tag:"table"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["table",(0,e8.P1)(this.options.HTMLAttributes,t),["tbody",0]]},addAttributes:function(){return{colWidths:{default:[],parseHTML:function(e){var t=e.getAttribute("data-".concat("colWidths"));if(t)return JSON.parse(t);var n=e.querySelector("tr");if(!n)return[];var r=0;return n.childNodes.forEach(function(e){"TD"===e.nodeName&&r++}),(0,rH.RS)(r)}},fullWidthBlock:{default:!1}}},addCommands:function(){var e=this;return{insertTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rows,n=void 0===t?3:t,r=e.cols,o=void 0===r?3:r,i=e.withHeaderRow,a=void 0===i||i;return function(e){var t=e.dispatch,r=e.editor,i=e.commands;if(!t)return!1;var c=function(e,t,n,r,o){for(var i=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach(function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),a=[],c=[],s=0;s<n;s+=1){var l=i.cell.createAndFill();l&&c.push(l)}for(var u=[],d=0;d<t;d+=1)u.push(i.row.createChecked(null,r&&0===d?a:c));return i.table.createChecked({colWidths:(0,rH.RS)(n)},u)}(r.schema,n,o,a);return i.insertContentAndSelect(c.toJSON())}},addColumnBefore:function(t){return function(n){var r=n.state,o=n.dispatch,i=n.tr;if(!(0,tn.Lw)(r.selection)||!o)return!1;var a=(0,tn.zN)(r.selection),c=a.table,s=a.tableStart;return(0,tn.Wf)(i,{table:c,col:t,tableStart:s,newColSize:e.options.newColSize,colMinPercent:e.options.colMinPercent})}},addColumnAfter:function(t){return function(n){var r=n.state,o=n.dispatch,i=n.tr;if(!(0,tn.Lw)(r.selection)||!o)return!1;var a=(0,tn.zN)(r.selection),c=a.table,s=a.tableStart;return(0,tn.Wf)(i,{table:c,col:t+1,tableStart:s,newColSize:e.options.newColSize,colMinPercent:e.options.colMinPercent})}},equalizeColumns:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;if(!(0,tn.Lw)(t.selection)||!n)return!1;var o=(0,tn.zN)(t.selection),i=o.map,a=o.tableStart;return r.setNodeMarkup(a-1,void 0,{colWidths:(0,rH.RS)(i.width)}),!0}},deleteColumn:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;return!!n&&(0,tn.oU)(t.selection,r,n)}},addRowBefore:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.z2)(t,n)}},addRowAfter:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.dl)(t,n)}},deleteRow:function(){return function(e){var t=e.state,n=e.dispatch,r=e.tr;return(0,tn.A_)(t.selection,r,n)}},deleteTable:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch;return!!r&&(0,tn.Lh)(t.selection,n,r)}},deleteTableWhenEmpty:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch;return!!r&&(0,tn.Fw)(t.selection,n,r)}},deleteColWhenEmpty:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch;return!!r&&(0,tn.mh)(t.selection,n,r)}},deleteRowWhenEmpty:function(){return function(e){var t=e.state,n=e.tr,r=e.dispatch;return!!r&&(0,tn._W)(t.selection,n,r)}},mergeCells:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.JX)(t,n)}},splitCell:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.Cr)(t,n)}},toggleHeaderColumn:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.sr)(t,n)}},toggleHeaderRow:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.lm)(t,n)}},toggleHeaderCell:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.II)(t,n)}},mergeOrSplit:function(){return function(e){var t=e.state,n=e.dispatch;return!!(0,tn.JX)(t,n)||(0,tn.Cr)(t,n)}},setCellAttribute:function(e,t){return function(n){var r=n.state,o=n.dispatch;return(0,tn.wb)(e,t)(r,o)}},goToNextCell:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.nA)(1)(t,n)}},goToPreviousCell:function(){return function(e){var t=e.state,n=e.dispatch;return(0,tn.nA)(-1)(t,n)}},fixTables:function(){return function(e){var t=e.state;return e.dispatch&&(0,tn.tp)(t),!0}},setCellSelection:function(e){return function(t){var n=t.tr;if(t.dispatch){var r=tn.Xc.create(n.doc,e.anchorCell,e.headCell);n.setSelection(r)}return!0}}}},addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.deleteTableWhenEmpty()},function(){return t.deleteRowWhenEmpty()},function(){return t.deleteColWhenEmpty()}]})};return{Tab:function(){return!!e.editor.commands.goToNextCell()||!!e.editor.can().addRowAfter()&&e.editor.chain().addRowAfter().goToNextCell().run()},"Shift-Tab":function(){return e.editor.commands.goToPreviousCell()},Backspace:t,"Mod-Backspace":t,Delete:t,"Mod-Delete":t}},addProseMirrorPlugins:function(){return this.options.resizable,[(0,tn.VH)({handleWidth:this.options.handleWidth,colMinPercent:this.options.colMinPercent,lastColumnResizable:this.options.lastColumnResizable}),(0,tn.G3)({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:function(e){var t,n,r={name:e.name,options:e.options,storage:e.storage};return{colMinPercent:null===(t=e.options)||void 0===t?void 0:t.colMinPercent,newColSize:null===(n=e.options)||void 0===n?void 0:n.newColSize,tableRole:(0,e8.nU)((0,e8.Nl)(e,"tableRole",r))}}}),r4=n(47191),r5=n(41360),r8=n(75695),r6=n(52193),r9=n(9426),r7=n(18357),oe=n(84211),ot=n(22288),on=n(61751),or=n(95710),oo=n(19334),oi=n(24799),oa=n(71660),oc=n(77184),os=n(25754),ol=n(39875),ou=n(4290),od=n(74358);(l||(l={})).enabledForTables="enabledForTables";var of=[[{key:"textColor",name:function(){return T.ag._({id:"MapzEo"})},icon:tC.yG,shortcut:"Mod+Shift+H",enabledForTables:!0}],[{key:"bold",name:function(){return T.ag._({id:"KmydK6"})},mark:"bold",icon:r5.c_,shortcut:"Mod+B",enabledForTables:!0},{key:"italic",name:function(){return T.ag._({id:"pzutoc"})},mark:"italic",icon:os.cJ,shortcut:"Mod+I",enabledForTables:!0},{key:"underline",name:function(){return T.ag._({id:"YyXtnN"})},mark:"underline",icon:oc.jm,shortcut:"Mod+U",enabledForTables:!0},{key:"strike",name:function(){return T.ag._({id:"WhOsNE"})},mark:"strike",icon:oa.b$,shortcut:"Mod+Shift+X"},{key:"code",name:function(){return T.ag._({id:"EWPtMO"})},mark:"code",icon:oi.dT,shortcut:"Mod+E"},{key:"math",name:function(){return T.ag._({id:"l8rp1O"})},apply:function(e){return e.commands.convertToMathInline()},icon:oo.eD,featureFlag:"math",shortcut:"$$",checkDisabled:function(){return!0}},{key:"removeFormatting",name:function(){return T.ag._({id:"bj5jMy"})},icon:or.Dv,apply:function(e){return e.chain().unsetAllMarks().focus().run()},enabledForTables:!0}],[{key:"link",name:function(){return T.ag._({id:"yzF66j"})},mark:"link",icon:on.nN,shortcut:"Mod+K"},{key:"footnote",name:function(){return T.ag._({id:"ONAJuB"})},icon:ot.dk,apply:function(e){(0,en.ZT)((0,en.zm)().footnote,et.fe.FORMATTING_MENU),e.chain().toggleFootnote().run()},checkActive:function(e){return e.isActive("footnoteLabel")},shortcut:"Mod+Alt+F",checkDisabled:function(e){return(0,t0.M)(e)||!(0,ea.P3)(e,"footnote")}}]].concat([tu.Ec],[[{key:"numbered",name:function(){return T.ag._({id:"M3G9ZD"})},icon:oe.nF,node:"numbered",checkActive:function(e){return(0,ou.S3)(e,od.W.Numbered)},shortcut:"Mod+/ or Mod+Shift+7",apply:function(e){return e.chain().toggleListItems({variant:od.W.Numbered}).focus().run()}},{key:"bullet",name:function(){return T.ag._({id:"ynb7Kh"})},icon:r7.gf,node:"bullet",checkActive:function(e){return(0,ou.S3)(e,od.W.Bullet)},apply:function(e){return e.chain().toggleListItems({variant:od.W.Bullet}).focus().run()},shortcut:"Mod+. or Mod+Shift+8"},{key:"todo",name:function(){return T.ag._({id:"rCIbrq"})},icon:r9.A8,node:"todo",checkActive:function(e){return(0,ou.S3)(e,od.W.Todo)},shortcut:"Mod+, or Mod+Shift+9",apply:function(e){var t=e.state.selection,n=t.from,r=t.to;e.chain().toggleListItems({variant:od.W.Todo}).run(),requestAnimationFrame(function(){return e.chain().focus().setTextSelection({from:n,to:r}).run()})}}],[{key:"convertText",name:function(){return T.ag._({id:"cXIM1U"})},icon:r6.jH},{key:"rewriteText",name:function(){return T.ag._({id:"C4t1b/"})},icon:r8.KC,featureFlag:"aiRewrite"}],[{key:"comment",name:function(){return T.ag._({id:"oFsfkI"})},icon:tK.Mz,checkDisabled:t0.M,apply:function(e){var t=e.state.selection,n=t.from,r=t.to,o=(0,ea.nv)(e.state.doc.resolve(n),function(e,t){return(0,ol.ZM)(t)}),i=(0,E.Z)(o,1)[0];if(!i){console.warn("[TEXT_FORMATTING_COMMANDS] Add comment - Unable to find annotatable parent for this selection");return}var a=(0,ea.E8)(e.state.doc,n,r,function(e){return"footnote"!==e.type.name},"__BLOCK_SEPARATOR_PLACEHOLDER").split("__BLOCK_SEPARATOR_PLACEHOLDER").join("<br /><br />");nm.pw.emit(nm.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:n,parentPos:i.pos,text:a})}}]]),op=function(e,t){var n;return!!(t.featureFlag&&!W.VH.get(t.featureFlag)||null!==(n=t.checkDisabled)&&void 0!==n&&n.call(t,e))||(t.node?!(0,ea.$E)(e,t.node):!!t.mark&&!(0,ea.by)(e,t.mark))},om=n(91930),oh=n(82904),og=n(47557),ov=n(28645),ob=n(17877),oy=n(45137),ox=n(44649),oj=n(28e3),ow=function(){var e=(0,en.zm)();return[{key:"toggle",name:function(){return T.ag._({id:"JFciKP"})},icon:ox.zc,node:"toggle",description:function(){return T.ag._({id:"rhfAX6"})},apply:function(t){(0,en.ZT)(e.toggle,et.fe.FORMATTING_MENU),t.chain().wrapWithToggle().run()},group:"wrap"},{key:"convertToNestedCard",name:function(){return T.ag._({id:"lOmsEK"})},node:"card",description:function(){return T.ag._({id:"gRMoQV"})},icon:oy.uF,apply:function(t){(0,en.ZT)(e.insertCardInside,et.fe.FORMATTING_MENU),t.chain().convertToNestedCard().run()},checkDisabled:function(e){return!e.schema.nodes.card||!(0,ea.P3)(e,"card")},group:"wrap"},{key:"blockquote",name:function(){return T.ag._({id:"OLMhPm"})},node:"blockquote",description:function(){return T.ag._({id:"2yuhT7"})},icon:ob.vV,shortcut:"> Quote",apply:function(e){return e.chain().wrapWithAnnotations("blockquote").run()},checkDisabled:function(e){return!(0,ea.P3)(e,"blockquote")},group:"wrap"},{key:"calloutBox",name:function(){return T.ag._({id:"1E4ojF"})},node:"calloutBox",description:function(){return T.ag._({id:"4Wf98Z"})},icon:ov.sq,apply:function(e){return e.chain().wrapWithAnnotations("calloutBox",{variant:"info"}).run()},checkDisabled:function(e){return!(0,ea.P3)(e,"calloutBox")},group:"wrap"},{key:"listToCards",name:function(){return T.ag._({id:"FJ18tL"})},icon:og.s2,description:function(){return T.ag._({id:"hWesxP"})},group:"list",apply:function(e){return e.commands.listToCards()},checkDisabled:function(e){return!(0,oj.Ah)(e)}}].concat((0,em.Z)(eS.Ne))},oO=function(e){var t=e.editor,n=e.testId,r=e.disabled,o=e.icon,i=e.label,a=ow().filter(function(e){return e.apply&&!op(t,e)});return 0===a.length?null:(0,ec.jsxs)(tA.v,{isLazy:!0,onClose:function(){return(0,tW.L)(t)},children:[(0,ec.jsx)(P.kH,{placement:"top",label:i,children:(0,ec.jsx)(tE.j,{isDisabled:r,as:L.z,variant:"toolbar","data-testid":n,onMouseDown:eo.br,rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),children:o&&(0,ec.jsx)(Z.G,{icon:o})})}),(0,ec.jsx)(Q.h,{children:(0,ec.jsx)(tD.q,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"400px",children:Object.entries({list:{label:T.ag._({id:"Ci8I/9"})},wrap:{label:T.ag._({id:"T4+jD7"})}}).map(function(e){var n=(0,E.Z)(e,2),r=n[0],o=n[1].label,i=a.filter(function(e){return e.group===r});return 0===i.length?null:(0,ec.jsx)(om.k,{title:o,children:i.map(function(e){var n=e.key,r=e.icon,o=e.name,i=e.description,a=e.apply;return(0,ec.jsxs)(oh.s,{value:n,icon:(0,ec.jsx)(Z.G,{icon:r,fixedWidth:!0}),onClick:function(){return a(t)},"data-testid":"text-convert-menu-".concat(n),children:[(0,ec.jsx)(K.x,{children:o()}),i&&(0,ec.jsx)(K.x,{color:"gray.400",fontSize:"sm",children:i()})]},n)})},r)})})})]})},ok=n(3440),oC=n.n(ok),oP=n(61967),oS=n(21494),oA=n(48963),oE=n(80578),oD=n(5590),oI=n(51549),oz=n(73308),oT=n(71210),oM=[{key:"rephrase.better",type:"rephrase",name:function(){return T.ag._({id:"zD3xDw"})},icon:n(60573).S,featureFlag:"aiRewrite",description:function(){return T.ag._({id:"YePdJg"})},apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"8nKskd"})})}},{key:"rephrase.expand",type:"rephrase",name:function(){return T.ag._({id:"K1q3tl"})},icon:oT.faUpDown,description:function(){return T.ag._({id:"Y2Kk1Q"})},apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"HyVgOT"})})},featureFlag:"aiRewrite"},{key:"rephrase.condense",type:"rephrase",name:function(){return T.ag._({id:"rqoYwb"})},icon:oz.G_,description:function(){return T.ag._({id:"+ZW8bU"})},apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"70o6lh"})})},featureFlag:"aiRewrite"},{key:"visualize.keypoints",type:"visualize",name:function(){return T.ag._({id:"n+v3I1"})},description:function(){return T.ag._({id:"E9axcX"})},icon:oI.oJ,node:"smartLayout",apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"bXgpVx"})})}},{key:"visualize.images",type:"visualize",name:function(){return T.ag._({id:"laUyeH"})},description:function(){return T.ag._({id:"ADlAam"})},icon:oD.l9,apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"p2oHY3"})})}},{key:"visualize.timeline",type:"visualize",name:function(){return T.ag._({id:"Oh+9k8"})},description:function(){return T.ag._({id:"Qx1qQH"})},icon:oE.cp,apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"4ReFRy"})})}},{key:"reformat.columns",type:"reformat",name:function(){return T.ag._({id:"KyPPwt"})},description:function(){return T.ag._({id:"52Y/fs"})},icon:oA.faTableColumns,node:"gridLayout",apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"Y0UR8y"})})}},{key:"reformat.table",type:"reformat",name:function(){return T.ag._({id:"84sVti"})},description:function(){return T.ag._({id:"CxvNve"})},icon:oS.B3,node:"table",apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"rU0fs4"})})}},{key:"reformat.toggles",type:"reformat",name:function(){return T.ag._({id:"aRUmvo"})},icon:oP.SG,node:"toggle",description:function(){return T.ag._({id:"914Ln8"})},apply:function(){nm.pw.emit("queueDesignPartnerTask",{message:T.ag._({id:"rivjMe"})})}}],oN=function(e){var t=e.editor,n=e.testId,r=e.disabled,o=e.icon,i=e.label,a=(0,nn.p)();return(0,ec.jsxs)(tA.v,{isLazy:!0,onClose:function(){return(0,tW.L)(t)},children:[(0,ec.jsx)(P.kH,{placement:"top",label:i,children:(0,ec.jsx)(tE.j,{isDisabled:r,as:L.z,variant:"toolbar","data-testid":n,onMouseDown:eo.br,rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),children:o&&(0,ec.jsx)(Z.G,{icon:o})})}),(0,ec.jsx)(Q.h,{children:(0,ec.jsx)(tD.q,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"450px",children:Object.entries(oC()(oM,"type")).map(function(e){var n=(0,E.Z)(e,2),r=n[0],o=n[1],i={rephrase:{label:T.ag._({id:"bKWhYP"})},visualize:{label:T.ag._({id:"6n7jtr"})},reformat:{label:T.ag._({id:"ILEG4I"})}}[r],c=i.label,s=i.featureFlag;if(!s||W.VH.get(s)){var l=o.map(function(e){if(!(!e.apply||op(t,e)))return(0,ec.jsxs)(oh.s,{value:e.key,icon:(0,ec.jsx)(Z.G,{icon:e.icon,fixedWidth:!0}),onClick:function(){return oR(e,t,a)},children:[(0,ec.jsx)(K.x,{children:e.name()}),e.description&&(0,ec.jsx)(K.x,{color:"gray.400",fontSize:"sm",children:e.description()})]},e.key)}).filter(Boolean);return l.length?(0,ec.jsx)(om.k,{title:c,children:l},r):null}})})})]})},oR=function(e,t,n){var r=e.apply;if(r){var o=r(t);if(o){var i=n({position:"top",isClosable:!1,duration:null,status:"loading",variant:"subtle",title:(0,ec.jsx)(z.cC,{id:"j4ZLea"})});o.then(function(){n.close(i);var e=n({title:(0,ec.jsxs)(V.U,{children:[(0,ec.jsxs)(K.x,{noOfLines:1,children:[(0,ec.jsx)(z.cC,{id:"hAmdL3"})," "]}),(0,ec.jsx)(nr.r,{textDecoration:"underline",onClick:function(){(0,no.Yw)(t.state),n.close(e)},children:(0,ec.jsx)(z.cC,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top"})}).catch(function(e){n.close(i),n({title:(0,ec.jsx)(z.cC,{id:"mTQLsL"}),description:e.message,status:"error",duration:3e3,position:"top"})})}}},oL=n(93319),o_=n(92703),oH=n(82956),oZ=n(15396),oB=function(e){var t;return(null===(t=e.find(function(e){return e.spec.isFirstChildFontSizeDecoration}))||void 0===t?void 0:t.spec)||{}};function oF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oF(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oU=e8.hj.create({name:"fontSize",addProseMirrorPlugins:function(){return[new eU.Sy({key:new eU.H$("fontSize"),props:{decorations:function(e){var t=[];if(e.doc.descendants(function(e,n){if(["calloutBox","smartLayoutCell"].includes(e.type.name)&&e.firstChild){var r=(0,oZ.Aw)(e.firstChild);t.push(nC.p.node(n,n+e.nodeSize,{},{isFirstChildFontSizeDecoration:!0,firstChildSize:r}))}}),0!=t.length)return nC.EH.create(e.doc,t)}}})]},addInputRules:function(){return Object.entries((0,o_.yw)()).map(function(e){var t=(0,E.Z)(e,2),n=t[0],r=t[1],o=r.inputRegex,i=r.type;return o?(0,oH.A0)({find:o,getAttributes:function(e){return"heading"!==i||oq(e).includes("heading")?{fontSize:n}:null}}):null}).filter(function(e){return!!e})},addKeyboardShortcuts:function(){var e=this;return Object.entries((0,o_.yw)()).reduce(function(t,n){var r=(0,E.Z)(n,2),o=r[0],i=r[1],a=i.level;return"heading"===i.type&&a?oW(oW({},t),{},(0,u.Z)({},"Mod-Alt-".concat(a),function(){return e.editor.commands.setFontSize(o)})):t},{})},addCommands:function(){return{setFontSize:function(e){return function(t){var n=t.tr,r=t.dispatch,o=t.state;return!r||(n.selection.ranges.forEach(function(t){var r=t.$from.pos,i=t.$to.pos,a=(0,oZ.hx)(e),c=a.type,s=a.level,l=o.schema.nodes;o.doc.nodesBetween(r,i,function(t,r){var o;if("footnote"===t.type.name)return!1;if(t.isTextblock){if("heading"===c&&!oq(t).includes("heading")){n.setNodeMarkup(r,l.heading,oW(oW({},t.attrs),{},{level:s})).setMeta("annotationEvent",{type:"update-node-attrs",pos:r});return}if("title"===c&&!oq(t).includes("title")){n.setNodeMarkup(r,l.title,oW(oW({},t.attrs),{},{level:s})).setMeta("annotationEvent",{type:"update-node-attrs",pos:r});return}null!==(o=t.type.spec.attrs)&&void 0!==o&&o.fontSize?n.setNodeMarkup(r,void 0,oW(oW({},t.attrs),{},{fontSize:e})).setMeta("annotationEvent",{type:"update-node-attrs",pos:r}):["heading","title"].includes(t.type.name)&&n.setNodeMarkup(r,l.paragraph,oW(oW({},t.attrs),{},{fontSize:e})).setMeta("annotationEvent",{type:"update-node-attrs",pos:r})}})}),!0)}}}},extendNodeSchema:function(e){var t;return{allowFontSizes:null!==(t=(0,e8.nU)((0,e8.Nl)(e,"allowFontSizes",e)))&&void 0!==t?t:""}}}),oG=function(e){var t=e.state,n=t.selection,r=n.from,o=n.to,i=(0,e8.b5)(t.doc,{from:r,to:o},function(e){return e.isTextblock}).reverse().map(function(e){return e.node.attrs.fontSize}).filter(function(e){return void 0!==e});return(0,em.Z)(new Set(i))},oq=function(e){var t,n;return null!==(t=null===(n=e.type.spec.allowFontSizes)||void 0===n?void 0:n.split(" "))&&void 0!==t?t:[]},oV=function(e){var t=e.editor,n=function(e){t.chain().focus().setFontSize(e).run()},r=t.state.selection.$from,o=(0,ea.$E)(t,"heading")||oq(r.parent).includes("heading"),i=(0,ea.$E)(t,"title")||oq(r.parent).includes("title"),a=(0,ea.$E)(t,"paragraph")||oq(r.parent).includes("body");if(!a&&!o&&!i)return null;var c=oG(t),s=t.isActive("title")?"title":t.isActive("heading")?"h".concat(t.getAttributes("heading").level):1===c.length&&c[0]||"default",l=(0,oZ.hx)(s),u=function(e){return"".concat(Math.sqrt(e),"em")};return(0,ec.jsxs)(tA.v,{closeOnSelect:!0,isLazy:!0,children:[(0,ec.jsx)(tE.j,{size:"sm",as:L.z,rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),variant:"toolbar",pl:2,children:l.label}),(0,ec.jsxs)(tD.q,{maxH:"min(25em, 45vh)",overflowY:"auto",minW:"240px",children:[a&&(0,ec.jsx)(tJ._,{type:"radio",value:s,children:(0,o_.be)().map(function(e){var t=(0,E.Z)(e,2),r=t[0],o=t[1],i=o.label,a=o.size,c=(o.flagged,o.shortcut);return(0,ec.jsx)(tQ.i,{value:r,onClick:function(){return n(r)},children:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(K.x,{fontSize:u(a),children:i}),(0,ec.jsx)(oL.L,{}),(0,ec.jsx)(K.x,{color:"gray.400",children:c})]})},r)})}),i&&(0,ec.jsx)(tJ._,{type:"radio",value:s,children:(0,o_.Yt)().map(function(e){var t=(0,E.Z)(e,2),r=t[0],o=t[1],i=o.label,a=o.size,c=o.shortcut;return(0,ec.jsx)(tQ.i,{value:r,onClick:function(){return n(r)},children:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(K.x,{fontSize:u(a),fontWeight:"bold",children:i}),(0,ec.jsx)(oL.L,{}),(0,ec.jsx)(K.x,{color:"gray.400",children:c})]})},r)})}),o&&(0,ec.jsx)(tJ._,{type:"radio",value:s,children:(0,o_.B8)().map(function(e){var t=(0,E.Z)(e,2),r=t[0],o=t[1],i=o.label,a=o.size,c=o.shortcut;return(0,ec.jsx)(tQ.i,{value:r,onClick:function(){return n(r)},children:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(K.x,{fontSize:u(a),fontWeight:"bold",children:i}),(0,ec.jsx)(oL.L,{}),(0,ec.jsx)(K.x,{color:"gray.400",children:c})]})},r)})})]})]})},o$=function(e){var t=e.editor,n=e.filterBy;return(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tX.h,{isAttached:!0,onMouseDown:eo.br,children:(0,ec.jsx)(oV,{editor:t})},"text"),of.map(function(e,r){return(0,ec.jsx)(tX.h,{spacing:0,size:"sm",onMouseDown:eo.br,_empty:{display:"none"},children:e.filter(function(e){return n?e[n]:e}).map(function(e){if(!op(t,e)){var n=e.key,r=e.name,o=e.shortcut,i=e.icon,a=e.mark,c=e.node,s=e.checkActive,l=e.apply||(a?function(e){return e.chain().toggleMark(a).focus().run()}:function(){}),u=s?s(t):a?t.isActive(a):c?t.isActive(c):void 0;return"textColor"===n?(0,ec.jsx)(tG,{shortcut:o,icon:i,editor:t},n):"rewriteText"===n?(0,ec.jsx)(oN,{editor:t,shortcut:o,icon:i,testId:n,label:r()},n):"convertText"===n?(0,ec.jsx)(oO,{editor:t,shortcut:o,icon:i,testId:n,label:r()},n):(0,ec.jsx)(tf.h,{label:r(),shortcut:o,isActive:u,onClick:function(){return l(t)},icon:i,testId:n},n)}})},r)})]})},oK=function(e){var t=e.editor,n=e.selection,r=n.isRowSelection(),o=n.isColSelection(),i=r&&o,a=(0,e8.Kk)(r4.CU)(n);a&&eU.qv.create(t.state.doc,null==a?void 0:a.pos);var c=Math.min(n.$anchorCell.pos,n.$headCell.pos),s=Math.max(n.$anchorCell.pos,n.$headCell.pos),u=t.schema.nodes[r3.name].spec,d=u.colMinPercent,f=u.newColSize,p=n.getTableNode(),m=(0,rH.Ux)(p.attrs.colWidths,f,d);return(0,ec.jsxs)(V.U,{spacing:1,children:[(0,ec.jsx)(o$,{editor:t,filterBy:l.enabledForTables}),(0,ec.jsx)(th,{}),r&&!i&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"1ct6G/"}),onClick:function(){t.commands.addRowBefore(),requestAnimationFrame(function(){t.commands.focus(c)})},testId:"add-row-before-button",children:(0,ec.jsx)(Z.G,{icon:rO.Mp})}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"JUmxSq"}),onClick:function(){t.commands.addRowAfter(),requestAnimationFrame(function(){t.chain().focus(s).goToNextCell().run()})},testId:"add-row-after-button",children:(0,ec.jsx)(Z.G,{icon:rO.Mp,rotation:180})}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"0cspe/"}),icon:td.$,onClick:function(){return t.chain().focus().deleteRow().run()},color:"red.500",testId:"delete-row-button"})]}),o&&!i&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"mwcRkO"}),onClick:function(){var e=(0,tn.zN)(t.state.selection).left;t.commands.addColumnBefore(e),requestAnimationFrame(function(){t.commands.focus(c)})},isDisabled:!m,testId:"add-col-before-button",children:(0,ec.jsx)(Z.G,{icon:rO.Mp,rotation:270})}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"/93cy4"}),onClick:function(){var e=(0,tn.zN)(t.state.selection).left;t.commands.addColumnAfter(e),requestAnimationFrame(function(){t.chain().focus(c).goToNextCell().run()})},isDisabled:!m,testId:"add-col-after-button",children:(0,ec.jsx)(Z.G,{icon:rO.Mp,rotation:90})}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"GAohqx"}),icon:td.$,onClick:function(){t.commands.deleteColumn(),requestAnimationFrame(function(){t.commands.focus(c)})},color:"red.500",testId:"delete-col-button"})]}),i&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"SOkhdm"}),icon:r_.ZC,onClick:function(){return t.commands.equalizeColumns()},testId:"equalize-columns-button"}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"HSI88F"}),icon:td.$,onClick:function(){return t.chain().focus().deleteTable().run()},color:"red.500",testId:"delete-table-button"})]})]})};function oY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oY(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oJ=[{component:oK,predicate:function(e){return e instanceof tn.Xc&&e.isColSelection()},offsetPx:16},{component:oK,predicate:function(e){return e instanceof tn.Xc&&e.isRowSelection()},offsetPx:12},{component:function(e){var t=e.editor,n=e.selection,r=t.getAttributes("link").href||"";return(0,ec.jsxs)(ec.Fragment,{children:[r&&(0,ec.jsx)(t3,{editor:t,selection:n}),!n.empty&&(0,ec.jsx)(tG,{editor:t}),(0,ec.jsx)(t4,{href:r,updateHref:function(e){return t.commands.updateSurroundingLink(e)},unlink:function(){t.commands.removeSurroundingLink()},editor:t,allowEditMetadata:!(0,tw.H7)(r)})]})},predicate:function(e,t){return e instanceof eU.Bs&&t.isActive("link")}},{component:function(e){var t=e.editor,n=t.getAttributes("button").href||"",r=(0,y.useCallback)(function(){return t.commands.handleButtonDelete(!1)},[t]);return(0,ec.jsxs)(V.U,{px:2,children:[[{name:T.ag._({id:"bjuYAW"}),key:"solid",icon:ts.r9},{name:T.ag._({id:"bCuf07"}),key:"outline",icon:tl.r9}].map(function(e){var n=e.name,r=e.icon,o=e.key;return(0,ec.jsx)(tf.h,{label:n,icon:r,onClick:function(){t.commands.updateAttributes("button",{variant:o})},isActive:t.isActive("button",{variant:o})},n)}),(0,ec.jsx)(th,{}),tu.Ec.map(function(e){var n=e.name,r=e.icon,o=e.checkActive,i=e.apply;if(o&&i)return(0,ec.jsx)(tf.h,{label:n(),icon:r,onClick:function(){i(t)},isActive:o(t)},n())}),(0,ec.jsx)(t4,{href:n,updateHref:function(e){return t.commands.updateAttributes("button",{href:e})},editor:t,allowEditMetadata:!1}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t,handleDelete:r})]})},predicate:function(e,t){return t.isActive("button")}},{component:function(e){var t=e.editor,n=e.selection,r=n.node,o=n.from;return(0,ec.jsx)(ec.Fragment,{children:(0,ec.jsxs)(tX.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,ec.jsxs)(rb.Lt,{isLazy:!0,children:[(0,ec.jsx)(rb.PS,{as:L.z,variant:"toolbar",rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt}),size:"sm","data-testid":"layout-preset-dropdown",children:(0,ec.jsx)(z.cC,{id:"6v+N4U",values:{0:r.childCount}})}),(0,ec.jsx)(rb.sV,{"data-in-editor-focus":!0,fontSize:"md",children:[{name:T.ag._({id:"oCWIE5"}),testId:"layout-preset-5050",image:rI,value:[50,50]},{name:T.ag._({id:"eWUI4Z"}),testId:"layout-preset-7030",image:rz,value:[70,30]},{name:T.ag._({id:"hOcihM"}),testId:"layout-preset-3070",image:rE,value:[30,70]},{name:T.ag._({id:"OnuuaA"}),testId:"layout-preset-3col",image:rA,value:[33.33,33.33,33.34]},{name:T.ag._({id:"hexbw8"}),testId:"layout-preset-4col",image:rD,value:[25,25,25,25]}].map(function(e){var n=e.testId,i=e.name,a=e.image,c=e.value;return(0,ec.jsx)(rb.hP,{"data-testid":n,icon:r&&JSON.stringify(c)===JSON.stringify(r.attrs.colWidths)?(0,ec.jsx)(tS.n,{w:"2rem"}):(0,ec.jsx)($.E,{h:"1rem",w:"2rem",objectFit:"cover",src:a.src}),onClick:function(){o&&t.commands.useLayoutPreset(o,c)},children:i},i)})})]}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})})},predicate:function(e){return e instanceof eU.qv&&(0,e7.SA)(e.node)}},{component:function(e){var t=e.editor,n=e.selection,r=e.decorations,o=n.node,i=n.from,a=(0,nc.v)({node:o,decorations:r,editor:t}),c=a.attrs,s=a.isNested,l=a.isFirstCard,u=(0,na.M)({id:"downloadCardAsImageDisclosure"}),d=u.isOpen,f=u.onOpen,p=u.onClose,m=(0,W.ye)("exportCard"),h=(0,y.useCallback)(function(){null==t||t.commands.duplicateCard(i)},[t,i]),g=(0,y.useCallback)(function(){null==t||t.commands.unnestCard(i)},[t,i]),v=(0,y.useCallback)(function(){null==t||t.chain().mergeCardsAtPos(i).focus().run()},[t,i]),b=(0,nn.p)(),x=(0,y.useCallback)(function(){var e=t.state.doc.nodeAt(i),n=e&&(0,ni.getCardTitle)(e.toJSON());t.chain().deleteCard(i).focus().run();var r=T.ag._({id:"0MWv65",values:{displayTitle:n?'"'.concat(n,'"'):"card"}}),o=T.ag._({id:"9uI/rE"}),a=b({title:(0,ec.jsxs)(V.U,{children:[(0,ec.jsx)(K.x,{noOfLines:1,children:r}),(0,ec.jsx)(nr.r,{textDecoration:"underline",onClick:function(){(0,no.Yw)(t.state),b.close(a)},children:o})]}),status:"info",duration:3e3,position:"top"})},[t,i,b]),j=(0,W.ye)("aiCardDesigner"),w=(0,y.useCallback)(function(){var e,t=null===(e=n.node)||void 0===e?void 0:e.attrs.id;if(t){var r=prompt("What do you want to change?",F.B);r&&B.T.emit("openSuggestionEditor",{cardId:t,userMessage:r})}},[n]);return(0,ec.jsx)(ec.Fragment,{children:(0,ec.jsxs)(tX.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"BTDPLo"}),testId:"duplicate-card",onClick:h,icon:nt.WM}),s&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"b+J8Wt"}),testId:"merge-into-parent-card",onClick:g,icon:ne.oK}),!s&&!l&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"kV34zB"}),testId:"merge-into-card-above",onClick:v,icon:t7.FP}),j&&(0,ec.jsx)(tf.h,{onClick:w,icon:t9.Hh,label:"Design with AI"}),(0,ec.jsx)(nj,{attrs:c}),m&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"xRJ+bN"}),testId:"download-card",onClick:f,icon:t6.fu}),(0,ec.jsx)(nh,{isOpen:d,onClose:p,cardId:c.id,editor:t})]}),(0,ec.jsx)(tp,{editor:t,handleDelete:x})]})})},predicate:function(e){var t=(0,e9.u)(e.$from.doc)||{},n=W.VH.get("card1InCard2"),r=t.cardLayoutsEnabled||n,o=e instanceof eU.qv&&(0,tr.KH)(e.node);return r&&o},offsetPx:0},{component:function(e){var t,n=e.editor,r=e.selection,o=e.decorations,i=r.node,a=r.from;nU(o);var c=i.attrs,s=null===(t=(0,O.CG)(e0.Pu).config)||void 0===t?void 0:t.accentBackgrounds,l=(0,e6.q9)(c.background,s),u=(0,y.useRef)(l),f=(0,y.useCallback)(function(e){(0,tW.y)(n,a,e)},[n,a]),p=(0,y.useCallback)(function(){s&&(n.commands.updateNestedAttributesAtPos(a,{background:s[u.current]}),u.current=(u.current+1)%s.length)},[s,n,a]),m=(0,nO.a)(),h=m.openBackgroundTab,g=(0,d.Z)(m,n7),v=i.attrs.background.type===nz.E.IMAGE;return(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(nO.S,rt(rt({editor:n},g),{},{updateNestedAttributes:f,background:c.background,isAccentImageDrawer:!0})),(0,ec.jsx)(tX.h,{spacing:1,size:"sm",alignItems:"center",children:"accent"===c.itemId&&(0,ec.jsxs)(ec.Fragment,{children:[s&&s.length>0&&(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"OVjfHO"}),children:(0,ec.jsx)(J.h,{onClick:p,variant:"toolbar",size:"sm",icon:(0,ec.jsx)(Z.G,{icon:nw.RJ}),boxSize:7,p:0,"aria-label":T.ag._({id:"OVjfHO"})})}),(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"Ov693i"}),children:(0,ec.jsx)(J.h,{onClick:h,variant:"toolbar",size:"sm",icon:(0,ec.jsx)(Z.G,{icon:ns.Vm}),boxSize:7,p:0,"aria-label":T.ag._({id:"Ov693i"})})}),v&&(0,ec.jsx)(n9,{editor:n,pos:a,node:i})]})})]})},predicate:function(e){return e instanceof eU.qv&&(0,e6.pt)(e.node)}},{component:function(e){var t=e.editor,n=e.selection,r=n.$from.parent.childCount<4,o=n.node.attrs.verticalAlign,i=(0,y.useCallback)(function(e){t.chain().updateAttributes("gridCell",{verticalAlign:e===o?null:e}).selectNodeAtPos(n.from).focus().run()},[t,o,n]);return(0,ec.jsxs)(tX.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,ec.jsx)(rv,{editor:t,label:T.ag._({id:"NFoeBH"}),icon:rk.rW}),r&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(th,{}),(0,ec.jsx)(tf.h,{label:T.ag._({id:"bZ9ges"}),icon:rO.Mp,iconRotation:270,onClick:function(){t.chain().insertContentAt(n.from,rP).run()},testId:"add-col-before-button"}),(0,ec.jsx)(tf.h,{label:T.ag._({id:"7ibPpM"}),icon:rO.Mp,iconRotation:90,onClick:function(){t.chain().insertContentAt(n.from+n.node.nodeSize,rP).run()},testId:"add-col-after-button"}),(0,ec.jsx)(rS,{editor:t,selection:n})]}),(0,ec.jsx)(tf.h,{onClick:function(){return i("start")},isActive:"start"===o,label:T.ag._({id:"/Q0jUh"}),children:(0,ec.jsx)(rC.dBc,{})}),(0,ec.jsx)(tf.h,{onClick:function(){return i("center")},isActive:"center"===o,label:T.ag._({id:"QhuQN2"}),children:(0,ec.jsx)(rC.RyY,{})}),(0,ec.jsx)(tf.h,{onClick:function(){return i("end")},isActive:"end"===o,label:T.ag._({id:"EPnxoe"}),children:(0,ec.jsx)(rC.pgY,{})}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t,handleDelete:function(){t.chain().selectInsideNodeAtPos(n.from).handleLayoutDelete(!0,!1).run()}})]})},predicate:function(e){return e instanceof eU.qv&&(0,e7._5)(e.node)}},{component:function(e){var t=e.editor,n=e.selection,r=n.node,o=n.from,i=r.attrs,a=i.options,c=i.variantKey,s=(0,rM.P)(c),l=(0,y.useCallback)(function(e){t.chain().updateAttributes("smartLayout",e).selectNodeAtPos(o).focus().run()},[t,o]),d=(0,y.useCallback)(function(e){l({variantKey:e})},[l]);return(0,ec.jsxs)(V.U,{spacing:2,children:[(0,ec.jsxs)(rb.Lt,{isLazy:!0,children:[(0,ec.jsx)(rb.PS,{as:L.z,variant:"toolbar",rightIcon:(0,ec.jsx)(Z.G,{icon:tP.pt,transform:"shrink-6"}),leftIcon:(0,ec.jsx)(Z.G,{icon:s.icon,fixedWidth:!0}),size:"sm","data-testid":"smart-layout-variant-dropdown",children:s.name()}),(0,ec.jsx)(rb.sV,{maxH:"min(25em, 45vh)",overflowY:"auto","data-in-editor-focus":!0,fontSize:"md",children:(0,rM.m)().map(function(e){var t=e.key,n=e.name,r=e.icon;if(e.disabled)return null;var o=c===t;return(0,ec.jsx)(rb.hP,{"data-test-variant-option":t,icon:o?(0,ec.jsx)(tS.n,{}):(0,ec.jsx)(Z.G,{icon:r,fixedWidth:!0}),onClick:function(){return d(t)},children:n()},t)})})]}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tX.h,{size:"sm",children:s.options.map(function(e){var n,r=e.key,o=e.Control,i=e.defaultValue,c=null!==(n=a[r])&&void 0!==n?n:i;return(0,ec.jsx)(o,{value:c,updateValue:function(e){l({options:rL(rL({},a),{},(0,u.Z)({},r,e))})},editor:t},r)})}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&(0,tt.G)(e.node)}},{component:function(e){var t=e.editor,n=e.selection,r=n.node,o=n.from,i=n.$from.parent,a=(0,y.useCallback)(function(){t.chain().insertSmartLayoutCell(n.from).run()},[t,n.from]),c=(0,y.useCallback)(function(){t.chain().insertSmartLayoutCell(n.from+n.node.nodeSize).run()},[t,n.from,n.node]),s=n.node.attrs,l=s.options,u=s.image,d=l.color,f=(0,y.useCallback)(function(e){t.commands.updateNestedAttributesAtPos(n.from,{options:{color:e}})},[t,n]);if(!i||!(0,tt.G)(i))return console.error("SmartLayoutCellFormattingMenu: parent is not a smartLayout"),null;var p=(0,rN.yU)(i.attrs),m=(0,rM.P)(i.attrs.variantKey),h=(0,tc.zd)((null==u?void 0:u.src)||(null==u?void 0:u.tempUrl)),g=m.options.includes(rT.M)||h,v="imagesText"===m.key&&!h;return(0,ec.jsxs)(tX.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,ec.jsx)(rv,{editor:t,label:T.ag._({id:"NFoeBH"}),icon:m.icon}),(0,ec.jsx)(th,{}),v&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(n9,{editor:t,pos:o,node:r}),(0,ec.jsx)(th,{})]}),(0,ec.jsx)(tf.h,{label:T.ag._({id:"w7mkyz"}),iconRotation:"bottom"===p?void 0:270,icon:rO.Mp,onClick:a,testId:"add-col-before-button"}),(0,ec.jsx)(tf.h,{label:T.ag._({id:"1e37Dl"}),icon:rO.Mp,iconRotation:"bottom"===p?180:90,onClick:c,testId:"add-col-after-button"}),g&&(0,ec.jsx)(t8.E,{editor:t,color:d,setColor:f,analyticsSource:"SmartLayoutCell"}),(0,ec.jsx)(rS,{editor:t,selection:n}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&(0,tt.E)(e.node)}},{component:function(e){var t=e.selection,n=e.editor,r=0===t.node.childCount,o=t.node.attrs.thumbHeight||ri.vf,i=(0,y.useCallback)(function(e){n.chain().updateAttributes("gallery",{thumbHeight:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,ec.jsxs)(V.U,{spacing:2,mr:2,children:[!r&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(K.x,{fontSize:"sm",fontWeight:"600",children:(0,ec.jsx)(z.cC,{id:"Cj2Gtd"})}),(0,ec.jsxs)(ro.iR,{"aria-label":"gallery-slider",min:5,max:15,step:.25,value:o,onChange:i,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,ec.jsx)(ro.Uj,{children:(0,ec.jsx)(ro.Ms,{})}),(0,ec.jsx)(ro.gs,{background:"trueblue.500"})]}),(0,ec.jsx)(th,{})]}),(0,ec.jsx)(tp,{editor:n})]})},predicate:function(e){return e instanceof eU.qv&&(0,te.N5)(e.node)}},{component:function(e){var t=e.editor,n=e.selection,r=n.node.attrs;return(0,ec.jsxs)(tX.h,{spacing:2,size:"sm",children:[Object.entries((0,ek.ri)()).map(function(e){var o=(0,E.Z)(e,2),i=o[0],a=o[1],c=a.name,s=a.icon;return(0,ec.jsx)(tf.h,{label:c,icon:s,isActive:r.icon&&r.variant===i,onClick:function(){t.chain().focus().updateAttributes("calloutBox",{variant:i,icon:!0}).selectNodeAtPos(n.from).run()}},c)}),(0,ec.jsx)(tf.h,{label:r.icon?(0,ec.jsx)(z.cC,{id:"Cs6LHm"}):(0,ec.jsx)(z.cC,{id:"pjF2Hd"}),icon:t5.gP,isActive:!r.icon,onClick:function(){t.chain().focus().updateAttributes("calloutBox",{icon:!r.icon}).selectNodeAtPos(n.from).run()}},"icon"),(0,ec.jsx)(t8.E,{color:r.color||void 0,setColor:function(e){t.chain().focus().updateAttributes("calloutBox",{color:e}).selectNodeAtPos(n.from).run()},editor:t,analyticsSource:"CalloutBox"}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&"calloutBox"===e.node.type.name}},{component:function(e){var t=e.editor,n=e.selection.node.type.name,r=t.getAttributes(n).fullWidthBlock,o=(0,y.useCallback)(function(e){var n,r;e.stopPropagation(),null===(n=(r=t.commands).editSelectedDrawingBlock)||void 0===n||n.call(r)},[t]);return(0,ec.jsxs)(tX.h,{spacing:0,size:"sm",alignItems:"center",children:[tu.Ec.map(function(e){var o=e.name,i=e.icon,a=e.checkActive,c=e.apply;if(a&&c)return(0,ec.jsx)(tf.h,{label:o(),icon:i,onClick:function(){c(t),r&&t.commands.updateAttributes(n,{fullWidthBlock:!1})},isActive:!r&&a(t)},o())}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ePK91l"}),icon:tg.Tz,onClick:o}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&"drawing"===e.node.type.name}},{component:function(e){var t=e.editor,n=e.selection,r=n.node.type.name,o=r===rp.Ee.name,i=n.node.attrs,a=i.resize,c=i.fullWidthBlock,s=i.id,l=(0,O.CG)(rp.Ig),u=(0,O.CG)((0,rp.v_)(s));(0,O.TL)();var d=!rf()({resize:a},{resize:rp.OT}),f=!!((null==a?void 0:a.clipPath)&&(null==a?void 0:a.clipType)),p=(0,rm.k)(t),m=p.setCropClipType,h=p.confirmCrop,g=p.cancelCrop,v=p.startCrop,b=p.resetCrop,x=(0,e3.Bh)(),j=(0,y.useCallback)(function(e){x(!0),e.stopPropagation()},[x]),w=(0,t2.d8)(n.node.attrs.id).enterZoom,k=(0,y.useCallback)(function(){(0,rh.rR)(n)},[n]),C=(0,t0.M)(t),P=(0,rh.u5)(n.$from),S=!P&&!C;return(0,ec.jsxs)(V.U,{spacing:0,children:[S&&(0,ec.jsxs)(ec.Fragment,{children:[u?(0,ec.jsx)(rw,{clipType:l,onChange:function(e){m({clipType:e})}}):(0,ec.jsx)(ec.Fragment,{children:tu.Ec.map(function(e){var n=e.name,o=e.icon,i=e.checkActive,s=e.apply;if(i&&s)return(0,ec.jsx)(tf.h,{label:n(),icon:o,onClick:function(){s(t),c&&t.commands.updateAttributes(r,{fullWidthBlock:!1,resize:rx(rx({},a),{},{width:null})})},isActive:!c&&i(t)},n())})}),(0,ec.jsx)(th,{})]}),(0,ec.jsxs)(tX.h,{spacing:0,size:"sm",alignItems:"center",children:[u?(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"6Z0nnS"}),icon:rs.Xn,isDisabled:!f,onClick:function(){b({id:s})}}),(0,ec.jsx)(tf.h,{color:"red.500",label:(0,ec.jsx)(z.cC,{id:"7Bn152"}),icon:ru.faXmark,onClick:function(){g({id:s})}}),(0,ec.jsx)(tf.h,{color:"green.500",label:(0,ec.jsx)(z.cC,{id:"ryQtQS"}),icon:ra.LE,onClick:function(){h({id:s})}})]}):(0,ec.jsxs)(ec.Fragment,{children:[o&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ACjxWW"}),icon:tY.q9,onClick:w}),o&&!C&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"oFsfkI"}),icon:tK.Mz,onClick:k}),o&&S&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"qKx+US"}),icon:rl._n,isActive:u,onClick:function(){v({id:s,clipType:null==a?void 0:a.clipType})}}),o&&S&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"5eaf8Z"}),icon:rs.Xn,isDisabled:!d,onClick:function(){t.chain().resetImageClip().resetImageScale().command(function(e){var t,n=e.commands;return!!(null!==(t=n.refreshBubbleMenu)&&void 0!==t&&t.call(n))}).run()}}),P&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(rv,{editor:t,label:T.ag._({id:"+v0hYZ"}),icon:rc.em}),(0,ec.jsx)(th,{})," "]}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ePK91l"}),icon:tg.Tz,onClick:j,testId:"edit-button"})]}),!u&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})]})]})},predicate:function(e){return e instanceof eU.qv&&("image"===e.node.type.name||"mediaPlaceholder"===e.node.type.name)}},{component:function(e){var t=e.editor,n=e.selection,r=(0,e3.Bh)(),o=(0,y.useCallback)(function(e){r(!0),e.stopPropagation()},[r]),i=(0,t0.M)(t),a=(0,te.u5)(n.$from),c=(0,y.useCallback)(function(){(0,te.rR)(n)},[n]),s=(0,t2.d8)(n.node.attrs.id).enterZoom;return(0,ec.jsxs)(tX.h,{spacing:0,size:"sm",alignItems:"center",children:[!a&&(0,ec.jsx)(t3,{editor:t,selection:n}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ACjxWW"}),icon:tY.q9,onClick:s}),!i&&(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"oFsfkI"}),icon:tK.Mz,onClick:c}),(0,ec.jsx)(tf.h,{label:(0,ec.jsx)(z.cC,{id:"ePK91l"}),icon:tg.Tz,onClick:o}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&(0,tc.Bp)(e.node)}},{component:function(e){var t=e.editor,n=e.selection.node.attrs.nested;return(0,ec.jsxs)(tX.h,{spacing:0,size:"sm",children:[(0,ec.jsx)(tf.h,{testId:"toc-top-level-cards",label:(0,ec.jsx)(z.cC,{id:"RiLgqi"}),icon:rr.Zr,onClick:function(){t.commands.updateAttributes("tableOfContents",{nested:!1})},isActive:!n}),(0,ec.jsx)(tf.h,{testId:"toc-nested-cards",label:(0,ec.jsx)(z.cC,{id:"nTkST4"}),icon:rn.vp,onClick:function(){t.commands.updateAttributes("tableOfContents",{nested:!0})},isActive:n})]})},predicate:function(e){return e instanceof eU.qv&&"tableOfContents"===e.node.type.name}},{component:function(e){var t=e.editor;return(0,ec.jsxs)(tX.h,{spacing:0,size:"sm",alignItems:"center",children:[tu.Ec.map(function(e){var n=e.name,r=e.icon,o=e.checkActive,i=e.apply;if(o&&i)return(0,ec.jsx)(tf.h,{label:n(),icon:r,onClick:function(){i(t)},isActive:o(t)},n())}),(0,ec.jsx)(th,{}),(0,ec.jsx)(tp,{editor:t})]})},predicate:function(e){return e instanceof eU.qv&&"contributors"===e.node.type.name}},{component:o$,predicate:function(e){return e instanceof eU.Bs}}],oQ={border:"1px solid",borderColor:"gray.200",backdropFilter:"blur(20px)",backgroundColor:"#F9FAFBEE",shadow:"lg"},o0=function(e){var t=e.editor,n=e.scrollingParentSelector;(0,eQ.F1)(t);var r=(0,P.o5)(),o=r.hideTooltips,i=r.GammaTooltipHiderContext,a=t.state.selection,c=oJ.find(function(e){return e.predicate(a,t)}),s=[];try{(0,e8.EG)(t.state.selection)&&(s=(0,tr.su)(t,t.state.selection.from))}catch(e){console.error("[FormattingMenu] unable to find decorations at ".concat(t.state.selection.from),e.message)}return(0,ec.jsx)(i,{children:(0,ec.jsx)(ta,{editor:t,onHide:o,tippyOptions:{maxWidth:"none",zIndex:"var(--chakra-zIndices-popover)",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom"]}},{name:"preventOverflow",options:{boundary:n?document.querySelector(n):void 0}}]}},children:c&&(0,ec.jsx)(h.xu,oX(oX({borderRadius:"xl"},oQ),{},{w:"auto",minW:"0px",position:"relative",bottom:c.offsetPx?"".concat(c.offsetPx,"px"):"0","data-in-editor-focus":!0,"data-testid":"formatting-menu",children:(0,ec.jsx)(V.U,{spacing:3,px:2,height:10,children:(0,ec.jsx)(c.component,{editor:t,selection:a,decorations:s})})}))})})},o1=n(61753),o2=n(79609);function o3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o3(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var o5=function(e){return(0,ec.jsx)(rq.lO,o4(o4({},e),{},{children:(0,ec.jsxs)(h.xu,{position:"relative","data-selection-ring":"padded",children:[(0,ec.jsx)(rZ.ms,{as:"blockquote"}),(0,ec.jsx)(h.xu,{position:"absolute",left:"0",top:"0",height:"100%",w:"var(--line-thickness)",backgroundColor:"var(--accent-color)",backgroundImage:"var(--accent-gradient)"})]})}))};function o8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o8(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var o9=o2.ZP.extend({group:"cardBlock layoutBlock footnoteBlock tableBlock",content:"(block | calloutBlock)+",addNodeView:function(){return(0,rZ.fW)(o5,{update:rF.E7})},addCommands:function(){var e;return o6(o6({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{unwrapQuoteOnDelete:function(){return function(e){var t=e.state,n=e.tr,r=t.selection;if(!r.empty)return!1;var o=(0,e8.Kk)(function(e){return e.type.name===o9.name})(r);if(!o||!(r.from<=o.pos+2))return!1;var i=r.$from.blockRange(r.$to);if(!i)return!1;var a=(0,nk.k9)(i);return!!a&&(n.lift(i,a),!0)}}})}}),o7=n(86900),ie=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,it=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,ir=o7.ZP.extend({addInputRules:function(){return[(0,e8.Cf)({find:ie,type:this.type}),(0,e8.Cf)({find:it,type:this.type})]},renderHTML:function(e){var t=e.HTMLAttributes;return["b",(0,e8.P1)(this.options.HTMLAttributes,t),0]}}),io=n(28703),ii=n(42789),ia=n(69551),ic=n(93897),is=function(e){var t=e.node,n=e.decorations,r=t.attrs,o=r.href,i=r.variant,a=(0,O.CG)(e0.Pw),c=(0,ic.v)(n),s=a&&c,l=(0,ii.H)({url:o}),u=l.linkUrl,d=l.handleClick,f="solid"===i?{backgroundColor:"var(--link-color)",backgroundImage:"var(--accent-gradient)",border:"0px"}:{border:"0.125em solid var(--link-color)",backgroundColor:"var(--card-color)"};return(0,ec.jsx)(rZ.T5,{children:(0,ec.jsx)(L.z,{as:s?h.xu:nr.r,variant:"unstyled",display:"inline-flex",cursor:a?"text":"pointer",userSelect:a?"auto":"none",href:u||void 0,onClick:d,style:f,_hover:{textDecoration:"none"},minW:"min(100%, 12em)",maxW:"100%",width:["100%","auto"],fontSize:"1em",py:"0.5em",minH:"2.75em",h:"auto",pl:"1em",pr:"1em",className:(0,eW.cx)("button",rU.wY,"solid"===i&&ia.LY),"data-export-as-image":!0,"data-export-link":o,transitionProperty:"none",sx:{"@media print":{width:"auto"}},children:(0,ec.jsx)(K.x,{as:"div",noOfLines:s?void 0:1,wordBreak:"break-all",className:ia.A8,style:{color:"solid"===i?"var(--link-color-inverted)":"var(--link-color)"},children:(0,ec.jsx)(rZ.ms,{})})})})},il=e8.NB.create({name:"button",content:"(text | emoji)*",marks:"",defining:!0,isolating:!0,selectable:!1,addNodeView:function(){return(0,rZ.fW)(is,{update:rF.E7})},addAttributes:function(){return{href:{default:""},variant:{default:"solid"}}},addCommands:function(){return{addButtonToGroup:function(e){return function(t){var n=t.state,r=t.chain,o=n.doc.nodeAt(e);if(!o||"buttonGroup"!==o.type.name)return!1;var i=e+o.nodeSize-1;return r().insertContentAt(i,ei.e.button).selectInsertedNode().run(),!0}},handleButtonDelete:function(e){return function(t){var n=t.dispatch,r=t.state,o=t.chain;if(!n)return!0;var i=(0,e8.Kk)(function(e){return"button"===e.type.name})(r.selection);if(!i||e&&!(0,ea.bR)(i.node))return!1;var a=(0,e8.Kk)(function(e){return"buttonGroup"===e.type.name})(r.selection);return!!a&&(1===a.node.childCount?o().deleteNode("buttonGroup").command(function(e){var t=e.tr,n=(0,io.E)(t.doc.resolve(a.pos));return n&&t.setSelection(n),!0}).focus().run():o().deleteNode("button").command(function(e){var t=e.tr,n=(0,io.E)(t.doc.resolve(i.pos-1),-1);return n&&t.setSelection(n),!0}).focus().run(),!0)}}}},parseHTML:function(){return[{tag:"button"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["button",(0,e8.P1)(t),0]}});function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ip=function(e){var t=e.node,n=e.editor,r=e.getPos,o=t.attrs.horizontalAlign,i=(0,O.CG)(e0.Pw),a=(0,eQ.TZ)(),c=(0,y.useCallback)(function(){n.commands.addButtonToGroup(r())},[n,r]),s=t.content.childCount;return(0,ec.jsx)(rq.lO,id(id({},e),{},{children:(0,ec.jsxs)(C.k,{w:"100%",justify:(0,tu.yg)(o)||"var(--flex-align)",_hover:{".add-button":{opacity:1}},direction:a?"column":"row","data-selection-ring":"padded",padding:"2px",margin:"-2px",borderRadius:"var(--box-border-radius)",align:"center",sx:{"> [data-node-view-content]":{width:a?"100%":"auto","[data-node-view-content-inner=buttonGroup]":{display:"flex",flexDirection:a?"column":"row",alignItems:"center",width:a?"100%":"auto","> div":{marginLeft:a?0:"0.75em",marginTop:a?"0.75em":0,width:a?"100%":"auto",_first:{marginLeft:0,marginTop:0}}}}},children:[(0,ec.jsx)(rZ.ms,{}),s<3&&i&&(0,ec.jsx)(C.k,{position:"relative",children:(0,ec.jsx)(J.h,{icon:(0,ec.jsx)(Z.G,{icon:rW.r8}),"aria-label":T.ag._({id:"6oU9VZ"}),size:"xs",variant:"plain",isRound:!0,onClick:c,opacity:"0",className:"add-button",transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",left:4,top:-3})})]})}))},im=e8.NB.create({name:"buttonGroup",content:"button{1, ".concat(3,"}"),group:"block",addNodeView:function(){return(0,rZ.fW)(ip,{update:rF.I_})},parseHTML:function(){return[{tag:"div[class=button-group]"},{tag:"buttons"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"button-group"}),0]},renderHTMLforAI:function(e){return e.node,["buttons",{},0]}}),ih=n(23533),ig=n(35878),iv=n(30726),ib=n(32371),iy=n(36392),ix=n(55052);function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ij(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iO=function(e){var t,n=e.node,r=e.editor,o=e.getPos,i=e.decorations,a=n.attrs,c=a.variant,s=a.icon,l=a.color,u=oB(i).firstChildSize,d=(0,ib.v0)(u),f=(0,iv.t)(i),p=f.theme,m=f.isDark,g=null!==(t=p.accentColor)&&void 0!==t?t:ig.uP,v=(0,ek.hw)(c),b=v.colorScheme,x=v.icon,j=l?ik(l):iC(m,b,g),w=j.backgroundColor,O=j.iconColor,k=j.bodyColor,C=(0,y.useCallback)(function(){r.isEditable&&r.commands.selectNodeAtPos(o())},[r,o]);return(0,ec.jsx)(rq.lO,iw(iw({},e),{},{children:(0,ec.jsxs)(h.xu,{backgroundColor:"".concat(w," !important"),pt:"0.25em",pb:"0.5em",px:"1em",className:"calloutBox",borderRadius:"var(--box-border-radius)",css:{"--body-color":k,"--heading-color":k},"data-selection-ring":!0,children:[(0,ec.jsxs)(V.U,{direction:"row",align:u?"baseline":"flex-start",spacing:"1em",children:[s&&(0,ec.jsx)(K.x,{sx:d,onClick:C,color:O,mt:u?void 0:"1em",contentEditable:!1,children:(0,ec.jsx)(Z.G,{icon:x,fixedWidth:!0})}),(0,ec.jsx)(rZ.ms,{style:{flex:"1 1 auto",minWidth:0},className:(0,eW.cx)(ia.LY)})]}),(0,ec.jsx)(r$.A,iw({},e))]})}))},ik=function(e){var t=(0,ih.DP)(e),n=t?(0,ih.m2)(e,.7):(0,ih.m2)(e,.3);return{backgroundColor:e,bodyColor:t?"white":"black",iconColor:n}},iC=function(e,t,n){var r=e?(0,ih.m2)("accent"===t?n:iy.Ox.dark[t].hex,.15):(0,ih.m2)("accent"===t?n:iy.Ox.light[t].hex,.85),o=e?"accent"===t?(0,ih.m2)(n,.7):ix.eR.dark[t].hex:"accent"===t?(0,ih.m2)(n,.3):ix.eR.light[t].hex;return{backgroundColor:r,bodyColor:e?"white":"black",iconColor:o}},iP=e8.NB.create({name:"calloutBox",group:"cardBlock layoutBlock footnoteBlock",content:"(block | calloutBlock)+",selectable:!0,isolating:!0,containerHandle:!0,addAttributes:function(){return{variant:{default:"note"},icon:{default:!0},color:{}}},addNodeView:function(){return(0,rZ.fW)(iO,{update:rF.E7})},parseHTML:function(){return[{tag:"aside"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["aside",(0,e8.P1)(t,{class:"calloutBox"}),0]}}),iS=n(41261),iA=n(47592),iE=n(9850),iD=n.n(iE),iI=n(60737),iz=n(53865),iT=n(74203),iM=n(33295),iN=n(6057),iR=n(3027),iL=function(e,t,n){var r=t.doc.resolve(e),o=e+r.nodeAfter.nodeSize,i=t.doc.nodeAt(o);if(!i||!(0,nE.KH)(i))return!1;var a=iH(t,o);if(!a)return!1;t.delete(o,o+i.nodeSize);var c=iB(t,e,!0);t.insert(c,a.node.content);var s={type:"merge-cards",contentPos:a.pos,insertPos:c};if(t.setMeta("annotationEvent",s),n.selection instanceof iR.Q){var l=(0,io.E)(t.doc.resolve(c));l&&t.setSelection(l)}return!0},i_=function(e,t){var n=t.doc.resolve(e);if(!n.nodeBefore)return!1;var r=e-n.nodeBefore.nodeSize,o=t.doc.nodeAt(r);if(!o||!(0,nE.KH)(o))return!1;var i=iH(t,e);if(!i)return!1;t.delete(e,e+n.nodeAfter.nodeSize);var a=iB(t,r,!0);t.insert(a,i.node.content);var c=(0,io.E)(t.doc.resolve(a));c&&t.setSelection(c);var s={type:"merge-cards",contentPos:i.pos,insertPos:a};return t.setMeta("annotationEvent",s),!0},iH=function(e,t){var n=(0,e6.wz)(e,t);return 0===Object.entries(n).length?{node:e.doc.nodeAt(t),pos:t}:n.body||null},iZ=function(e){var t=(0,ea.Ru)(e,function(e){return"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId||"card"===e.type.name});return 0===t.length?null:t[0]},iB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,e6.wz)(e,t),o=e.doc.resolve(t);if(0===Object.entries(r).length)return n?o.doc.resolve(o.start(o.depth+1)).end():t+1;if(!r.body)throw Error("Could not find card body at cardPos=".concat(t));var i=e.doc.resolve(r.body.pos);return n?i.doc.resolve(i.start(i.depth+1)).end():i.pos+1},iF=function(e,t){if(!e.empty)return!1;var n=e instanceof iR.Q;if(!(0,e8.xh)(e)&&!n)return!1;var r=e.from,o=e.$from;if(!t&&0!==o.parentOffset||t&&o.parentOffset!==o.parent.content.size)return!1;var i=iZ(o);if(!i)return!1;if(n)return t?r===i.pos+i.node.nodeSize-1:r===i.pos+1;for(var a=["paragraph","heading","title"],c=!0,s=o.depth;s>0;s--){var l=o.node(s);if("card"===l.type.name||(0,nE.pv)(l))break;if(!a.includes(l.type.name)){c=!1;break}}return!!c&&(t?r===i.pos+i.node.nodeSize-2:r===i.pos+2)};function iW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iW(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iG=/^(\*\*\*)/,iq=e8.hj.create({name:"cardCommands",addCommands:function(){return{splitCardAtSelection:function(){return function(e){return iV(e),!0}},insertNestedCard:function(){return function(e){var t=e.state,n=e.chain,r=e.dispatch,o=e.editor;if(!r)return!0;var i=t.selection,a=i.from,c=i.$from;return n().insertContentAndSelect(ei.e.insertCardInside).command(function(e){var t=e.tr,n=(0,ol.Mw)({editor:o,pos:a-c.parentOffset-1,tr:t});return n.length&&requestAnimationFrame(function(){var e,t;null===(e=(t=o.commands).moveAnnotations)||void 0===e||e.call(t,n)}),!0}).run(),!0}},convertToNestedCard:function(){return function(e){var t=e.state,n=e.dispatch,r=e.commands;if(!n)return!0;var o=(0,iI.ym)(t.schema.nodes[iS.Zb.name])(t,n);return r.selectInsertedNode(),o}},unnestCard:function(e){return function(t){var n=t.state,r=t.dispatch,o=t.chain,i=t.tr,a=n.doc.nodeAt(e);if(!a||!(0,tr.KH)(a))return!1;if(!r)return!0;var c=iH(i,e);if(!c)return!1;var s=e+a.nodeSize;return o().insertContentAt({from:e,to:s},c.node.toJSON().content).selectInsertedNode().command(function(t){return t.tr.setMeta("annotationEvent",{type:"merge-cards",contentPos:c.pos,insertPos:e}),!0}).run(),!0}},mergeCardsAtPos:function(e){return function(t){var n=t.tr,r=n.doc.nodeAt(e);return!!(r&&(0,tr.KH)(r))&&i_(e,n)}},mergeCardsOnDelete:function(e){return function(t){var n=t.tr,r=t.state;if(!t.dispatch)return!0;var o=r.selection,i=(0,e8.Kk)(tr.KH)(o);if(!i||!o.empty)return!1;try{if(!iF(o,e))return!1;return e?iL(i.pos,n,r):i_(i.pos,n)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}},insertCardAfter:function(){return function(e){var t=e.state,n=e.chain;if(!e.dispatch)return!0;var r=t.selection,o=(0,e8.Kk)(tr.KH)(r);if(!o)return!0;var i=o.pos+o.node.nodeSize,a=ei.e.insertCardInside;return n().insertContentAt(i,a).selectInsertedNode().scrollIntoView().run(),!0}},deleteCardIfEmpty:function(e){return function(t){var n=t.tr,r=t.dispatch,o=t.state;if(!r)return!0;var i=!1,a=o.selection,c=a.from,s=a.to;return o.doc.nodesBetween(c,s,function(t,r){if((0,tr.KH)(t)&&(0,iS.pr)(t)&&r>iN.k_){var o=n.doc.resolve(r).depth>1;n.deleteRange(r,r+t.nodeSize);var a=r+(o?0:e?1:-1),c=(0,io.E)(n.doc.resolve(a),e?1:-1);c&&n.setSelection(c),i=!0}}),i}},deleteCard:function(e){return function(t){var n=t.state,r=t.dispatch,o=t.tr;if(!r)return!0;var i=n.doc.resolve(e),a=i.depth>1,c=i.nodeAfter;if(!c||!(0,tr.KH)(c))return console.error("[CardExtension.deleteCard] Cannot delete card. Node unknown"),!1;o.delete(e,e+c.nodeSize);var s=(0,io.E)(o.doc.resolve(e-(a?0:1)),-1);return s&&o.setSelection(s),!0}},duplicateCard:function(e){return function(t){var n=t.state,r=t.chain,o=t.editor,i=n.doc.nodeAt(e);if(!i||!(0,tr.KH)(i))return console.error("[CardExtension.duplicateCard] Cannot duplicate card. Node unknown"),!1;var a=e+i.nodeSize,c=(0,iM.h)(iD()(i.toJSON()));return r().insertContentAt(a,c,{updateSelection:!1}).command(function(e){return e.tr.setMeta(iT.q,!0),!0}).run(),setTimeout(function(){o.chain().selectInsideNodeAtPos(a).focus().run()},200),!0}},rearrangeCards:function(e){var t=e.from,n=e.to,r=e.position;return function(e){var o,i=e.view,a=e.state,c=e.tr,s=a.doc.resolve(n),l=a.doc.resolve(t),u=l.pos+l.nodeAfter.nodeSize,d=new eU.qv(l),f=d.content();if((o="below"===r?s.pos+s.nodeAfter.nodeSize:"above"===r?s.pos:s.pos+s.nodeAfter.nodeSize-1)===l.pos)return c.setMeta("preventDispatch",!0),!0;c.delete(d.from,d.to);var p=c.mapping.map(o);c.replaceRangeWith(p,p,f.content.firstChild);var m=c.doc.resolve(p+1);c.setSelection(new eU.qv(m));var h={type:"move",insertPos:p,insertPosRaw:o,pos:l.pos,end:u};return c.setMeta("annotationEvent",h),i.focus(),!0}},rearrangeCardsById:function(e,t){return function(n){var r,o=n.dispatch,i=n.tr,a=n.editor;if(!o)return!0;var c=(0,nE.Y0)(a.state.doc);if(!c)return!1;var s=c.map(function(e){return e.node.attrs.id}),l=t.filter(function(e){return s.includes(e)}).map(function(e){return c.find(function(t){return t.node.attrs.id===e})}).filter(function(e){return!!e}),u=l.map(function(e){return{pos:e.pos,id:e.node.attrs.id}}).filter(function(e){var t=e.id;return t&&"string"==typeof t}),d=null===(r=l[0])||void 0===r?void 0:r.node.attrs.id;if(!d)return!0;var f=Math.max(e.findIndex(function(e){return e===d}),0),p=e[f-1],m=c.find(function(e){return e.node.attrs.id===p}),h=f>0&&m?m.pos+m.node.nodeSize:c[f].pos;if(void 0===h)return!0;(0,em.Z)(l).reverse().forEach(function(e){e&&i.replaceWith(h,h,e.node)}),l.forEach(function(e){if(e){var t=i.mapping.map(e.pos);i.delete(t,t+e.node.nodeSize)}});var g=(0,nE.Y0)(i.doc);if(!g)return!0;var v=g.map(function(e){return{pos:e.pos,id:e.node.attrs.id}}).filter(function(e){var n=e.id;return t.includes(n)}).map(function(e){var t,n=e.id,r=e.pos,o=null===(t=u.find(function(e){return e.id===n}))||void 0===t?void 0:t.pos;return o?{id:n,oldPos:o,newPos:r}:null}).filter(function(e){return!!e});return i.setMeta("annotationEvent",{type:"rearrange-cards",rearrangedCardPositions:v,insertPos:h}),!0}},updateThemeAccentImages:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=n.editor,o=n.commands,i=!e||0===e.length,a=0;return r.state.doc.descendants(function(n,r){var c=(0,e6.pt)(n);if(c||(0,tr.KH)(n)){var s=c&&n.attrs.background.type===nz.E.NONE;(n.attrs.background.source===iz.cx||t&&c||s)&&(i?o.updateAttributesAtPos(r,{background:{type:c?nz.E.NONE:void 0}}):(o.updateAttributesAtPos(r,{background:e[a%e.length]}),a++))}}),!0}},deleteCardsById:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=n.editor,o=n.dispatch,i=n.tr;if(!o)return!0;var a=(0,e8.N2)(r.state.doc,function(t){return(0,tr.KH)(t)&&e.includes(t.attrs.id)});if(!a.length)return!1;var c=a.map(function(e,t){return{pos:e.pos,cardIndex:t}});a.forEach(function(e){var t=e.node,n=e.pos;i=i.delete(i.mapping.map(n),i.mapping.map(n+t.nodeSize))});var s=a[0].pos,l=(0,eM.t)(i.doc.resolve(s));return l&&(i=i.setSelection(l)),t&&i.setMeta("annotationEvent",{type:"filmstrip-cut",deleted:c}),!0}},deleteCardsAfter:function(e){return function(t){var n=t.editor,r=t.dispatch,o=t.commands;if(!r)return!0;var i=(0,ea.sS)(n.state.doc.firstChild,function(e){return(0,tr.KH)(e)}).map(function(e){return e.node.attrs.id});if(null===e)return o.deleteCardsById(i);var a=i.indexOf(e),c=a>-1?i.slice(a+1):[];return 0===c.length||o.deleteCardsById(c)}}}},addInputRules:function(){return[new e8.VK({find:iG,handler:function(e){var t=e.state,n=e.range;iV({tr:t.tr.deleteRange(n.from,n.to),dispatch:!0})}})]}}),iV=function(e){var t=e.tr;if(e.dispatch){var n=t.selection,r=n.$from,o=(0,e8.Kk)(tr.KH)(n);if(!o){console.error("Couldn't find parent card while splitting",n);return}var i=n.$from.parentOffset,a=n.from-i-1,c=n.$from.node().content.size-n.$from.parentOffset;t.setMeta(iT.q,!0),t.setMeta("annotationEvent",{type:"split-card",splitPos:r.before()});var s=o.node,l=o.depth,u=s.type,d=s.attrs,f=r.depth-l+1;t.split(r.pos,f,[{type:u,attrs:iU(iU({},d),{},{layout:"blank"})}]);var p=(0,eM.G)(t,iN.W4).pos,m=t.doc.nodeAt(p).childCount;if(0===i&&(t.delete(a,a+t.doc.nodeAt(a).nodeSize),p=t.steps[t.steps.length-1].getMap().map(p)),0===c&&m>1){var h=p+1;t.delete(h,h+t.doc.nodeAt(h).nodeSize)}var g=(0,io.E)(t.doc.resolve(p+1));g&&t.setSelection(g).scrollIntoView()}},i$=n(79073),iK=n(73805),iY=n(21350),iX=n(35231),iJ=n(58539),iQ=e8.hj.create({name:"emptyNodes",addOptions:function(){return{emptyNodeClass:"is-empty",showOnlyWhenEditable:!0,showOnlyCurrent:!1}},addProseMirrorPlugins:function(){var e=this;return[new eU.Sy({key:new eU.H$("emptyNodes"),props:{decorations:function(t){var n=t.doc,r=t.selection,o=[],i=e.editor.isEditable||!e.options.showOnlyWhenEditable,a=r.anchor;if(i)return n.descendants(function(t,n){if(t.isTextblock||["gallery","cardLayoutItem"].includes(t.type.name)){var r=a>=n&&a<=n+t.nodeSize,i=(0,ea.$y)(t);(r||!e.options.showOnlyCurrent)&&i&&o.push(nC.p.node(n,n+t.nodeSize,{class:e.options.emptyNodeClass},{isEmpty:!0}))}}),nC.EH.create(n,o)}}})]}}),i0=function(e){return e.some(function(e){return e.spec.isEmpty})},i1=n(11723),i2=n(94804),i3={marginLeft:"1em",path:{stroke:"var(--body-color) !important"}},i4=function(){var e=(0,O.CG)(e0.Pu),t=(0,rG.c)(e).ornaments;if(!t)return null;var n=t[0],r=n.image;return(0,ec.jsx)(h.xu,{position:"absolute",right:"0",top:"0",width:r.width,height:r.height,maxH:"100%",overflow:"hidden",sx:i3,children:(0,ec.jsx)(i2.Z,{src:r.src})},n.key)},i5=n(48745),i8=n(280),i6=n(19386),i9=n(49747),i7=function(e){var t=e.isVisible,n=e.setLayout,r=e.editor,o=(0,S.Yy)(),i=o?"invert(.8) brightness(1.2)":"invert(0)";return(0,ec.jsx)(P.Wk,{isDark:o,children:(0,ec.jsx)(i9.U,{in:t,onAnimationComplete:function(){var e,t;null===(e=(t=r.commands).refreshBubbleMenu)||void 0===e||e.call(t)},children:(0,ec.jsxs)(R.K,{overflow:"hidden",mx:16,mb:12,contentEditable:!1,onMouseDown:eo.br,cursor:"default",children:[(0,ec.jsx)(K.x,{color:"var(--body-color-muted)",fontSize:"sm",fontFamily:"Inter",fontWeight:"normal",children:(0,ec.jsx)(z.cC,{id:"q+/7Td"})}),(0,ec.jsxs)(tX.h,{spacing:1,children:[(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"loNm+3"}),h:"auto",p:1,variant:"ghost",onClick:function(){return n("top")},icon:(0,ec.jsx)($.E,{src:"/_next/static/media/layout-top.bb63e01e.svg",filter:i})}),(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"dL4qXb"}),h:"auto",p:1,variant:"ghost",onClick:function(){return n("left")},icon:(0,ec.jsx)($.E,{src:"/_next/static/media/layout-left.deebff4d.svg",filter:i})}),(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"kVQU97"}),h:"auto",p:1,variant:"ghost",onClick:function(){return n("right")},icon:(0,ec.jsx)($.E,{src:"/_next/static/media/layout-right.af6aebc7.svg",filter:i})}),(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"3eqz61"}),h:"auto",p:1,variant:"ghost",onClick:function(){return n("behind")},icon:(0,ec.jsx)($.E,{src:"/_next/static/media/layout-behind.f3d267a6.svg",filter:i})})]})]})})})};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var an=function(e,t,n){if(n)return{};if("behind"===e||"blank"===e)return{borderRadius:"var(--card-border-radius)"};if("left"===e)return"accent"===t?{borderLeftRadius:"var(--card-border-radius)"}:"body"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("right"===e)return"body"===t?{borderLeftRadius:"var(--card-border-radius)"}:"accent"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("top"===e||"mobileStacked"===e){if("body"===t)return{borderBottomRadius:"var(--card-border-radius)"};if("accent"===t)return{borderTopRadius:"var(--card-border-radius)"}}return{}},ar=function(e){var t=e.node,n=e.getPos,r=e.decorations,o=e.editor,i=t.attrs,a=i.background,c=nU(r),s=(0,i5.$D)(r).isNested,l=(null==c?void 0:c.layout)==="blank",u=l?{}:(0,iX.wh)(a,!1),d=an(c.layout,i.itemId,"full"===c.cardSize),f={flexDirection:"column",justifyContent:i.verticalAlign||"var(--card-vertical-align)"},p=(0,e6.$U)(null==c?void 0:c.layout),m=p&&!p.items[i.itemId],h=(0,i6.D)(c.cardId),g=(0,E.Z)(h,1)[0],v=i0(r),b=(0,O.CG)(e0.hN),x=(0,i1.Od)(r),j=(0,i8.W)(),w=(0,y.useCallback)(function(e){var t=(0,ea.nv)(o.state.doc.resolve(n()),nE.KH),r=t.length>0?t[0].pos:null;r&&o.chain().setCardLayout(r,e,j).selectInsideCardBody(r).focus().run()},[o,n,j]);return(0,ec.jsx)(rZ.T5,{as:"div",style:at({},m?{display:"none"}:{}),children:(0,ec.jsxs)(C.k,at(at(at(at({"data-content-reference":!0,className:"card-layout-cell-bg",w:"100%",h:"100%",position:"relative","data-selection-ring":!0,"data-selection-background":!0},u),"presentCurrent"!==g&&d),f),{},{children:[l&&(0,ec.jsx)(i4,{}),(0,ec.jsx)(rZ.ms,{as:"div",style:{width:"100%"}}),b&&v&&!s&&(0,ec.jsx)(i7,{isVisible:l&&x,setLayout:w,editor:o})]}))})},ao=n(5811),ai=["hasImage","onEditImage"];function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var as=function(e){var t=e.hasImage,n=e.onEditImage,r=(0,d.Z)(e,ai),o=!!n;return t?null:(0,ec.jsx)(C.k,ac(ac(ac({align:"center",justify:"center",pos:"absolute",inset:0,role:"group",cursor:"default"},t?{}:{bgColor:"gray.200"}),r),{},{children:(0,ec.jsx)(C.k,{pos:"absolute",inset:0,justify:"center",align:"center",cursor:o?"pointer":void 0,_hover:o?{filter:"brightness(0.7)"}:void 0,onClick:n,children:(0,ec.jsx)(h.xu,{color:"gray.400",children:(0,ec.jsx)(Z.G,{icon:ns.Vm,size:"3x"})})})}))};function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ad=function(e){var t=e.editor,n=e.node,r=e.getPos;(0,y.useEffect)(function(){"cardLayoutItem"===n.type.name&&"accent"===n.attrs.itemId&&setTimeout(function(){t.commands.command(function(e){var o=e.tr;return(0,e6.BA)(o,r(),n,t.schema),!0})})},[t,r,n])},af=function(e){var t=e.node,n=e.decorations,r=e.editor,o=e.getPos,i=t.attrs;ad(e);var a=(0,nq.q)(),c=a.isOpen,s=a.onOpen,l=a.onClose,u=(0,y.useState)(0),d=u[0],f=u[1],p=i.background,m=(0,y.useCallback)(function(){r.commands.selectNodeAtPos(o())},[r,o]),g=(0,y.useCallback)(function(){m(),s()},[s,m]),v=nU(n),b=null==v?void 0:v.cardId,x=(null==v?void 0:v.layout)==="behind",j=(0,iX.wh)(p,!1,r.isThumbnail),w=!!(0,e6.$U)(v.layout).items[i.itemId],k=an(v.layout,i.itemId,"full"===v.cardSize),P="none"===p.type||p.type===nz.E.IMAGE&&!p.image,S=(0,O.CG)(e0.hN),A=(0,y.useCallback)(function(e){r.commands.updateNestedAttributesAtPos(o(),e)},[r,o]),E=(0,O.CG)(e0.Pu),D=E.config.accentBackgroundsColorize&&(0,iX.wh)(E.config.accentBackgroundsColorize,!1);return((0,y.useEffect)(function(){return ao.T.on("toggleEditBackgroundDrawer",function(e){var t=e.openDrawer,n=e.cardId;t&&n===b&&s()})},[b,s]),w)?(0,ec.jsx)(rZ.T5,{as:"div",children:(0,ec.jsxs)(C.k,au(au(au(au({"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",w:"100%",h:"100%",position:"relative","data-selection-ring":!0,"data-selection-background":!0,"data-card-layout":null==v?void 0:v.layout},j),k),{flexDirection:"column",justifyContent:"center"}),{},{onClick:m,children:[D&&(0,ec.jsx)(h.xu,au(au({position:"absolute",inset:"0",borderRadius:"inherit"},D),{},{mixBlendMode:"color"})),x&&(0,ec.jsx)(iJ.g5,{background:p}),(0,ec.jsx)(rZ.ms,{as:"div",style:{width:"100%"}}),S&&(0,ec.jsx)(nO.S,{editor:r,isOpen:c,onClose:l,tabIndex:d,setTabIndex:f,updateNestedAttributes:A,background:null==i?void 0:i.background,enableMask:x,isAccentImageDrawer:!0}),(0,ec.jsx)(as,au({hasImage:!P,onEditImage:S?g:void 0},k))]}))}):null};function ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ah=function(e){return"accent"===e.node.attrs.itemId?(0,ec.jsx)(af,am({},e)):(0,ec.jsx)(ar,am({},e))};function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var av=e8.NB.create({name:"cardAccentLayoutItem",group:"cardLayoutItemGroup",selectable:!1,atom:!0,draggable:!1,imageKeyPath:"background.image",addAttributes:function(){return{itemId:{default:"accent"},background:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({default:{type:nz.E.NONE}},(0,ea.sw)("background"))}},addNodeView:function(){return(0,rZ.fW)(ah,{update:rF.E7})},addStorage:iY.gk,parseHTML:function(){return[{tag:"div[class=card-accent-layout-item][bookmark]",getAttrs:(0,iY.xF)(this.storage)},{tag:"div[class=card-accent-layout-item]"}]},renderHTMLforAI:function(e){var t=e.node,n=(0,iY.ml)(this.storage,t),r=t.attrs.background;return["div",{bookmark:n,class:"card-accent-layout-item",alt:r.image&&(0,iK.K)(r.image)}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"card-accent-layout-item"})]}}),ab=n(96412),ay=n(13089),ax=new eU.H$("cardLayoutResizing"),aj=function(){function e(){(0,ab.Z)(this,e),(0,u.Z)(this,"activeHandle",null),(0,u.Z)(this,"side",void 0),(0,u.Z)(this,"dragging",null)}return(0,ay.Z)(e,[{key:"getActiveHandleAbs",value:function(e){return this.activeHandle?(0,nQ.XV)(e,this.activeHandle):null}},{key:"reset",value:function(){return this.activeHandle=null,this.side=null,this.dragging=null,this}},{key:"setHandle",value:function(e,t){return null===t.setHandle?(this.activeHandle=null,this.side=null):(this.activeHandle=(0,nQ.jS)(e,t.setHandle.pos),this.side=t.setHandle.side),this}},{key:"setDragging",value:function(e){return this.dragging=e.setDragging,this}},{key:"apply",value:function(e,t){var n=e.getMeta(ax);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}}]),e}(),aw=n(73010),aO=function(e){return ax.getState(e.state)},ak=function(e,t){e.dispatch(e.state.tr.setMeta(ax,{setHandle:t}))},aC=function(e,t){e.dispatch(e.state.tr.setMeta(ax,{setDragging:t}))},aP=function(e){e.dispatch(e.state.tr.setMeta(ax,{reset:!0}))},aS=function(e,t){if(!(!e.editable||!t.target||t.target.closest(".column-resize-handle"))){var n=aO(e);if(!n.dragging){var r=function(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n||-1===n.inside)return null;var r=e.domAtPos(n.inside);if(!r)return null;var o=r.node.childNodes[r.offset];if(!o)return null;var i=e.state.doc.resolve(n.inside);if(!i.nodeAfter||!(0,nE.pv)(i.nodeAfter))return null;var a=(0,ea.nv)(i,nE.KH)[0];if(!a||!(0,e6.$U)(a.node.attrs.layout).allowResizing)return null;var c=o.getBoundingClientRect(),s=c.left,l=c.right;if(t.clientX-s<=5){var u=e.posAtCoords({left:t.clientX-10,top:t.clientY});if(!u)return null;var d=e.state.doc.nodeAt(u.inside);return d&&(0,nE.pv)(d)?"cardLayoutItem"===d.type.name?{pos:u.inside,side:"right"}:{pos:i.pos,side:"left"}:null}if(l-t.clientX<=5){var f=e.posAtCoords({left:t.clientX+10,top:t.clientY});if(!f)return null;var p=e.state.doc.nodeAt(f.inside);return p&&(0,nE.pv)(p)?"cardLayoutItem"===p.type.name?{pos:f.inside,side:"left"}:{pos:i.pos,side:"right"}:null}return null}(e,t),o=n.getActiveHandleAbs(e.state),i=n.side;null===o&&null===r||r&&r.side===i&&r.pos===o||ak(e,r)}}},aA=function(e,t){var n=e.domAtPos(t);return n.node.childNodes[n.offset].offsetWidth},aE=function(e,t){var n=e.domAtPos(t.start()),r=n.node,o=n.offset,i=r.childNodes[o];do if(i&&i.classList&&i.classList.contains("node-card"))break;while(i=i.parentNode);return i},aD=function(e,t,n){var r=(0,e6.$U)(n),o=t.querySelector('[data-node-view-content-inner="card"]'),i=e.attrs,a=(null==o?void 0:o.style.gridTemplateColumns)||i.layoutTemplateColumns||r.grid.gridTemplateColumns;if(!a)return null;var c=a.split(" ");if(!c.length)return null;var s=c[0].includes("fr"),l=[];if(s){var u=c.map(function(e){return+e.replace("fr","")}),d=u.reduce(function(e,t){return e+t},0);l=u.map(function(e){return e/d*100})}else l=c.map(function(e){return+e.replace("%","")});return l};function aI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var az=e8.NB.create({name:"cardLayoutItem",group:"cardLayoutItemGroup",content:"(block | cardBlock)+",selectable:!1,draggable:!1,isolating:!0,containerHandle:!0,priority:rB.a.CardLayoutItem,addAttributes:function(){return{itemId:{default:"body"},background:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({default:{}},(0,ea.sw)("background"))}},addNodeView:function(){return(0,rZ.fW)(ah,{update:rF.E7})},addCommands:function(){return{handleCardAccentDelete:function(){return function(e){var t=e.state,n=e.commands;if(!(0,e8.EG)(t.selection))return!1;var r=t.selection.node;if(!(0,e6.pt)(r))return!1;var o=(0,e8.Kk)(nE.KH)(t.selection);return!!o&&n.setCardLayout(o.pos,"blank")}},selectInsideCardBody:function(e){return function(t){var n=t.state,r=t.tr,o=t.commands,i=n.doc.nodeAt(e);if(!i||!(0,nE.KH)(i))return!1;var a=(0,e6.wz)(r,e);if(0===Object.entries(a).length)return o.selectInsideNodeAtPos(e);var c=a.body;return!!c&&o.selectInsideNodeAtPos(c.pos)}},setCardLayout:function(e,t,n){return function(r){var o=r.tr,i=r.editor;return(0,nD.G)(i,o,e,t,n)}}}},parseHTML:function(){return[{tag:"div[class=card-layout-item]"}]},addProseMirrorPlugins:function(){var e;return[(e=this.editor,new eU.Sy({key:nW,filterTransaction:function(e,t){if(!e.docChanged||!((0,e8.EG)(t.selection)&&(0,nE.pv)(t.selection.node))||e.steps.every(function(e){return e instanceof nk.Cj})||e.getMeta("imageUploadUpdateAttrs"))return!0;var n=(0,nS.Z)(e).every(function(t){var n=e.before.nodeAt(t.oldStart);return!n||!(0,nE.pv)(n)});return n||console.warn("[CardLayoutPlugin] blocking transaction with CardLayoutItem selected"),n},appendTransaction:function(t,n,r){if(t.some(function(e){return e.docChanged})&&!n.doc.eq(r.doc)&&(0,e9.u)(e.state.doc).cardLayoutsEnabled){var o=r.tr,i=(0,e8.XP)(n.doc,t);return(0,nS.Z)(i).forEach(function(t){var n={from:t.newStart,to:t.newEnd};(0,e8.b5)(r.doc,n,function(e){return"card"===e.type.name}).forEach(function(t){var r=t.pos;if(!(r<n.from)){var i=o.mapping.map(r),a=o.doc.nodeAt(i);if(a){var c=(0,e6.$U)(a.attrs.layout);(0,e6.Ux)(o,i,e.schema,c)}}})}),o}},props:{handleDOMEvents:{drop:function(t,n){var r=t.state.tr,o=nH(t,n);if(o&&o.isImageUpload){n.preventDefault();var i=o.pos;(0,nD.G)(e,r,i,o.layout);var a=(0,e6.wz)(r,i).accent;if(!a)throw Error("Could not find accent after setting card layout=".concat(o.layout," at pos=").concat(o.pos));return(0,nA.j)(e,r,o.file,a.pos),t.dispatch(r),!0}return!1}},handleDrop:function(t,n,r){return nF(e,t,n,r)},decorations:function(e){var t=e.doc,n=[];return t.descendants(function(e,r){if("card"===e.type.name){var o=t.resolve(r),i=(0,ea.nv)(o,nE.KH).map(function(e){return e.node}),a=(0,nP.ws)((0,O.bh)().getState()),c=(0,e6.Hh)({parentCards:i,layout:e.attrs.layout,isMobileDevice:a});e.forEach(function(t,r){var i=o.pos+r+1;if((0,nE.pv)(t)){var a={cardId:e.attrs.id,isCardLayoutDecoration:!0,layout:c,cardSize:e.attrs.cardSize};n.push(nC.p.node(i,i+t.nodeSize,(0,u.Z)({},"data-layout-item-id",t.attrs.itemId),a))}})}}),nC.EH.create(t,n)}}})),new eU.Sy({key:ax,state:{init:function(){return new aj},apply:function(e,t,n,r){return t.apply(e,r)}},props:{attributes:function(e){return null!==ax.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""}},handleDOMEvents:{mousemove:function(e,t){return!!W.VH.get("cardLayoutResizing")&&(aS(e,t),!1)},mouseleave:function(e){var t;return!!W.VH.get("cardLayoutResizing")&&(null===(t=aO(e)).getActiveHandleAbs(e.state)||t.dragging||ak(e,null),!1)},mousedown:function(e,t){return!!W.VH.get("cardLayoutResizing")&&(!function(e,t){if(e.editable){var n=aO(e),r=n.getActiveHandleAbs(e.state);if(null!==r&&!n.dragging){var o=e.state.doc.resolve(r),i=o.node(),a=aE(e,o),c=a.querySelector('[data-node-view-content-inner="card"]');if(c){var s=n.side,l=c.offsetWidth,u=aA(e,r),d=aD(i,a,i.attrs.layout);if(d){aC(e,{startX:t.clientX,startWidth:u,colWidths:d,totalWidth:l,colIndex:0});var f=null;return window.addEventListener("mouseup",p),window.addEventListener("mousemove",m),t.preventDefault()}}}}function p(){window.removeEventListener("mouseup",p),window.removeEventListener("mousemove",m);var t=aO(e);if(t.dragging){if(null===f){aC(e,null);return}if(t.dragging)try{var n,r,o,i,a,c,s=t.getActiveHandleAbs(e.state);n=f,r=e.state.doc.resolve(s).before(),o=n.map(function(e){return"".concat(e,"%")}).join(" "),i=e.state.tr.setNodeAttribute(r,"layoutTemplateColumns",o),e.dispatch(i),a=e.state.doc.resolve(s),(c=aE(e,a).querySelector('[data-node-view-content-inner="card"]'))&&(c.style.gridTemplateColumns=""),aC(e,null)}catch(t){aP(e)}f=null}}function m(t){if(!t.which)return p();var n=aO(e),r=n.getActiveHandleAbs(e.state);if(n.dragging&&null!==r){var o,i,c=n.dragging.colWidths,l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.totalWidth,o=t.clientX-e.startX;return nJ()(100*o/r/n,0)*n}(n.dragging,t,.1),u=c[0],d="left"===s?[25,37.5,50]:[50,62.5,75],m=u+l<d[0]?d[0]:u+l>d[d.length-1]?d[d.length-1]:d.find(function(e){return 6.25>=Math.abs(e-u-l)});o=f=(0,rH.GI)(c,0,m-u,25),(i=a.querySelector('[data-node-view-content-inner="card"]'))&&(i.style.gridTemplateColumns=o.map(function(e){return"".concat(e,"%")}).join(" ")),(0,aw.CI)(a)}}}(e,t),!1)}},decorations:function(e){var t=ax.getState(e),n=t.getActiveHandleAbs(e);if(null!==n){var r=[];try{var o=document.createElement("div");o.className="column-resize-handle ".concat(t.side),r.push(nC.p.widget(n+1,o));var i=e.doc.nodeAt(n);return r.push(nC.p.node(n,n+i.nodeSize,{class:"has-column-resize-handle"})),nC.EH.create(e.doc,r)}catch(e){return console.error("(caught) cardLayoutResizing error: ".concat(e.message)),nC.EH.empty}}},nodeViews:{}}})]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"card-layout-item"}),0]}}),aT=e8.hj.create({name:"replaceCardAccent",priority:rB.a.ReplaceCardAccent,addProseMirrorPlugins:function(){var e=this.editor;return[new eU.Sy({props:{handleDOMEvents:{drop:function(t,n){var r=t.state.tr,o=nL(t,n);return!!o&&!!o.isImageUpload&&(n.preventDefault(),(0,nA.j)(e,r,o.file,o.pos),t.dispatch(r),!0)}},handleDrop:n_}})]}}),aM=n(72360),aN=n(48322),aR=n(66724),aL=n(18751);function a_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var aH=function(e){return(0,ec.jsx)(h.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a_(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({bg:"var(--body-color)",opacity:"0.4",borderRadius:"sm"},e))},aZ=n(63944),aB=n(14115),aF=n(17033),aW=n(35837),aU=n(34717),aG=n(8635),aq=n(94864),aV=n(22884),a$=n(13306),aK=n(89997);function aY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aY(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aJ=(0,y.memo)(function(e){var t=e.cardId,n=e.docId,r=e.editor,o=e.cards,i=e.level,a=e.showNested,c=e.isPresentMode,s=(0,aG.c)(t),l=(0,O.CG)(e0.yx),u=(0,eR.Ux)({placement:"top"}),d=u.referenceRef,f=u.popperRef,p=u.isHovering,m=u.getPopperProps,g=u.onMouseOver,v=u.onMouseOut,b=(0,y.useCallback)(function(e){(0,tj.l)(r,e,t)},[r,t]),x=(0,aq.C7)(),j=(0,y.useMemo)(function(){var e=(0,nx.gq)({cardId:t,docId:n,isPresentMode:c});return x?(0,a$.Op)({url:e,doc:l}):e},[t,n,l,c,x]),w=(0,aV.fY)(i),k=w.listStyle,C=w.paddingLeft,S=w.marginLeft;return s?(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(aW.aV,{mb:"0.5em",children:(0,ec.jsx)(aW.HC,{listStyleType:k,pl:C,ml:S,children:(0,ec.jsxs)(h.xu,{onMouseOver:g,onMouseOut:v,display:"inline",children:[(0,ec.jsx)(nr.r,{href:j,className:"link",role:"link",isExternal:!x,noOfLines:1,wordBreak:"break-word",ref:d,onClick:b,display:"-webkit-inline-box",verticalAlign:"top",children:(null==s?void 0:s.title)||aK.f8}),p&&(0,ec.jsx)(Q.h,{children:(0,ec.jsx)(P.qh,aX(aX({shouldShow:p,src:null==s?void 0:s.previewUrl,fallbackSrc:aU.Z.src,ref:f,onClick:b,py:2},m()),{},{minH:"158px"}))})]})})}),a&&o.map(function(e){return(0,ec.jsx)(aJ,{cardId:e.id,cards:e.children,editor:r,level:i+1,showNested:a,docId:n,isPresentMode:c},e.id)})]}):null});function aQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aQ(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}aJ.displayName="CardTOCItem";var a1=function(e){var t=e.node,n=e.editor,r=e.getPos,o=t.attrs.nested,i=r(),a=(0,aF.AQ)(n,i),c=(0,O.CG)((0,e0.ZL)({cardId:null==a?void 0:a.node.attrs.id,showAll:aB.Oj})),s=(0,O.CG)(e0.yx),l=(0,O.CG)(e0.gh),u=(0,O.CG)(e0.Ql),d=l===ny.q.SLIDE_VIEW;return(0,ec.jsx)(rq.lO,a0(a0({},e),{},{as:"div",children:(0,ec.jsxs)(h.xu,{cursor:"default",pointerEvents:u?"none":void 0,borderRadius:"var(--box-border-radius)","data-selection-ring":!0,className:"card-toc",children:[0===c.length&&(0,ec.jsxs)(aM.b,{colorScheme:"gray",color:"gray.800",fontFamily:"Inter, sans-serif",fontSize:"1em",py:"0.75em",px:"1em",children:[(0,ec.jsx)(aN.z,{w:"1em",h:"1em",alignSelf:"center",mr:"0.75em"}),(0,ec.jsxs)(h.xu,{children:[(0,ec.jsx)(aR.C,{fontSize:"1em",lineHeight:"1.5em",children:"This is the last card."}),(0,ec.jsx)(aL.X,{fontSize:"0.75em",lineHeight:"1.5em",children:"Add more cards to generate table of content links automatically."})]})]}),c.map(function(e){return(0,ec.jsx)(aJ,{cardId:e.id,cards:e.children,editor:n,level:0,showNested:o,docId:(null==s?void 0:s.id)||"",isPresentMode:d},e.id)})]})}))},a2=function(e){return(0,ec.jsx)(aZ.T,{children:(0,ec.jsxs)(nd.g,{spacing:"0.5em",align:"start",children:[(0,ec.jsx)(aH,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,ec.jsx)(aH,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,ec.jsx)(aH,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,ec.jsx)(aH,{h:"1em",w:"14em",bg:"var(--link-color)"})]})})},a3=e8.NB.create({name:"tableOfContents",group:"block",atom:!0,selectable:!0,dynamic:!0,addAttributes:function(){return{nested:{default:!1}}},parseHTML:function(){return[{tag:"div[class=toc]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"toc"})]},addNodeView:function(){return this.editor.isThumbnail?(0,rZ.fW)(a2,{update:rF.E7}):(0,rZ.fW)(a1,{update:rF.E7})}}),a4=n(30764),a5=n(90044),a8=n(60363),a6=n(18635),a9=n(69981),a7=n(583),ce=e8.hj.create({name:"clipboard",addProseMirrorPlugins:function(){var e=this,t=this.editor,n=t.state.schema,r=null;return[new eU.Sy({key:new eU.H$("clipboard"),appendTransaction:function(e,t,n){var r=e.find(function(e){return"cut"===e.getMeta("uiEvent")});if(!r)return null;var o=(0,io.a)(r);return o?n.tr.setSelection(o):null},props:{handleDOMEvents:{drop:function(e){r=e.dragging,requestAnimationFrame(function(){r=null})}},clipboardSerializer:{serializeFragment:function(t){return(0,a7.Xb)(t,e.editor.schema)}},transformPastedHTML:a5.B,transformPasted:function(e){var o;return ct(t,null!==(o=r)&&void 0!==o&&o.slice?e:(0,a9.iu)(e,n))},handlePaste:function(e,n,r){return(0,a8.Lv)(t,n,r)||(0,a6.iO)(t,n)||(0,nM.g)(e,n,r)}}})]},addCommands:function(){return{insertMarkdownAt:function(e,t){return function(n){var r=n.state,o=n.tr;try{var i=(0,a6.aT)(t,r.schema);return o.replaceRange(e.from,e.to,i),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}}}}}),ct=function(e,t){var n,r=(0,e9.u)(e.state.doc),o=null===(n=t.toJSON())||void 0===n?void 0:n.content;if(!o||"document"!==o[0].type)return t;var i=(0,e9.u)(t.content.firstChild);return r.cardLayoutsEnabled&&!i.cardLayoutsEnabled?((0,ea.K9)(o,function(e){"card"===e.type&&(e.content=[{type:"cardLayoutItem",content:e.content}])}),a4.p2.fromJSON(e.schema,{openStart:t.openStart+1,openEnd:t.openEnd+1,content:o})):t},cn=n(15225),cr=n(31187).ZP.extend({priority:rB.a.Code,inclusive:!1}),co=n(80040),ci=n(8388),ca=n(13720),cc=function(e){var t=(0,y.useState)(new Date),n=t[0],r=t[1],o=(0,y.useRef)(!1);return(0,y.useEffect)(function(){o.current&&r(new Date),o.current=!0;var e=setInterval(function(){r(new Date)},6e4);return function(){clearInterval(e)}},[e]),n};function cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cu=function(e){var t,n=(0,ca.i)({base:4,md:8})||8,r=(0,eR.gF)(),o=(0,O.CG)(e0.xy)||[],i=(0,O.CG)(e0.yx),a=null==i?void 0:i.editedTime,c=cc(a).toISOString(),s=o.length-n,l=null!==(t=e.node.attrs.horizontalAlign)&&void 0!==t?t:"left";return(0,ec.jsx)(ec.Fragment,{children:o.length>0&&(0,ec.jsx)(rq.lO,cl(cl({},e),{},{as:"div",children:(0,ec.jsxs)(C.k,{userSelect:"none",contentEditable:!1,justify:"flex-start",align:"center",direction:{left:"row",center:"column",right:"row-reverse"}[l],borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,children:[(0,ec.jsxs)(co.H,{sx:{".avatar-overflow-activator":{height:"1.6em",width:"1.6em",minH:"1.6em",minW:"1.6em",fontSize:"inherit",span:{fontSize:"0.68em"}}},children:[o.slice(0,n).map(function(e){return(0,ec.jsx)(P.Vw,{width:"1.6em",height:"1.6em",fontSize:"inherit",shadow:"base",sx:{"@media print":{shadow:"none"}},borderWidth:"1px",name:r?T.ag._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,ci.Km)(e.lastEdited,c)}}):" ",src:e.user.profileImageUrl},e.user.id)}),s>0&&(0,ec.jsx)(P.Z9,{tooltipLabel:T.ag._({id:"25VyZX"}),count:s,avatars:o.map(function(e){return{name:e.user.displayName||"",id:e.user.id,profileImageUrl:e.user.profileImageUrl||"",color:"white"}}),disabled:!0})]}),(0,ec.jsxs)(C.k,{direction:"column",ml:"left"===l?"0.5em":0,mr:"right"===l?"0.5em":0,lineHeight:"1.4",textAlign:l,children:[(0,ec.jsx)(K.x,{className:"contributors-list",children:1===o.length?(0,ec.jsx)(z.cC,{id:"t490IT",values:{0:o[0].user.displayName}}):(0,ec.jsx)(z.cC,{id:"KNjuGh",values:{0:o.length}})}),!j.v.GAMMA_PUPPETEER_SERVICE&&a&&(0,ec.jsx)(K.x,{fontSize:"0.75em",children:r?(0,ec.jsx)(z.cC,{id:"gUWkFH",values:{0:(0,ci.Km)(a,c)}}):" "})]})]})}))})},cd=function(e){return(0,ec.jsx)(aZ.T,{children:(0,ec.jsxs)(V.U,{spacing:"1em",children:[(0,ec.jsx)(aH,{borderRadius:"full",boxSize:"4em"}),(0,ec.jsx)(aH,{h:"2em",w:"14em"})]})})},cf=e8.NB.create({name:"contributors",group:"block",atom:!0,selectable:!0,dynamic:!0,parseHTML:function(){return[{tag:"div[class=contributors]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"contributors"})]},addNodeView:function(){return this.editor.isThumbnail?(0,rZ.fW)(cd,{update:rF.E7}):(0,rZ.fW)(cu,{update:rF.E7})}}),cp=function(){return(0,ec.jsx)(rZ.T5,{as:"div",children:(0,ec.jsx)(h.xu,{contentEditable:!1,borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,"data-drag-handle":!0,py:"0.25em",position:"relative",transform:"translateY(0.25em)",children:(0,ec.jsx)(H.i,{borderColor:"var(--body-color)",borderBottomWidth:"0.125em",opacity:.5})})})},cm=/^(---|___|-)/,ch=e8.NB.create({name:"divider",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:function(){return[{tag:'hr[class="divider"]'}]},renderHTML:function(e){var t=e.HTMLAttributes;return["hr",(0,e8.P1)(t,{class:"divider"})]},addNodeView:function(){return(0,rZ.fW)(cp)},addInputRules:function(){return[(0,oH.ok)({find:cm,type:this.type})]}}),cg=n(98841),cv=n(25925),cb=n(87202),cy=n(56692),cx=n(63248),cj=n(57474),cw=n(16409),cO=function(e){if(e.state.selection instanceof eU.qv&&(0,cw.Q)(e.state.selection.node)){e.chain().focus(e.state.selection.from).blur().run();return}return e.commands.blur()},ck=n(9734),cC=n(38876),cP=n(63784),cS=n(25878),cA=["isMobileDevice"];function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cI=(0,cg.E)(h.xu),cz=function(e,t){var n=!!(e&&t),r=!!(e&&!t),o=!!(!e&&t),i=!!(!e&&!t),a=(0,y.useRef)(n);return(0,y.useEffect)(function(){a.current=n},[n,i]),[r||o?a.current:n,n]},cT=function(e){var t=e.editor,n=e.node,r=e.updateAttributes,o=(0,x.v9)(e0.gh),i=(0,O.CG)(e0.hN),a=(0,x.v9)(e0.Hl),c=(0,x.v9)(e0.i2);(0,O.CG)(e0.K3);var s=(0,O.CG)(e0.Pu),l=o===ny.q.SLIDE_VIEW,u=(0,O.CG)(function(e){if((0,e0.gh)(e)===ny.q.DOC_VIEW)return null;var n=(0,e0.k8)(e);if(!n||!(null!=n&&n.cardId))return null;var r=(0,e8.N2)(t.state.doc,function(e){return(0,nE.KH)(e)&&e.attrs.id===n.cardId}),o=(0,E.Z)(r,1)[0];if(!o)return console.warn("[usePresentingCardBackground] Unexpectedly couldnt find presentingCard ".concat(n.cardId)),null;var i=(0,ea.nv)(t.state.doc.resolve(o.pos+1),function(e){return(0,nE.KH)(e)&&e.attrs.background&&!e.attrs.background.inside}).pop();return i?i.node.attrs.background:(console.warn("[usePresentingCardBackground] Unexpectedly couldnt find card at pos ".concat(o.pos)),null)},rf()),d=n.attrs.background,f=(0,eQ.TZ)(),p=cz(l,c),m=(0,E.Z)(p,2),g=m[0],v=m[1];(0,y.useEffect)(function(){!n.attrs.docId&&t.gammaDocId&&r(cD(cD({},n.attrs),{},{docId:t.gammaDocId}))},[n.attrs,t,r]);var b=(0,cj.J)(s,i),j=(0,iz.wj)(s),w=(0,iX.R5)(s,d),k=(0,iX.wh)(w,j),P=(0,iX.wh)(l&&u&&u.type!==nz.E.NONE?u:w,j);console.debug("%c[DocComponent] Doc is rerendering","background-color: chartreuse",{isPresentModeReady:v,isPresentModeReadyLagging:g,presentingCardId:c});var S=(0,y.useCallback)(function(e){var n=e.target;return(!n.closest(".".concat(iN.ar))||!!n.getAttribute("data-outside-card-body"))&&(cO(t),!0)},[t]);(0,y.useEffect)(function(){return cy.F7.on("keydown","DOC_BLUR",function(e){return!!(0,cb.ZP)("Esc")(e)&&!!t.isFocused&&(t.commands.blur(),e.preventDefault(),!0)})},[t]);var A=(0,eQ.Br)("comment");return(0,ec.jsxs)(rZ.T5,{as:"div","data-testid":"doc-node-root",children:[(0,ec.jsx)(cx.P,{theme:s}),(0,ec.jsx)(h.xu,{sx:{counterReset:"footnote"},onMouseDown:S,children:(0,ec.jsxs)(C.k,{className:"doc-content-wrapper",direction:"column",align:"center",pb:f||l||!A?"0px":a?cC.i:cC.m,minH:"var(--100vh)",sx:b,onDragOver:eo.Gb,children:[(0,ec.jsx)(cM,cD(cD({},k),{},{isMobileDevice:f})),(0,ec.jsx)(cv.M,{children:(0,ec.jsx)(cI,cD({className:"motion-present-mode-bg","data-doc-background-element-present-mode":!0,position:"fixed",zIndex:cS.S.presentBg,left:0,right:0,h:"100%",initial:{opacity:0},animate:{opacity:1},exit:{opacity:1},visibility:v?"visible":"hidden",transition:iN.Vs},P),"presenting-background-"+c)}),(0,ec.jsx)(C.k,{sx:{width:"100%",'[data-animate-value="doc"]':{display:g?"none":void 0}},justify:"center",className:(0,eW.cx)("document-content",l?"is-present-mode":"is-doc-mode"),children:(0,ec.jsx)(rZ.ms,{style:{width:"100%"}})})]})}),f&&(0,ec.jsx)(cP.kT,{})]})},cM=function(e){var t=e.isMobileDevice,n=(0,d.Z)(e,cA),r=(0,ck.f_)()?{style:{touchAction:"none"},position:"fixed",top:0,left:0}:{};return(0,ec.jsx)(C.k,cD(cD(cD({"data-doc-background-element":!0,"data-testid":"doc-background",position:"absolute",w:"var(--editor-width)",h:"100%",minH:"var(--100vh)",contentEditable:!1},n),r),{},{backgroundAttachment:"fixed",children:!t&&(0,ec.jsx)(cP.LN,{})}))},cN=function(e){var t=(0,O.CG)(e0.Pu),n=(0,cj.J)(t,!1);return(0,ec.jsx)(rZ.T5,{children:(0,ec.jsx)(C.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:n,children:(0,ec.jsx)(rZ.ms,{style:{width:"100%"}})})})},cR=n(27529);function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cL(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cH=e8.NB.create({name:"doc",topNode:!0,content:"document"}),cZ=e8.NB.create({name:"document",content:"card+",isolating:!0,defining:!0,selectable:!1,addAttributes:function(){return{docId:{},background:c_({default:cR.w.background},(0,ea.sw)("background")),docFlags:c_({default:cR.w.docFlags},(0,ea.sw)("docFlags")),format:{},customCode:c_({default:cR.w.customCode},(0,ea.sw)("customCode")),settings:c_({default:cR.w.settings},(0,ea.sw)("settings")),generateStatus:{default:cR.w.generateStatus},generateInfo:c_({default:cR.w.generateInfo},(0,ea.sw)("generateInfo"))}},addNodeView:function(){return this.editor.isThumbnail?(0,rZ.fW)(cN,{update:rF.E7}):(0,rZ.fW)(cT,{update:rF.E7,ignoreMutation:function(e){var t=e.mutation,n=t.target instanceof HTMLElement?t.target:t.target.parentElement,r="selection"!==t.type&&cB(n);return console.debug("[Document.ignoreMutation] isMutationOutsideDocContent:",r),!!r}})},parseHTML:function(){return[{tag:"div[class=gamma-doc]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"gamma-doc"}),0]}}),cB=function(e){var t=null==e?void 0:e.parentElement;return!!t&&!t.closest(".document-content")},cF=n(66843),cW=n(45219);function cU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cU(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cq=function(){function e(t,n){var r=this;(0,ab.Z)(this,e),(0,u.Z)(this,"editorView",void 0),(0,u.Z)(this,"width",void 0),(0,u.Z)(this,"color",void 0),(0,u.Z)(this,"class",void 0),(0,u.Z)(this,"cursor",null),(0,u.Z)(this,"element",null),(0,u.Z)(this,"timeout",null),(0,u.Z)(this,"handlers",void 0),this.editorView=t,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var n=function(t){return r[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}})}return(0,ay.Z)(e,[{key:"destroy",value:function(){var e=this;this.handlers.forEach(function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)})}},{key:"update",value:function(e,t){null!=this.cursor&&t.doc!=e.state.doc&&(this.cursor.pos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(e){var t,n,r,o,i;(((null==e?void 0:e.pos)||null)!=(null===(t=this.cursor)||void 0===t?void 0:t.pos)||(null==e?void 0:e.type)!=(null===(n=this.cursor)||void 0===n?void 0:n.type)||(null==e?void 0:e.side)!=(null===(r=this.cursor)||void 0===r?void 0:r.side))&&(this.cursor=e,null==e?(null===(o=this.element)||void 0===o||null===(i=o.parentNode)||void 0===i||i.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){if(null!=this.cursor&&this.editorView){var e,t,n,r,o=this.editorView.state.doc.resolve(this.cursor.pos),i="";if("gallery"==this.cursor.type&&(null===(n=this.cursor.node)||void 0===n?void 0:n.type.name)!=="gallery")r=this.cursor.rect,i="Drop to make a gallery";else if("blankRect"==this.cursor.type)r=this.cursor.rect,i="";else if("column"==this.cursor.type||"gallery"==this.cursor.type||"smartLayout"==this.cursor.type){var a=this.cursor.rect;if(!a)return;var c="right"==this.cursor.side||"bottom"==this.cursor.side,s=c?o.nodeAfter:o.nodeBefore,l=s&&((0,e7._5)(s)||(0,tt.E)(s))?0:this.width;if("right"==this.cursor.side||"left"==this.cursor.side){var u=c?a.right+l:a.left-l;r={top:a.top,bottom:a.bottom,left:u-this.width/2,right:u+this.width/2}}else{var d=c?a.bottom+l:a.top-l;r={left:a.left,right:a.right,top:d-this.width/2,bottom:d+this.width/2}}}else if(!o.parent.inlineContent){var f=o.nodeBefore,p=o.nodeAfter;if(f||p){var m=this.editorView.nodeDOM(this.cursor.pos-(f?f.nodeSize:0)).getBoundingClientRect(),h=f?m.bottom:m.top;f&&p&&(h=(h+this.editorView.nodeDOM(this.cursor.pos).getBoundingClientRect().top)/2),r={left:m.left,right:m.right,top:h-this.width/2,bottom:h+this.width/2}}}if(!r){var g=this.editorView.coordsAtPos(this.cursor.pos);r={left:g.left-this.width/2,right:g.left+this.width/2,top:g.top,bottom:g.bottom}}var v=this.editorView.dom.offsetParent;if(this.element||(this.element=v.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),v&&(v!=document.body||"static"!=getComputedStyle(v).position)){var b=v.getBoundingClientRect();e=b.left-v.scrollLeft,t=b.top-v.scrollTop}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=r.left-e+"px",this.element.style.top=r.top-t+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px",this.element.dataset.type=this.cursor.type,this.element.innerHTML=i}}},{key:"scheduleRemoval",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.setCursor(null)},e)}},{key:"dragover",value:function(e){if(this.editorView.editable){var t,n,r,o,i,a,c,s,l=nL(this.editorView,e,null===(t=this.editorView.dragging)||void 0===t?void 0:t.slice);if(l){this.setCursor(cG(cG({},l),{},{type:"blankRect"})),this.scheduleRemoval(5e3);return}var u=(0,rN.fC)(this.editorView,e,null===(n=this.editorView.dragging)||void 0===n?void 0:n.slice);if(u){this.setCursor(cG(cG({},u),{},{type:"blankRect"})),this.scheduleRemoval(5e3);return}var d=(0,rh.yT)(this.editorView,e,null===(r=this.editorView.dragging)||void 0===r?void 0:r.slice,!this.editorView.dragging);if(d){this.setCursor(cG(cG({},d),{},{type:"gallery"})),this.scheduleRemoval(5e3);return}var f=(0,e7.BF)(this.editorView,e,null===(o=this.editorView.dragging)||void 0===o?void 0:o.slice,!this.editorView.dragging);if(f){this.setCursor(cG(cG({},f),{},{type:"column"})),this.scheduleRemoval(5e3);return}var p=nH(this.editorView,e,null===(i=this.editorView.dragging)||void 0===i?void 0:i.slice);if(p){this.setCursor(cG(cG({},p),{},{type:"blankRect"})),this.scheduleRemoval(5e3);return}var m=(0,rN.cQ)(this.editorView,e,null===(a=this.editorView.dragging)||void 0===a?void 0:a.slice);if(m){this.setCursor(cG(cG({},m),{},{type:"smartLayout"})),this.scheduleRemoval(5e3);return}var h=(0,iS.jz)(this.editorView,e,null===(c=this.editorView.dragging)||void 0===c?void 0:c.slice);if(h){this.setCursor({pos:h.pos,type:"default"}),this.scheduleRemoval(5e3);return}var g=(0,cW.Z)(this.editorView,e,null===(s=this.editorView.dragging)||void 0===s?void 0:s.slice);null===g?this.setCursor(null):(this.setCursor({pos:g,type:"default"}),this.scheduleRemoval(5e3))}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}]),e}(),cV=e8.hj.create({name:"dropCursor",addOptions:function(){return{color:"currentColor",width:1,class:null}},addProseMirrorPlugins:function(){return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new eU.Sy({key:new eU.H$("dropCursor"),view:function(t){return new cq(t,e)}})}(this.options)]}}).configure({color:"var(--chakra-ring-color)",width:3,class:"ProseMirror-dropcursor"}),c$=n(35483),cK=n(38564),cY=n(29469),cX=n(31458),cJ=n(55921),cQ=n(18575);function c0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c1=function(e){var t=e.svg,n=e.isDark,r=e.font,o=(0,y.useMemo)(function(){return(0,cQ.c)(n)},[n]),i=(0,y.useMemo)(function(){return(0,cQ.m)(r)},[r]);return t?(0,ec.jsx)(h.xu,{dangerouslySetInnerHTML:{__html:t},"data-testid":"drawing-svg",sx:{svg:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c0(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({width:"100%",height:"auto",text:i},o)}}):null},c2=n(26806),c3=n(91446),c4=n(45075),c5=n(34367),c8=n(420),c6=n(9849),c9=["tl-centered-g"],c7=(i=(0,f.Z)(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvg(t.shapes.map(function(e){return e.id}),{padding:1});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return c9.forEach(function(e){var t;null===(t=n.querySelector(".".concat(e)))||void 0===t||t.classList.remove(e)}),n.querySelectorAll(":not(mask)[id]").forEach(function(e){return e.removeAttribute("id")}),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),se=n(91142),st=["isOpen","isEditable","onClose","font","isDark","isDrawingEditorActive","setDrawingEditorActive"],sn=function(e){var t=e.isOpen,n=e.isEditable,r=e.onClose,o=e.font,i=e.isDark,a=e.isDrawingEditorActive,c=e.setDrawingEditorActive,s=(0,d.Z)(e,st),l=s.node,u=s.updateAttributes,p=l.attrs,h=p.page,g=p.assets,v=(0,y.useState)(),b=v[0],x=v[1];(0,y.useEffect)(function(){(0,se.Us)(b,h,g)},[h,g,b,u]);var j=(0,y.useCallback)(function(e){x(e),window.tldrawEditor=e,(0,se.ZF)(e,!0)},[]),w=(0,y.useCallback)((0,f.Z)(m().mark(function e(){var t,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c7(b);case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:u({svg:t.outerHTML}),n=JSON.stringify({page:b.document.pages.page,assets:b.document.assets}),console.debug("[DrawingEditor] Generated SVG",{svgSize:t.outerHTML.length,jsonSize:n.length,svgEl:t});case 10:case"end":return e.stop()}},e)})),[b,u]),O=(0,y.useCallback)(function(){b&&u({page:b.document.pages.page,assets:b.document.assets})},[u,b]),k=(0,eR.Kt)(O,500),S=(0,y.useCallback)(function(){n&&w(),c(!1),r()},[r,w,c,n]);return(0,ec.jsx)(ec.Fragment,{children:(0,ec.jsxs)(P.dy,{placement:"bottom",onClose:S,isOpen:t,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,ec.jsx)(P.P1,{}),(0,ec.jsxs)(P.sc,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",onAnimationComplete:function(e){"enter"==e&&c(!0)},transition:{enter:{duration:.4}},children:[(0,ec.jsx)(P.Ng,{p:0,h:"100%",overflow:"hidden","data-testid":"drawing-editor-body",children:a?(0,ec.jsx)(c6.rJ,{readOnly:!n,showPages:!1,onMount:j,onChangePage:n?k:void 0,autofocus:!1,isDark:i,font:o}):(0,ec.jsx)(C.k,{align:"center",justify:"center",w:"100%",h:"100%",children:(0,ec.jsx)(c8.$,{size:"xl"})})}),(0,ec.jsx)(P.cC,{zIndex:2,backgroundColor:"white","data-testid":"drawing-editor-close"})]})]})})};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var si=(0,cg.E)(h.xu),sa=function(e){var t=e.node,n=e.updateAttributes,r=e.selected,o=e.editor,i=e.getPos,a=e.decorations,c=t.attrs,s=c.width,l=c.meta,u=c.id,d=c.horizontalAlign,f=c.svg,p=c.page,m=(0,O.CG)(e0.Pw),g=(0,O.CG)(e0.wc),v=(0,eQ.LM)(o),b=m&&v&&g,x=(0,O.CG)(e0.Av),j=!!x&&x===u,w=(0,y.useState)(!1),k=w[0],P=w[1],S=(0,O.CG)(e0.Pu),A=(0,c2.Jh)(S).isDark,E=(0,cJ.l)(S)["--body-font"],D=(0,c5.ow)(o),I=D.ref,z=D.setIsResizing,T=D.resizeableSx,M=D.onLayoutAnimationStart,N=D.onLayoutAnimationComplete,R=(0,y.useCallback)(function(){(0,se.Sc)(u,!0)},[u]),_=(0,y.useCallback)(function(){o.chain().setNodeSelection(i()).focus().run()},[o,i]),H=(0,y.useCallback)(function(){(0,se.Sc)(null,!1)},[]),B=(0,y.useCallback)(function(e,r){n(so(so({},t.attrs),{},{fullWidthBlock:void 0===r?t.attrs.fullWidthBlock:r},e))},[t.attrs,n]),F=s||(null==l?void 0:l.width),W=!f,U=p&&Object.keys(p.shapes).length>0,G=(0,c3.w)(a).isFullWidth,q=(0,tu.nN)(G?"center":d);return(0,ec.jsx)(rq.lO,so(so({},e),{},{as:"div",children:(0,ec.jsxs)(C.k,{w:"100%",className:c4.d,css:q,sx:T,direction:"column",_focusWithin:{shadow:"outline"},children:[(0,ec.jsxs)(si,{ref:I,className:"drawing",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,w:G?"100%":F?"calc(".concat(F," * var(--font-size) / 16)"):"100%",maxW:"100%",h:"auto",position:"relative",layout:!0,layoutDependency:d,transition:{duration:.15},onLayoutAnimationStart:M,onLayoutAnimationComplete:N,minH:W?"6em":"auto","data-drag-handle":!0,children:[b&&r&&!G&&(0,ec.jsx)(c5.R4,{imageWrapperRef:I,setIsResizing:z,updateResizeAttrs:B,refreshDeps:[t.attrs]}),!k&&(0,ec.jsx)(c1,{font:E,svg:f,isDark:A}),b&&!j&&!W&&(0,ec.jsx)(h.xu,{cursor:"default",position:"absolute",inset:"0",zIndex:"1",onClick:_,onDoubleClick:R}),W&&(0,ec.jsxs)(nd.g,{spacing:3,justify:"center",contentEditable:!1,color:"gray.400",h:32,backgroundColor:"blackAlpha.50",borderRadius:"var(--box-border-radius)","data-testid":"drawing-placeholder",children:[(0,ec.jsx)(Z.G,{size:"2x",icon:cX.K}),m&&(0,ec.jsx)(L.z,{size:"xs",onClick:R,children:U?"Open diagram":"Add diagram"})]})]}),j&&(0,ec.jsx)(sn,so(so({},e),{},{isOpen:j,isEditable:m,onClose:H,isDark:A,font:E,isDrawingEditorActive:k,setDrawingEditorActive:P}))]})}))};function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sl=new eU.H$("UniqueMediaId"),su=iT.I.extend({name:"UniqueDrawingId"}).configure({attributeName:"id",types:["drawing"],initialValue:se.RA,filterTransaction:function(e){var t=e.getMeta(cK.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:sl}),sd=e8.NB.create({name:"drawing",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes:function(){return{id:(0,cY.b)(se.RA),page:ss({},(0,ea.sw)("page")),assets:ss(ss({},(0,ea.sw)("assets")),{},{default:{}}),meta:ss(ss({},(0,ea.sw)("meta")),{},{default:{}}),fullWidthBlock:{default:!1},width:{},svg:{}}},parseHTML:function(){return[{tag:"div[class=drawing]"},{tag:"tldraw",getAttrs:function(e){try{var t=new c$.J2,n=JSON.parse(e.innerHTML);return t.insertContent(n,{select:!1}),{page:t.document.pages[t.currentPageId],assets:t.assets}}catch(t){return console.error("(caught) Error parsing Tldraw paste",t,e.innerHTML),!1}}},{tag:"drawing[bookmark]",getAttrs:(0,iY.xF)(this.storage)}]},addStorage:iY.gk,renderHTMLforAI:function(e){var t=e.node;return["drawing",{bookmark:(0,iY.ml)(this.storage,t)}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"drawing"})]},addCommands:function(){var e=this.name,t=function(t){var n=t.selection;return n instanceof eU.qv&&n.node.type.name===e?n.node:void 0};return{editSelectedDrawingBlock:function(){return function(e){var n=t(e.state);return n&&(0,O.bh)().dispatch((0,e0.h)({drawingId:n.attrs.id})),!0}},insertDrawingBlock:function(){return function(e){return e.commands.insertContent({type:"drawing"})}}}},addExtensions:function(){return[su]},addNodeView:function(){return(0,rZ.fW)(sa,{update:rF.E7})}}),sf=e8.hj.create({name:"dynamicNodes",extendNodeSchema:function(e){var t;return{dynamic:null!==(t=(0,e8.nU)((0,e8.Nl)(e,"dynamic",e)))&&void 0!==t&&t}}}),sp=n(52347),sm=e8.hj.create({name:"fixRequiredAttrs",onBeforeCreate:function(){Object.values(this.editor.schema.nodes).forEach(function(e){Object.values(e.attrs||{}).forEach(function(e){void 0===e.default&&(e.hasDefault=!1)})})}}),sh=n(12236),sg=n(70039),sv=n(41701),sb=n(67567),sy=n(90129),sx=n(29017),sj=n(48200),sw=n(11139),sO=n(92470),sk=n(89648),sC=n(92397);function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sA="fromInnerEditor",sE="fromOuterEditor",sD=function(e){(0,sy.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,sj.Z)(r);if(t){var o=(0,sj.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,sx.Z)(this,e)});function r(e,t,o){var i;return(0,ab.Z)(this,r),i=n.call(this,e,t,o),(0,u.Z)((0,sv.Z)(i),"innerEditor",void 0),(0,u.Z)((0,sv.Z)(i),"editorOptions",void 0),(0,u.Z)((0,sv.Z)(i),"isDestroyed",!1),i.editorOptions=o,i.updateProps({mountEditor:function(){return i.mountEditor()},destroyEditor:function(){var e,t,n;null===(e=i.innerEditor)||void 0===e||e.destroy(),null===(t=(n=i.editor.commands).forceHideBubbleMenu)||void 0===t||t.call(n,!1),setTimeout(function(){i.updateProps({innerEditor:void 0})})}}),i}return(0,ay.Z)(r,[{key:"updateProps",value:function(e){this.isDestroyed||this.renderer.updateProps(e)}},{key:"mountEditor",value:function(){var e=this.editor,t=this.editorOptions,n=t.nodeName,r=t.preventNodeTypes,o=[].concat((0,em.Z)(u4({isFootnoteEditor:!0}).filter(function(e){return!r||!r.includes(e.name)}).map(function(e){return e.name===n?e.extend({topNode:!0}):e})),[sC.W,sp.Pi,i1.Jn,sO.R,sI.configure({outerEditor:e,getPos:this.getPos}),sk.L,ti.NM]);return this.innerEditor=new sw.M({extensions:o,content:{type:n,content:this.node.content.toJSON(),attrs:iD()(this.node.attrs)},onBeforeCreate:function(t){var o=t.editor;o.schema.nodes=sS({},e.schema.nodes),null==r||r.forEach(function(e){return delete o.schema.nodes[e]}),o.schema.marks=sS({},e.schema.marks),o.schema.topNodeType=e.schema.nodes[n],o.extensionManager.schema=o.schema}}),this.innerEditor.gammaOrgId=e.gammaOrgId,this.innerEditor.gammaDocId=e.gammaDocId,this.innerEditor.parentEditor=e,this.innerEditor.view.updateState=function(e){if(!this.docView){this.state=e;return}this.updateStateInner(e,this.state.plugins!=e.plugins)},this.updateProps({innerEditor:this.innerEditor}),this.innerEditor}},{key:"destroy",value:function(){var e;this.isDestroyed=!0,null===(e=this.innerEditor)||void 0===e||e.destroy(),(0,sb.Z)((0,sj.Z)(r.prototype),"destroy",this).call(this)}},{key:"update",value:function(e,t){if(!e.sameMarkup(this.node))return!1;this.node=e;var n,o=null===(n=this.innerEditor)||void 0===n?void 0:n.view;if(!o)return!0;var i=o.state,a=e.content.findDiffStart(i.doc.content);if(null!=a){var c=e.content.findDiffEnd(i.doc.content),s=c.a,l=c.b,u=a-Math.min(s,l);u>0&&(s+=u,l+=u),o.dispatch(i.tr.replace(a,l,e.slice(a,s)).setMeta(sE,!0).setMeta("preventAutolink",!0))}return(0,sb.Z)((0,sj.Z)(r.prototype),"update",this).call(this,e,t)}},{key:"stopEvent",value:function(e){return!!this.innerEditor&&this.innerEditor.view.dom.contains(e.target)}},{key:"ignoreMutation",value:function(){return!0}},{key:"contentDOM",get:function(){return null}}]),r}(rZ.Al),sI=e8.hj.create({name:"innerEditorExtension",addOptions:function(){return{outerEditor:null,getPos:null}},addProseMirrorPlugins:function(){var e=this.options,t=e.outerEditor,n=e.getPos;return[new eU.Sy({appendTransaction:function(e){var r=e[0];if(!r)return null;if(!r.getMeta(sE)){for(var o=t.state.tr,i=nk.KS.offset(n()+1),a=0;a<e.length;a++)for(var c=e[a].steps,s=0;s<c.length;s++){var l=c[s],u=l.map(i);!u&&l instanceof nk.FC&&0==l.from&&(u=sz(l,i)),u&&o.step(u)}o.setMeta(sA,!0).setMeta("preventAutolink",!0),o.docChanged&&t.view.dispatch(o)}return null}})]},addKeyboardShortcuts:function(){var e=this.options.outerEditor;return{"Mod-z":function(){return e.commands.undo()},"Mod-y":function(){return e.commands.redo()}}}}),sz=function(e,t){var n=t.mapResult(e.from,1),r=t.mapResult(e.to,-1),o=t.map(e.gapFrom,1),i=t.map(e.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new nk.FC(n.pos,r.pos,o,i,e.slice,e.insert,e.structure)},sT=function(e){"footnote"!==e.$anchor.doc.type.name&&!e.empty&&!(0,sg.AW)(e)&&(0,e8.xh)(e)&&(0,sg.RV)()&&(0,sg.t0)(null,!1)},sM=function(e,t,n,r){if(e.some(function(e){return e.docChanged})){var o=n.doc,i=[],a=[];o.nodesBetween(0,n.doc.content.size,function(e,t,n){"footnote"===e.type.name&&i.push({from:t,to:t+e.nodeSize,node:e,parent:n}),e.marks.forEach(function(r){"footnoteLabel"===r.type.name&&a.push({from:t,to:t+e.nodeSize,mark:r,parent:n})})}),a.filter(function(e){var t=e.mark,n=e.parent;return!i.find(function(e){var r=e.node,o=e.parent;return r.attrs.noteId===t.attrs.noteId&&o===n})}).forEach(function(e){var t=e.from,n=e.to,o=e.mark;return r.removeMark(t,n,o)});var c=function(e){return(0,e8.TP)("footnoteLabel",n.schema).create({noteId:e})};a.filter(function(e){return!e.mark.attrs.noteId}).forEach(function(e){var t=e.mark,n=e.from,o=e.to,s=i.find(function(e){var t=e.node,n=e.from>=o,r=!a.find(function(e){return e.mark.attrs.noteId==t.attrs.noteId});return n&&r});s&&r.removeMark(n,o,t).addMark(n,o,c(s.node.attrs.noteId))}),Object.entries(oC()(i,function(e){return e.node.attrs.noteId})).forEach(function(e){var t=(0,E.Z)(e,2),n=t[0],o=t[1];if(1!=o.length&&n){var i=a.filter(function(e){return e.mark.attrs.noteId===n});o.slice(1).forEach(function(e,t){var n=e.from,o=(0,sg.H)();r.setNodeMarkup(n,void 0,{noteId:o});var a=i[t+1];a&&(r.removeMark(a.from,a.to,a.mark),r.addMark(a.from,a.to,c(o)))})}})}},sN=function(e,t,n,r){e.forEach(function(e){var t=e.steps.filter(function(e){return e instanceof nk.WJ||e instanceof nk.xu});0==t.length||e.getMeta(sA)||e.getMeta("appendedTransaction")||t.forEach(function(e){var t=e.from,o=e.to,i=e.mark;n.doc.nodesBetween(t,o,function(n,a){"footnote"===n.type.name&&a<t&&(e instanceof nk.WJ?r.removeMark(t,o,i):e instanceof nk.xu&&r.addMark(t,o,i))})})})},sR=new eU.Sy({key:new eU.H$("footnote"),appendTransaction:function(e,t,n){var r=n.selection;r.eq(t.selection)||sT(r);var o=n.tr;return(sN(e,t,n,o),sM(e,t,n,o),o.docChanged)?(console.debug("[FootnotePlugin] Applied steps",o.steps),o):null}}),sL=n(80891),s_=n(72063),sH=n(8330),sZ=n(55580),sB=n(98537),sF=n.n(sB),sW=n(10344),sU=n(10792),sG=n(24363),sq=n(41290),sV=function(e,t,n){var r=(0,O.CG)(e0.II);(0,N.O)({ref:n,enabled:!!(n&&r===t),handler:function(e){var t,n;null!==(t=e.target)&&void 0!==t&&t.closest("[data-footnote-view]")||null!==(n=e.target)&&void 0!==n&&n.closest("[data-footnote-label]")||o(!1)}});var o=(0,y.useCallback)(function(n){var o,i,a=e.state.selection,c=(0,e8.xh)(a)&&!a.empty,s=(null===(o=document.activeElement)||void 0===o?void 0:o.closest(".footnote-popover"))||!!(null===(i=document.activeElement)||void 0===i?void 0:i.closest("[data-in-editor-focus]")),l=void 0!==n?n:r!==t;s||(l&&!c?(0,sg.NX)(t,!0):!1===l&&(0,sg.NX)(t,!1))},[e.state.selection,r,t]);return{onClick:o}};function s$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s$(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sY=function(e){var t=e.node,n=e.editor,r=e.innerEditor,o=e.selected,i=t.attrs.noteId,a=(0,y.useRef)(null),c=(0,O.CG)(e0.II),s=(0,O.CG)(e0.Pw),l=(0,aq.C7)(),u=sV(n,i,a).onClick;(0,y.useEffect)(function(){r&&r.setEditable(s)},[s,r]);var d=!!c&&c===i,f=(0,y.useCallback)(function(){return(0,sg.t0)(i,!1)},[i]);(0,y.useEffect)(function(){if(r){var e=function(){setTimeout(function(){(0,ea.KB)(r)||f()},20)};return r.on("blur",e),function(){r.off("blur",e)}}},[r,f]);var p=(0,y.useCallback)(function(){u()},[u]);return(0,ec.jsx)(rZ.T5,{as:"span","data-testid":"footnote-nodeview-wrapper",children:(0,ec.jsxs)(Y.J,{isOpen:d,onClose:f,placement:"top",gutter:8,isLazy:!0,lazyBehavior:"unmount",autoFocus:!1,closeOnBlur:!1,closeOnEsc:!1,returnFocusOnClose:!1,children:[(0,ec.jsx)(X.x,{children:(0,ec.jsx)(K.x,{as:"span",onClick:p,_after:{content:"counter(footnote)",counterIncrement:"footnote",position:"relative",bottom:"0.6em",fontSize:"0.8em",shadow:o?"outline":void 0,borderRadius:"sm"},pl:"1px",className:"footnote",contentEditable:!1,"data-footnote-view":!0,cursor:"pointer"})}),(0,ec.jsx)(Q.h,{children:(0,ec.jsxs)(ee.y,{zIndex:"popover",shadow:"md",borderRadius:"md",border:"1px solid",borderColor:"gray.200",w:"500px",maxW:"100vw","data-footnote-popover-test-id":i,p:0,ref:a,children:[(0,ec.jsx)(sW.Q,{}),(0,ec.jsx)(nV.b,{position:"relative",zIndex:"1",p:0,className:"footnote-popover","data-footnote-popover-id":i,children:l?(0,ec.jsx)(sQ,sK(sK({},e),{},{onClose:f})):(0,ec.jsx)(sJ,sK(sK({},e),{},{editable:s,onClose:f}))}),(0,ec.jsx)(h.xu,{position:"absolute",top:"-".concat(8,"px"),bottom:"-".concat(8,"px"),left:0,right:0,zIndex:"0"})]})})]})})},sX=sF()({},sG.I,{".ProseMirror":{px:8,py:4,overflow:"hidden auto",maxH:"300px",maxW:"100%",borderRadius:"md"}}),sJ=function(e){var t=e.editor,n=e.innerEditor,r=e.mountEditor,o=e.destroyEditor,i=e.node,a=e.editable,c=e.getPos,s=e.onClose,l=i.attrs.noteId,u=(0,y.useCallback)(function(){return t.commands.convertNoteToCard(l)},[t,l]),d=(0,y.useCallback)(function(){t.chain().focus().setNodeSelection(c()).deleteSelection().run()},[t,c]);(0,y.useEffect)(function(){if(r&&o)return r(),function(){o()}},[r,o]);var f=(0,O.CG)(e0.Pu),p=(0,cJ.l)(f,!1,"#FFFFFF");if(!n)return null;var m=(0,e8.N2)(t.state.doc,function(e){return e.marks.some(function(e){return"footnoteLabel"===e.type.name&&e.attrs.noteId===l})}).length>0;return(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsxs)(h.xu,{className:iN.pL,sx:sX,position:"relative",_focusWithin:{shadow:a?"outline":void 0},borderRadius:"md",css:p,children:[(0,ec.jsx)(sq.k,{editor:n,className:"highlight-mask"}),(0,ec.jsx)(e5,{editor:n}),(0,ec.jsxs)(tX.h,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:eo.br,spacing:0,children:[a&&(0,ec.jsxs)(tA.v,{autoSelect:!1,isLazy:!0,children:[(0,ec.jsx)(tE.j,{as:J.h,icon:(0,ec.jsx)(Z.G,{icon:sZ.faEllipsis}),minW:6,h:6,isRound:!0,backgroundColor:"white"}),(0,ec.jsx)(Q.h,{children:(0,ec.jsxs)(tD.q,{"data-in-editor-focus":!0,zIndex:"dropdown",children:[m&&(0,ec.jsx)(oh.s,{icon:(0,ec.jsxs)("span",{className:"fa-layers fa-fw",children:[(0,ec.jsx)(Z.G,{icon:s_.lC,fixedWidth:!0}),(0,ec.jsx)(Z.G,{icon:sL.eF,inverse:!0,transform:"shrink-8"})]}),onClick:u,children:(0,ec.jsx)(z.cC,{id:"p/s15o"})}),(0,ec.jsx)(oh.s,{icon:(0,ec.jsx)(Z.G,{icon:td.$,fixedWidth:!0}),color:"red.500",onClick:d,children:(0,ec.jsx)(z.cC,{id:"sHHbXH"})})]})})]}),(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"j+JKcM"}),icon:(0,ec.jsx)(Z.G,{icon:sH.NB}),minW:6,h:6,isRound:!0,onClick:s,backgroundColor:"white"})]})]}),(0,ec.jsx)(o0,{editor:n})]})},sQ=function(e){var t=e.mountEditor,n=e.destroyEditor,r=e.onClose,o=(0,y.useMemo)(function(){if(t)return t()},[t]);(0,y.useEffect)(function(){if(n)return function(){return n()}},[n]);var i=(0,O.CG)(e0.Pu),a=(0,cJ.l)(i,!1,"#FFFFFF");return o?(0,ec.jsx)(ec.Fragment,{children:(0,ec.jsxs)(h.xu,{className:iN.pL,sx:sX,position:"relative",borderRadius:"md",css:a,children:[(0,ec.jsx)(sU.f,{editor:o}),(0,ec.jsx)(tX.h,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:eo.br,spacing:0,children:(0,ec.jsx)(J.h,{"aria-label":T.ag._({id:"j+JKcM"}),icon:(0,ec.jsx)(Z.G,{icon:sH.NB}),minW:6,h:6,isRound:!0,onClick:r,backgroundColor:"white"})})]})}):null},s0=n(85398),s1=e8.vc.create({name:"footnoteLabel",inclusive:!1,excludes:"link underline",priority:rB.a.FootnoteLabel,parseHTML:function(){return[{tag:"span[class=footnote-label][bookmark]",getAttrs:(0,iY.xF)(this.storage)},{tag:"span[class=footnote-label]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["span",(0,e8.P1)(t,{class:"footnote-label"}),0]},renderHTMLforAI:function(e){var t=e.mark;return["span",{class:"footnote-label",bookmark:(0,iY.ml)(this.storage,t)},0]},addStorage:iY.gk,addAttributes:function(){return{noteId:{rendered:!1}}},addProseMirrorPlugins:function(){return[(0,s0.r)(this,s2)]}}),s2=function(e){var t=e.node,n=e.editor,r=e.children,o=t.attrs.noteId,i=(0,aq.C7)(),a=sV(n,o).onClick,c=(0,y.useCallback)(function(){a()},[a]);return(0,ec.jsx)(rZ.T5,{as:"span",className:"footnote-label-view",children:(0,ec.jsx)(K.x,{as:"span",className:"footnote-label",onClick:c,"data-footnote-label":!0,cursor:"pointer",children:i?r:(0,ec.jsx)(rZ.ms,{as:"span"})})})},s3=/(?:^|\s)((?:\^)((?:[^^]+))(?:\^))$/,s4=e8.NB.create({name:"footnote",content:"(block | footnoteBlock)+",group:"inline",atom:!0,inline:!0,priority:rB.a.Footnote,parseHTML:function(){return[{tag:"span[class=footnote]",getContent:function(e,t){return a4.HY.fromJSON(t,JSON.parse(e.getAttribute("data-content")||"{}"))}},{tag:"div[class=imported-footnote]"},{tag:"footnote[bookmark]",getAttrs:(0,iY.xF)(this.storage),getContent:(0,iY.eV)(this.storage)}]},addStorage:iY.gk,renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,e8.P1)(n,{class:"footnote","data-content":JSON.stringify(t.content.toJSON())})]},renderHTMLforAI:function(e){var t=e.node;return["footnote",{bookmark:(0,iY.ml)(this.storage,t)}]},addAttributes:function(){var e=this;return{noteId:{parseHTML:function(t){var n=(0,iY.xF)(e.storage)(t);return n&&n.noteId?(console.log("jordan found bookmark in footnote using attrs",n),n.nodeId):(0,sg.H)()},default:void 0}}},addNodeView:function(){var e;return e={nodeName:"footnote",preventNodeTypes:["doc","document","card"]},function(t){return new sD(sY,t,e)}},addInputRules:function(){var e;return[(e={find:s3,nodeType:this.type,markType:this.editor.schema.marks.footnoteLabel},new e8.VK({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,i=n.tr,a=o[o.length-1],c=o[0],s=r.to;if(a){var l=c.search(/\S/),u=r.from+c.indexOf(a),d=u+a.length;if((0,e8.tI)(r.from,r.to,n.doc).filter(function(t){return t.mark.type.excluded.find(function(n){return n===e.markType&&n!==t.mark.type})}).filter(function(e){return e.to>u}).length)return;d<r.to&&i.delete(d,r.to),u>r.from&&i.delete(r.from+l,u),s=r.from+l+a.length;var f=(0,sg.H)();(0,sg.t0)(f,!0);var p=e.nodeType.createAndFill({noteId:f},a4.HY.empty);i.insert(s,p),i.addMark(r.from+l,s,e.markType.create({noteId:f})),i.removeStoredMark(e.markType)}}}))]},addKeyboardShortcuts:function(){return{Enter:function(e){var t=e.editor;if(!(0,sg.AW)(t.state.selection))return!1;var n=t.state.selection.node.attrs.noteId;return(0,sg.t0)(n,!0),!0},Escape:function(){var e=(0,sg.RV)();return!!e&&((0,sg.t0)(e,!1),!0)},"Mod-Alt-f":function(e){return e.editor.commands.toggleFootnote()}}},addProseMirrorPlugins:function(){return[sR]},addCommands:function(){return{convertNoteToCard:function(e){return function(t){var n=t.chain,r=t.state,o=r.doc,i=(0,e8.N2)(o,function(t){return"footnote"===t.type.name&&t.attrs.noteId===e});if(1!==i.length)throw Error("Found the wrong number of footnotes nodes: ".concat(i));var a=i[0],c=a.node,s=a.pos,l=(0,e8.IH)(o.resolve(s-1),r.schema.marks.footnoteLabel,{noteId:c.attrs.noteId});if(!l)return console.error("Couldnt find the corresponding footnote mark",{node:c,pos:s}),!1;var u=o.textBetween(l.from,l.to),d={type:"card",attrs:{id:er.C2.generate()},content:[{type:"heading",attrs:{level:1},content:[{type:"text",text:u}]}].concat((0,em.Z)(c.content.toJSON()))},f=new URL(window.location.href);f.hash="card-".concat(d.attrs.id),(0,iA.Nn)(d.attrs.id,!1);var p=o.content.size-1;return n().setTextSelection(l).unsetMark("footnoteLabel").setLink({href:f.toString()}).insertContentAt(p,d).command(function(e){var t=e.tr,n=(0,eM.t)(t.doc.resolve(p));return n&&t.setSelection(n),!0}).deleteRange({from:s,to:s+c.nodeSize}).focusDelayed().run()}},toggleFootnote:function(){return function(e){var t=e.chain,n=e.state,r=e.editor;if(r.isActive("footnoteLabel"))return t().toggleMark("footnoteLabel").focus().run();var o=(0,sg.H)();return(0,sg.t0)(o,!0),(0,sh.N)().push(function(){var e,t;null===(e=(t=r.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!0),s5(o)},"toggleFootnote"),t().setMark("footnoteLabel",{noteId:o}).insertContentAt(n.selection.to,{type:"footnote",attrs:{noteId:o},content:[{type:"paragraph"}]}).run()}}}}}),s5=function(e){var t=document.querySelector('[data-footnote-popover-id="'.concat(e,'"] .ProseMirror'));if(t){t.focus();var n=window.getSelection();if(n){var r=document.createRange();r.setStart(t,0),r.setEnd(t,0),n.removeAllRanges(),n.addRange(r)}}},s8=n(39949).U.extend({addKeyboardShortcuts:function(){var e=this;return{"Shift-Enter":function(){return e.editor.commands.setHardBreak()}}}}),s6=n(73985),s9=n(9432),s7=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,le=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,lt=s9.ZP.extend({addInputRules:function(){return[(0,e8.Cf)({find:s7,type:this.type}),(0,e8.Cf)({find:le,type:this.type})]}}),ln=n(82114),lr=n(51231),lo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.nodeAfter;if(!r)return!1;e.deleteRange(t.pos,t.pos+r.nodeSize);var o=e.doc.nodeAt(t.pos),i=t.pos,a=1;(!n&&t.nodeBefore||n&&!o&&t.nodeBefore)&&(i=t.pos-t.nodeBefore.nodeSize,a=-1);var c=e.doc.resolve(i+1),s=(0,io.E)(e.doc.resolve(a>0?c.pos:c.end()),a);return s&&e.setSelection(s),!0};function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lc=function(e){var t=e.node.attrs.verticalAlign;return(0,ec.jsxs)(rZ.T5,{className:"grid-cell",style:{position:"relative",justifyContent:t},"data-selection-ring":!0,children:[(0,ec.jsx)(r$.A,la(la({handlePlacement:"top"},e),{},{"data-testid":"column-drag-handle",label:(0,ec.jsx)(C.k,{direction:"column",align:"center",children:(0,ec.jsx)(z.cC,{id:"zWdF4l",components:{0:(0,ec.jsx)(K.x,{color:"gray.500"})}})})})),(0,ec.jsx)(rZ.ms,{})]})},ls=e8.NB.create({name:"gridCell",content:"(block | layoutBlock)+",defining:!0,isolating:!0,selectable:!1,containerHandle:!0,parseHTML:function(){return[{tag:"div[class=column]"},{tag:"div",context:"gridLayout/"}]},addAttributes:function(){return{verticalAlign:null}},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"column"}),0]},addNodeView:function(){return(0,rZ.fW)(lc,{update:rF.E7})}}),ll=(0,ay.Z)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,ab.Z)(this,e),this.dragging=t}),lu=new eU.H$("layoutPlugin"),ld=new eU.H$("layoutResizing"),lf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,ab.Z)(this,e),this.activeHandle=t,this.dragging=n}return(0,ay.Z)(e,[{key:"getActiveHandleAbs",value:function(e){return this.activeHandle?(0,nQ.XV)(e,this.activeHandle):null}},{key:"reset",value:function(){return this.activeHandle=null,this.dragging=null,this}},{key:"setHandle",value:function(e,t){return null===t.setHandle?this.activeHandle=null:this.activeHandle=(0,nQ.jS)(e,t.setHandle),this}},{key:"setDragging",value:function(e){return this.dragging=e.setDragging,this}},{key:"apply",value:function(e,t){var n=e.getMeta(ld);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}}]),e}(),lp=function(e){return ld.getState(e.state)},lm=function(e,t){e.dispatch(e.state.tr.setMeta(ld,{setHandle:t}))},lh=function(e,t){e.dispatch(e.state.tr.setMeta(ld,{setDragging:t}))},lg=function(e){e.dispatch(e.state.tr.setMeta(ld,{reset:!0}))},lv=function(e,t){if(!(!e.editable||!t.target||t.target.closest(".column-resize-handle"))){var n=lp(e);if(!n.dragging){var r=function(e,t){var n,r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r||-1===r.inside)return null;var o=e.domAtPos(r.inside);if(!o)return null;var i=o.node.childNodes[o.offset];if(!i)return null;var a=e.state.doc.resolve(r.inside);if((null===(n=a.nodeAfter)||void 0===n?void 0:n.type.name)!=="gridCell")return null;var c=i.getBoundingClientRect(),s=c.left,l=c.right;if(t.clientX-s<=5){var u=e.state.doc.resolve(a.before(a.depth)),d=lb((0,e7.oc)(u),function(e){return e.pos===a.pos});return(null==d?void 0:d.pos)||null}return l-t.clientX<=5?a.pos:null}(e,t);r!==n.getActiveHandleAbs(e.state)&&lm(e,r)}}},lb=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n])){if(0===n)return null;return e[n-1]||null}return null},ly=function(e,t){var n=e.domAtPos(t);return n.node.childNodes[n.offset].offsetWidth},lx=function(e,t){var n=e.domAtPos(t.start()),r=n.node,o=n.offset,i=r.childNodes[o];do if(i&&i.classList&&i.classList.contains("node-gridLayout"))break;while(i=i.parentNode);return i},lj=n(5766);function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lk=function(e){var t=e.getPos,n=e.updateAttributes,r=e.editor,o=e.node,i=r.state.doc.resolve(t()),a=(0,e7.oc)(i);(0,y.useEffect)(function(){a.length!==o.attrs.colWidths.length&&setTimeout(function(){n({colWidths:(0,rH.RS)(a.length)})},0)},[o,a,n])},lC=function(e){var t=e.node,n=e.editor,r=e.getPos,o=t.content.childCount,i=(0,O.CG)(e0.Pw),a=(0,eQ.TZ)();lk(e);var c=o%2==0,s=Math.min((0,ca.i)({base:1,sm:c?2:1,md:c?2:3,lg:4})||4,o),l=(0,y.useCallback)(function(){n.commands.addLayoutCell(r())},[n,r]),u=o<4&&i,d=a?"100%":(t.attrs.colWidths||[]).map(function(e){return"".concat(e,"%")}).join(" ");return(0,ec.jsx)(rq.lO,lO(lO({},e),{},{children:(0,ec.jsxs)(lj.M,{className:(0,eW.cx)("grid-col-controls",i&&"is-editable"),columns:s,gap:"var(--grid-border)",position:"relative",gridTemplateColumns:d,"data-selection-ring":!0,children:[(0,ec.jsx)(rZ.ms,{className:"layout-content"}),(0,ec.jsx)(r$.A,lO(lO({},e),{},{label:T.ag._({id:"Szg6OU"}),"data-testid":"layout-drag-handle"})),(0,ec.jsx)(C.k,{position:"absolute",top:"0",h:"100%",align:"center",w:6,right:-3,className:"add-column",opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",children:u&&(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"AgvHni"}),placement:"top",children:(0,ec.jsx)(J.h,{icon:(0,ec.jsx)(Z.G,{icon:rW.r8}),"aria-label":T.ag._({id:"AgvHni"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,zIndex:"1",onClick:l})})})]})}))},lP=e8.NB.create({name:"gridLayout",content:"gridCell{1, ".concat(4,"}"),group:"cardBlock",defining:!1,isolating:!0,selectable:!1,priority:rB.a.Layout,containerHandle:!0,parseHTML:function(){return[{tag:"div[class=columns]"},{tag:"columns"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"columns"}),0]},renderHTMLforAI:function(e){return["columns",{colWidths:JSON.stringify(e.node.attrs.colWidths)},0]},addAttributes:function(){var e="colWidths";return{colWidths:{default:[],parseHTML:function(t){var n=t.getAttribute("data-".concat(e));if(n)return JSON.parse(n);var r=0;return t.childNodes.forEach(function(e){"DIV"===e.nodeName&&r++}),(0,rH.RS)(r)},renderHTML:function(t){var n=t[e];return n?(0,u.Z)({},"data-".concat(e),JSON.stringify(n)):{}}},fullWidthBlock:{default:!1}}},addNodeView:function(){return(0,rZ.fW)(lC,{update:rF.I_,ignoreMutation:lr.j})},addProseMirrorPlugins:function(){var e;return[(e=this.editor,new eU.Sy({key:lu,state:{init:function(){return new ll},apply:function(e,t){return t}},appendTransaction:function(e,t,n){if(!e.some(function(e){return e.docChanged}))return null;var r=e.find(function(e){return e.selectionSet}),o=n.tr;if(n.doc.descendants(function(e,t){if("gridLayout"===e.type.name&&1==e.childCount){var n=o.mapping.map(t);o.replaceWith(n,o.mapping.map(t+e.nodeSize),e.child(0).content).setMeta("annotationEvent",{type:"unwrap-node",pos:n})}}),!o.docChanged)return null;if(r){var i=r.selection.$from.depth-o.selection.$from.depth,a=(0,io.E)(o.doc.resolve(r.selection.from-i));a&&o.setSelection(a)}return o},props:{handleDOMEvents:{drop:function(e){var t,n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,r=lu.getState(e.state);if(!r)return!1;r.dragging=n}},handleDrop:function(t,n,r){var o=lu.getState(t.state),i=null==o?void 0:o.dragging;o&&(o.dragging=null);var a=null;try{if(!(a=(0,e7.BF)(t,n,r,!1)))return!1}catch(e){return!1}try{var c=t.state.selection,s=!c.empty,l=a,u=l.node,d=l.pos,f=l.side;if(d>c.from&&d<c.to)return!0;var p=r.content.toJSON();if("gridCell"===u.type.name){var m,h="left"===f?d:d+u.nodeSize,g=(null===(m=p[0])||void 0===m?void 0:m.type)!=="gridCell",v=g?{type:"gridCell",content:p}:p;e.chain().insertContentAt({from:h,to:h},v,{updateSelection:!1}).command(function(e){var t=e.tr;return s&&t.deleteSelection(),i&&t.setMeta("annotationEvent",{type:"drop",dragging:i,droppedBlockPos:h+(g?1:0)}),!0}).focusMapped(h,1).run()}else{var b="left"===f?r.size:u.nodeSize;e.chain().insertContentAt({from:d,to:d+u.nodeSize},{type:"gridLayout",content:[{type:"gridCell",content:"left"===f?p:[u.toJSON()]},{type:"gridCell",content:"left"===f?[u.toJSON()]:p}]},{updateSelection:!1}).command(function(n){var r=n.tr;if(s&&r.deleteSelection(),i){var o=(0,ol.lM)({side:f,view:t,tr:r,dragging:i,dropPos:d,dropNode:u,leftContentSize:b});requestAnimationFrame(function(){var t,n;null===(t=(n=e.commands).moveAnnotations)||void 0===t||t.call(n,o)})}return!0}).focusMapped(d,"left"===f?2:u.nodeSize+4).run()}}catch(e){console.error("(caught) [LayoutPlugin] handleDrop error:",e)}return!0}}})),new eU.Sy({key:ld,state:{init:function(){return new lf},apply:function(e,t,n,r){return t.apply(e,r)}},props:{attributes:function(e){return null!==ld.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""}},handleDOMEvents:{mousemove:function(e,t){return!!W.VH.get("layoutResizing")&&(lv(e,t),!1)},mouseleave:function(e){var t;return!!W.VH.get("layoutResizing")&&(null===(t=lp(e)).getActiveHandleAbs(e.state)||t.dragging||lm(e,null),!1)},mousedown:function(e,t){return!!W.VH.get("layoutResizing")&&(!function(e,t){if(e.editable){var n=lp(e),r=n.getActiveHandleAbs(e.state);if(null===r||n.dragging)return;var o=e.state.doc.resolve(r),i=o.node(),a=(0,em.Z)(i.attrs.colWidths),c=(0,e7.ug)(o),s=ly(e,r),l=lx(e,o),u=l.offsetWidth;lh(e,{startX:t.clientX,startWidth:s,colWidths:a,tableWidth:u,colIndex:c});var d=null;return window.addEventListener("mouseup",f),window.addEventListener("mousemove",p),t.preventDefault()}function f(t){window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",p);var n=lp(e);if(n.dragging){if(null===d){lh(e,null);return}if(n.dragging)try{var r,o,i,a,c,s=n.getActiveHandleAbs(e.state);r=d,o=e.state.doc.resolve(s).before(),i=e.state.tr.setNodeMarkup(o,void 0,{colWidths:(0,em.Z)(r)}).setMeta("annotationEvent",{type:"update-node-attrs",pos:o}),e.dispatch(i),a=e.state.doc.resolve(s),(c=lx(e,a).querySelector(".grid-col-controls"))&&(c.style.gridTemplateColumns=""),lh(e,null)}catch(t){lg(e)}d=null}}function p(t){if(!t.which)return f(t);var n=lp(e),r=n.getActiveHandleAbs(e.state);if(n.dragging&&null!==r){var o,i,a,c,s,u,p=n.dragging,m=p.colIndex,h=p.colWidths,g=(i=(o=n.dragging).tableWidth,a=t.clientX-o.startX,nJ()(100*a/i,0));c=l,s=d=(0,rH.GI)(h,m,g,15),(u=c.querySelector(".grid-col-controls"))&&(u.style.gridTemplateColumns=s.map(function(e){return"".concat(e,"%")}).join(" ")),(0,aw.CI)(l)}}}(e,t),!1)}},decorations:function(e){var t=ld.getState(e).getActiveHandleAbs(e);if(null!==t){var n=[];try{var r=document.createElement("div");return r.className="column-resize-handle",n.push(nC.p.widget(t+1,r)),nC.EH.create(e.doc,n)}catch(e){return console.error("(caught) layoutResizing error: ".concat(e.message)),nC.EH.empty}}},nodeViews:{}}})]},addCommands:function(){var e=this;return{useLayoutPreset:function(e,t){return function(n){var r=n.dispatch,o=n.tr,i=n.commands,a=n.view;if(!r)return!0;var c=(0,e7.TH)(o.doc.resolve(e));if(!c)return!0;for(var s=(0,e7.oc)(c),l=t.length-s.length,u=[];0!==l;){if(l<0){var d=(0,e7.Tl)(o.doc.resolve(e),-1),f=d.nodeAfter;o.deleteRange(d.pos,d.pos+f.nodeSize);var p=1===f.childCount&&(0,e8.bR)(f.firstChild)?[]:f.content.toJSON();u=[].concat((0,em.Z)(p),(0,em.Z)(u)),l++;continue}if(l>0){i.addLayoutCell(c.pos,!1),l--;continue}}o.setNodeAttribute(e,"colWidths",t);var m=(0,e7.Tl)(o.doc.resolve(c.pos),-1);if(!m||!m.nodeAfter)return!0;var h=m.pos+m.nodeAfter.nodeSize-1;if(i.insertContentAt(h,u,{updateSelection:!1}),o.selection.from>h||o.selection.to>h){var g=o.doc.resolve(m.pos+1).end(),v=(0,io.E)(o.doc.resolve(g),-1);v&&o.setSelection(v)}var b=lx(a,c);return b&&(0,aw.CI)(b),!0}},insertLayout:function(e){return function(t){var n=t.dispatch,r=t.commands;if(!n)return!0;var o=Array.from(Array(e),function(e){return lS});return r.insertContentAndSelect({type:"gridLayout",attrs:{colWidths:(0,rH.RS)(e)},content:o})}},addLayoutCell:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return function(n){var r=n.chain,o=n.state.doc.nodeAt(e);if(!o||o.type.name!==lP.name)return!1;var i=e+o.nodeSize-1,a=o.attrs.colWidths,c=a.length,s=nJ()(100/(c+1),2),l=(0,rH.CO)(a,c,s,15),u=r().insertContentAt(i,lS,{updateSelection:!1});return t&&u.selectInsertedNode(),u.command(function(t){return t.tr.setNodeAttribute(e,"colWidths",l),!0}).run(),!0}},handleLayoutDelete:function(t){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return function(r){var o=r.tr,i=r.dispatch,a=r.state;if(!i)return!0;var c=(0,e8.Kk)(function(e){return e.type.name===ls.name})(a.selection),s=(0,e8.Kk)(function(e){return e.type.name===lP.name})(a.selection);if(!c||!s)return!1;if(!n||(0,ea.$y)(c.node)){if(2==s.node.childCount){var l=c.node===s.node.child(0),u=l?s.node.child(1):s.node.child(0),d=l?s.start+s.node.child(0).nodeSize+1:s.start+1,f=d+u.content.size;o.replaceWith(s.pos,s.pos+s.node.nodeSize,u.content);var p=(0,io.E)(o.doc.resolve(s.pos+(l?0:u.content.size)),l?1:-1);p&&o.setSelection(p);var m=(0,ol.nf)({insertPos:s.pos,contentPos:d,contentEnd:f,editor:e.editor});requestAnimationFrame(function(){var t,n;null===(t=(n=e.editor.commands).moveAnnotations)||void 0===t||t.call(n,m)})}else{var h=o.doc.resolve(c.pos);lo(o,h,t),o.setNodeAttribute(s.pos,"colWidths",(0,rH.Z7)(s.node.attrs.colWidths,[(0,e7.ug)(h)]))}return!0}var g=a.selection.$from.parent;return!!(a.selection.empty&&g.isTextblock&&(0,e8.bR)(g))&&g==c.node.firstChild&&!t&&(o.deleteRange(a.selection.$from.before(),a.selection.$from.after()),!0)}},goToNextLayoutCell:function(e){return function(t){var n=t.tr,r=t.state,o=(0,e8.Kk)(function(e){return e.type.name===ls.name})(r.selection),i=(0,e8.Kk)(function(e){return e.type.name===lP.name})(r.selection);if(!o||!i)return!1;var a=r.doc.resolve(o.pos),c=e?a.index()+1:a.index()-1;if(c<0||c>=a.parent.childCount)return!1;var s=a.posAtIndex(c);return n.setSelection(eU.Y1.near(r.doc.resolve(s))),!0}}}},addKeyboardShortcuts:function(){return{Tab:function(e){return e.editor.commands.goToNextLayoutCell(!0)},"Shift-Tab":function(e){return e.editor.commands.goToNextLayoutCell(!1)}}}}),lS={type:"gridCell",content:[{type:"paragraph"}]},lA=n(60940),lE=n(96726),lD=n(66490),lI=n(30302),lz=n(31246);function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lN=function(e){var t=e.node,n=e.updateAttributes,r=(0,O.CG)(e0.yx),o=(0,eN.py)("edit",r),i=t.attrs,a=i.checked,c=i.fontSize;return(0,ec.jsx)(lz.l,lM(lM({},e),{},{children:(0,ec.jsxs)(K.x,{as:"li",color:a?"var(--body-color-muted)":void 0,textDecoration:a?"line-through":void 0,transition:"color 250ms ease-out",position:"relative",className:"todo","data-font-size":c,children:[(0,ec.jsx)(lI.X,{contentEditable:!1,suppressContentEditableWarning:!0,isChecked:a,onChange:function(e){o&&n({checked:e.target.checked})},position:"absolute"}),(0,ec.jsx)(rZ.ms,{as:"span",className:"todo-content"})]})}))},lR=/^\s*\[[ ]?\]\s$/,lL=/^\s*\[x\]\s$/,l_=e8.NB.create({name:od.W.Todo,addOptions:function(){return{HTMLAttributes:{}}},content:"inline*",defining:!0,group:"block",selectable:!1,allowFontSizes:"body",addAttributes:function(){return{indent:{default:0},checked:{default:!1},fontSize:{default:null}}},addNodeView:function(){return(0,rZ.fW)(lN,{as:"ul",update:rF.E7,updateWrapperEl:function(e,t){e.setAttribute("indent",t.node.attrs.indent)}})},addInputRules:function(){return[(0,ou.Bx)({find:lR,type:this.type,getAttributes:{checked:!1}},this.editor.state.schema),(0,ou.Bx)({find:lL,type:this.type,getAttributes:{checked:!0}},this.editor.state.schema)]},addKeyboardShortcuts:function(){return{"Mod-,":function(e){return e.editor.commands.setListItems({variant:od.W.Todo})},"Mod-Shift-9":function(e){return e.editor.commands.setListItems({variant:od.W.Todo})}}},parseHTML:function(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",(0,e8.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}}),lH=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";(0,y.useEffect)(function(){var t,n=document.querySelector(e);if(n){var r=function(e){var r;0===e.target.scrollTop&&t>50&&(null===(r=document.activeElement)||void 0===r?void 0:r.tagName)==="IFRAME"?(console.debug("[EditorCore] Prevented scroll event from iframe",e,t,document.activeElement),n.scrollTo(0,t)):t=e.target.scrollTop};return n.addEventListener("scroll",r,{passive:!0}),function(){return n.removeEventListener("scroll",r)}}},[e])},lZ=n(83551),lB=n(88117),lF=n(75361),lW=e8.hj.create({name:"media",addExtensions:function(){return[lF.z]},addCommands:function(){return{handleSpaceToZoom:function(){return function(e){var t=e.state;if(t.selection instanceof eU.qv&&(0,tc.fP)(t.selection.node)){var n=(0,O.bh)(),r=t.selection.node.attrs.id;return!!(r&&(0,lB.v_)(r)(n.getState()))||(n.dispatch((0,e0.RW)({nodeId:t.selection.node.attrs.id})),!0)}return!1}}}}}),lU=n(98474),lG=n(17425),lq=[sp.HU],lV=new eU.H$("migrate"),l$=new eU.Sy({key:lV,state:{init:function(){return{hasRun:!1}},apply:function(e,t){return e.getMeta(lV)||t}},appendTransaction:function(e,t,n){var r=lV.getState(n);if(r.hasRun&&!e.some(function(e){return e.docChanged}))return null;var o=n.doc,i=n.tr,a=n.schema,c=[];return(o.descendants(function(e,t,n){c=lq.map(function(r){return r({node:e,pos:t,tr:i,schema:a,parent:n})})}),!r.hasRun&&c.every(Boolean))?(i.setMeta(lV,{hasRun:!0}),i):i.docChanged?i:null}}),lK=e8.hj.create({name:"migrate",addProseMirrorPlugins:function(){return[l$]}}),lY=n(38438),lX=n(16296);function lJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lJ(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l0=function(e){var t=e.node,n=e.decorations,r=i0(n),o=(0,ic.v)(n),i=t.attrs,a=i.horizontalAlign,c=i.fontSize;return(0,ec.jsxs)(rq.lO,lQ(lQ({},e),{},{style:{position:"relative"},children:[(0,ec.jsx)(rZ.ms,{"data-font-size":c,style:{textAlign:a}}),o&&r&&(!a||"left"===a)&&(0,ec.jsx)(lX.B,lQ({},e))]}))},l1=lY.Z.extend({name:"paragraph",selectable:!1,addNodeView:function(){return(0,rZ.fW)(l0,{update:rF.E7})},allowFontSizes:"body",addAttributes:function(){return{fontSize:{default:null}}},parseHTML:function(){return[{tag:"p"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["p",(0,e8.P1)(t,{class:"paragraph"}),0]},renderHTMLforAI:function(e){return e.HTMLAttributes,["p",{},0]}}),l2=n(23687),l3=n(53064),l4=function(e){var t=e.doc,n=[];return t.descendants(function(e,t){if(e.type.name===ui.name){var r={isSmartLayoutDecoration:!0,numCells:e.childCount};return n.push(nC.p.node(t,t+e.nodeSize,{},r)),e.forEach(function(r,o,i){var a=t+1+o,c={isSmartLayoutCellDecoration:!0,index:i,numCells:e.childCount,smartLayoutAttrs:e.attrs};n.push(nC.p.node(a,a+r.nodeSize,{},c))}),!1}}),nC.EH.create(t,n)},l5=function(e){var t=e.find(function(e){return e.spec.isSmartLayoutDecoration});return t?t.spec:(console.error("[SmartLayout] Decoration not found. This should never happen!",e),{isSmartLayoutDecoration:!0,numCells:0})},l8=function(e){var t=e.find(function(e){return e.spec.isSmartLayoutCellDecoration});return t?t.spec:(console.error("[SmartLayoutCell] Decoration not found. This should never happen!",e),{isSmartLayoutCellDecoration:!0,numCells:0,index:0,smartLayoutAttrs:{options:{},fullWidthBlock:!1}})},l6=(0,ay.Z)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,ab.Z)(this,e),this.dragging=t}),l9=new eU.H$("smartLayoutPlugin"),l7=function(e,t,n){var r=(0,rN.fC)(e,t,n);if(!r)return!1;var o=e.state.tr;return o.setNodeAttribute(r.pos,"image",r.image),o.deleteSelection(),e.dispatch(o),!0},ue=function(e,t,n,r,o){var i=null;try{if(!(i=(0,rN.cQ)(t,n,r)))return!1}catch(e){return!1}try{var a=t.state.selection,c=!a.empty,s=i,l=s.node,u=s.pos,d=s.side;if(u>a.from&&u<a.to)return!0;var f=r.content.toJSON(),p="left"===d?u:u+l.nodeSize;e.chain().insertContentAt({from:p,to:p},f,{updateSelection:!1}).command(function(e){var t=e.tr;return c&&t.deleteSelection(),o&&t.setMeta("annotationEvent",{type:"drop",dragging:o,droppedBlockPos:p+1}),!0}).focusMapped(p,1).run()}catch(e){console.error("(caught) [SmartLayoutPlugin] handleDrop error:",e)}return!0};function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ur=function(e){var t=e.node,n=e.decorations,r=t.attrs,o=(0,rM.P)(r.variantKey).Wrapper,i=l5(n),a=(0,rN.jM)(r),c=(0,O.CG)(e0.hN),s=(0,O.CG)(e0.Pu);return(0,ec.jsxs)(rq.lO,un(un({},e),{},{className:(0,eW.cx)(c&&"is-editable"),children:[(0,ec.jsx)(o,un(un({},i),{},{options:a,theme:s,children:(0,ec.jsx)(rZ.ms,{"data-node-view-content-outer":"smartLayout"})})),(0,ec.jsx)(r$.A,un(un({},e),{},{label:T.ag._({id:"Szg6OU"}),"data-testid":"smart-layout-drag-handle"}))]}))};function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ui=e8.NB.create({name:"smartLayout",group:"cardBlock layoutBlock calloutBlock",content:"smartLayoutCell+",isolating:!0,containerHandle:!0,defining:!0,addAttributes:function(){return{variantKey:{default:void 0},options:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({default:{}},(0,ea.sw)("options")),fullWidthBlock:{default:!1}}},parseHTML:function(){var e=Object.values((0,rM.m)()).filter(function(e){return e.htmlTag}).map(function(e){return{tag:e.htmlTag,getAttrs:function(t){var n={variantKey:e.key,options:e.defaultOptions||{}};return e.options.forEach(function(e){var r=t.getAttribute(e.key);if(r){try{n.options[e.key]=JSON.parse(r)}catch(e){}return}if(e.getDefaultOnParse){n.options[e.key]=e.getDefaultOnParse(t);return}}),n}}});return[{tag:"div[class=smart-layout]"}].concat((0,em.Z)(e))},renderHTMLforAI:function(e){var t=e.node,n=(0,rM.P)(t.attrs.variantKey),r={};return n.options.forEach(function(e){var n,o=null!==(n=t.attrs.options[e.key])&&void 0!==n?n:e.defaultValue;r[e.key]="string"==typeof o?o:JSON.stringify(o)}),[n.htmlTag||n.key,r,0]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"smart-layout"}),0]},addNodeView:function(){return(0,rZ.fW)(ur,{update:rF.E7,ignoreMutation:lr.j})},addProseMirrorPlugins:function(){var e;return[(e=this.editor,new eU.Sy({key:l9,state:{init:function(){return new l6},apply:function(e,t){return t}},props:{decorations:function(e){return l4(e)},handleDOMEvents:{drop:function(e){var t,n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,r=l9.getState(e.state);if(!r)return!1;r.dragging=n}},handleDrop:function(t,n,r){var o=l9.getState(t.state),i=null==o?void 0:o.dragging;return o&&(o.dragging=null),!!(ue(e,t,n,r,i)||l7(t,n,r))}}}))]},addCommands:function(){return{insertSmartLayoutCell:function(e){return function(t){var n=t.chain,r=t.state.doc.resolve(e),o=(0,e8.qv)(r,function(e){return"smartLayout"===e.type.name});if(!o)return!1;var i=(0,rM.P)(o.node.attrs.variantKey).defaultContent||l3.JI;return n().insertContentAt(e,{type:"smartLayoutCell",content:i}).selectInsertedNode().run(),!0}},handleSmartLayoutDelete:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return function(t){var n=t.dispatch,r=t.state,o=t.tr,i=t.chain;if(!n)return!0;var a=(0,e8.Kk)(function(e){return"smartLayoutCell"===e.type.name})(r.selection),c=(0,e8.Kk)(function(e){return"smartLayout"===e.type.name})(r.selection);if(!a||!c||!(0,ea.$y)(a.node))return!1;if(1==c.node.childCount)i().selectNodeAtPos(c.pos).deleteSelectionAndSelectNear(e?1:-1).run();else{var s=o.doc.resolve(a.pos);lo(o,s,e)}return!0}}}}}),ua=["options"];function uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ul=function(e){var t=e.node,n=e.decorations,r=e.editor,o=e.getPos,i=t.attrs,a=i.options,c=(0,d.Z)(i,ua),s=l8(n),l=(0,rM.P)(s.smartLayoutAttrs.variantKey),u=l.Cell,f=(0,O.CG)(e0.Pu),p=(0,rG.c)(f),m=(0,rN.jM)(s.smartLayoutAttrs),g=oB(n).firstChildSize,v=s.index===s.numCells-1,b=(0,O.CG)(e0.hN),x=(0,y.useCallback)(function(){var e=o(),t=r.state.doc.nodeAt(o());t&&r.commands.insertSmartLayoutCell(e+t.nodeSize)},[r,o]),j=l.addDirection?l.addDirection(m):"right";return(0,ec.jsx)(lz.l,us(us({},e),{},{children:(0,ec.jsx)(h.xu,{display:"contents",position:"relative",sx:p.smartLayoutCellSx,"data-spotlight-parent":!0,children:(0,ec.jsxs)(u,us(us(us(us({cellOptions:a,layoutOptions:m,theme:f},s),c),e),{},{firstChildSize:g,children:[(0,ec.jsx)(rZ.ms,{style:{maxWidth:"100%",wordBreak:"break-word"}}),(0,ec.jsx)(r$.A,us(us({},e),{},{handlePlacement:"top","data-testid":"smart-layout-cell-drag-handle",label:(0,ec.jsx)(C.k,{direction:"column",align:"center",children:(0,ec.jsx)(z.cC,{id:"YkfVHA",components:{0:(0,ec.jsx)(K.x,{color:"gray.500"})}})})})),b&&v&&(0,ec.jsx)(C.k,us(us({position:"absolute"},"bottom"===j?{bottom:-3,right:0,width:"100%",height:6,justify:"center"}:{right:-3,bottom:0,height:"100%",width:6,align:"center"}),{},{opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",zIndex:"1",className:"add-button",children:(0,ec.jsx)(P.kH,{label:(0,ec.jsx)(z.cC,{id:"NQ8llq"}),placement:"top",children:(0,ec.jsx)(J.h,{icon:(0,ec.jsx)(Z.G,{icon:rW.r8}),"aria-label":T.ag._({id:"NQ8llq"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:x,onMouseDown:eo.br})})}))]}))})}))};function uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uu(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uf=e8.NB.create({name:"smartLayoutCell",content:"(block | smartLayoutBlock)+",isolating:!0,selectable:!1,containerHandle:!0,imageKeyPath:"image",addAttributes:function(){return{options:ud({default:{}},(0,ea.sw)("options")),width:{default:null},image:ud({default:null},(0,ea.sw)("image")),label:{default:null}}},parseHTML:function(){return[{tag:"div[class=layout-item]"},{tag:"item"},{tag:"div[bookmark]",context:"smartLayout/",getAttrs:(0,iY.xF)(this.storage)},{tag:"div",context:"smartLayout/"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,e8.P1)(t,{class:"layout-item"}),0]},addStorage:iY.gk,renderHTMLforAI:function(e){var t=e.node;return["div",{bookmark:(0,iY.ml)(this.storage,t)},0]},addNodeView:function(){return(0,rZ.fW)(ul,{update:rF.E7})}}),up=e8.hj.create({name:"TableCommands",addCommands:function(){return{selectColumn:function(e){return function(t){var n=t.tr;if(!t.dispatch)return!0;var r=n.doc.resolve(e),o=tn.Xc.colSelection(r);return n.setSelection(o),!0}},selectRow:function(e){return function(t){var n=t.tr;if(!t.dispatch)return!0;var r=n.doc.resolve(e),o=tn.Xc.rowSelection(r);return n.setSelection(o),!0}},selectTable:function(e){return function(t){var n=t.tr;if(!t.dispatch)return!0;var r=n.doc.resolve(e),o=tn.Xc.colSelection(r),i=tn.Xc.rowSelection(o.$anchorCell,o.$headCell);return n.setSelection(i),!0}}}}}),um=e8.NB.create({name:"tableCell",addOptions:function(){return{HTMLAttributes:{}}},content:"(block | tableBlock)+",addAttributes:function(){return{colspan:{default:1},rowspan:{default:1}}},tableRole:"cell",isolating:!0,selectable:!1,parseHTML:function(){return[{tag:"td"},{tag:"th"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["td",(0,e8.P1)(this.options.HTMLAttributes,t),0]}}),uh=n(23769);function ug(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ug(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ug(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ub=function(e){return(0,ec.jsxs)(rZ.T5,{className:"table-row-wrapper",style:{display:"contents"},children:[(0,ec.jsx)("th",{style:{position:"relative",padding:0},children:(0,ec.jsx)(uy,uv({},e))}),(0,ec.jsx)(rZ.ms,{as:"div",className:"table-row-content",style:{display:"contents"}})]})},uy=(0,y.memo)(function(e){var t=(0,uh.Z)({},e),n=t.getPos,r=t.editor;return(0,ec.jsx)(C.k,{height:"100%",align:"center",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,ec.jsx)(r$.A,uv(uv({},t),{},{label:T.ag._({id:"9c44h0"}),onClick:function(){var e=n()+1;r.chain().focus().selectRow(e).run()},left:"-0.5em",top:"1em",zIndex:"3","data-testid":"table-row-control"}))})});uy.displayName="RowControl";var ux=e8.NB.create({name:"tableRow",addOptions:function(){return{HTMLAttributes:{}}},selectable:!1,content:"tableCell+",tableRole:"row",containerHandle:!0,addNodeView:function(){return(0,rZ.fW)(ub,{update:rF.E7,as:"tr"})},parseHTML:function(){return[{tag:"tr"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["tr",(0,e8.P1)(this.options.HTMLAttributes,t),0]}});function uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uj(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uO=n(6776).ZP.extend({name:"highlight",priority:rB.a.Highlight,excludes:"textColor highlight",addAttributes:function(){return{variant:{},hex:{}}},addCommands:function(){var e,t=this;return uw(uw({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{setHighlightColor:function(e){return function(n){return n.commands.setMark(t.name,{hex:e,variant:null})}},setHighlightVariant:function(e){return function(n){return n.commands.setMark(t.name,{variant:e,hex:null})}}})},parseHTML:function(){return[{tag:"mark[class=highlight]"},{tag:"*[highlight]",getAttrs:function(e){var t=e.getAttribute("highlight");return!!t&&(ix.RJ.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.mark,r=n.attrs.hex&&(0,ih.DP)(n.attrs.hex),o=["--highlight-color: ".concat(n.attrs.hex),"color: var(".concat(r?"--highlight-color-dark":"--highlight-color-light",")")].join("; ");return["mark",(0,e8.P1)(this.options.HTMLAttributes,t,{class:"highlight",style:o})]},renderHTMLforAI:function(e){var t,n=e.mark;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}}).configure({multicolor:!0}),uk=e8.vc.create({name:"textColor",excludes:"highlight textColor",priority:rB.a.TextColor,addAttributes:function(){return{variant:{},hex:{}}},addCommands:function(){var e=this;return{setTextColorVariant:function(t){return function(n){return n.commands.setMark(e.name,{hex:null,variant:t})}},setTextColor:function(t){return function(n){return n.commands.setMark(e.name,{hex:t,variant:null})}}}},parseHTML:function(){return[{tag:"span[class=textColor]"},{tag:"*[color]",getAttrs:function(e){var t=e.getAttribute("color");return!!t&&(ix.RJ.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.mark;return["span",(0,e8.P1)(t,{class:"textColor",style:n.attrs.hex?"--text-color: ".concat(n.attrs.hex):void 0})]},renderHTMLforAI:function(e){var t,n=e.mark;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}}),uC=n(53026),uP=n(56261),uS=function(e){var t;return(null===(t=e.find(function(e){return e.spec.isToggleDecoration}))||void 0===t?void 0:t.spec)||{}},uA=n(20387),uE="1.5em";function uD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uD(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uz=function(e){var t=e.node,n=e.decorations,r=t.attrs,o=r.level,i=r.fontSize,a=uS(n),c=a.toggleId,s=void 0===c?"":c,l=a.isEmpty,u=(0,O.CG)(e0.hN),d=(0,O.CG)(e0.Ql),f=(0,O.CG)((0,e0.R)(s))||d,p=(0,y.useCallback)(function(){(0,uP.xB)(s,!f)},[s,f]);return(0,ec.jsx)(rq.lO,uI(uI({},e),{},{hideComments:!f,children:(0,ec.jsxs)(K.x,{as:"div",position:"relative",onClick:u?void 0:p,cursor:u?void 0:"pointer",children:[(0,ec.jsx)(L.z,{left:"calc(0.125em - ".concat(uE,")"),position:"absolute",variant:"ghost",colorScheme:"gray",color:l?"gray.400":void 0,onClick:u?p:void 0,contentEditable:!1,onMouseDown:eo.br,fontSize:"1em",lineHeight:"inherit",height:"100%",px:2,ml:-2,minW:"unset","data-testid":"toggle-button",children:(0,ec.jsx)(K.x,{transform:"rotate(".concat(f?90:0,"deg)"),transformOrigin:"center",transitionProperty:"transform",transitionDuration:"normal",fontSize:"0.75em",children:(0,ec.jsx)(Z.G,{icon:uA.zc})})}),(0,ec.jsx)(rZ.ms,{level:o,placeholder:T.ag._({id:"wja8aL"}),"data-font-size":i,className:(0,eW.cx)((0,oZ.qx)(i)&&ia.A8)})]})}))},uT=e8.NB.create({name:"toggleSummary",content:"inline*",selectable:!1,marks:"bold italic underline code footnoteLabel strike textColor highlight",allowFontSizes:"heading body",addAttributes:function(){return{fontSize:{default:null}}},addNodeView:function(){return(0,rZ.fW)(uz,{update:rF.E7})},renderHTML:function(e){return["summary",e.HTMLAttributes,0]},parseHTML:function(){return[{tag:"summary"}]}});function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uR=function(e){var t=e.node,n=(0,O.CG)(e0.Ql),r=(0,O.CG)((0,e0.R)(t.attrs.id))||n;return(0,ec.jsx)(rq.lO,uN(uN({},e),{},{hideComments:r,readOnly:!r,children:(0,ec.jsxs)(h.xu,{pl:uE,position:"relative","data-open":!!r,className:"toggle",borderRadius:"var(--box-border-radius)","data-selection-ring":"padded",children:[(0,ec.jsx)(rZ.ms,{}),r&&(0,ec.jsx)(h.xu,{position:"absolute",left:"0.375em",bottom:"0.25em",top:"2.5em",borderLeft:"1px solid",borderColor:"var(--box-border-color)"})]})}))},uL=n(19577),u_=/^\s*([+])\s$/,uH=e8.NB.create({name:"toggle",group:"layoutBlock calloutBlock cardBlock smartLayoutBlock tableBlock",content:"toggleSummary (block | layoutBlock)+",selectable:!1,isolating:!0,priority:rB.a.Toggle,expandable:!0,addNodeView:function(){return(0,rZ.fW)(uR,{update:rF.E7})},addProseMirrorPlugins:function(){return[new eU.Sy({key:new eU.H$("TogglePlugin"),props:{handlePaste:function(e,t,n){var r=e.state,o=r.selection,i=r.tr,a=(0,e8.Kk)(uP.O4)(o);if(!a)return!1;var c=null,s=null,l=[];if(n.content.descendants(function(e){e.isTextblock&&(c?l.push(e):(c=e.content,s=(0,oZ.Aw)(e)||null))}),c){s&&i.setNodeAttribute(a.pos,"fontSize",s),i.replaceSelection(a4.p2.maxOpen(c));var u=i.mapping.map(a.pos+a.node.nodeSize);i.replaceRange(u,u,a4.p2.maxOpen(a4.HY.fromArray(l)));var d=(0,io.a)(i,-1);return d&&i.setSelection(d),e.dispatch(i),!0}},decorations:function(e){var t=e.doc,n=[];return t.descendants(function(e,t,r){if(r&&(0,uP.O4)(e)){var o=(0,ea.Jn)(r.content).slice(1).every(function(e){return(0,ea.bR)(e)}),i=nC.p.node(t,t+e.nodeSize,{},{isToggleDecoration:!0,toggleId:r.attrs.id,isEmpty:o});n.push(i)}}),nC.EH.create(t,n)}}})]},addAttributes:function(){return{id:(0,cY.b)(uL.C)}},addInputRules:function(){var e;return[(e={find:u_,innerType:this.editor.schema.nodes.toggleSummary,outerType:this.type,getInnerAttributes:function(e){return{fontSize:(0,oZ.Aw)(e)}},getOuterAttributes:function(){var e=(0,uL.C)();return(0,uP.xB)(e,!0),{id:e}}},new e8.VK({find:e.find,handler:function(t){var n=t.state,r=t.range;t.match;var o=n.doc.resolve(r.from);if(o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.outerType)){var i=(0,e8.nU)(e.getOuterAttributes,void 0,o.parent)||{},a=(0,e8.nU)(e.getInnerAttributes,void 0,o.parent)||{},c=n.tr.delete(r.from,r.to),s=c.doc.resolve(r.from),l=s.parent,u=e.outerType.createAndFill(i,[e.innerType.create(a,l.content)]);c.replaceWith(s.before(),s.after(),u);var d=(0,io.E)(c.doc.resolve(r.from));d&&c.setSelection(d)}}}))]},addCommands:function(){var e=this;return{unwrapToggle:function(){return function(e){var t=e.state,n=e.editor,r=e.tr;if(!n.isActive("toggleSummary"))return!1;var o=t.selection,i=t.schema,a=(0,e8.Kk)(uP.AH)(o);if(!a||a.start+1!==o.from||!o.empty)return!1;var c=(0,ea.Jn)(a.node.content),s=c[0],l=(0,oZ.hx)(s.attrs.fontSize),u=l.type,d=l.level,f=["heading"===u?i.nodes.heading.create({level:d},s.content):i.nodes.paragraph.create({fontSize:s.attrs.fontSize},s.content)].concat(c.slice(1));r.replaceWith(a.pos,a.pos+a.node.nodeSize,a4.HY.from(f)).setMeta("annotationEvent",{type:"unwrap-node",pos:a.pos});var p=r.doc.resolve(a.pos),m=(0,eM.t)(p);return m&&r.setSelection(m),!0}},joinBackwardInToggle:function(){return function(e){var t=e.state,n=e.editor,r=e.chain;if(n.isActive("toggleSummary"))return!1;var o=t.selection,i=(0,e8.Kk)(uP.AH)(o);if(!i)return!1;var a=(0,ea.Jn)(i.node.content).slice(1);return!!o.empty&&0===o.$from.parentOffset&&1===a.length&&(r().command(function(e){var t=e.tr,r=t.doc.resolve(i.pos+1).end();return t.insert(r,n.schema.nodes.paragraph.create()),!0}).joinBackward(),!0)}},wrapWithToggle:function(t){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return function(r){var o,i=r.state,a=r.tr,c=i.doc,s=i.selection,l=i.schema,u=s.$from.blockRange(s.$to);if(!u)return!1;var d=[];c.nodesBetween(s.from,s.to,function(e,t,n){if(n===u.parent)return d.push(e),!1});var f=[];if(!t&&d[0].isTextblock&&d[0].textContent.length<100){var p=(0,oZ.Aw)(d[0]);o=l.nodes.toggleSummary.create({fontSize:p},d[0].content),f=d.slice(1)}else{var m=t?l.text(t):null;o=l.nodes.toggleSummary.create(null,m),f=d}var h=(0,uL.C)();n&&(0,uP.xB)(h,!0);var g=e.editor.schema.nodes.toggle.createAndFill({id:h},a4.HY.fromArray([o].concat((0,em.Z)(f))));if(!g)return!1;var v=u.start,b=u.end;a.replaceRangeWith(v,b,g).setMeta("annotationEvent",{type:"wrap-nodes",start:v,end:b,level:1});var y=(0,eM.G)(a);if(!y)return!1;var x=(0,eM.t)(y,-1);return x&&a.setSelection(x),!0}},enterInToggle:function(){return function(e){var t=e.editor,n=e.state,r=e.chain;if(!t.isActive("toggle"))return!1;var o=(0,e8.Kk)(uP.AH)(n.selection);if(!o||(0,uP.fH)(o.node.attrs.id))return!1;var i=t.state.selection.$from;if(i.parentOffset===i.parent.nodeSize-2){var a=o.pos+o.node.nodeSize;return r().insertContentAt(a,{type:"paragraph"}).selectInsertedNode().run(),!0}return(0,uP.xB)(o.node.attrs.id,!0),!0}}}},addKeyboardShortcuts:function(){return{Enter:function(e){return e.editor.commands.enterInToggle()},Backspace:function(e){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.unwrapToggle()},function(){return t.joinBackwardInToggle()}]})}}},addExtensions:function(){return[uL.w,uT]},renderHTML:function(e){return["details",e.HTMLAttributes,0]},parseHTML:function(){return[{tag:"details"}]}}),uZ=n(39475).Z,uB=n(97030),uF=n.n(uB);function uW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uG=e8.hj.create({name:"updateAttributesAtPos",addCommands:function(){return{updateAttributesAtPos:function(e,t){return function(n){var r=n.tr;return Object.entries(t).forEach(function(t){var n=(0,E.Z)(t,2),o=n[0],i=n[1];r.setNodeAttribute(e,o,i)}),!0}},updateNestedAttributesAtPos:function(e,t){return function(n){var r=n.tr,o=r.doc.nodeAt(e);return!!o&&(Object.entries(t).forEach(function(t){var n=(0,E.Z)(t,2),i=n[0],a=n[1],c=uF()(a)?uU(uU({},o.attrs[i]),a):a;r.setNodeAttribute(e,i,c)}),!0)}}}}}),uq=n(40618),uV=n(10476),u$=n(39057),uK=n(58499),uY=n(28165),uX=n(12483),uJ=function(e){(0,sy.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,sj.Z)(r);if(t){var o=(0,sj.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,sx.Z)(this,e)});function r(e){var t;return(0,ab.Z)(this,r),t=n.call(this,e),(0,u.Z)((0,sv.Z)(t),"errorEventId",null),t.state={hasError:!1,errMessage:""},t}return(0,ay.Z)(r,[{key:"componentDidCatch",value:function(e,t){this.errorEventId=uX.Tb(e,{extra:{info:null==t?void 0:t.componentStack}})}},{key:"render",value:function(){return this.state.hasError?(0,ec.jsx)(u0,{errMessage:this.state.errMessage,errorId:this.errorEventId,isInsideDrawer:this.props.isInsideDrawer}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errMessage:e.message}}}]),r}(y.Component),uQ=["collaborative-editor-wrapper","public-static-editor-wrapper-inner","example-static-editor-wrapper-inner","custom-theme-tabs","custom-theme-tab-panels","custom-theme-preview-editor"].map(function(e){return'[data-testid="'.concat(e,'"]')}).join(", "),u0=function(e){var t,n=e.errMessage,r=e.errorId,o=e.isInsideDrawer,i=void 0!==o&&o;return(0,ec.jsxs)(C.k,{minH:"100%",direction:"column","data-editor-error-component":!0,align:"center",children:[(0,ec.jsx)(uY.Global,{styles:(t={},(0,u.Z)(t,uQ,{height:"100%"}),(0,u.Z)(t,"html",{height:"100%"}),(0,u.Z)(t,"body",{height:"100%"}),t)}),(0,ec.jsxs)(R.K,{flex:1,align:"center",justify:"center",p:6,spacing:i?[4,4,4,6]:[6,10,12],w:i?["100%","100%","100%","container.sm","container.md"]:["100%","100%","container.md"],children:[(0,ec.jsxs)(R.K,{textAlign:"center",children:[(0,ec.jsx)(K.x,{fontSize:i?["xl","xl","2xl"]:["xl","2xl","3xl"],fontWeight:"600",fontFamily:"p22-mackinac-pro, sans-serif",children:(0,ec.jsx)(z.cC,{id:"gtI5JW"})}),!i&&(0,ec.jsx)(K.x,{fontSize:"lg",children:(0,ec.jsx)(z.cC,{id:"9QTtU0"})})]}),(0,ec.jsx)($.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:i?[4,4,4,8]:[6,6,10],maxW:i?"min(80%, 22rem)":"min(100%, 24rem)"}),n&&(0,ec.jsxs)(uK.E,{py:1,px:12,children:[n,r&&(0,ec.jsx)(z.cC,{id:"sS1P4/",values:{errorId:r},components:{0:(0,ec.jsx)("br",{})}})]}),(0,ec.jsxs)(R.K,{spacing:4,children:[!i&&(0,ec.jsx)(L.z,{alignSelf:"center",variant:"solid",size:["md","md","lg"],onClick:function(){window.location.reload()},children:(0,ec.jsx)(z.cC,{id:"C6f2hU"})}),(0,ec.jsx)(K.x,{size:"sm",textAlign:"center",children:(0,ec.jsx)(z.cC,{id:"E4kJGH"})})]})]})]})},u1=n(17812),u2=["isInsideDrawer"];function u3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u4=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFootnoteEditor;return[cH,cZ,cF.x,iS.Zb,i$.o4.configure({enabled:!j.v.GAMMA_PUPPETEER_SERVICE}),iA.K9,iq,az,av,uG,b.x,s8,lA.r.configure({openOnClick:!1}),cr,cw.Z,ir,lt,uZ,v.Re,ou.aV,lE.g,lD.k,l_,uC.D,s6.X6,l1,o9,iP,cn.d,tu.Kq,uO,il,im,uk,oU,r3.extend({resizable:!0,allowTableNodeSelection:!0}),ux,um,up,lW,lU.om,rp.Ee,lG.nk,t1.cx,sd,lZ.r,aK.cB,aK.nk,aK.s6,sp.Hy,ch,lP,ls,ui,uf,s4,s1,cf,a3,uH,sf,iQ,o1.l,sm,ce,lK,cV,g.f,l2.U,aT,ln.$m.configure({addSelectionKeyMaps:!(void 0!==t&&t)}),ln.$7]},u5=function(e){var t=(0,k.As)("editor"),n=(0,O.CG)(function(t){var n=(0,e0.gh)(t),r=(0,e0.i2)(t);return n===ny.q.SLIDE_VIEW&&r?(0,iS.U8)(r):e});(0,y.useEffect)(function(){n&&t.setScrollSelector(n)},[t,n])},u8=function(e){var t=e.onCreate,n=void 0===t?function(){}:t,r=e.extensions,o=void 0===r?[]:r,i=e.readOnly,a=void 0===i||i,c=e.shouldSupportComments,s=void 0!==c&&c,l=e.shouldSupportMenus,u=e.initialContent,d=e.doc,p=void 0===d?void 0:d,g=e.docId,v=void 0===g?void 0:g,b=e.isStatic,k=void 0!==b&&b,C=e.animationsEnabled,P=void 0===C||C,S=e.scrollingParentSelector,A=void 0===S?void 0:S,E=e.theme,D=e.editorId,I=(0,eN.py)("edit",p),z=(null==p?void 0:p.organization)&&p.organization.id,T=(0,y.useState)(void 0!==l&&l)[0],M=(0,y.useState)(!1),N=M[0],R=M[1],L=(0,x.I0)(),_=(0,O.CG)(e0.Pw),H=(0,y.useMemo)(function(){return u4()},[]),Z=(0,w.y)("debugLogging"),B=(0,u$.O)(D),F=B.setEditorRendered,W=B.onEditorUnload;lH(A),u5(A);var U=(0,rZ.jE)({onCreate:function(e){return(0,f.Z)(m().mark(function t(){var n;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.editor,console.debug("[EditorCore][onCreate] TipTap editor is now ready"),(0,u1.w)(n,L),R(!0);case 4:case"end":return t.stop()}},t)}))()},onUpdate:function(e){var t,n,r=e.editor;null===(t=cF.S.getState(r.state))||void 0===t||t.processChanges(L),null===(n=i$.Z8.getState(r.state))||void 0===n||n.processChanges(L)},onSelectionUpdate:function(e){var t=e.editor;console.debug("[EditorCore][onSelectionUpdate] selection updated",t.state.selection.from,t.state.selection.to,t.state.selection)},onDestroy:function(){Z&&console.warn("[EditorCore][onDestroy] This should only happen on page navigation."),W(),L((0,e0.mc)())},extensions:H.concat(o),content:void 0===u?void 0:u,editable:!1}),G=!!(U&&N);return((0,y.useEffect)(function(){E&&L((0,e0.Dc)({theme:E}))},[E,L]),(0,eR.vm)(function(){U&&G&&new Promise(function(e){setTimeout(function(){requestAnimationFrame(function(){var t=U.state.doc.resolve(1),n=(0,eM.t)(t);n&&U.commands.command(function(e){return e.tr.setSelection(n),!0}),e()})})}).then(function(){console.debug("[EditorCore][fullyReady] Menus initialized & focused at start - fully ready"),n({editor:U}),requestAnimationFrame(function(){requestIdleCallback(function(){F()})})})},[U,G,n,F],[G]),(0,y.useEffect)(function(){p&&L((0,e0.pl)({doc:p}))},[p,L]),(0,y.useEffect)(function(){L((0,e0.tp)({isStatic:k}))},[k,L]),(0,y.useEffect)(function(){L((0,e0.Nr)({animationsEnabled:P}))},[P,L]),(0,y.useEffect)(function(){L((0,e0.QU)({commentsEnabled:s}))},[s,L]),(0,y.useEffect)(function(){if(U)return j.v.DEBUG_ENABLED&&void 0===window.gammaEditorCore&&(window.gammaEditorCore=U),U.gammaOrgId=z,U.gammaDocId=v,function(){delete window.gammaEditorCore}},[U,v,z]),(0,y.useEffect)(function(){U&&L((0,e0.iS)({isAllowedToEdit:I&&!a}))},[U,L,a,I]),(0,y.useEffect)(function(){U&&G&&requestAnimationFrame(function(){U.setOptions({editable:_})})},[U,L,_,G,F]),(0,eQ.Yk)(U),(0,eQ.p2)(U),(0,eQ.f3)(U,_),(0,eQ.vE)(U),U&&N)?(0,ec.jsx)(uV.O,{value:D,children:(0,ec.jsxs)(h.xu,{id:"editor-core-root",className:"editor-core-root","data-testid":"editor-core-root",width:"100%",position:"relative",sx:sG.I,children:[(0,ec.jsx)(rZ.kg,{editor:U,style:{width:"100%",height:"100%"},"data-testid":"tiptap-react-root-wrapper",className:"highlight-mask"}),T&&(0,ec.jsx)(uq.a,{editorId:D,children:(0,ec.jsx)(u9,{editor:U,scrollingParentSelector:A})})]})}):(0,ec.jsx)(ec.Fragment,{})},u6=function(e){var t=e.isInsideDrawer,n=(0,d.Z)(e,u2);return(0,ec.jsx)(uJ,{isInsideDrawer:t,children:(0,ec.jsx)(u8,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u3(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n))})},u9=(0,y.memo)(function(e){var t=e.editor,n=e.scrollingParentSelector;return(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(o0,{editor:t,scrollingParentSelector:n}),(0,ec.jsx)(eT,{editor:t}),(0,ec.jsx)(e5,{editor:t})]})})},87880:function(e,t,n){n.d(t,{f:function(){return p}});var r=n(95235),o=n(82269),i=n(23769),a=n(43997),c=n(19700),s=n(4707),l=n(52322),u=["reduxData"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=(0,i.Z)({},e),n=t.reduxData,r=(0,o.Z)(t,u),d=(0,c.c)(n);return(0,l.jsx)(a.zt,{store:d,children:(0,l.jsx)(s.y,f(f({},r),{},{readOnly:!0,isStatic:!0,animationsEnabled:!1}))})}},17812:function(e,t,n){n.d(t,{w:function(){return a}});var r=n(47592),o=n(79073),i=n(66843),a=function(e,t){var n,a;null===(n=i.S.getState(e.state))||void 0===n||n.compute(e.state.doc).processChanges(t),null===(a=o.Z8.getState(e.state))||void 0===a||a.compute(e.state).processChanges(t),e.commands.command(function(){return(0,r.E0)(e.state.doc,t),!0})}},10792:function(e,t,n){n.d(t,{f:function(){return g}});var r=n(13089),o=n(96412),i=n(41701),a=n(90129),c=n(29017),s=n(48200),l=n(95235),u=n(2784),d=n(13121),f=n(1301),p=n(16587),m=n(52322),h=function(e){(0,a.Z)(d,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(d);if(t){var r=(0,s.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;return(0,o.Z)(this,d),t=n.call(this,e),(0,l.Z)((0,i.Z)(t),"editorContentRef",void 0),(0,l.Z)((0,i.Z)(t),"editorContentChildren",void 0),(0,l.Z)((0,i.Z)(t),"RootComponent",null),(0,l.Z)((0,i.Z)(t),"renderers",new Map),(0,l.Z)((0,i.Z)(t),"mounted",!1),t.editorContentRef=u.createRef(),t.editorContentChildren=u.createRef(),t.state={counter:0},t.init(),t}return(0,r.Z)(d,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"init",value:function(){var e=this.props.editor;if(e){var t=e.state.doc;e.contentComponent=this,e.createNodeViews(),this.RootComponent=(0,m.jsx)(v,{editor:e,node:t})}}},{key:"setRenderer",value:function(e,t){this.renderers.set(e,t),this.mounted&&this.setState({counter:this.state.counter+1})}},{key:"removeRenderer",value:function(e){this.renderers.delete(e),this.mounted&&this.setState({counter:this.state.counter+1})}},{key:"render",value:function(){return this.props.editor?(0,m.jsx)("div",{className:"ProseMirror",children:this.RootComponent}):null}}]),d}(u.Component),g=u.memo(h),v=function(e){var t=e.node,n=e.editor;return(0,m.jsx)(f.j.Provider,{value:{editor:n,node:t},children:(0,m.jsx)(d.T5,{children:(0,m.jsx)(p.m,{})})})}},16587:function(e,t,n){n.d(t,{m:function(){return O}});var r=n(82269),o=n(12741),i=n(81333),a=n(95235),c=n(34676),s=n(72338),l=n(30764),u=n(2784),d=n(1301),f=n(12691),p=n(52322),m=["nodeName"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(e.attributes);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o.name;"class"===i?n.className=o.value:"contenteditable"===i&&"false"===o.value||(n[i]=o.value)}}catch(e){r.e(e)}finally{r.f()}return n},y=function(e,t,n){var r=Array.from(t.contentComponent.renderers.values()).find(function(t){return t.props.node===e});if(r){var o=r.element.nodeName.toLowerCase()||"div";return(0,p.jsx)(o,g(g({},b(r.element)),{},{style:{whiteSpace:"inherit"},children:(0,p.jsx)(r.component,g(g({},r.props),{},{children:n}))}),r.id)}return null},x=function(e){var t;return null!==(t=e.config.renderHTMLforSSR)&&void 0!==t?t:e.config.renderHTML},j=function(e){var t=g({},e);return null!=t&&t.style&&(t.STYLE=t.style,delete t.style),null!=t&&t.class&&(t.className=t.class,delete t.class),null!=t&&t.colspan&&(t.colSpan=t.colspan,delete t.colspan),null!=t&&t.rowspan&&(t.rowSpan=t.rowspan,delete t.rowspan),t},w=function(e,t){var n,r=e.extensionManager.extensions.find(function(e){return e.name===t.type.name});if(!r)return[];for(var o=e.extensionManager.attributes.filter(function(e){return e.type===t.type.name}),a=(0,s.m7)(t,o),c=r;!x(c)&&c.parent;)c=c.parent;var l=null===(n=x(c))||void 0===n?void 0:n.bind(r);if(!l)return[];var u=l({HTMLAttributes:a,node:t,mark:t,editor:e}),d=(0,i.Z)(u,3),f=d[0],p=d[1],m=d[2];return[f,j(p),m]},O=u.memo(function(e){var t=(0,d.a)(),n=t.node,a=t.editor,s=t.getPos;if(!n||!a)return null;var h=e.as||"div",v=n.isInline||n instanceof l.vc?"span":"div",b=[],x="function"==typeof s?s():null,j=function e(t,n,s){var l=y(t,a);if(l)return l;var d=function(e){return Array.from(t.marks).reverse().reduce(function(e,t){var n=y(t,a,e);if(n)return n;var r=w(a,t)||[],o=(0,i.Z)(r,3),c=o[0],l=o[1];return(o[2],c)?u.createElement(c,g({key:s},l),e):e},e)},h=null===x?[]:(0,f.su)(a,x+n+1),v=w(a,t),b=(0,i.Z)(v,3),j=b[0],O=b[1],k=b[2];if(j&&O){var C=null;if(0===k&&t.firstChild){var P=[];t.forEach(function(t,r,o){P.push(e(t,n+r,"".concat(s,"_").concat(o)))}),C=P,console.debug("[SSR NodeViewContent] HOLE",P)}else Array.isArray(k)?(console.debug("[SSR NodeViewContent] children array",k),C=(0,o.Z)(k)):k&&(console.debug("[SSR NodeViewContent] children plain",k),C=k);var S=h.map(function(e){var t;return null===(t=e.type)||void 0===t?void 0:t.attrs}).reduce(function(e,t){return g(g({},e),t)},{}),A=(S.nodeName,(0,r.Z)(S,m)),E=g(g(g({},O),A),{},{className:(0,c.cx)(A.class,O.class)});return delete E.class,console.debug("[SSR NodeViewContent] non-nodeview:",s,E,k),d(u.createElement(j,g({key:s},E),C))}return t.isText?d((0,p.jsx)(u.Fragment,{children:t.textContent},s)):null};return n.forEach(function(e,t){var r=b.length+1,o=j(e,t,"".concat(r));o?b.push(o):console.warn("%c [Simple NodeViewContent] UNKNOWN NODE $$$$$$$$$$$$$$$$$$$$$$$$$","background-color: aqua; font-weight: bold",{unknownNode:e,parentNode:n})}),(0,p.jsx)(h,g(g({},e),{},{"data-node-view-content":"",style:g({whiteSpace:"pre-wrap"},e.style),children:(0,p.jsx)(v,{"data-node-view-content-inner":n.type.name,style:{whiteSpace:"inherit"},children:0===b.length?null:1===b.length?b[0]:b})}))});O.displayName="NodeViewContent"},67769:function(e,t,n){n.d(t,{f:function(){return d}});var r=n(96412),o=n(13089),i=n(41701),a=n(90129),c=n(29017),s=n(48200),l=n(95235),u=n(98875),d=new(function(e){(0,a.Z)(d,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(d);if(t){var r=(0,s.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function d(){var e;(0,r.Z)(this,d);for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),(0,l.Z)((0,i.Z)(e),"viewedCards",{}),(0,l.Z)((0,i.Z)(e),"cardViewedThreshold",u.VH.get("cardViewedThreshold")),e}return(0,o.Z)(d,[{key:"initialize",value:function(){var e=this;this.on("cardViewed",function(t){var n=t.cardId,r=t.interval;e.viewedCards[n]=e.viewedCards[n]||0,e.viewedCards[n]+=r});var t=function(){var t;e.cardViewedThreshold=null!==(t=u.VH.get("cardViewedThreshold"))&&void 0!==t?t:5e3};u.VH.subscribe("cardViewedThreshold",t),t()}},{key:"flush",value:function(){var e={};for(var t in this.viewedCards){var n=this.viewedCards[t];n&&!(n<this.cardViewedThreshold)&&(e[t]=Math.floor(n/1e3))}this.emit("flush",{viewed:e}),this.viewedCards={}}},{key:"destroy",value:function(){this.flush(),this.off("cardViewed"),this.off("flush")}}]),d}(n(98555).v))},9828:function(e,t,n){n.d(t,{UO:function(){return er},pP:function(){return ea},zm:function(){return ei},xr:function(){return eo}});var r=n(95235),o=n(12741),i=n(20117),a=n(8292),c=n(2848),s=n(6109),l=n(50096),u=n(24542),d=n(8280),f=n(49646),p=n(46503),m=n(24623),h=n(71838),g=n(64641),v=n(83341),b=n(12189),y=n(48290),x=n(23577),j=n(51503),w=n(68505),O=n(17408),k=n(21439),C=n(82774),P=n(36250),S=n(73433),A=n(32407),E=n(44117),D=n(829),I=n.n(D),z=n(87254),T=n(87622),M=n.n(T),N=n(98875),R=n(54735),L=[{key:"autoComplete",name:function(){return z.ag._({id:"ZyVTQp"})},shortcut:n(9557).o,nodeName:"paragraph",icon:d.KC,keywords:["continue","autocomplete","typeahead","complete","continue","ai"],execute:function(e){e.commands.autoComplete()},featureFlag:"aiAutocomplete",creditType:"autocomplete"}],_=n(82577),H=n(71405),Z=n(12823),B=n(70039),F=n(61686),W=n(74358),U=n(95141),G=n(31619),q=n(53026),V=n(48181),$=n(17508),K=n(19577),Y=n(56261);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q=[{key:"toggle",name:function(){return z.ag._({id:"JFciKP"})},description:function(){return z.ag._({id:"Woijyj"})},keywords:["toggle","expand","collapse","disclosure","details"],nodeName:"toggle",icon:V.zc,execute:function(e){var t=(0,K.C)();(0,Y.xB)(t,!0),e.chain().insertContent(J(J({},R.e.toggle),{},{attrs:{id:t}})).selectInsertedNode().run()},dragStartFn:function(e){var t=(0,K.C)();(0,Y.xB)(t,!0),(0,$.U)(e,J(J({},R.e.toggle),{},{attrs:{id:t}}))}}],ee=n(95472);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var er=[{key:"insertCardAfter",name:function(){return z.ag._({id:"coNSGP"})},nodeName:"card",icon:E.Mp,execute:function(e){return e.commands.insertCardAfter()},checkDisabled:function(e){return!e.schema.nodes.card},keywords:["card","below","after","new"]},{key:"insertCardInside",name:function(){return z.ag._({id:"lOmsEK"})},nodeName:"card",icon:A.uF,execute:function(e){return e.commands.insertNestedCard()},checkDisabled:function(e){return!e.schema.nodes.card},keywords:["nested","card","sub"]},{key:"splitCard",name:function(){return z.ag._({id:"ONXbeB"})},nodeName:"card",icon:S.C5,shortcut:"***",execute:function(e){return e.commands.splitCardAtSelection()},checkDisabled:function(e){return!e.schema.nodes.card},dragStartFn:function(e){(0,$.U)(e,R.e.normalText)},dragEndFn:function(e){e.chain().splitCardAtSelection().focusDelayed().run()},keywords:["split"]}].concat((0,o.Z)((0,H.qA)()),[{key:"title",name:function(){return z.ag._({id:"MHrjPM"})},nodeName:"title",icon:a.K5,shortcut:"/title",execute:function(e){e.chain().focus().setNode(q.D.name,{level:q.Y.DocTitle}).run()},keywords:["title","big"]},{key:"h1",name:function(){return z.ag._({id:"lXKZGw"})},nodeName:"heading",icon:P.kV,shortcut:"# Heading 1",execute:function(e){e.chain().focus().setHeading({level:1}).run()},keywords:["heading","h1"]},{key:"smallText",name:function(){return z.ag._({id:"LBkaLa"})},nodeName:"paragraph",icon:C.K5,shortcut:"/sm",execute:function(e){e.chain().focus().setFontSize("sm").run()},keywords:["sm","small","paragraph"]},{key:"normalText",name:function(){return z.ag._({id:"5NwZ8t"})},nodeName:"paragraph",icon:C.K5,shortcut:"/md",execute:function(e){e.chain().focus().setFontSize("md").run()},keywords:["md","normal","paragraph","default","body"]},{key:"largeText",name:function(){return z.ag._({id:"0Sz17G"})},nodeName:"paragraph",icon:C.K5,shortcut:"/lg",execute:function(e){e.chain().focus().setFontSize("lg").run()},keywords:["lg","large","paragraph"]},{key:"h2",name:function(){return z.ag._({id:"El7NbA"})},nodeName:"heading",icon:k.ej,shortcut:"## Heading 2",execute:function(e){e.chain().focus().setHeading({level:2}).run()},keywords:["heading","h2"]},{key:"h3",name:function(){return z.ag._({id:"SFN6dN"})},nodeName:"heading",icon:O.WT,shortcut:"### Heading 3",execute:function(e){e.chain().focus().setHeading({level:3}).run()},keywords:["heading","h3"]},{key:"h4",name:function(){return z.ag._({id:"nJeKmw"})},nodeName:"heading",icon:w.qv,shortcut:"#### Heading 4",execute:function(e){e.chain().focus().setHeading({level:4}).run()},keywords:["heading","h4"]},{key:"openEmojiPicker",name:function(){return z.ag._({id:"tKlWWY"})},nodeName:"emoji",icon:i.faFaceSmile,execute:function(e){return e.commands.openEmojiPicker()},keywords:["icon","symbol","emoji"]},{key:"bulletedList",name:function(){return z.ag._({id:"ynb7Kh"})},nodeName:W.W.Bullet,icon:j.gf,shortcut:"- Item",execute:function(e){e.chain().setListItems({variant:W.W.Bullet}).selectInsertedNode().run()},keywords:["bullets","unordered","ul","list"]},{key:"numberedList",name:function(){return z.ag._({id:"M3G9ZD"})},nodeName:W.W.Numbered,icon:x.nF,shortcut:"1. Item",execute:function(e){e.chain().setListItems({variant:W.W.Numbered}).selectInsertedNode().run()},keywords:["numbers","numbered","ordered","ol","list"]},{key:"todoList",name:function(){return z.ag._({id:"rCIbrq"})},nodeName:W.W.Todo,icon:y.A8,shortcut:"[] Item",execute:function(e){e.chain().setListItems({variant:W.W.Todo}).selectInsertedNode().run()},keywords:["todo","task","checkbox","list","checklist"]},{key:"blockquote",name:function(){return z.ag._({id:"OLMhPm"})},nodeName:"blockquote",icon:b.vV,shortcut:"> Quote",execute:function(e){return e.chain().focus().toggleBlockquote().run()},keywords:["quote","blockquote"]}],(0,o.Z)((0,_.Di)()),[{key:"buttonGroup",name:function(){return z.ag._({id:"hxBFty"})},nodeName:"buttonGroup",icon:v.du,execute:function(e){return e.commands.insertContentAndSelect(R.e.buttonGroup)},description:function(){return z.ag._({id:"IvDo5O"})},keywords:["button","link","click","call to action"]},{key:"codeBlock",name:function(){return z.ag._({id:"4A3Yzu"})},nodeName:"codeBlock",icon:g.dT,execute:function(e){e.chain().focus().setCodeBlock().run()},keywords:["code","block","codeblock"]},{key:"mathBlock",name:function(){return z.ag._({id:"TI6GY9"})},nodeName:"math_display",featureFlag:"math",icon:h.xF,keywords:["math","equation","latex","katex"],execute:function(e){return e.chain().focus().insertContent(R.e.mathBlock).run()},dragEndFn:function(){},description:function(){return z.ag._({id:"mBJFYh"})}},{key:"mathInline",name:function(){return z.ag._({id:"qc9cD+"})},featureFlag:"math",nodeName:"math_inline",icon:m.eD,keywords:["math","equation","latex","katex"],execute:function(e){return e.chain().focus().insertMathInline().run()},shortcut:"$x^2$ "},{key:"table2",name:function(){return z.ag._({id:"3gSgpL"})},keywords:["table","grid","data"],nodeName:"table",icon:p.B3,execute:function(e){return e.commands.insertTable({rows:2,cols:2,withHeaderRow:!1})}},{key:"table3",name:function(){return z.ag._({id:"ZjN50+"})},keywords:["table","grid","data"],nodeName:"table",icon:p.B3,execute:function(e){return e.commands.insertTable({rows:3,cols:3,withHeaderRow:!1})}},{key:"table4",name:function(){return z.ag._({id:"64S2d0"})},keywords:["table","grid","data"],nodeName:"table",icon:p.B3,execute:function(e){return e.commands.insertTable({rows:4,cols:4,withHeaderRow:!1})}},{key:"columns2",name:function(){return z.ag._({id:"vVJ2/D"})},keywords:["columns","layout","grid","two"],nodeName:"gridLayout",icon:f.bl,execute:function(e){return e.commands.insertLayout(2)}},{key:"columns3",name:function(){return z.ag._({id:"OnuuaA"})},keywords:["columns","layout","grid","three"],nodeName:"gridLayout",icon:f.bl,execute:function(e){return e.commands.insertLayout(3)}},{key:"columns4",name:function(){return z.ag._({id:"hexbw8"})},keywords:["columns","layout","grid","four"],nodeName:"gridLayout",icon:f.bl,execute:function(e){return e.commands.insertLayout(4)}},{key:"contributors",name:function(){return z.ag._({id:"YqsXfH"})},nodeName:"contributors",icon:d.KC,execute:function(e){return e.commands.insertContentAndSelect(R.e.contributors)},keywords:["contributors","authors","credits"]},{key:"divider",name:function(){return z.ag._({id:"R8AthW"})},nodeName:"divider",icon:u.ZC,keywords:["hr","rule","line","divider"],shortcut:"---",execute:function(e){return e.commands.insertContentAndSelect(R.e.divider)}},{key:"tableOfContents",name:function(){return z.ag._({id:"9FTolD"})},featureFlag:"tableOfContentsBlock",nodeName:"tableOfContents",icon:l.Lj,execute:function(e){return e.commands.insertContentAndSelect(R.e.tableOfContents,-1)},keywords:["toc","contents"]},{key:"gallery",name:function(){return z.ag._({id:"U+kFad"})},description:function(){return z.ag._({id:"GqdREM"})},nodeName:"gallery",icon:s.em,keywords:["gallery","image","layout","filmstrip","carousel"],execute:function(e){return e.commands.insertContentAndSelect(R.e.gallery)}},{key:"footnote",name:function(){return z.ag._({id:"dOxPd4"})},nodeName:"footnote",shortcut:"^note^",icon:c.dk,execute:function(e){var t=(0,B.H)(),n=en(en({},R.e.footnote),{},{attrs:{noteId:t}});(0,B.t0)(t,!0),e.commands.insertContent(n)},dragStartFn:function(e){var t=(0,B.H)(),n=en(en({},R.e.footnote),{},{attrs:{noteId:t}});(0,B.t0)(t,!0),(0,$.U)(e,n)},checkDisabled:F.M,keywords:["footnote","note","reference"]}],(0,o.Z)(U.c),(0,o.Z)(G.js),(0,o.Z)(G.ne),(0,o.Z)(Z.h),(0,o.Z)(Q),(0,o.Z)(L)),eo=function(){return I()(er,function(e){return e.priority})},ei=function(){return M()(er,"key")},ea=function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return!!(t.featureFlag&&!N.VH.get(t.featureFlag)||null!==(n=t.checkDisabled)&&void 0!==n&&n.call(t,e))||!!r&&!(0,ee.$i)(e,t.nodeName)}},54735:function(e,t,n){n.d(t,{e:function(){return c}});var r=n(95235),o=n(82577);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c=a(a(a({title:{type:"title",attrs:{level:1}},h1:{type:"heading",attrs:{level:1}},normalText:{type:"paragraph"},h2:{type:"heading",attrs:{level:2}},h3:{type:"heading",attrs:{level:3}},h4:{type:"heading",attrs:{level:4}},bulletedList:{type:"bullet",attrs:{indent:0}},numberedList:{type:"numbered",attrs:{indent:0}},todoList:{type:"todo",attrs:{indent:0}},blockquote:{type:"blockquote",content:[{type:"paragraph"}]},codeBlock:{type:"codeBlock"},mathBlock:{type:"math_display"},button:{type:"button",content:[{type:"text",text:"Click here"}]},buttonGroup:{type:"buttonGroup",content:[{type:"button",content:[{type:"text",text:"Click here"}]}]},table2:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table3:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table4:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},columns2:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns3:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns4:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},insertCardInside:{type:"card",content:[{type:"heading",attrs:{level:1}}]},footnote:{type:"footnote",content:[{type:"paragraph"}]},contributors:{type:"contributors"},divider:{type:"divider"},tableOfContents:[{type:"heading",attrs:{level:3},content:[{type:"text",text:"Table of contents"}]},{type:"tableOfContents"}],gallery:{type:"gallery",content:[]}},n(71405).re),o.NY),{},{toggle:{type:"toggle",content:[{type:"toggleSummary"},{type:"paragraph"}]}})},16975:function(e,t,n){n.d(t,{UV:function(){return o.U},ZT:function(){return o.Z},e1:function(){return i.e},pP:function(){return r.pP},xr:function(){return r.xr},zm:function(){return r.zm}});var r=n(9828),o=n(17508),i=n(54735)},17508:function(e,t,n){n.d(t,{U:function(){return i},Z:function(){return a}});var r=n(30764),o=n(32333),i=function(e,t){var n=Array.isArray(t)?t:[t],o=r.p2.fromJSON(e.schema,{content:n});e.view.dragging={slice:o,move:!0},e.commands.setTextSelection(e.state.selection.from)},a=function(e,t){o.co.track(o.AA.NODE_INSERTED,{node_name:e.nodeName,command:e.key,method:t}),"card"===e.nodeName&&o.co.track(o.AA.CARD_CREATED,{method:t,command:e.key})}},31702:function(e,t,n){n.d(t,{M:function(){return x}});var r=n(81333),o=n(26673),i=n(9088),a=n(30893),c=n(45650),s=n(36895),l=n(40771),u=n(63849),d=n(2575),f=n(11919),p=n(53738),m=n(4036),h=n(49929),g=n(2784),v=n(98875),b=n(39965),y=n(52322),x=g.memo(function(e){var t,n=e.currentSource,g=e.onChange,x=e.isValidSource,j=null==n?void 0:null===(t=n.image)||void 0===t?void 0:t.src,w=(0,v.Zd)();return(0,y.jsxs)(i.v,{children:[(0,y.jsx)(a.j,{as:c.z,variant:"plain",w:"100%",textAlign:"left",rightIcon:(0,y.jsx)(h.G,{icon:o.pt}),leftIcon:j?(0,y.jsx)(s.E,{h:"1em",w:"1em",objectFit:"cover",src:j}):null!=n&&n.icon?(0,y.jsx)(h.G,{icon:null==n?void 0:n.icon,color:"var(--chakra-colors-trueblue-600)",fixedWidth:!0}):void 0,mb:6,children:(null==n?void 0:n.label())||"Source"}),(0,y.jsx)(l.q,{zIndex:"popover",maxH:"60vh",overflowY:"auto",children:Object.entries(b.dz).map(function(e){var t,o=(0,r.Z)(e,2),i=o[0],a=o[1].filter(function(e){return!(e.checkDisabled&&e.checkDisabled())&&!e.disabled&&(!e.featureFlag||!!w[e.featureFlag])&&x(e)});return 0===a.length?null:(0,y.jsx)(u._,{title:null!==(t=b.X8[i]())&&void 0!==t?t:i,type:"radio",onChange:g,value:null==n?void 0:n.key,children:a.map(function(e){var t=e.label,n=e.key,r=e.icon,o=e.image,i=e.badge;return(0,y.jsx)(d.i,{value:n,children:(0,y.jsxs)(f.k,{direction:"row",align:"center",children:[o?(0,y.jsx)(s.E,{display:"inline",mr:2,h:"1em",w:"1em",objectFit:"contain",src:o.src}):r?(0,y.jsx)(p.xu,{display:"inline",mr:2,color:"trueblue.600",children:(0,y.jsx)(h.G,{icon:r})}):(0,y.jsx)(y.Fragment,{}),t(),i&&(0,y.jsx)(m.C,{ml:2,colorScheme:"green",children:i()})]})},n)})},i)})})]})});x.displayName="MediaDrawerMenu"},43330:function(e,t,n){n.d(t,{Bh:function(){return y},CK:function(){return v},Q3:function(){return h},TZ:function(){return b},Yc:function(){return g}});var r=n(95235),o=n(30764),i=n(27191),a=n(2784),c=n(46358),s=n(87819),l=n(82360),u=n(95472),d=n(39965),f=n(62141);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e,t,n){if(t instanceof i.qv){var r=null!=n?n:t.node;if((0,l.E)(r)){var o=null!==(a=r.attrs.image)&&void 0!==a?a:{};if(!o.source&&(0,l.G)(t.$from.parent)){var a,c,s=(0,u.Jn)(t.$from.parent.content).find(function(e){var t;return null===(t=e.attrs.image)||void 0===t?void 0:t.source});o.source=null==s?void 0:null===(c=s.attrs.image)||void 0===c?void 0:c.source}return{attrs:o,type:r.type,editType:"accessory"}}return m({editType:"node"},r)}return t instanceof i.Bs&&t.to-t.from==1&&t.$from.nodeAfter?m({editType:"node"},null!=n?n:t.$from.nodeAfter):t instanceof i.Bs&&e.isActive("link")?{attrs:e.getAttributes("link"),type:e.schema.marks.link}:null},g=function(e){var t=e.editor,n=e.selection,r=e.sourceKey,a=e.attrs,c=e.nodeName,l=e.resetAttrs,u=e.resizeToFit,f=n.from,p=h(t,n);if(p){if(l)g={};else if(p.type instanceof o.ZU)g=p.attrs;else{var g,v,b=t.state.doc.nodeAt(f);if(!b||b.type!==p.type){console.error("[updateSelectedMedia] Node has moved, cant update");return}g=(null===(v=h(t,n,b))||void 0===v?void 0:v.attrs)||{}}}else{console.error("[updateSelectedMedia] No selectedMedia to update");return}var y=m(m({},g),{},{source:r},a);if(u&&"node"===p.editType&&(y=(0,s.UZ)(y)),(null==p?void 0:p.type.name)==="link"){y.href=y.href||y.sourceUrl;var x=n.from,j=n.to;t.chain().extendMarkRange("link").updateAttributes("link",y).setTextSelection({from:x,to:j}).run();return}if((null==p?void 0:p.type.name)==="smartLayoutCell"){t.chain().updateAttributesAtPos(f,{image:y}).run();return}var w=d.ah[y.source],O=c||w.nodeName;O&&t.commands.command(function(e){var t=e.tr,n=e.state.schema.nodes[O];return!!n&&(t.setNodeMarkup(f,n,y).setSelection(i.qv.create(t.doc,f)).setMeta("annotationEvent",{type:"update-node-attrs",pos:f}),!0)})},v=function(e){return e instanceof o.Jq?(0,s.vb)(e)||"smartLayoutCell"===e.name:e instanceof o.ZU&&"link"===e.name},b=function(){var e=(0,c.bh)();if(!e){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(e));return}e.dispatch((0,f.AK)({isEditingMedia:!0}))},y=function(){var e=(0,c.qr)();return(0,a.useCallback)(function(t){e.dispatch((0,f.AK)({isEditingMedia:t}))},[e])}},90254:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(13720),o={base:"xs","2xl":"sm"},i=function(){return(0,r.i)(o)}},47678:function(e,t,n){n.d(t,{L:function(){return o},y:function(){return i}});var r=n(76451),o=function(e){setTimeout(function(){e.commands.focus()})},i=function(e,t,n){var o;(null===(o=n.background)||void 0===o?void 0:o.type)===r.E.NONE?e.commands.updateAttributesAtPos(t,n):e.commands.updateNestedAttributesAtPos(t,n)}},27910:function(e,t,n){n.d(t,{D:function(){return l},k:function(){return u}});var r=n(81333),o=n(1472),i=n(20372),a=n(2784),c=n(46358),s=n(62141),l=function(e,t,n){var r=(0,a.useState)(!1),o=r[0],i=r[1],c=(0,a.useState)(!1),s=c[0],l=c[1],u=(0,a.useRef)();return{isDragging:o,isMouseDown:s,handleDragStart:(0,a.useCallback)(function(t){i(!0),e(t)},[e]),handleDragEnd:(0,a.useCallback)(function(e){i(!1),l(!1),t(e)},[t]),handleClick:(0,a.useCallback)(function(e){u.current instanceof HTMLElement&&u.current.focus(),n(e)},[n]),onMouseDown:(0,a.useCallback)(function(){l(!0),u.current=document.activeElement||void 0},[]),onMouseUp:(0,a.useCallback)(function(){l(!1)},[])}},u=function(){var e=(0,o.a)(["(max-height: 400px)","(min-height: 401px"]),t=(0,r.Z)(e,1)[0],n=(0,c.CG)(s.hN),a=(0,c.CG)(s.Hl),l=(0,i.S)({base:!1,lg:!0});return n&&!t&&!a&&l}},16296:function(e,t,n){n.d(t,{Z:function(){return h},B:function(){return E}});var r=n(53738),o=n(36895),i=n(4036),a=n(49929),c=n(55966),s=n(2784),l=n(68740),u=n(93148),d=n(32333),f=n(16975),p=n(98199),m=n(52322),h=(0,s.forwardRef)(function(e,t){var n=e.query,h=e.editor,g=(0,u.A)(f.xr).filter(function(e){if((0,f.pP)(h,e)||"cardTemplate"===e.type)return!1;var t=e.name,r=e.keywords;return t().toLowerCase().includes(n.toLowerCase())||(void 0===r?[]:r).find(function(e){return e.startsWith(n.toLowerCase())})}),v=(0,s.useCallback)(function(e){if(g[e]){var t=g[e].execute,r=h.state.selection;h.chain().deleteRange({from:r.from-n.length-1,to:r.to}).run(),(0,f.ZT)(g[e],d.fe.SLASH_MENU),t(h)}},[h,g,n.length]),b=(0,p.Yg)({ref:t,selectItem:v,options:g}),y=b.selectedIndex,x=b.selectedItemEl;return g.length>0?(0,m.jsx)(r.xu,{"data-slash-menu-dropdown":!0,children:(0,m.jsx)(c.wb,{children:(0,m.jsx)(c.Dw,{width:"375px",children:g.map(function(e,t){var n=e.name,r=e.icon,s=e.iconStyle,u=e.image,d=e.shortcut,f=e.creditType,p=e.badge;return(0,m.jsxs)(c.m9,{ref:t===y?x:null,icon:u?(0,m.jsx)(o.E,{mt:1,h:"1.5em",w:"1.25em",objectFit:"contain",src:u.src}):r?(0,m.jsx)(a.G,{icon:r,rotation:null==s?void 0:s.rotation,size:"1x",fixedWidth:!0,color:"var(--chakra-colors-trueblue-600)"}):(0,m.jsx)(m.Fragment,{}),tabIndex:t===y?0:-1,onClick:function(){return v(t)},command:d,children:[n(),f&&(0,m.jsx)(l.J,{type:f,colorScheme:"blackAlpha",bg:"whiteAlpha.800"}),p&&(0,m.jsx)(i.C,{ml:2,colorScheme:"green",children:p()})]},t)})})})}):(0,m.jsx)(m.Fragment,{})}),g=n(55452),v=n(8283),b=n(91012),y=n(96530),x=n(76648),j=n(67887),w=n(98875),O=n(9557),k=n(61686),C=n(23015),P=n(9828),S=["image.custom","table2","columns","insertCardInside","embed.custom"],A=function(){return S.map(function(e){return P.UO.find(function(t){return t.key===e})}).filter(Boolean)},E=function(e){var t=e.editor,n=(0,w.ye)("aiAutocomplete")&&!(0,k.M)(t),r=(0,u.A)(A);return t.state.selection.empty?(0,m.jsxs)(v.U,{spacing:4,color:"gray.400","data-print-hidden":!0,position:"absolute",inset:"0",contentEditable:!1,overflow:"hidden",fontFamily:"Inter, sans-serif",fontSize:"0.8em",onMouseDown:C.br,pointerEvents:"none",userSelect:"none","data-guider-highlight":"slash-menu-prompt",className:"slash-menu-prompt",children:[(0,m.jsx)(b.x,{whiteSpace:"nowrap",children:n?(0,m.jsx)(g.cC,{id:"UfUEJ5",values:{AUTOCOMPLETE_INPUT_SHORTCUT:O.o},components:{0:(0,m.jsx)(y.T,{}),1:(0,m.jsx)(y.T,{})}}):(0,m.jsx)(g.cC,{id:"HGRFT/",components:{0:(0,m.jsx)(y.T,{})}})}),(0,m.jsx)(x.h,{isAttached:!0,variant:"ghost",size:"xs",spacing:1,pointerEvents:"auto",colorScheme:"gray",opacity:"0.8",transitionProperty:"opacity",transitionDuration:"normal",_hover:{opacity:1},children:r.map(function(e){var n=e.name,r=e.shortcut,o=e.icon,i=e.execute,s=e.key,u=e.creditType;return!(0,f.pP)(t,e)&&(0,m.jsx)(c.kH,{placement:"top",shortcut:r,label:(0,m.jsxs)(m.Fragment,{children:[n()," ",u&&(0,m.jsx)(l.J,{type:u})]}),children:(0,m.jsx)(j.h,{"aria-label":n(),onClick:function(){(0,f.ZT)(e,d.fe.BLOCK_PROMPT),i(t)},icon:(0,m.jsx)(a.G,{icon:o})})},s)})})]}):null}},84690:function(e,t,n){n.d(t,{Lt:function(){return A},PS:function(){return E},hP:function(){return I},sV:function(){return D}});var r=n(82269),o=n(95235),i=n(81333),a=n(75944),c=n(35806),s=n(93506),l=n(45650),u=n(17677),d=n(97705),f=n(34676),p=n(55966),m=n(2784),h=n(52322),g=["children","as"],v=["children"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=(0,u.createContext)({strict:!1,name:"DropdownContext"}),j=(0,i.Z)(x,2),w=j[0],O=j[1],k=(0,u.createContext)({name:"DropdownStylesContext",errorMessage:"useDropdownStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Dropdown />\" "}),C=(0,i.Z)(k,2),P=C[0],S=C[1],A=function(e){var t=(0,a.q)(),n=t.isOpen,r=t.onClose,o=t.onToggle,i=(0,s.jC)("Dropdown",e),l=(0,c.D)({placement:"bottom-start"}),u=(0,m.useMemo)(function(){return{isOpen:n,onClose:r,onToggle:o,popper:l}},[n,r,o,l]);return(0,h.jsx)(w,{value:u,children:(0,h.jsx)(P,{value:i,children:(0,h.jsx)(p.wb,y({},e))})})},E=function(e){var t=e.children,n=e.as,o=(0,r.Z)(e,g),i=O(),a=i.popper,c=i.onToggle,s=n||l.z;return(0,h.jsx)(s,y(y({},o),{},{ref:a.referenceRef,onClick:(0,f.v0)(e.onClick,c),children:(0,h.jsx)(d.m.span,{__css:{pointerEvents:"none",flex:"1 1 auto",justifyContent:"flex-start",display:"flex",minW:0},children:t})}))},D=function(e){var t,n,o=e.children,i=(0,r.Z)(e,v),a=O(),c=a.isOpen,s=a.popper,l=S();if(!c)return null;var u=s.getPopperProps(y(y({},e),{},{style:y({visibility:c?"visible":"hidden"},e.style)}));return(0,h.jsx)(d.m.div,y(y(y({},i),{},{mt:2,minWidth:"var(--chakra-sizes-48)",ref:s.popperRef},u),{},{__css:{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:null===(n=l.list)||void 0===n?void 0:n.zIndex},children:(0,h.jsx)(p.Dw,{children:o})}))},I=function(e){var t=O().onToggle;return(0,h.jsx)(p.m9,y(y({},e),{},{onClick:(0,f.v0)(e.onClick,t)}))}},35211:function(e,t,n){n.d(t,{E:function(){return v}});var r=n(18504),o=n(26673),i=n(55452),a=n(87254),c=n(9088),s=n(30893),l=n(45650),u=n(40771),d=n(49929),f=n(55966),p=n(56345),m=n(23015),h=n(47678),g=n(52322),v=function(e){var t=e.editor,n=e.color,v=e.setColor,b=e.analyticsSource;return(0,g.jsxs)(c.v,{isLazy:!0,onClose:function(){return(0,h.L)(t)},children:[(0,g.jsx)(f.kH,{placement:"top",label:(0,g.jsx)(i.cC,{id:"XAIjEI"}),"aria-label":a.ag._({id:"XAIjEI"}),children:(0,g.jsx)(s.j,{as:l.z,variant:"toolbar",rightIcon:(0,g.jsx)(d.G,{icon:o.pt,transform:"shrink-6"}),size:"sm",onMouseDown:m.br,children:(0,g.jsx)(d.G,{icon:r.q2})})}),(0,g.jsx)(u.q,{overflow:"hidden",children:(0,g.jsx)(p.M,{currentColor:n||null,setColor:v,source:b})})]})}},73008:function(e,t,n){n.d(t,{h:function(){return m}});var r=n(95235),o=n(82269),i=n(45650),a=n(49929),c=n(55966);n(2784);var s=n(52879),l=n(23015),u=n(52322),d=["label","shortcut","disabled","color","isActive","onClick","icon","iconRotation","testId","children"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){var t=e.label,n=e.shortcut,r=e.disabled,c=e.color,s=e.isActive,f=e.onClick,m=e.icon,g=e.iconRotation,v=e.testId,b=e.children,y=(0,o.Z)(e,d),x=(0,u.jsx)(i.z,p(p({isDisabled:void 0!==r&&r,color:c,variant:void 0!==s&&s?"activeToolbar":"toolbar",onClick:f,"data-testid":v,onMouseDown:l.br,size:"sm"},y),{},{children:m?(0,u.jsx)(a.G,{icon:m,rotation:g}):b||null}));return t?(0,u.jsx)(h,{label:t,shortcut:n,children:x}):x},h=function(e){var t=e.label,n=e.shortcut,r=e.children;return(0,u.jsx)(c.kH,{placement:"top",portalProps:{containerRef:(0,s.jj)()},label:t,shortcut:n,children:r})}},73352:function(e,t,n){n.d(t,{O:function(){return m}});var r=n(95235),o=n(55452),i=n(53738),a=n(2784),c=n(23313),s=n(9846),l=n(53865),u=n(39965),d=n(31702),f=n(52322);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=(0,a.memo)(function(e){var t=e.editor,n=e.defaultMessage,m=e.isDark,h=e.setCurrentSourceKey,g=e.currentSourceKey,v=e.currentSource,b=e.updateCurrentBackground,y=e.currentBackground,x=e.isValidSource,j=(0,c.$gs)().isConnected,w=(0,a.useCallback)(function(e){var t=u.ah[e];t.backgroundType&&b((0,r.Z)({type:t.backgroundType,source:e},t.backgroundType,void 0))},[b]),O=(0,a.useCallback)(function(){return w(g)},[g,w]),k=(0,a.useCallback)(function(e){e===u.mC&&w(u.mC),h(e)},[h,w]);(0,a.useEffect)(function(){y.source&&u.ah[y.source]&&h(y.source)},[y.source,h]);var C=!!(j||(null==v?void 0:v.availableOffline));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.V,{isConnected:C,label:(0,f.jsx)(o.cC,{id:"nfjtFu"}),mb:3,my:6}),(0,f.jsx)(d.M,{isValidSource:x,onChange:k,currentSource:v}),v&&(0,f.jsx)(i.xu,{opacity:C?1:.4,pointerEvents:C?"initial":"none",children:(0,f.jsx)(v.Panel,{editor:t,updateAttributes:function(e){if(v.backgroundType){if(v.key===l.cx)b(e);else{var t;b((t={type:v.backgroundType},(0,r.Z)(t,v.backgroundType,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)),(0,r.Z)(t,"source",g),t))}}},currentAttributes:v.backgroundType?v.key===l.cx?y:y[v.backgroundType]||{}:{},resetToPlaceholder:O,editType:"background",isDark:m})}),g===u.mC&&n]})});m.displayName="BackgroundPanel"},35258:function(e,t,n){n.d(t,{o:function(){return p}});var r=n(95235),o=n(2784),i=n(28139),a=n(53865),c=n(39965),s=n(73352),l=n(74928),u=n(52322);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=e.editor,n=e.updateNestedAttributes,r=e.background,d=e.defaultMessage,p=e.isDark,m=e.isValidSource,h=(0,o.useState)(i.hq.key),g=h[0],v=h[1],b=c.ah[g],y=(0,o.useCallback)(function(e){b.key===a.cx?n({background:e}):n({background:f(f({},e),{},{accentId:void 0})})},[b.key,n]),x=(0,o.useCallback)(function(e){return m?m(e)&&(0,l.bH)(e):(0,l.bH)(e)},[m]);return(0,u.jsx)(s.O,{editor:t,isDark:p,isValidSource:x,defaultMessage:d,currentBackground:r,updateCurrentBackground:y,currentSourceKey:g,setCurrentSourceKey:v,currentSource:b})}},74928:function(e,t,n){n.d(t,{Rr:function(){return i},bH:function(){return o}});var r=n(53865);n(76451);var o=function(e){return!!e.backgroundType},i=function(e){return e.key!==r.cx}},95876:function(e,t,n){n.d(t,{R$:function(){return o},VK:function(){return c},j4:function(){return i},vL:function(){return a}});var r=n(53026),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{docFlags:{}};return{type:"doc",content:[{type:"document",attrs:t,content:[{type:"card",content:[{type:"title",attrs:{level:r.Y.DocTitle}},{type:"contributors"}]},{type:"card",content:[{type:"heading"}]}]}]}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{docFlags:{cardLayoutsEnabled:!0}};return{type:"doc",content:[{type:"document",attrs:e,content:[{type:"card",content:[{type:"title",attrs:{level:r.Y.DocTitle}}]}]}]}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{docFlags:{cardLayoutsEnabled:!0}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"doc",content:[{type:"document",attrs:e,content:t}]}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{docFlags:{}};return{type:"doc",content:[{type:"document",attrs:t,content:[{type:"card",content:[{type:"title",attrs:{level:r.Y.DocTitle}},{type:"contributors"}]},{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:2},content:[{type:"text",text:"Quick Start Checklist"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"zap",native:""}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Type "},{type:"text",marks:[{type:"code"}],text:"/"},{type:"text",marks:[{type:"bold"}],text:" in a card to open the slash menu"}]},{type:"bullet",attrs:{indent:1,fontSize:null},content:[{type:"text",text:"It lets you browse and add content blocks quickly"}]},{type:"bullet",attrs:{indent:1,fontSize:null},content:[{type:"text",text:"Content blocks can be added from the "},{type:"text",marks:[{type:"footnoteLabel",attrs:{noteId:"7jZEg"}}],text:"insert menu"},{type:"footnote",attrs:{noteId:"7jZEg"},content:[{type:"image",attrs:{id:"Y3FmX",horizontalAlign:null,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b98e59519a994c7abd900f44683bbb5d/optimized/insert-menu-explainer.gif",tempUrl:"blob:https://gamma.app/983566b4-f21e-4d28-bc69-d448c1976833",uploadStatus:0,meta:{width:700,height:459,date_file_modified:"2023/01/20 23:08:42 GMT",duration:4.42,aspect_ratio:1.525,has_clipping_path:!1,frame_count:36,colorspace:"RGB",average_color:"#f7f5f5"},providerMeta:null,name:"insert-menu-explainer.gif",query:null,source:"image.custom",showPlaceholder:!1,fullWidthBlock:!1,resize:{clipType:null,clipPath:null,clipAspectRatio:null,width:null}}}]},{type:"text",text:" if you prefer to drag"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"heavy_plus_sign",native:""}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Add a new card"},{type:"text",text:" (type "},{type:"text",marks:[{type:"code"}],text:"/card"},{type:"text",text:") or select a template via the "},{type:"text",marks:[{type:"footnoteLabel",attrs:{noteId:"xLt8J"}}],text:"plus button"},{type:"footnote",attrs:{noteId:"xLt8J"},content:[{type:"image",attrs:{id:"3CSXR",horizontalAlign:null,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/a8d6b7149f75401ebd54e6b022670a3e/optimized/image.png",tempUrl:"blob:https://gamma.app/5368f25a-cf30-4410-bf62-bd26080b01f5",uploadStatus:0,meta:{width:844,height:608,date_file_modified:"2023/01/20 21:38:09 GMT",aspect_ratio:1.388,has_clipping_path:!1,frame_count:1,colorspace:"RGB",average_color:"#f7f5f5"},providerMeta:null,name:"image.png",query:null,source:"image.custom",showPlaceholder:!1,fullWidthBlock:!1,resize:{clipType:null,clipPath:null,clipAspectRatio:null,width:null}}}]}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"newspaper",native:"\uD83D\uDCF0"}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Create multi-column layouts"},{type:"text",text:" (type "},{type:"text",marks:[{type:"code"}],text:"/columns"},{type:"text",text:") or "},{type:"text",marks:[{type:"footnoteLabel",attrs:{noteId:"JyryA"}}],text:"drag blocks"},{type:"footnote",attrs:{noteId:"JyryA"},content:[{type:"image",attrs:{id:"iJXTh",horizontalAlign:null,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/3e47c137ba5d4d13bdafda584b3a8f94/optimized/drag-columns-optimized.gif",tempUrl:"blob:https://gamma.app/654cd2e0-6972-4a24-a7c0-25eff0cf9050",uploadStatus:0,meta:{width:500,height:313,date_file_modified:"2023/01/20 21:35:04 GMT",duration:9.83,aspect_ratio:1.597,has_clipping_path:!1,frame_count:62,colorspace:"RGB",average_color:"#e8cac5"},providerMeta:null,name:"drag-columns-optimized.gif",query:null,source:"image.custom",showPlaceholder:!1,fullWidthBlock:!1,resize:{clipType:null,clipPath:null,clipAspectRatio:null,width:null}}}]},{type:"text",text:" side by side"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"bridge_at_night",native:"\uD83C\uDF09"}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Add an image "},{type:"text",text:"(type "},{type:"text",marks:[{type:"code"}],text:"/image"},{type:"text",text:"). You can drag in or paste image files too!"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"art",native:"\uD83C\uDFA8"}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Change the deck "},{type:"text",marks:[{type:"bold"},{type:"footnoteLabel",attrs:{noteId:"mTOBc"}}],text:"theme"},{type:"footnote",attrs:{noteId:"mTOBc"},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Click the "},{type:"text",marks:[{type:"code"}],text:"Theme"},{type:"text",text:" button in the top toolbar, then try clicking some of the different options"}]},{type:"image",attrs:{id:"GHNdu",horizontalAlign:"center",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/db839cee72b7497b9ff1424987641ed5/optimized/image.png",tempUrl:null,uploadStatus:0,meta:{width:806,height:1678,date_file_modified:"2022/08/01 23:13:09 GMT",aspect_ratio:.48,has_clipping_path:!1,frame_count:1,colorspace:"RGB",average_color:"#ccc7ca"},providerMeta:null,name:"image.png",query:null,source:"image.custom",showPlaceholder:!1,fullWidthBlock:!1,resize:{clipType:"inset",clipPath:["17.31441903150651%","0%","41.5572854690296%","0%"],clipAspectRatio:1.1678975712005124,width:209.77777777777777}}}]},{type:"text",text:" to give it a different look and feel"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"arrow_forward",native:""}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Try present mode"},{type:"text",text:" and use your arrow keys and "},{type:"text",marks:[{type:"footnoteLabel",attrs:{noteId:"UGnAU"}}],text:"spotlight"},{type:"footnote",attrs:{noteId:"UGnAU"},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Spotlight lets you"},{type:"text",marks:[{type:"bold"}],text:" focus "},{type:"text",text:"on"},{type:"text",marks:[{type:"bold"}],text:" one piece of content at a time. "},{type:"text",text:"While presenting, press "},{type:"text",marks:[{type:"code"}],text:"s"},{type:"text",text:" to enter spotlight mode."}]},{type:"image",attrs:{id:"YOFhU",horizontalAlign:null,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/ed0b362f6c2f4a438cd3188ba7697a02/optimized/spotlight-compressed.gif",tempUrl:"blob:https://gamma.app/d2eaae7f-515e-4e06-b396-4b0551a5a999",uploadStatus:0,meta:{width:1200,height:750,date_file_modified:"2023/01/13 21:48:00 GMT",duration:6.66,aspect_ratio:1.6,has_clipping_path:!1,frame_count:34,colorspace:"RGB",average_color:"#323030"},providerMeta:null,name:"spotlight-compressed.gif",query:null,source:"image.custom",showPlaceholder:!1,fullWidthBlock:!1,resize:{clipType:null,clipPath:null,clipAspectRatio:null,width:null}}}]},{type:"text",text:" to move around"}]},{type:"todo",attrs:{indent:0,checked:!1,fontSize:null},content:[{type:"emoji",attrs:{id:"tada",native:"\uD83C\uDF89"}},{type:"text",text:" "},{type:"text",marks:[{type:"bold"}],text:"Share your deck"},{type:"text",text:"."},{type:"text",marks:[{type:"bold"}],text:" "},{type:"text",text:"Publish it to the world, invite others, or export a PDF"}]}]}]}]}}},86297:function(e,t,n){n.d(t,{R$:function(){return r.R$},VK:function(){return r.VK},j4:function(){return r.j4},vL:function(){return r.vL}});var r=n(95876)},2875:function(e,t,n){n.d(t,{TI:function(){return o},pw:function(){return d}});var r,o,i=n(13089),a=n(96412),c=n(90129),s=n(29017),l=n(48200),u=n(98555);(r=o||(o={})).CREATE_COMMENT_FROM_SELECTION="createCommentFromSelection",r.OPEN_POPUP_COMMENT="openPopupComment",r.POPUP_COMMENT_TOGGLED="popupCommentToggled",r.OPEN_THEME_DRAWER="openThemeDrawer",r.OPEN_THEME_EDITOR="openThemeEditor",r.OPEN_PAGE_SETUP="openPageSetup";var d=new(function(e){(0,c.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(r);if(t){var o=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,s.Z)(this,e)});function r(){return(0,a.Z)(this,r),n.apply(this,arguments)}return(0,i.Z)(r)}(u.v))},47507:function(e,t,n){n.d(t,{Y:function(){return f},i:function(){return d}});var r=n(81333),o=n(96412),i=n(13089),a=n(95235),c=n(27191),s=n(95472),l=n(12691),u=n(39428),d=new c.H$("aiModifications"),f=function(){function e(){(0,o.Z)(this,e),(0,a.Z)(this,"queuedMoveRanges",{}),(0,a.Z)(this,"ranges",{})}return(0,i.Z)(e,[{key:"getExistingRangeId",value:function(e,t){var n=(0,u.G8)(e,t);if(!n)return null;var o=Object.entries(this.ranges).find(function(t){var o=(0,r.Z)(t,2),i=(o[0],o[1]),a=(0,u.G8)(e,i);return!!a&&n.from===a.from&&n.to===a.to});return o?o[0]:null}},{key:"getRangeParentCardId",value:function(e,t){var n=this.ranges[t];if(!n)return null;var r=(0,u.G8)(e,n);if(!r)return null;var o=r.from,i=e.doc.nodeAt(o),a=e.doc.resolve(o),c=i&&(0,l.KH)(i)?{node:i,pos:o,start:a.start,depth:a.depth}:(0,s.nv)(a,l.KH)[0];return c?c.node.attrs.id:null}},{key:"getRange",value:function(e,t){var n=this.queuedMoveRanges[t];if(n)return n;var r=this.ranges[t];return r?(0,u.G8)(e,r):null}},{key:"apply",value:function(e,t){var n=e.getMeta("aiModificationAction");n&&"setInteractionRange"===n.type&&this.setInteractionRange(n,t);var r=e.getMeta("applyingAiModification");if(r)return this.handleRangeMapping(t,e,r.rangeId),this;var o=e.getMeta("appendedTransaction");return o&&this.handleAppendedTransaction(t,e,o),this}},{key:"handleAppendedTransaction",value:function(e,t,n){if(n.getMeta("applyingAiModification")){var r=n.getMeta("applyingAiModification");r&&this.handleRangeMapping(e,t,r.rangeId)}}},{key:"handleRangeMapping",value:function(e,t,n){var r=this.getRange(e,n);if(!r){console.warn("[AiModificationState] Could not find range for rangeId=".concat(n));return}var o={from:r.from,to:t.mapping.map(r.to)};(r.from!==o.to||r.to!==o.to)&&this.enqueueMoveInstructions(n,o)}},{key:"enqueueMoveInstructions",value:function(e,t){this.queuedMoveRanges[e]=t}},{key:"flushMoveInstructionQueue",value:function(e){for(var t=0,n=Object.entries(this.queuedMoveRanges);t<n.length;t++){var o=(0,r.Z)(n[t],2),i=o[0],a=o[1];this.ranges[i]=(0,u.bb)(e,a)}this.queuedMoveRanges={}}},{key:"setInteractionRange",value:function(e,t){this.ranges[e.rangeId]=e.range}}]),e}()},44713:function(e,t,n){n.d(t,{F:function(){return k},X:function(){return O}});var r=n(95235),o=n(72338),i=n(27191),a=n(64426),c=n(15189),s=n(6201),l=n(54113),u=n(98875),d=n(46358),f=n(62141),p=n(39428),m=n(28703),h=n(34264),g=n(18635),v=n(52780),b=new i.H$("autocomplete"),y=new(n(87842)).u({systemPrompt:"You are helping a user write a document. Your job is to continue what they've written by writing 2-3 additional sentences. Respond with the just the additional text, and no additional conversation.".trim(),userPrompt:"Continue the following text. Respond with at most 3 sentences.\n\n{{text}}".trim(),variables:["text"],params:{maxTokens:200,temperature:1,model:"gpt-3.5-turbo"}});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=/(\+\+\+)/,O=4e3,k=o.hj.create({name:"autocomplete",addProseMirrorPlugins:function(){return[(this.editor,new i.Sy({key:b,state:{init:function(){return{loading:!1,insertedRange:null}},apply:function(e,t){var n=e.getMeta("autocompleteEvent");return(null==n?void 0:n.type)==="reset"?{loading:!1,insertedRange:null}:(null==n?void 0:n.type)==="load"?{loading:!0,insertedRange:null}:(null==n?void 0:n.type)==="insert"?{loading:!1,insertedRange:n.range}:t}},props:{decorations:function(e){var t,n=[],r=b.getState(e),i=e.selection,a=e.doc,c=r||{},s=c.loading,l=c.insertedRange;if(s){var u=v.p.widget(i.from,function(){var e=document.createElement("span");return e.className="autocomplete-loading",e});n.push(u)}if(l){try{t=(0,o.b5)(a,l,function(e){return e.isTextblock})}catch(e){t=[]}t.forEach(function(e){var t=e.node,r=e.pos,o=Math.max(r+1,l.from),i=Math.min(r+t.nodeSize-1,l.to),a=v.p.inline(o,i,{class:"autocomplete-inserted"});n.push(a)})}return n.length?v.EH.create(a,n):v.EH.empty}}}))]},addCommands:function(){return{autoOutline:function(){return function(e){e.editor;var t=e.state,n=e.tr,r=t.selection,i=t.doc,a=r.$from,c=r.from,s=(0,p.jS)(t,a.after()),l=(0,o.Kk)(h.KH)(r);return!!l&&!!s&&((0,g.Ck)(i,l.pos,c),n.setMeta("autocompleteEvent",{type:"load"}),!0)}},autoComplete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n,r=t.editor,o=t.state,h=t.tr,v=o.selection,b=o.doc,x=v.from,w=(0,p.jS)(o,x);if(!(u.VH.get("aiAutocomplete")&&v.empty&&v instanceof i.Bs&&w))return!1;var k=(0,d.bh)().getState(),C=null===(n=(0,f.yx)(k))||void 0===n?void 0:n.organization;if(!(0,l.C)("autocomplete",C))return!1;var P=(0,g.Ck)(b,Math.max(v.from-1e3,0),v.from),S=(0,c.xk)(P).slice(-200),A=(0,c.Zs)(S),E=b.textBetween(v.from-10,v.to);h.setMeta("autocompleteEvent",{type:"load"});var D=(0,s.nZ)(),I=y.prepare({interactionId:D,variables:{text:A},params:e}),z=performance.now(),T={interactionId:D,interface:"autocomplete",inputContent:P};return(0,s.hq)(T),(0,a.I)(I,D,{timeout:5e3,retries:1}).then(function(e){var t,n=(0,p.XV)(o,w);if(!e||!n)throw Error("No completion or insertPos");e=e.trim();var i={from:n,to:n},a=r.chain().insertMarkdownAt(i,e).command(function(e){var t=e.tr,n=(0,m.a)(t);return!n||(i.to=n.to,t.setSelection(n).scrollIntoView(),!0)}).setMeta("autocompleteEvent",{range:i,type:"insert"});null!==(t=o.doc.resolve(n).nodeBefore)&&void 0!==t&&t.isText&&!(E.endsWith(" ")||E.endsWith("\n"))&&a.insertContentAt(n," ",{updateSelection:!1}),a.run(),(0,s.gb)(j(j({},T),{},{outputContent:e,latency:performance.now()-z,timeToComplete:performance.now()-z})),(0,l.d)("autocomplete",C),setTimeout(function(){r.commands.setMeta("autocompleteEvent",{type:"reset"})},O)}).catch(function(e){console.warn("Error fetching autocomplete",e),r.commands.setMeta("autocompleteEvent",{type:"reset"})}),!0}}}},addInputRules:function(){return[new o.VK({find:w,handler:function(e){var t=e.range;(0,e.chain)().setTextSelection(t).deleteSelection().autoComplete().run()}})]}})},21350:function(e,t,n){n.d(t,{eV:function(){return i},gk:function(){return a},ml:function(){return c},xF:function(){return o}});var r=n(37164),o=function(e){return function(t){var n=t.getAttribute("bookmark");if(!n)return!1;var r=e.bookmarks[n];return!!r&&r.attrs}},i=function(e){return function(t){var n=t.getAttribute("bookmark");if(console.log("getContentFromBookmark",n,e.bookmarks[n]),!n)return!1;var r=e.bookmarks[n];return!!r&&r.content}},a=function(){return{bookmarks:{}}},c=function(e,t){var n=(0,r.x0)(5);return e.bookmarks[n]=t,n}},10221:function(e,t,n){n.d(t,{Z:function(){return r}});var r=new(n(27191)).H$("annotation")},52527:function(e,t,n){n.d(t,{N:function(){return p},O:function(){return m}});var r=n(27191),o=n(96412),i=n(13089),a=n(95235),c=n(38564),s=n(36069),l=n(72338),u=n(52780),d=n(10221),f=function(){function e(){(0,o.Z)(this,e),(0,a.Z)(this,"draftComments",{}),(0,a.Z)(this,"decorations",u.EH.empty)}return(0,i.Z)(e,[{key:"apply",value:function(e,t){var n=e.getMeta(p);if(n&&n.type)return"createDraftComment"===n.type&&this.createDraftComment(n,t),"removeDraftComment"===n.type&&this.removeDraftComment(n,t),this;var r=e.getMeta(d.Z);if(r&&r.type)return"refreshAnnotationDecorations"===r.type&&this.createDecorations(t),this;if(c.Gt.getState(t).isChangeOrigin){try{this.createDecorations(t)}catch(e){console.log("could not create decorations: ".concat(e.message),e)}return this}return this.decorations=this.decorations.map(e.mapping,e.doc),this}},{key:"removeDraftComment",value:function(e,t){var n=this;return e.comments.forEach(function(e){var t=e.targetId;delete n.draftComments[t]}),this.createDecorations(t),this}},{key:"createDraftComment",value:function(e,t){this.draftComments[e.comment.targetId]=e.comment,this.createDecorations(t)}},{key:"createDecorations",value:function(e){var t=c.Gt.getState(e);if(!t.binding)return this;for(var n=t.doc,r=t.type,o=t.binding,i=[],a=0,d=Object.values(this.draftComments);a<d.length;a++){var f=d[a];try{var p,m,h=(0,s.SF)(n,r,f.relativePos,o.mapping);if(null==h)continue;var g=e.doc.resolve(h),v=function(t){var n=(0,l.N2)(e.doc,function(e){return e===t});if(!n||0===n.length)throw Error();return n[0].pos},b=null!==(p=g.nodeAfter)&&void 0!==p&&p.isBlock?h:v(g.parent),y=b+(null!==(m=g.nodeAfter)&&void 0!==m&&m.isBlock?g.nodeAfter.nodeSize:g.parent.nodeSize);i.push(u.p.node(b,y,{},{isDraftComment:!0,comment:f}))}catch(e){console.log("[DraftCommentState] error: $".concat(e.message))}}return this.decorations=u.EH.create(e.doc,i),this}},{key:"absToRel",value:function(e,t){var n=c.Gt.getState(e),r=n.type,o=n.binding;if(!n.binding)throw Error("Y.State non initialized");return(0,s.JR)(t,r,o.mapping)}}]),e}(),p=new r.H$("draftComments"),m=function(){return new r.Sy({key:p,state:{init:function(){return new f},apply:function(e,t,n,r){return t.apply(e,r)}},props:{decorations:function(e){return this.getState(e).decorations}}})}},31246:function(e,t,n){n.d(t,{l:function(){return tn}});var r=n(81333),o=n(12741),i=n(95235),a=n(82269),c=n(53738),s=n(34676),l=n(55966),u=n(37164),d=n(2784),f=n(23313),p=n(98875),m=n(46358),h=n(94864),g=n(24224),v=n(13121),b=n(62141),y=n(23533),x=n(9734),j=n(34860),w=n(99638),O=function(e){var t=e.editor,n=e.decorations.filter(function(e){return!!e.spec.isMobileAnnotation}),r=(0,d.useState)(null),o=r[0],i=r[1],a=(0,d.useRef)(null);return(0,d.useEffect)(function(){if(0===n.length){null!==a.current&&(document.removeEventListener("touchstart",a.current),a.current=null,i(null));return}a.current||(i({left:n[0].spec.offsetX,top:n[0].spec.offsetY}),a.current=function(e){e.target.closest(".mobile-add-comment-widget")||t.commands.setMobileAddBlockComment(null)},document.addEventListener("touchstart",a.current))},[t,n]),o},k=n(55479),C=n(43997),P=n(2875),S=n(41261),A=n(10710),E=n(72674),D=n(11406),I=n(27801),z=n(8283),T=n(5961),M=n(20053),N=n(31299),R=n(55452),L=n(11919),_=n(71354),H=n(49747),Z=n(25925),B=n(23015),F=n(45650),W=n(4036),U=n(49929),G=n(52322),q=["isMobile","icon","badgeCount","tooltip","children"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=(0,d.memo)(function(e){var t=e.isMobile,n=e.icon,r=e.badgeCount,o=e.tooltip,i=e.children,c=(0,a.Z)(e,q);t&&delete c._hover;var s=(0,G.jsx)(z.U,{className:"block-comment-button-wrapper",children:(0,G.jsxs)(F.z,$($({variant:"custom",borderRadius:"full",size:"sm",bgGradient:"none",color:"yellow.600",boxSize:t?10:8,border:t?"":"1px solid white",transitionProperty:"common",transitionDuration:"normal",_hover:t?{}:{bgGradient:"linear(to-b, yellow.300, yellow.400)",color:"yellow.700"}},c),{},{children:[n&&(0,G.jsx)(U.G,{size:t?"lg":"sm",icon:n}),i&&i,void 0!==r&&(0,G.jsx)(W.C,{colorScheme:"yellow",borderRadius:"full",pos:"absolute",bottom:-1,right:-1,shadow:"base","data-testid":"badge-count",children:r})]}))});return o?(0,G.jsx)(l.kH,{placement:"left",label:o,children:s}):s});K.displayName="GenericBlockCommentButton";var Y=n(74637),X=n(84636),J=n.n(X),Q=n(50350),ee=n(6010),et=n(45478),en=function(e){var t=e.comments,n=e.reactions,r=e.draftComment;if(r&&r.text.trim().length>0)return"draft";if(0===t.length)return 0===n.length?"fresh":"reactions-only";if(1===t.length)return"single-thread";if(t.length>1)return"multiple-threads";throw Error("Invalid button state")},er=function(e){var t=e.comments;e.reactions;var n={};return t.forEach(function(e){n[e.id]=[e.user],e.replies.forEach(function(t){n[e.id].push(t.user)})}),Object.entries(n).forEach(function(e){var t=(0,r.Z)(e,2),o=t[0],i=t[1];n[o]=J()(i,"id")}),n},eo=function(e){var t=e.reactions,n={};return t.forEach(function(e){n[e.emoji]=J()(e.reactions.flatMap(function(e){return e.users}),"id")}),n},ei=function(e){var t=e.comments,n=e.reactions;return{state:en({comments:t,reactions:n,draftComment:e.draftComment}),allCount:t.reduce(function(e,t){var n;return e+((null===(n=t.replies)||void 0===n?void 0:n.length)||0)},0)+n.reduce(function(e,t){return e+t.count},0)+t.length,overflowReactionCount:Math.max(0,n.length-7)}},ea=function(e){var t=e.comments,n=e.reactions,r=n.flatMap(function(e){return e.reactions.map(function(e){return e.users})}).flat(),i=t.map(function(e){return e.user}).concat(t.map(function(e){return e.replies.map(function(e){return e.user})}).flat()).filter(Boolean),a=er({comments:t,reactions:n}),c=J()([].concat((0,o.Z)(i),(0,o.Z)(r)),"id"),s=[],l=eo({reactions:n});return t.forEach(function(e){s.push(a[e.id])}),{allAvatars:c,reactionAvatars:l,commentAvatars:s}},ec=function(e){var t=e.popup,n=e.isMobile,r=e.isHovered,o=e.comments,i=e.reactions,a=e.draftComment,c=e.enableReactions,s=ei({comments:o,reactions:i,draftComment:a}).state,l=n||c&&r||!c&&r&&"fresh"!==s||null!==t;return(0,d.useEffect)(function(){n||(l?document.body.classList.add("is-taking-action"):document.body.classList.remove("is-taking-action"))},[l,n]),{isExpanded:l}},es=function(e){var t=e.isOpen,n=e.popupRef,r=e.onClose;(0,Y.O)({ref:n,handler:function(e){var n,o,i,a,c,s,l;(0,x.f_)()&&!(null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest(".".concat(ee.G," [data-controls-toggle-button]")))||!t||null!=e&&null!==(o=e.target)&&void 0!==o&&o.closest("[data-controls-toggle-button]")||null!=e&&null!==(i=e.target)&&void 0!==i&&i.closest('[data-target-name="emoji-list"]')||null!=e&&null!==(a=e.target)&&void 0!==a&&a.closest('[data-target-name="mention-list"]')||null!=e&&null!==(c=e.target)&&void 0!==c&&c.closest('[data-target-name="reaction-emoji-picker"]')||null!=e&&null!==(s=e.target)&&void 0!==s&&s.closest(".chakra-menu__menu-list")||null!=e&&null!==(l=e.target)&&void 0!==l&&l.closest('[data-target-name="doc-mention-popup"]')||r()}})},el=function(e){var t=e.editor,n=e.getPos,r=t.view.nodeDOM(n()),o=(0,d.useState)(null),i=o[0],a=o[1];return((0,d.useLayoutEffect)(function(){a((null==r?void 0:r.offsetHeight)||100)},[]),null===i)?null:Math.min(i,Q.yK)},eu=n(91012),ed=n(420),ef=n(98841),ep=n(31912),em=(0,ef.E)(c.xu),eh=(0,d.memo)(function(e){var t=e.emojis;return(0,G.jsx)(G.Fragment,{children:null==t?void 0:t.map(function(e,n){return 0===n?(0,G.jsx)(em,{initial:{x:"6px",y:"5px"},textShadow:(null==t?void 0:t.length)>1?"0px 1px 3px rgba(0,0,0,.4)":"none",fontSize:"20px",position:"absolute",zIndex:1,children:(0,G.jsx)("em-emoji",{size:0,native:!0,id:e})},n):1===n?(0,G.jsx)(em,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"10deg",x:"18px",y:"-3px"},position:"absolute",children:(0,G.jsx)("em-emoji",{size:0,native:!0,id:e})},n):2===n?(0,G.jsx)(em,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:"-3px",y:"16px"},position:"absolute",children:(0,G.jsx)("em-emoji",{size:0,native:!0,id:e})},n):3===n?(0,G.jsx)(em,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:"-3px",y:"-3px"},position:"absolute",children:(0,G.jsx)("em-emoji",{size:0,native:!0,id:e})},n):null})})});eh.displayName="EmojiCluster";var eg=["emoji","emojiCluster","isMobile","user","canReact","reaction","badgeCount","onClick"];function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ey=(0,ef.E)(c.xu),ex=(0,d.memo)(function(e){var t=e.emoji,n=e.emojiCluster,r=e.isMobile,o=e.user,i=e.canReact,s=e.reaction,u=e.badgeCount,f=e.onClick,p=(0,a.Z)(e,eg),m=(0,et.gq)(s),h=!!m.find(function(e){return e.id===(null==o?void 0:o.id)}),g=(0,ep.Rf)({users:m,selfUserId:(null==o?void 0:o.id)||""}),v=(0,G.jsxs)(c.xu,{alignContent:"center",children:[(0,G.jsx)(R.cC,{id:"mRnNF/",values:{usersLabel:g,emoji:t},components:{0:(0,G.jsx)(eu.x,{as:"span",color:"gray.300"})}}),i&&(0,G.jsx)(eu.x,{display:"block",color:"gray.500",children:h?(0,G.jsx)(R.cC,{id:"fb/FjL"}):(0,G.jsx)(R.cC,{id:"AG3H1y"})})]}),b=(0,G.jsx)(z.U,{className:"block-comment-button-wrapper",children:(0,G.jsxs)(F.z,eb(eb(eb({variant:"ghost",borderRadius:"full",size:"sm",boxSize:r?10:8,transitionProperty:"common",transitionDuration:"normal"},h?{bg:"gray.100",borderColor:r?"blackAlpha.200":"gray.200"}:{}),p),{},{onClick:function(e){i&&f&&f(e)},pos:"relative",children:[(0,G.jsx)(d.Suspense,{fallback:(0,G.jsx)(ed.$,{size:"sm"}),children:(0,G.jsxs)(eu.x,{pos:"absolute",inset:0,as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"},":hover::before":r?{}:{backgroundColor:"transparent"}}},fontSize:r?"1.5em":"1.25em",children:[!n&&(0,G.jsx)(ey,{initial:{x:"6px",y:"5px"},fontSize:"20px",position:"absolute",zIndex:1,children:(0,G.jsx)("em-emoji",{size:0,native:!0,id:t})}),(0,G.jsx)(Z.M,{children:(0,G.jsx)(eh,{emojis:n})})]})}),void 0!==u&&(0,G.jsx)(W.C,{colorScheme:"yellow",borderRadius:"full",pos:"absolute",bottom:-1,right:-1,shadow:"base",zIndex:1,children:u})]}))});return v?(0,G.jsx)(l.kH,{placement:"left",label:v,children:b}):b});ex.displayName="ReactionButton";var ej=["user","userCanComment","isExpanded","isMobile","comments","reactions","draftComment","onClickThread","onClickAddComment","onClickAddReaction","onClickReactionsOverflow","onClickExistingReaction","onClosePopup","hideAddCommentButton","viewingCommentId","enableReactions","blockAllowsCommenting"];function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ek={bg:"yellow.600",color:"yellow.100",_hover:{bg:"yellow.600",color:"yellow.100"}},eC={bg:"yellow.100",color:"yellow.800"},eP="linear(to-b, yellow.200, yellow.300)",eS=function(e){e.stopPropagation()},eA=(0,d.memo)(function(e){var t=e.user,n=e.userCanComment,r=e.isExpanded,o=e.isMobile,i=e.comments,s=e.reactions,l=e.draftComment,u=e.onClickThread,d=e.onClickAddComment,f=e.onClickAddReaction,p=e.onClickReactionsOverflow,m=e.onClickExistingReaction,h=e.onClosePopup,g=e.hideAddCommentButton,v=void 0!==g&&g,b=e.viewingCommentId,y=e.enableReactions,x=e.blockAllowsCommenting,j=(0,a.Z)(e,ej),w=ei({comments:i,reactions:s,draftComment:l}),O=w.state,k=w.allCount,C=w.overflowReactionCount,P=[];if(!r)switch(O){case"draft":P.push((0,G.jsx)(K,{isMobile:o,icon:N.Of,onClick:d,bg:r?"gray.100":"white",_hover:eC,color:"gray.600"},"draft"));break;case"fresh":P.push((0,G.jsx)(K,{isMobile:o,icon:I.Xo,bg:r?"gray.100":"white",_hover:eC,color:"gray.600",bgGradient:eP,tooltip:(0,G.jsx)(R.cC,{id:"oFsfkI"}),"data-testid":"create-comment-button",onClick:d},"fresh"));break;case"reactions-only":if(s.length>0){var S=s[0],A=s.reduce(function(e,t){return e.push(t.emoji),e},[]);P.push((0,G.jsx)(ex,{isMobile:o,onClick:function(e){m(S),e.stopPropagation()},reaction:S,user:t,badgeCount:k,emoji:S.emoji,"data-testid":"reaction-".concat(S.emoji),emojiCluster:A,canReact:n&&x},S.emoji))}break;case"single-thread":P.push((0,G.jsx)(K,{isMobile:o,icon:T.Mz,bgGradient:eP,badgeCount:k,"data-testid":"single-thread"},"first-thread"));break;case"multiple-threads":P.push((0,G.jsx)(K,{isMobile:o,bgGradient:eP,icon:M.lX,badgeCount:k,"data-testid":"multiple-threads"},"first-thread"))}return(r&&(i.forEach(function(e,t){var n=null!==b&&e.id===b,r=n?ek:{},i=n?function(){return h()}:function(){return u(e)};P.push((0,G.jsx)(K,eO({isMobile:o,icon:T.Mz,badgeCount:e.replies.length+1,bgGradient:eP,onClick:i,"data-testid":"thread-".concat(t)},r),0===t?"first-thread":"thread-".concat(t)))}),y&&(s.slice(0,7).forEach(function(e){P.push((0,G.jsx)(ex,{isMobile:o,onClick:function(t){m(e),t.stopPropagation()},"data-testid":"reaction-".concat(e.emoji),reaction:e,user:t,badgeCount:e.count,emoji:e.emoji,canReact:n&&x},e.emoji))}),C>0&&P.push((0,G.jsxs)(K,{isMobile:o,onClick:function(){p()},bg:"gray.100",color:"yellow.800",_hover:eC,children:["+",C]},"reactions-overflow"))),"draft"===O?P.push((0,G.jsx)(K,{isMobile:o,icon:N.Of,tooltip:(0,G.jsx)(R.cC,{id:"x8Zuns"}),onClick:d,bg:r?"gray.100":"white",_hover:eC,"data-testid":"create-comment-button-draft",color:"gray.600"},"draft")):v||o||P.push((0,G.jsx)(K,{isMobile:o,icon:I.Xo,bgGradient:eP,tooltip:(0,G.jsx)(R.cC,{id:"oFsfkI"}),onClick:d,bg:r?"gray.100":"white",_hover:eC,"data-testid":"create-comment-button",color:"gray.600"},"fresh")),y&&n&&!v&&!o&&P.push((0,G.jsx)(K,{isMobile:o,icon:D.wq,bgGradient:eP,onClick:function(){f()},tooltip:(0,G.jsx)(R.cC,{id:"9OEgyT"}),"data-testid":"add-reaction-button",bg:"gray.100",_hover:eC,color:"gray.600"},"add-reaction"))),o)?(0,G.jsx)(L.k,{className:"block-comments-inner-stack",userSelect:"none",transitionProperty:"all",transitionDuration:"fast",flexDir:"row",flexWrap:"wrap",onClick:eS,children:P}):(0,G.jsxs)(_.K,eO(eO({className:"block-comments-inner-stack",userSelect:"none",spacing:0,width:"34px",transitionProperty:"all",transitionDuration:"fast",onClick:eS,borderRadius:"full",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white",border:"1px solid transparent",onMouseDown:B.br,"data-testid":"block-comments-buttons"},j),{},{children:[(0,G.jsx)(c.xu,{children:P[0]}),(0,G.jsx)(H.U,{in:r,startingHeight:0,transitionEnd:{enter:{overflow:"initial"}},children:(0,G.jsx)(Z.M,{children:P.length>1&&(0,G.jsx)(_.K,{spacing:1,children:P.slice(1)})})})]}))});eA.displayName="BlockCommentsButtons";var eE=["onClickAddComment","onClickAddReaction"];function eD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ez=(0,d.memo)(function(e){var t=e.onClickAddComment,n=e.onClickAddReaction,r=(0,a.Z)(e,eE);return(0,G.jsx)(c.xu,eI(eI({className:"mobile-add-comment-widget",pos:"absolute",transform:"translate(-50%,-50%) scale(1)",mt:-6,background:"white",p:"4px",borderRadius:"full",shadow:"lg",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1);",zIndex:9},r),{},{children:(0,G.jsxs)(z.U,{spacing:1,children:[(0,G.jsx)(K,{isMobile:!0,icon:I.Xo,bg:"white",_hover:eC,color:"gray.600",bgGradient:eP,onClick:function(){t()}},"fresh"),(0,G.jsx)(K,{isMobile:!0,icon:D.wq,bgGradient:eP,onClick:function(){n()},bg:"white",_hover:eC,color:"gray.600"},"add-reaction")]})}))});ez.displayName="MobileAddCommentWidget";var eT=n(80040),eM=n(12221),eN=(0,d.memo)(function(e){var t=e.comments,n=e.reactions,r=e.isExpanded,o=e.avatarMax,i=void 0===o?4:o,a=ea({comments:t,reactions:n}),c=a.allAvatars,s=a.reactionAvatars,l=a.commentAvatars;return(0,G.jsxs)(_.K,{className:"avatar-group-popup",spacing:1,transitionProperty:"common",transitionDuration:"fast",onClick:function(e){e.stopPropagation()},p:"1px",pl:3,userSelect:"none",children:[!r&&(0,G.jsx)(eT.H,{max:i,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:c.map(function(e,t){return(0,G.jsx)(eM.q,{zIndex:c.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"unexpanded-".concat(null==e?void 0:e.id))})}),r&&(0,G.jsxs)(G.Fragment,{children:[l.map(function(e,t){return(0,G.jsx)(eT.H,{max:i,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:e.map(function(e,t){return(0,G.jsx)(eM.q,{zIndex:c.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"comment-".concat(null==e?void 0:e.id))})},"comment-".concat(t))}),n.slice(0,7).map(function(e,t){return(0,G.jsx)(eT.H,{max:i,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:s[e.emoji].map(function(e,t){return(0,G.jsx)(eM.q,{zIndex:c.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"reaction-".concat(null==e?void 0:e.id))})},"reaction-".concat(t))})]})]})});eN.displayName="AvatarGroupPopup";var eR=n(87254),eL=function(e){e.isMobile;var t=e.emoji,n=eR.ag._({id:"r2ONxg"});return(0,G.jsx)(d.Suspense,{fallback:(0,G.jsx)(ed.$,{size:"sm"}),children:(0,G.jsxs)(eu.x,{as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"}}},children:[(0,G.jsx)("em-emoji",{size:0,native:!0,id:t})," ",n,"."]})})},e_=n(43602),eH=n(11826),eZ=n(94730),eB=n(80102),eF=function(e){e.onCancel;var t=e.editor,n=e.commentIdToHighlight,r=e.userCanComment,o=e.blockAllowsCommenting,i=e.getPos,a=e.draftComment,c=e.onCommentDraftUpdate,s=e.onCommentSave,l=e.isMobile,u=(0,A.SE)().user,d=(0,m.CG)(b.yx),f=(0,e_.$m)(d,u),p=el({editor:t,getPos:i}),h=f&&!u&&o;if(null===p)return null;var g=(0,G.jsxs)(L.k,{overflowY:"auto",direction:"column",className:"comments-list",p:l||h?0:4,children:[h&&d&&(0,G.jsx)(eH.I,{accessLink:f,doc:d,className:"comments-sign-up",showDivider:!1}),r&&(0,G.jsx)(eZ.A,{draftComment:a,user:u,showUser:l,showBorder:l,onCommentDraftUpdate:c,onCommentSave:s,commentIdToHighlight:n,alwaysShowButtons:l})]});return l?g:(0,G.jsx)(eB.KT,{offsetFromTop:p,children:g})},eW=n(639),eU=function(e){var t=e.isMobile,n=e.editor,r=e.onReactionClick,o=el({editor:n,getPos:e.getPos});if(null===o)return null;var i=(0,G.jsx)(L.k,{bg:"white",p:"0",zIndex:"tooltip","data-testid":"add-reaction-popup","data-target-name":"reaction-emoji-picker",boxShadow:"none",sx:{".emoji-mart":{border:"none"}},overflow:"hidden",justify:"center",children:(0,G.jsx)(eW.h5,{perLine:9,handlePick:r,shouldFocusSearch:!t})});return t?i:(0,G.jsx)(eB.KT,{offsetFromTop:o,children:i})},eG=n(78116),eq=n(56915),eV=n(16796),e$=n(2167),eK=n(64827),eY=(0,d.forwardRef)(function(e,t){var n=e.isMobile,r=e.children,o=e.closePopup,i=e.drawerMinHeight;if((0,d.useEffect)(function(){n&&setTimeout(function(){window.scrollTo(window.scrollY+1,0)},250)},[n]),n){var a=i||"calc(calc(100vh - calc(100vh - 100%)) - 1rem)";return(0,G.jsxs)(eG.d,{placement:"bottom",isOpen:!0,onClose:o,children:[(0,G.jsx)(eq.Z,{}),(0,G.jsxs)(eV.s,{minH:a,maxH:a,borderTopRadius:"xl",className:"comments-wrapper","data-block-comments-popup":!0,children:[(0,G.jsx)(e$.f,{p:6,pb:2,className:eB.U6,children:r}),(0,G.jsx)(eK.o,{})]})]})}return(0,G.jsx)(c.xu,{ref:t,children:r})}),eX=n(50390),eJ=function(e){var t=e.onCancel,n=e.reactions,r=e.onClickExistingReaction,o=e.editor,i=e.getPos,a=e.user,c=e.userCanComment,s=e.blockAllowsCommenting,l=e.isMobile,u=el({editor:o,getPos:i}),f=n.slice(l?0:7),p=f.map(function(e){return(0,G.jsx)(ex,{isMobile:!0,onClick:function(t){r(e),t.stopPropagation()},mr:2,mb:4,reaction:e,user:a,canReact:c&&s,badgeCount:e.count,emoji:e.emoji},e.emoji)});if((0,d.useEffect)(function(){0===f.length&&t()},[t,f]),null===u)return null;var m=(0,G.jsxs)(_.K,{spacing:4,children:[(0,G.jsx)(eX.X,{size:"md",children:(0,G.jsx)(R.cC,{id:"7ZMg79"})}),(0,G.jsx)(L.k,{flexWrap:"wrap",children:p})]});return l?m:(0,G.jsx)(eB.KT,{offsetFromTop:u,children:(0,G.jsx)(L.k,{p:4,px:2,pb:0,flexWrap:"wrap",children:p})})},eQ=n(6563),e0=function(e){var t=e.comment,n=e.editor,r=e.commentIdToHighlight,o=e.userCanComment,i=e.blockAllowsCommenting,a=e.getPos,c=e.isMobile,s=e.closePopup,l=n.gammaDocId,u=(0,A.SE)().user,d=(0,C.v9)(b.gh),f=(0,m.CG)(b.yx),p=(0,e_.$m)(f,u),h=el({editor:n,getPos:a});if(null===h||!t)return null;var g=(0,G.jsxs)(L.k,{direction:"column",className:"comments-list","data-testid":"thread-view-popup",children:[p&&!u&&f&&i&&(0,G.jsx)(eH.I,{accessLink:p,doc:f,className:"comments-sign-up"}),(0,G.jsx)(eQ.q,{instanceType:c?"drawer":"popup",userCanComment:o,commentIdToHighlight:r,editor:n,comment:t,selfUser:u,docId:l,editorMode:d,isRootComment:!0,borderBottomWidth:"none",closePopup:s,p:c?0:4,pb:4},t.id)]});return c?g:(0,G.jsx)(eB.KT,{offsetFromTop:h,children:g})},e1=n(86773),e2=function(e){var t=e.getPos,n=e.editor,i=e.reactions,a=(0,A.SE)().user,c=(0,f.Os4)(),s=(0,r.Z)(c,1)[0],l=(0,f.d6Z)(),u=(0,r.Z)(l,1)[0],p=(0,d.useCallback)(function(e){var t=e.reaction;if(a){var r=t.docId;1===t.count&&n.commands.deleteAnnotation(t.targetId);var o=t.count-1,i=t.users.filter(function(e){return(null==e?void 0:e.id)!==(null==a?void 0:a.id)});u({variables:{reactionInput:{docId:r,targetId:t.targetId,emoji:t.emoji}},update:function(e,t){var n=t.data;e.writeFragment({id:"Doc:".concat(r),fragment:f.wk2,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.removeReaction]}})},optimisticResponse:{removeReaction:{docId:r,targetId:t.targetId,targetType:f.Lmy.Decoration,count:o,emoji:t.emoji,users:i,__typename:"Reaction"}}})}},[n,u,a]);return{addReactionFn:(0,d.useCallback)(function(e){var r=e.emoji;if(!(0,et.z3)({emoji:r,user:a,reactions:i})&&a){var c=n.gammaDocId,l=(0,et.Nq)({reactions:i,emoji:r}),u=e1.v.generate(),d=((null==l?void 0:l.count)||0)+1,p=[];l?(u=l.targetId,p=(0,o.Z)(l.users)):n.commands.addAnnotation({id:u,pos:t()}),p.unshift(a),p.sort(function(e,t){return e.id>t.id?1:-1}),s({variables:{reactionInput:{docId:c,targetId:u,targetType:f.Lmy.Decoration,emoji:r}},update:function(e,t){var n=t.data;e.writeFragment({id:"Doc:".concat(c),fragment:f.wk2,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.addReaction]}})},optimisticResponse:{addReaction:{docId:c,targetId:u,targetType:f.Lmy.Decoration,count:d,emoji:r,users:p,__typename:"Reaction"}}})}},[s,n,t,i,a]),removeReactionFn:p}},e3=["isHovering","delayedClose"];function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e8={"add-comment":"350px","add-reaction":"350px","reactions-overflow":"350px"},e6=function(e){var t=e.nodeName,n=e.isVisible,r=e.editor,o=e.getPos,i=e.comments,c=e.reactions,l=e.createDraftComment,u=e.cleanupDraftComment,f=e.onCommentDraftUpdate,p=e.draftComment,m=e.onCommentSave,h=e.userCanComment,g=e.blockAllowsCommenting,v=e.blockCommentId,y=e.enableReactions,w=e.mobileAddCommentPos,O=e.setIsButtonStackHovered,D=(0,k.p)(),I=(0,x.s2)(),z=(0,C.I0)(),T=(0,A.SE)(),M=T.user,N=T.isUserLoading,R=(0,j.xx)({enterDelay:30,leaveDelay:100}),L=R.isHovering,_=R.delayedClose,H=(0,a.Z)(R,e3),Z=!!L,B=(0,d.useRef)(null),F=(0,d.useRef)(),W=(0,C.v9)((0,b.s3)(v)),U=(0,d.useRef)(null),q=(0,d.useState)(null),V=q[0],$=q[1],K=null!==V,Y=(0,d.useState)(null),X=Y[0],J=Y[1],Q=i.find(function(e){return e.id===X})||null,et=(0,d.useCallback)(function(e){$("thread"),J(e.id),z((0,b.UX)({isOpen:!0,blockCommentId:v}))},[v,z]),en=(0,d.useCallback)(function(e){$("add-comment"),J(null),z((0,b.UX)({isOpen:!0,blockCommentId:v})),l(e)},[v,z,l]),er=(0,d.useCallback)(function(){$("add-reaction"),J(null),z((0,b.UX)({isOpen:!0,blockCommentId:v}))},[v,z]),eo=(0,d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$(null),J(null),u(),z((0,b.UX)({isOpen:!1,blockCommentId:v})),e&&_(1e3)},[v,u,_,z]),ei=e2({editor:r,getPos:o,reactions:c}),ea=ei.addReactionFn,el=ei.removeReactionFn,eu=(0,d.useCallback)(function(e){h&&(ea({emoji:e.id}),D({title:(0,G.jsx)(eL,{emoji:e.id,isMobile:I}),status:"success",duration:5e3,isClosable:!1,position:I?"bottom":"top"}),eo(!0))},[ea,eo,I,D,h]),ed=(0,d.useCallback)(function(e){m(e),eo(!0)},[m,eo]),ef=(0,d.useCallback)(function(e){if(h){var t=e.reactions.find(function(e){var t;return null===(t=e.users)||void 0===t?void 0:t.find(function(e){return e.id===(null==M?void 0:M.id)})});t?el({reaction:t}):ea({emoji:e.emoji})}},[ea,el,M,h]),ep=(0,d.useCallback)(function(){$("reactions-overflow"),J(null),z((0,b.UX)({isOpen:!0,blockCommentId:v}))},[v,z]);es({isOpen:K,popupRef:U,onClose:eo});var em=ec({popup:V,isMobile:I,isHovered:Z,comments:i,reactions:c,draftComment:p,enableReactions:y}).isExpanded;(0,d.useEffect)(function(){I||O(Z)},[Z,I,O]),(0,E.c0)(o,en);var eh=(0,E.m0)({comments:i,blockAllowsCommenting:g,showComment:(0,d.useCallback)(function(e){(0,S.pE)({pos:o(),editor:r}),et({id:e})},[r,o,et])});(0,d.useEffect)(function(){P.pw.emit(P.TI.POPUP_COMMENT_TOGGLED,{open:K})},[K]);var eg=(0,d.useCallback)(function(e){"Escape"===e.key&&eo()},[eo]);if(!n||N)return null;var ev=!!M&&!h,eb=0===i.length&&0===c.length;return(ev||!g)&&eb?null:(0,G.jsxs)(G.Fragment,{children:[I&&w&&(0,G.jsx)(ez,{onClickAddComment:en,onClickAddReaction:er,top:w.top,left:w.left}),(0,G.jsxs)(ee.C,e5(e5({nodeName:t,className:(0,s.cx)("block-comments-stack",em&&"is-expanded",em&&"is-taking-action",eb&&"is-empty",!I&&W&&"other-comment-open"),isMobile:I,isEmpty:eb,isPopupOpen:K},H),{},{buttonRef:B,onKeyDown:eg,hasCommentsOrReactions:!eb,children:[(0,G.jsx)(eA,{isExpanded:em,isMobile:I,user:M,userCanComment:h,blockAllowsCommenting:g,draftComment:p,reactions:c,comments:i,onClickThread:et,onClickAddComment:en,onClickAddReaction:er,onClickExistingReaction:ef,onClickReactionsOverflow:ep,hideAddCommentButton:ev||!g,onClosePopup:eo,viewingCommentId:X,enableReactions:y}),!K&&!I&&(0,G.jsx)(eN,{isExpanded:em,comments:i,reactions:c}),K&&(0,G.jsxs)(eY,{isMobile:I,ref:U,closePopup:eo,drawerMinHeight:e8[V],children:["thread"===V&&(0,G.jsx)(e0,{isMobile:I,comment:Q,closePopup:eo,editor:r,getPos:o,commentIdToHighlight:eh,commentsPanelRef:F,userCanComment:h,blockAllowsCommenting:g}),"add-comment"===V&&(0,G.jsx)(eF,{isMobile:I,onCancel:function(){eo()},editor:r,getPos:o,commentIdToHighlight:eh,userCanComment:h,blockAllowsCommenting:g,onCommentSave:ed,draftComment:p,onCommentDraftUpdate:f}),"add-reaction"===V&&(0,G.jsx)(eU,{isMobile:I,onReactionClick:eu,editor:r,getPos:o}),"reactions-overflow"===V&&(0,G.jsx)(eJ,{isMobile:I,onCancel:function(){eo()},onClickExistingReaction:ef,editor:r,getPos:o,user:M,userCanComment:h,blockAllowsCommenting:g,reactions:c})]})]}))]})},e9=n(56808),e7=["children","as","className","style","hideComments","readOnly"];function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tn=function(e){var t=e.children,n=e.as,r=e.className,o=e.style,i=e.hideComments,c=e.readOnly,s=(0,a.Z)(e,e7),l=s.decorations,u=s.editor,d=(0,h.C7)();return!l.some(function(e){return e.spec.isAnnotatable})||u.isThumbnail||d?(0,G.jsx)(v.T5,{as:n,className:r,style:o,children:t}):(0,G.jsx)(tr,tt(tt({as:n,className:r,style:o,hideComments:void 0!==i&&i,readOnly:void 0!==c&&c},s),{},{children:t}))},tr=function(e){var t,n=e.children,i=e.decorations,a=e.editor,h=e.getPos,k=e.as,C=e.className,P=e.style,S=e.hideComments,A=e.readOnly,D=e.node,I=(0,f.$gs)().isConnected,z=(0,w.iS)(i),T=O({editor:a,decorations:i}),M=(0,p.ye)("blockReactions"),N=(0,g.Br)("comment"),R=(0,m.CG)(b.kk),L=(0,d.useMemo)(function(){return(0,u.x0)(5)},[]),_=(0,m.CG)((0,b.Ze)(L)),H=(0,d.useState)(!1),Z=H[0],B=H[1],F=(0,p.ye)("debugComments"),W=(0,E.vY)(i),U=W[0]||null,q=(0,d.useState)(null),V=q[0],$=q[1],K=(0,m.TL)(),Y=(0,d.useCallback)(function(e){var t,n,r=(null==e?void 0:e.getPos)||h,o=null==e?void 0:e.targetHtml,i=U;i?e&&(i=(0,e9.kr)(i,r,o,a)):(i=(0,e9.xN)(r,a,o),null===(t=(n=a.commands).createDraftComment)||void 0===t||t.call(n,i)),$(i),K((0,b.Qx)({attached:!1}))},[K,a,h,U]),X=(0,d.useCallback)(function(){var e,t,n,r,o,i;V&&(null==V?void 0:null===(e=V.text)||void 0===e?void 0:null===(t=e.trim())||void 0===t?void 0:t.length)>0?null===(n=(r=a.commands).createDraftComment)||void 0===n||n.call(r,V):null===(o=(i=a.commands).removeDraftComments)||void 0===o||o.call(i,W),$(null)},[W,a,V]),J=(0,d.useRef)(_);J.current=_,(0,d.useEffect)(function(){return function(){J.current&&K((0,b.UX)({isOpen:!1,blockCommentId:L}))}},[L,K]);var Q=(0,E.iZ)({draftComment:V,clearDraftComment:function(){V&&(null===(n=(r=a.commands).removeDraftComments)||void 0===n||n.call(r,[V].concat((0,o.Z)(W))));var e,t,n,r,i=(0,e9.xN)(h,a);null===(e=(t=a.commands).createDraftComment)||void 0===e||e.call(t,i),$(i)},editor:a}),ee=(0,E.xA)(i),et=ee.length>0&&!S,en=V||U,er=(null==en?void 0:null===(t=en.text)||void 0===t?void 0:t.length)>0,eo=(0,j.XI)(),ei=(0,r.Z)(eo,2),ea=ei[0],ec=ei[1],es=(0,E.Zz)(i);M||(es=[]);var el=es.length>0,eu=(0,x.s2)()&&(_||et||el||!!T)||!(0,x.s2)()&&(ec||z||_||et||el||er),ed=_||T||Z?(0,y.tT)(l.qZ.colors.yellow[200],.25):void 0;return(0,G.jsxs)(v.T5,{as:k,style:tt(tt({},P),{},{position:"relative",backgroundColor:(0,x.s2)()?void 0:ed}),className:(0,s.cx)(C,"annotatable-node-view-wrapper",(0,x.s2)()&&"is-mobile",F?"debug-comments":""),ref:ea,children:[R&&!S&&N&&(0,G.jsx)(e6,{nodeName:D.type.name,isVisible:eu,reactions:es,blockCommentId:L,userCanComment:N&&I,blockAllowsCommenting:!S&&!A,onCommentDraftUpdate:function(e){var t=e.editor;$(function(e){return e?tt(tt({},e),{},{json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}):e})},cleanupDraftComment:X,createDraftComment:Y,editor:a,getPos:h,comments:ee,draftComment:en,onCommentSave:Q,enableReactions:M,mobileAddCommentPos:T,setIsButtonStackHovered:B}),(0,x.s2)()&&ed?(0,G.jsx)(c.xu,{bgColor:ed,children:n}):n]})}},6010:function(e,t,n){n.d(t,{C:function(){return h},G:function(){return m}});var r=n(95235),o=n(82269),i=n(53738),a=n(8283),c=n(11919),s=n(2784),l=n(52322),u=(0,s.memo)(function(e){var t=e.nodeName;return(0,l.jsx)(i.Cd,{contentEditable:!1,userSelect:"none",right:0,size:4,transform:"translate(calc(".concat("gridLayout"===t||"gallery"===t?"-1 * var(--grid-padding)":"0px"," + var(--comment-padding) + 50%),calc(50%)) scale(1)"),position:"absolute",bgGradient:"linear(to-b, yellow.200, yellow.300)",border:"1px solid white",shadow:"0 0 0 1px rgb(0 0 0 / 10%)",className:"block-comments-circle",zIndex:"1"})});u.displayName="BlockCommentsCircle";var d=["nodeName","isPopupOpen","onKeyDown","buttonRef","isMobile","hasCommentsOrReactions","children","isEmpty"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m="comments-wrapper",h=(0,s.forwardRef)(function(e,t){var n=e.nodeName,r=e.isPopupOpen,s=e.onKeyDown,f=e.buttonRef,h=e.isMobile,g=e.hasCommentsOrReactions,v=e.children,b=e.isEmpty,y=(0,o.Z)(e,d);return(0,l.jsxs)(i.xu,{ref:t,contentEditable:!1,suppressContentEditableWarning:!0,pointerEvents:"none","data-comments-wrapper":!0,"data-is-popup-open":r,className:m,alignSelf:"start",onKeyDown:s,"data-print-hidden":!0,children:[!b&&!h&&(0,l.jsx)(u,{nodeName:n}),(0,l.jsx)(a.U,p(p({contentEditable:!1,suppressContentEditableWarning:!0},h?g?{pt:4}:{}:{position:"absolute",marginLeft:"100%",top:0,height:"100%",align:"flex-start"}),{},{className:"controls-wrapper controls-wrapper__".concat(n),children:(0,l.jsx)(c.k,p(p({direction:"row",ref:f,contentEditable:!1,suppressContentEditableWarning:!0,transitionProperty:"common",transitionDuration:"fast",zIndex:21,"data-controls-toggle-button":!0,ml:[0,"-17px"]},y),{},{children:v}))}))]})})},80102:function(e,t,n){n.d(t,{K0:function(){return l},KT:function(){return u},U6:function(){return s}});var r=n(95235),o=n(11919),i=n(38876),a=n(50350),c=n(52322),s="block-comments-container",l="2xl",u=function(e){var t=e.offsetFromTop,n=e.children;return(0,c.jsx)(o.k,{contentEditable:!1,suppressContentEditableWarning:!0,color:"gray.900",className:s,direction:"column",bg:"white",borderRadius:"xl",shadow:"xl",overflowY:"auto",transitionProperty:"common",transitionDuration:"normal",zIndex:"sticky",bottom:(0,r.Z)({top:"0px"},l,"auto"),top:(0,r.Z)({top:"0px"},l,"auto"),width:(0,r.Z)({base:a.bk},l,a.bk),maxW:(0,r.Z)({base:"90vw",md:"80vw"},l,a.bk),right:(0,r.Z)({base:"44px"},l,0),transform:(0,r.Z)({base:"translate(0, ".concat(t,"px)")},l,"translate(calc(100% + 10px), 0)"),wordBreak:"break-word",height:"fit-content",maxHeight:"calc(".concat(i.i," - 8em)"),position:"absolute",children:n})}},45478:function(e,t,n){n.d(t,{H8:function(){return c},Nq:function(){return u},gq:function(){return d},z3:function(){return l}});var r=n(84636),o=n.n(r);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(3440);var c=function(e,t){var n,r=i(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===t)return t;var a,c=o.replies||[],s=i(c);try{for(s.s();!(a=s.n()).done;)if(a.value.id===t)return o.id}catch(e){s.e(e)}finally{s.f()}}}catch(e){r.e(e)}finally{r.f()}return null},s=function(e){var t=e.reactions,n=e.emoji,r=e.user,o=t.find(function(e){return e.emoji===n});return o&&o.reactions.find(function(e){var t;return e.emoji===n&&(null===(t=e.users)||void 0===t?void 0:t.find(function(e){return e.id===(null==r?void 0:r.id)}))})||null},l=function(e){return!!s({reactions:e.reactions,emoji:e.emoji,user:e.user})},u=function(e){var t=e.reactions,n=e.emoji,r=t.find(function(e){return e.emoji===n});return r&&r.reactions.find(function(e){return e.emoji===n})||null},d=function(e){return o()(e.reactions.flatMap(function(e){return e.users}),"id")}},6563:function(e,t,n){n.d(t,{q:function(){return eU}});var r=n(95235),o=n(81333),i=n(82269),a=n(157),c=n(2321),s=n(55452),l=n(87254),u=n(55479),d=n(91012),f=n(84103),p=n(34638),m=n(11919),h=n(71354),g=n(53738),v=n(49747),b=n(8283),y=n(12221),x=n(49929),j=n(2784),w=n(43997),O=n(23313),k=n(30341),C=n(44499),P=n(2875),S=n(50350),A=n(41261),E=n(6057),D=n(34264),I=n(62141),z=n(95472),T=n(61701),M=n(29677),N=n(9734),R=n(51823),L=n(26087),_=n(10221),H=n(49306),Z=n(67887),B=n(85982),F=n(55966),W=n(10710),U=n(31912),G=n(23015);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=function(e){var t=e.docId,n=e.cardId,i=e.commentId,a=e.parentCommentId,c=e.targetType,s=(0,O.Os4)(),l=(0,o.Z)(s,1)[0],u=(0,O.d6Z)(),d=(0,o.Z)(u,1)[0];function f(e,o,s,l){var u={targetId:c===O.Lmy.Comment?i:n,docId:t,emoji:o,cardId:n};if("addReaction"===e&&(u=V(V({},u),{},{targetType:c})),c===O.Lmy.Comment)return{variables:{reactionInput:u},update:function(n,r){var o=r.data;n.writeFragment({id:"Doc:".concat(t),fragment:O.f,fragmentName:"DocCommentsUpdate",data:{comments:[a?{id:a,replies:[{id:i,reactions:[o[e]],__typename:"Comment"}],reactions:[],__typename:"Comment"}:{id:i,replies:[],reactions:[o[e]],__typename:"Comment"}]}})},optimisticResponse:(0,r.Z)({},e,{commentId:i,count:s,emoji:o,users:l,cardId:n,__typename:"Reaction"})};console.error("[useReactionUpdate] Invalid targetType: ".concat(c))}return{addReactionFn:function(e,t,n){l(f("addReaction",e,t,n))},removeReactionFn:function(e,t,n){d(f("removeReaction",e,t,n))}}},K=n(14565),Y=n(74637),X=n(94301),J=n(1472),Q=n(75944),ee=n(35741),et=n(639),en=n(52322),er=["setPopperElement","onPopoverClose","handleReactionClick","popperElement","openerElement","usePortal","isMobile","placement"];function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ea=function(e){var t=e.setPopperElement,n=e.onPopoverClose,r=e.handleReactionClick,o=e.popperElement,a=e.openerElement,c=e.usePortal,s=e.isMobile,l=(e.placement,(0,i.Z)(e,er));(0,Y.O)({ref:{current:o},handler:function(e){a&&function e(t,n){return t===n||null!=t.parentElement&&e(t.parentElement,n)}(e.target,a)||n()}});var u=(0,en.jsx)(g.xu,ei(ei({mx:s?0:3,mt:s?0:"-110px",shadow:"lg",bg:"white",p:"0",w:"auto",minW:"0px",zIndex:"tooltip","data-target-name":"reaction-emoji-picker",ref:t},l),{},{children:(0,en.jsx)(et.h5,{perLine:s?9:12,handlePick:function(e){r(e.id),n()},shouldFocusSearch:!(0,N.s2)()})}));return c?(0,en.jsx)(X.h,{children:u}):u},ec=function(e){var t=e.size,n=e.colorScheme,r=e.handleReactionClick,i=e.placement,a=e.usePortal,c=(0,J.a)(["(max-width: 840px)","(min-width: 841px)"]),u=(0,o.Z)(c,1)[0],d=(0,Q.q)(),f=d.isOpen,p=d.onToggle,m=d.onClose,h=(0,j.useState)(!1),v=h[0],b=h[1],y=(0,j.useState)(null),w=y[0],O=y[1],k=(0,j.useState)(null),C=k[0],P=k[1],S=(0,ee.D)(w,C,{placement:u?"auto":"".concat(i,"-start"),strategy:"fixed"}),A=S.styles,E=S.attributes,D=S.forceUpdate;return(0,j.useEffect)(function(){D&&setTimeout(function(){D()},0)},[D]),(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(F.kH,{placement:ep,label:(0,en.jsx)(s.cC,{id:"9OEgyT"}),isOpen:v,children:(0,en.jsx)(g.xu,{display:"flex",onMouseEnter:function(){b(!0)},onMouseLeave:function(){return b(!1)},children:(0,en.jsx)(Z.h,{colorScheme:n,float:"inline-start","aria-label":l.ag._({id:"9OEgyT"}),variant:"ghost",onClick:function(e){p(),e.stopPropagation()},size:t||"sm",ref:O,isRound:!0,icon:(0,en.jsx)(x.G,{icon:K.wq})})})}),f&&(0,en.jsx)(ea,ei({usePortal:void 0===a||a,setPopperElement:P,onPopoverClose:m,handleReactionClick:r,popperElement:C,isPopoverOpen:f,openerElement:w,style:A.popper,isMobile:u,placement:i},E.popper))]})},es=n(45650),el=function(e){var t=e.colorScheme,n=e.size,r=e.emoji,o=e.label,i=e.count,a=e.hasSelfReacted,c=e.handleReactionClick,l=e.readOnly,u="light"===(0,p.If)().colorMode,f=(0,j.useCallback)(function(e){l||c(r,e)},[r,c,l]);return(0,en.jsx)(F.kH,{placement:ep,label:(0,en.jsxs)(g.xu,{alignContent:"center",children:[o,!l&&(0,en.jsx)(d.x,{display:"block",color:u?"gray.500":"gray.700",children:a?(0,en.jsx)(s.cC,{id:"fb/FjL"}):(0,en.jsx)(s.cC,{id:"AG3H1y"})})]}),children:(0,en.jsxs)(es.z,{cursor:l?"default":"cursor","data-testid":"reaction-button-".concat(r),size:n||"sm",color:u?"gray.500":"gray.300",bg:a?u?"gray.100":"gray.700":"none",borderWidth:"1px",borderStyle:"solid",colorScheme:t,borderColor:a?u?"gray.200":"gray.500":"transparent",_hover:{bg:u?"gray.200":"gray.600"},variant:"ghost",borderRadius:"full",px:2,onClick:f,children:[(0,en.jsx)(et.Sr,{emojiId:r,fontSize:"sm"===n?"lg":"sm"}),(0,en.jsx)(d.x,{as:"span",fontSize:n,ml:1.5,children:i})]})})},eu=["size","colorScheme","placement","usePortal","reactions","docId","cardId","commentId","parentCommentId","targetType","readOnly","innerPaddingY"];function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ep="bottom",em=function(e){var t=e.size,n=e.colorScheme,r=void 0===n?void 0:n,a=e.placement,c=e.usePortal,l=e.reactions,u=e.docId,f=e.cardId,p=e.commentId,h=e.parentCommentId,g=e.targetType,v=e.readOnly,b=e.innerPaddingY,y=(0,i.Z)(e,eu),j=$({docId:u,commentId:p,parentCommentId:h,cardId:f,targetType:g}),w=j.addReactionFn,k=j.removeReactionFn,C=(0,W.SE)().user,P=(null==l?void 0:l.reduce(function(e,t){return t.count&&(e[t.emoji]=t),e},{}))||{},S=!v&&g===O.Lmy.Card&&!P.heart,A=Object.keys(P).length>0,E=function(e,t){if(!(g===O.Lmy.Comment&&p||g===O.Lmy.Card&&f))throw Error("[Reactions.handleReactionClick] Invalid targetType. Args: targetType: ".concat(g,", commentId: ").concat(p,", cardId: ").concat(f));if(null===(n=P[e])||void 0===n?void 0:null===(r=n.users.find(function(e){return e.id===(null==C?void 0:C.id)}))||void 0===r?void 0:r.id){var n,r,o,i,a=(null==P?void 0:null===(o=P[e])||void 0===o?void 0:o.count)-1,c=null!=P&&null!==(i=P[e])&&void 0!==i&&i.users?P[e].users.filter(function(e){return e.id!==(null==C?void 0:C.id)}):[];k(e,a,c)}else{var s,l,u=null!=P&&null!==(s=P[e])&&void 0!==s&&s.count?P[e].count+1:1,d=null!=P&&null!==(l=P[e])&&void 0!==l&&l.users?P[e].users.concat(C):[C];w(e,u,d)}null==t||t.stopPropagation()};return(0,en.jsxs)(m.k,ef(ef({direction:"row",cursor:"default",contentEditable:!1,onMouseDown:G.br,mb:b?"-".concat(b/1.5,"rem"):void 0},y),{},{children:[S&&(0,en.jsx)(F.kH,{label:(0,en.jsx)(s.cC,{id:"W9FRBT"}),placement:ep,children:(0,en.jsx)(Z.h,{colorScheme:r,float:"inline-start","aria-label":"",variant:"ghost",onClick:function(e){E("heart",e)},size:t,isRound:!0,mr:2,icon:(0,en.jsx)(x.G,{icon:H.m6})})}),!v&&(0,en.jsx)(ec,{size:t,colorScheme:r,handleReactionClick:E,usePortal:c,placement:void 0===a?"right":a}),A&&(0,en.jsx)(B.E,{spacing:"sm"===t?2:1,mr:2,className:"reactions-row",children:A&&Object.entries(P).map(function(e){var n=(0,o.Z)(e,2),i=n[0],a=n[1],c=null==a?void 0:a.users,l=!!(null==c?void 0:c.find(function(e){return(null==e?void 0:e.id)===(null==C?void 0:C.id)})),u=(0,U.Rf)({users:c,selfUserId:null==C?void 0:C.id});return(0,en.jsx)(el,{colorScheme:r,size:t,emoji:i,readOnly:v,label:(0,en.jsx)(en.Fragment,{children:(0,en.jsx)(s.cC,{id:"mRnNF/",values:{usersLabel:u,emoji:i},components:{0:(0,en.jsx)(d.x,{as:"span",color:"gray.300"})}})}),count:null==c?void 0:c.length,hasSelfReacted:l,handleReactionClick:E},i)})})]}))},eh=["docId","reactions","cardId","commentId","size","parentCommentId","placement","usePortal","userCanComment"];function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ev=j.memo(function(e){var t=e.docId,n=e.reactions,o=e.cardId,a=e.commentId,c=e.size,s=e.parentCommentId,l=e.placement,u=e.usePortal,d=e.userCanComment,f=(0,i.Z)(e,eh);return(0,en.jsx)(em,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({size:c,cardId:o,usePortal:void 0===u||u,placement:void 0===l?"right":l,reactions:n,parentCommentId:s,docId:t,commentId:a,targetType:O.Lmy.Comment,readOnly:!d},f))}),eb=n(72674),ey=n(36471),ex=n(65897),ej=n(61751),ew=n(94370),eO=n(18638),ek=n(13795),eC=n(49294),eP=n(93319),eS=n(9088),eA=n(30893),eE=n(40771),eD=n(82904),eI=n(95258),ez=n(65903),eT=n.n(ez),eM=n(81188),eN=n(32860),eR=n(19593),eL=function(){var e;return e={},(0,r.Z)(e,O.Ux9.Open,{label:l.ag._({id:"9ggh96"}),icon:eR.f8,successMessage:l.ag._({id:"1INZuT"})}),(0,r.Z)(e,O.Ux9.Closed,{label:l.ag._({id:"pL38RI"}),icon:eN._1,successMessage:l.ag._({id:"gieGvY"})}),e},e_=function(e){var t=e.status,n=e.handleCommentStatusUpdate;return(0,en.jsx)(F.kH,{label:eL()[t].label,"aria-label":eL()[t].label,children:(0,en.jsx)(Z.h,{variant:"ghost",size:"sm",borderRadius:"full",isDisabled:!1,"aria-label":eL()[t].label,icon:(0,en.jsx)(x.G,{icon:eL()[t].icon}),onClick:function(){return n(t)}})})},eH=function(e){var t=e.comment,n=e.selfUser,r=e.isInPanel,o=e.isSourceContentAvailable,i=e.showCopyCommentLink,a=e.showLinkToTargetContent,c=e.hasCommentBeenUpdated,f=e.onTargetClick,v=e.commentUrl,j=e.isReply,w=e.userCanComment,k=e.handleCommentStatusUpdate,C=e.toastPosition,P=e.isEditing,S=e.handleEditCommentClick,A=e.handleDeleteCommentClick,E=t.user,D=t.createdTime,I=t.updatedTime,z=t.status,T=void 0===z?O.Ux9.Open:z,M=E.email,N=E.displayName,R=E.profileImageUrl,L=(null==n?void 0:n.id)===(null==E?void 0:E.id),_=(0,eC.V)(v).onCopy,H=(0,p.ff)("red.500","red.300"),B=(0,u.p)();return(0,en.jsxs)(b.U,{spacing:2,align:"top",mb:3,_before:r?{content:"''",position:"absolute",w:"9px",h:"9px",mt:"15px",left:j?"12px":"36px",bg:"gray.100",borderRadius:"full"}:{},children:[(0,en.jsx)(F.kH,{label:M,"aria-label":M,children:(0,en.jsx)(y.q,{mt:1,size:"sm",name:N,src:R,ignoreFallback:!0})}),(0,en.jsxs)(h.K,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:[(0,en.jsxs)(d.x,{fontWeight:"600",mb:0,fontSize:"sm",children:[N," ",L?(0,en.jsx)(s.cC,{id:"dDUgzP"}):null]}),(0,en.jsx)(m.k,{direction:"row",w:"100%",alignItems:"flex-start",children:(0,en.jsx)(g.xu,{flex:"1",children:(0,en.jsx)(F.kH,{isDisabled:!c,label:"Updated ".concat((0,eM.P9)(I)),placement:"top",children:(0,en.jsxs)(b.U,{children:[(0,en.jsx)(d.x,{my:"0 !important",className:"comment-date",fontSize:"xs",color:"gray.500",children:eT()((0,eM.P9)(D))}),c&&(0,en.jsx)(g.xu,{color:"gray.500",children:(0,en.jsx)(x.G,{size:"xs",icon:ek.HM})})]})})})})]}),(0,en.jsx)(eP.L,{}),(0,en.jsxs)(b.U,{spacing:1,children:[a&&(0,en.jsx)(F.kH,{label:o?(0,en.jsx)(s.cC,{id:"LmLruJ"}):(0,en.jsx)(s.cC,{id:"/oHV5h"}),shouldWrapChildren:!0,children:(0,en.jsx)(Z.h,{size:"sm",borderRadius:"full",variant:"ghost",isDisabled:!o,"aria-label":o?l.ag._({id:"LmLruJ"}):l.ag._({id:"/oHV5h"}),onClick:f,icon:(0,en.jsx)(x.G,{icon:eO.FR})})}),!j&&w&&(0,en.jsx)(e_,{status:T,handleCommentStatusUpdate:function(){return k(t.status)}}),(0,en.jsxs)(eS.v,{isLazy:!0,children:[(0,en.jsx)(eA.j,{as:Z.h,size:"sm",variant:"ghost",borderRadius:"full","data-testid":"comment-header-menu",icon:(0,en.jsx)(x.G,{fixedWidth:!0,icon:ew.cN}),children:(0,en.jsx)(s.cC,{id:"7L01XJ"})}),(0,en.jsx)(X.h,{children:(0,en.jsxs)(eE.q,{zIndex:"popover","data-testid":"comment-header-menulist",children:[i&&(0,en.jsx)(eD.s,{icon:(0,en.jsx)(x.G,{icon:ej.nN}),onClick:function(){_(),B({title:l.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:C})},children:(0,en.jsx)(s.cC,{id:"qhJCCi"})}),w&&!P&&L&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eI.R,{}),(0,en.jsx)(eD.s,{icon:(0,en.jsx)(x.G,{icon:ex.Xc}),onClick:S,children:(0,en.jsx)(s.cC,{id:"ePK91l"})}),(0,en.jsx)(eD.s,{icon:(0,en.jsx)(x.G,{icon:ey.$}),color:H,onClick:function(){A()},"data-testid":"delete-thread",children:j?(0,en.jsx)(s.cC,{id:"FjzXBu"}):(0,en.jsx)(s.cC,{id:"xOviNB"})})]})]})})]})]})]})},eZ=n(21082),eB=["comment","editor","selfUser","docId","commentIdToHighlight","userCanComment","instanceType","editorMode","isRootComment","onClose","closePopup"];function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eU=(0,j.memo)(function(e){var t=e.comment,n=e.editor,r=e.selfUser,H=e.docId,Z=e.commentIdToHighlight,B=e.userCanComment,F=e.instanceType,W=e.editorMode,U=e.isRootComment,G=void 0!==U&&U,q=e.onClose,V=e.closePopup,$=(0,i.Z)(e,eB),K="feed"===F,Y="drawer"===F,X=(0,N.s2)()?"bottom":"top",J=t.content,Q=t.targetHtml,ee=t.targetId,et=t.createdTime,er=t.updatedTime,eo=t.id,ei=t.replies,ea=t.reactions,ec=(0,w.I0)(),es=(0,eb.nG)(eo),el=es.initialDraftReply,eu=es.updateLocalDraftReply,ed=es.hasLocalDraftReply,ef=(0,j.useRef)(new M.B),ep=Z===eo,em=(0,R.W2)({docId:H,id:eo}),eh=(0,j.useRef)(null),eg=(0,j.useState)(!1),ey=eg[0],ex=eg[1],ej=(0,j.useState)(G),ew=ej[0],eO=ej[1];(0,j.useEffect)(function(){ed&&!ew&&eO(!0)},[ed,ew]);var ek=(0,O.sHn)(),eC=(0,o.Z)(ek,1)[0],eP=(0,O.oRU)(),eS=(0,o.Z)(eP,1)[0],eA=(0,O.qHm)(),eE=(0,o.Z)(eA,1)[0],eD=(0,O.n70)(),eI=(0,o.Z)(eD,1)[0],ez=(0,u.p)(),eT=(0,k.As)("editor"),eM=(0,j.useCallback)(function(){ex(!0)},[]),eN=(0,j.useCallback)(function(){eu(null)},[eu]),eR=[.25,.1,.25,1];(0,j.useLayoutEffect)(function(){ep&&eh.current&&eT.scrollElementIntoView({element:eh.current})},[eT,ep]);var e_=(0,p.ff)("yellow.100","yellow.800"),eF=_.Z.getState(n.state),eG=(0,j.useMemo)(function(){return null==eF?void 0:eF.annotations.find(function(e){return e.id===ee})},[null==eF?void 0:eF.annotations,ee]),eq=(eG||{}).pos,eV=!!(null==eG?void 0:eG.pos),e$="notification"!==F&&t.id!==S.Gt,eK=("notification"===F||"feed"===F)&&eq!==S.Et,eY=(0,j.useCallback)(function(e){var t;if(!(!ee||!eG||!eq||null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest('[data-target-name="comment-target-expand-button"]'))){if("notification"===F)P.pw.emit(P.TI.OPEN_POPUP_COMMENT,{commentId:eo,highlightComment:!0});else if("feed"===F){var r=E.nY,i=(0,z.Sh)(n,eq);if(W===L.q.DOC_VIEW)(0,A.pE)({pos:eq,editor:n});else if(W===L.q.SLIDE_VIEW){var a=(0,z.nv)(n.state.doc.resolve(eq),D.KH),c=(0,o.Z)(a,1)[0];n.commands.spotlightCardById(c.node.attrs.id),ec((0,I.Qx)({attached:!1})),r=E.id}(0,N.s2)()&&q&&setTimeout(q,300),eT.scrollElementIntoView({element:i,delay:r})}}},[n,eT,ee,F,eo,eG,eq,W,ec,q]),eX=(0,j.useMemo)(function(){return new Date(er).getTime()-new Date(et).getTime()>100},[er,et]),eJ=!!t.commentId,eQ=!!ei&&ei.length>0;return(0,en.jsxs)(m.k,eW(eW({flexDir:"column",ref:eh,id:"comment-".concat(eo),className:"comment highlight-mask","data-target-id":"comment-".concat(eo),borderRadius:ep?"md":"0px",position:"relative",borderBottomWidth:G?"1px":"0px",borderBottomColor:"gray.200",_after:K&&eQ?{content:"''",position:"absolute",w:"9px",h:"9px",left:"36px",bottom:9,bg:"gray.100",borderRadius:"full",transitionPropery:"common",transitionDuration:"normal"}:{},_before:eQ&&K?{content:"''",position:"absolute",w:"3px",top:7,bottom:9,left:"39px",bg:"gray.100",borderRadius:"full"}:{}},$),{},{overflowY:"hidden",children:[(0,en.jsxs)(h.K,{backgroundColor:ep?e_:"auto",transitionProperty:"border, background",transitionDuration:"normal",transitionTimingFunction:"ease",role:"group",spacing:8,children:[(0,en.jsxs)(g.xu,{pl:eJ&&K?10:0,children:[(0,en.jsx)(eH,{isInPanel:K,comment:t,selfUser:r,isSourceContentAvailable:eV,showCopyCommentLink:e$,showLinkToTargetContent:eK,hasCommentBeenUpdated:eX,onTargetClick:eY,commentUrl:em,isReply:eJ,userCanComment:B,handleCommentStatusUpdate:function e(t){var n=t===O.Ux9.Open?O.Ux9.Closed:O.Ux9.Open,r={id:eo,docId:H,status:n};eE({variables:{input:r},update:function(e,t){var n=t.data,r={id:"Doc:".concat(H),fragment:T.Hn,fragmentName:"DocCommentsUpdate",data:{comments:[null==n?void 0:n.updateCommentStatus]}};e.writeFragment(r)},optimisticResponse:{updateCommentStatus:eW(eW({},r),{},{__typename:"Comment",updatedTime:new Date().toISOString()})}}).then(function(){ez({title:(0,en.jsxs)(d.x,{children:[eL()[t].successMessage,"."," ",(0,en.jsx)(f.r,{textDecoration:"underline",onClick:function(){return e(n)},children:l.ag._({id:"9uI/rE"})})]}),status:"success",duration:5e3,isClosable:!1,position:X})}).catch(function(e){console.error("[CommentComponent]: Error changing comment status",e),ez({title:l.ag._({id:"+Q5eww",values:{0:e.message}}),status:"error",isClosable:!0,position:X})}).finally(function(){"popup"===F&&V&&V(!0)})},toastPosition:X,isEditing:ey,handleEditCommentClick:eM,handleDeleteCommentClick:function(){var e=!!t.commentId;eI({variables:{id:eo},update:function(n,r){var o=r.data;n.writeFragment({id:"Doc:".concat(H),fragment:T.Hn,fragmentName:e?"DocRepliesRemove":"DocCommentsRemove",data:{comments:[e?{id:t.commentId,replies:[null==o?void 0:o.archiveComment],__typename:"Comment"}:null==o?void 0:o.archiveComment]}})},optimisticResponse:{archiveComment:{id:eo,__typename:"Comment",archived:!0}}}),!e&&t.targetId&&n.commands.deleteAnnotation(t.targetId),"popup"===F&&V&&V(!0),ez({title:l.ag._({id:"Ho/Jvc"}),status:"success",duration:5e3,isClosable:!1,position:X})}}),(0,en.jsxs)(g.xu,{pl:eQ&&K?10:0,overflowY:"hidden",children:[Q&&Q.length&&(0,en.jsx)(eZ.p,{targetHtml:Q,onTargetClick:eY,isSourceContentAvailable:eV,instanceType:F}),(0,en.jsx)(C.S,{initialContent:J,editable:ey,onCancelEditingClick:function(){return ex(!1)},saveButtonText:(0,en.jsx)(s.cC,{id:"yY7Bil"}),saveButtonIcon:(0,en.jsx)(x.G,{icon:c.LE}),onCommentSave:function(e){var n=!!t.commentId,r={id:eo,docId:H,content:e};eS({variables:{input:r},update:function(e,r){var o=r.data,i={id:"Doc:".concat(H),fragment:T.Hn,fragmentName:n?"DocRepliesUpdate":"DocCommentsUpdate",data:{comments:[n?{id:t.commentId,replies:[null==o?void 0:o.updateComment],__typename:"Comment"}:null==o?void 0:o.updateComment]}};e.writeFragment(i)},optimisticResponse:{updateComment:eW(eW({},r),{},{__typename:"Comment",updatedTime:new Date().toISOString()})}}),ez({title:l.ag._({id:"kibWwZ"}),status:"success",duration:5e3,isClosable:!1,position:X}),ex(!1)}}),!ey&&(0,en.jsx)(ev,{mt:2,docId:H,cardId:t.cardId,commentId:t.id,parentCommentId:t.commentId,reactions:ea,size:"sm",placement:"right",usePortal:!0,userCanComment:B})]})]}),ei&&ei.length>0&&ei.map(function(e){return(0,en.jsx)(eU,{instanceType:F,userCanComment:B,commentIdToHighlight:Z,comment:e,docId:H,selfUser:r,editor:n,editorMode:W,pl:0,p:0,pb:0},null==e?void 0:e.id)})]}),B&&(0,en.jsxs)(v.U,{in:ew&&!ey,unmountOnExit:!0,transition:{enter:{when:"afterChildren",height:{duration:.3,ease:eR},opacity:{duration:.4,ease:eR}},exit:{when:"beforeChildren",height:{duration:.2,ease:eR},opacity:{duration:.3,ease:eR}}},children:[Y&&(0,en.jsxs)(b.U,{align:"center",mb:3,pt:6,children:[(0,en.jsx)(y.q,{mt:1,size:"sm",name:null==r?void 0:r.displayName,src:null==r?void 0:r.profileImageUrl,ignoreFallback:!0}),(0,en.jsx)(h.K,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:(0,en.jsx)(d.x,{fontWeight:"600",mb:0,fontSize:"sm",children:(0,en.jsx)(s.cC,{id:"866PMb",values:{0:null==r?void 0:r.displayName}})})})]}),(0,en.jsx)(C.S,{pl:K&&eQ?8:0,pt:Y?0:6,initialContent:(null==el?void 0:el.json)||"",clearContentOnSave:!0,editable:!0,saveButtonText:(0,en.jsx)(s.cC,{id:"ImOQa9"}),saveButtonIcon:(0,en.jsx)(x.G,{icon:a.Lh}),placeholder:l.ag._({id:"ImOQa9"}),onCommentSave:function(e){var n={targetId:t.targetId,commentId:eo,docId:H,content:e,cardId:t.cardId};eC({variables:{input:n},update:function(e,t){var n=t.data;e.writeFragment({id:"Doc:".concat(H),fragment:T.Hn,fragmentName:"DocRepliesCreate",data:{comments:[{id:eo,replies:[null==n?void 0:n.createComment],__typename:"Comment"}]}})},optimisticResponse:{createComment:eW(eW({id:S.Gt,__typename:"Comment"},n),{},{user:r,archived:!1,reactions:[],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()})}}),eO(!1),eu(null),ec((0,I.pS)({id:eo})),ez({title:l.ag._({id:"yPok8v"}),status:"success",duration:5e3,isClosable:!1,position:X})},onCancelEditingClick:eN,onUpdate:function(e){var t=e.editor;eu({commentId:eo,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent})},onCreate:function(e){ef.current.resolve(e)},alwaysShowButtons:Y,shouldFocus:"popup"===F||"drawer"===F})]})]}))})},11826:function(e,t,n){n.d(t,{I:function(){return a}});var r=n(40110),o=n(43602),i=n(52322),a=function(e){var t=e.accessLink,n=e.doc,a=e.className,c=e.showDivider;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A2,{accessLink:t,doc:n,p:6,spacing:4,className:a}),(void 0===c||c)&&(0,i.jsx)(r.i,{})]})}},21082:function(e,t,n){n.d(t,{p:function(){return v}});var r=n(2226),o=n(1840),i=n(55452),a=n(87254),c=n(11919),s=n(53738),l=n(67887),u=n(49929),d=n(55966),f=n(14304),p=n.n(f),m=n(2784),h=n(52879),g=n(52322),v=function(e){var t=e.targetHtml,n=e.onTargetClick,f=e.isSourceContentAvailable,v=e.instanceType,b=(0,m.useState)(!1),y=b[0],x=b[1],j=(0,m.useState)(!1),w=j[0],O=j[1],k=(0,m.useRef)(null),C=(0,h.jj)(),P=y?void 0:3,S=y?o._q:r.yh,A=y?a.ag._({id:"vLyv1R"}):a.ag._({id:"fMPkxb"});return(0,m.useEffect)(function(){if(k.current){var e;O(!(!y&&k.current.scrollHeight<=(null===(e=k.current)||void 0===e?void 0:e.clientHeight)))}},[y]),(0,g.jsxs)(c.k,{className:"block-target-html",pl:3,mb:2,borderLeftWidth:"4px",borderLeftStyle:"solid",borderLeftColor:"yellow.200",direction:"row",alignItems:"flex-end",cursor:f&&"feed"===v?"pointer":"auto",onClick:n,children:[(0,g.jsx)(d.kH,{label:(0,g.jsx)(i.cC,{id:"/oHV5h"}),isDisabled:!("feed"===v&&!f),portalProps:{containerRef:C},children:(0,g.jsx)(s.xu,{flex:1,ml:-3,pl:3,w:"100%",fontSize:"sm",noOfLines:P,dangerouslySetInnerHTML:{__html:t?p().sanitize(t):""},ref:k,_hover:{bgColor:"feed"===v?f?"yellow.100":"gray.100":void 0}})}),w&&(0,g.jsx)(d.kH,{label:A,portalProps:{containerRef:C},children:(0,g.jsx)(l.h,{variant:"ghost",size:"xs","aria-label":A,icon:(0,g.jsx)(u.G,{icon:S}),onClick:function(){x(function(e){return!e})},"data-target-name":"comment-target-expand-button",isRound:!0})})]})}},94730:function(e,t,n){n.d(t,{A:function(){return y}});var r=n(95235),o=n(82269),i=n(55452),a=n(87254),c=n(11919),s=n(8283),l=n(12221),u=n(71354),d=n(91012),f=n(44499),p=n(9734),m=n(21082),h=n(52322),g=["draftComment","showUser","showBorder","user","onCommentDraftUpdate","onCommentSave","commentIdToHighlight","alwaysShowButtons"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=e.draftComment,n=e.showUser,r=e.showBorder,v=e.user,y=e.onCommentDraftUpdate,x=e.onCommentSave,j=e.commentIdToHighlight,w=e.alwaysShowButtons,O=(0,o.Z)(e,g);return(0,h.jsxs)(c.k,b(b({direction:"column"},O),{},{children:[(void 0===n||n)&&(0,h.jsxs)(s.U,{mb:3,pt:3,children:[(0,h.jsx)(l.q,{src:null==v?void 0:v.profileImageUrl,size:"sm"}),(0,h.jsx)(u.K,{children:(0,h.jsx)(d.x,{fontWeight:"bold",fontSize:"sm",children:(0,h.jsx)(i.cC,{id:"866PMb",values:{0:null==v?void 0:v.displayName}})})})]}),t&&(null==t?void 0:t.targetHtml)&&(0,h.jsx)(m.p,{targetHtml:t.targetHtml}),(0,h.jsx)(f.S,{onUpdate:y,initialContent:(null==t?void 0:t.json)||null,clearContentOnSave:!0,editable:!0,saveButtonText:(0,h.jsx)(i.cC,{id:"26iNma"}),placeholder:a.ag._({id:"UkDQUD"}),onCommentSave:x,showBorder:void 0===r||r,shouldFocus:!!(!(0,p.f_)()&&!j),alwaysShowButtons:void 0!==w&&w})]}))}},56808:function(e,t,n){n.d(t,{W1:function(){return d},kr:function(){return u},xN:function(){return l}});var r=n(95235),o=n(39428),i=n(86773),a=n(52527);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=function(e,t,n){return{targetId:i.v.generate(),targetHtml:n,json:null,text:"",relativePos:(0,o.jS)(t.state,e())}},u=function(e,t,n,r){return s(s({},e),{},{targetHtml:n,relativePos:(0,o.jS)(r.state,t())})},d=function(e,t){return Object.values(a.N.getState(e.state).draftComments).filter(function(n){return(0,o.XV)(e.state,n.relativePos)===t})}},72674:function(e,t,n){n.d(t,{Zz:function(){return Z},c0:function(){return L},iZ:function(){return R},m0:function(){return _},nG:function(){return H},vY:function(){return N},xA:function(){return M}});var r=n(95235),o=n(81333),i=n(829),a=n.n(i),c=n(3440),s=n.n(c),l=n(87254),u=n(55479),d=n(72338),f=n(35838),p=n.n(f),m=n(18149),h=n.n(m),g=n(2784),v=n(43997),b=n(23313),y=n(46358),x=n(2875),j=n(62141),w=n(18408),O=n(12691),k=n(39428),C=n(10710),P=n(61701),S=n(9734),A=n(45478);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=(0,S.s2)()?"bottom":"top";function z(e){return e?e.reduce(function(e,t){return t.targetId&&(e[t.targetId]?e[t.targetId].push(t):e[t.targetId]=[t]),e},{}):null}var T=function(e){return e.filter(function(e){return!!e.spec.isAnnotation})},M=function(e){return(0,y.CG)(function(t){var n=(0,j.yx)(t),r=z(((null==n?void 0:n.comments)||[]).filter(function(e){return e.status===b.Ux9.Open}));if(!r)return[];var o=T(e);return p()(o,function(e){return r[e.spec.id]}).filter(Boolean)},h())},N=function(e){return e.filter(function(e){return!!e.spec.isDraftComment}).map(function(e){return e.spec.comment})},R=function(e){var t=e.draftComment,n=e.clearDraftComment,r=e.editor,i=(0,b.sHn)(),a=(0,o.Z)(i,1)[0],c=(0,u.p)(),s=r.gammaDocId,f=(0,C.SE)().user;return function(e){if(t){var o,i=t.relativePos,u=t.targetId,p=(0,k.XV)(r.state,i);if(!p)throw Error("Could not save comment, null pos from relativePos");var m=(0,d.qv)(r.state.doc.resolve(p),O.KH),h=r.view.state.doc.nodeAt(p),g=t.targetHtml||(0,w.ho)(h,["footnote","footnoteLabel"]),v=t.targetHtml||(0,w.iJ)(h,["footnote","footnoteLabel"]);r.commands.addAnnotation({id:u,pos:p});var y={targetId:u,docId:s,cardId:null==m?void 0:null===(o=m.node)||void 0===o?void 0:o.attrs.id,content:e,targetHtml:g,targetText:v};a({variables:{input:y},update:function(e,t){var n=t.data;e.writeFragment({id:"Doc:".concat(s),fragment:P.Hn,fragmentName:"DocCommentsCreate",data:{comments:[null==n?void 0:n.createComment]}})},optimisticResponse:{createComment:D(D({id:"temp-id",commentId:"",__typename:"Comment"},y),{},{content:JSON.parse(JSON.stringify(e)),user:f,archived:!1,reactions:[],replies:[],status:b.Ux9.Open,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()})}}),c({title:l.ag._({id:"4kSebh"}),status:"success",duration:5e3,isClosable:!1,position:I}),n()}}},L=function(e,t){(0,g.useEffect)(function(){var n=!0,r=function(r){var o=r.selectionPos,i=r.parentPos,a=r.text;n&&e()===i&&t({targetHtml:a,getPos:function(){return o}})};return x.pw.on(x.TI.CREATE_COMMENT_FROM_SELECTION,r),function(){x.pw.on(x.TI.CREATE_COMMENT_FROM_SELECTION,r),n=!1}},[e,t])},_=function(e){var t=e.showComment,n=e.comments,r=e.blockAllowsCommenting,o=e.highlightDuration,i=void 0===o?4e3:o,a=(0,g.useState)(null),c=a[0],s=a[1];return(0,g.useEffect)(function(){var e=!0,o=function(o){var a=o.commentId,c=o.highlightComment;if(e&&r){var l=(0,A.H8)(n,a);if(!l)return;t(l),void 0!==c&&c&&(s(a),setTimeout(function(){e&&s(null)},i))}};return x.pw.on(x.TI.OPEN_POPUP_COMMENT,o),function(){x.pw.off(x.TI.OPEN_POPUP_COMMENT,o),e=!1}},[n,r,i,t]),c},H=function(e){var t=(0,v.I0)(),n=(0,y.CG)((0,j.Mk)(e)),r=(0,g.useRef)(null),o=(0,g.useState)(!1),i=o[0],a=o[1],c=(0,g.useCallback)(function(e){r.current=e,a(!!e)},[]),s=(0,g.useCallback)(function(){r.current=n,a(!!n)},[n]),l=(0,g.useCallback)(function(){var n;if(!r.current||!(null!==(n=r.current.text)&&void 0!==n&&n.length)){t((0,j.pS)({id:e}));return}t((0,j.qt)({id:e,reply:r.current}))},[e,t]),u=(0,g.useRef)(l);return(0,g.useEffect)(function(){u.current=l},[l]),(0,g.useEffect)(function(){return s(),function(){u.current()}},[]),{hasLocalDraftReply:i,initialDraftReply:r.current,updateLocalDraftReply:c}},Z=function(e){return(0,y.CG)(function(t){var n=(0,j.yx)(t),r=z((null==n?void 0:n.reactions)||[]);if(!r)return[];for(var i=T(e),c=p()(i,function(e){return r[e.spec.id]}).filter(Boolean),l=s()(c,"emoji"),u=[],d=0,f=Object.entries(l);d<f.length;d++){var m=(0,o.Z)(f[d],2),h=m[0],g=m[1],v=g.reduce(function(e,t){return e+t.count},0);u.push({emoji:h,count:v,reactions:g})}return a()(u.filter(function(e){return e.count>0}),"count").reverse()},h())}},50350:function(e,t,n){n.d(t,{Et:function(){return o},Gt:function(){return i},bk:function(){return r},yK:function(){return a}});var r="350px",o=1,i="temp-id",a=128},80318:function(e,t,n){n.d(t,{lO:function(){return r.l},q5:function(){return o.q},IZ:function(){return i.I},Ag:function(){return a.A},xN:function(){return c.xN},W1:function(){return c.W1},iZ:function(){return s.iZ}});var r=n(31246),o=n(6563),i=n(11826),a=n(94730),c=n(56808),s=n(72674)},39875:function(e,t,n){n.d(t,{Mw:function(){return y},R1:function(){return d},ZM:function(){return u},bg:function(){return p},ei:function(){return b},f$:function(){return f},lG:function(){return m},lM:function(){return g},mS:function(){return h},nf:function(){return v}});var r=n(12741),o=n(38564),i=n(36069),a=n(72338),c=n(34264),s=n(56261),l=n(10221),u=function(e){return(0,c.KH)(e)||(0,c.pv)(e)||(0,s.AH)(e)},d=function(e,t){return!(0,c.KH)(e)&&!(0,c.pv)(e)&&u(t)},f=function(e,t){var n=null;return t.state.doc.descendants(function(t,r,o){if(r>0&&!u(o)&&!u(t))return!1;!(0,c.KH)(t)&&u(o)&&e>=r&&e<r+t.nodeSize&&(n={node:t,pos:r,end:r+t.nodeSize})}),n},p=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t);if(u(e.node(t-1)))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:n}}return null},m=function(e){var t=e.pos,n=e.from,r=e.to,o=e.editor,i=o.state,s=l.Z.getState(i);if(!s)return null;var u=(0,a.qv)(o.state.doc.resolve(t),c.KH),d=s.getAnnotationsBetween(i,n,r),f=u?s.getAnnotationsBetween(i,u.pos,u.pos+u.node.nodeSize).filter(function(e){return!d.find(function(t){return t.id===e.id})}):[];return{inBlock:d,inCard:f,origNodePos:t}},h=function(e){var t=e.dropPos,n=e.dropNode,a=e.dragging,c=e.side,s=e.tr,u=e.view,d=l.Z.getState(u.state);if(!d)return[];var f=d.getAnnotationsBetween(u.state,t,t+n.nodeSize),p=a.inBlock,m="left"===c?a.origNodePos:t,h="left"===c?t:a.origNodePos,g=o.Gt.getState(u.state),v=g.doc,b=g.type,y=g.binding,x=s.mapping.map(t),j=function(e,t){return function(n){var r=n.id,o=n.relativePos,a=(0,i.SF)(v,b,o,y.mapping);return null==a?null:{id:r,newPos:x+(a-e)+t}}},w=("left"===c?p:f).map(j(m,1)).filter(function(e){return!!e}),O=("left"===c?f:p).map(j(h,2)).filter(function(e){return!!e}),k=[].concat((0,r.Z)(w),(0,r.Z)(O)),C=a.inCard.filter(function(e){var t=e.id;return!k.find(function(e){return e.id===t})}).map(function(e){var t=e.id,n=e.pos,r=s.mapping.map(n);return n===r?null:{newPos:r,id:t}}).filter(function(e){return!!e});return[].concat((0,r.Z)(k),(0,r.Z)(C))},g=function(e){var t=e.dropPos,n=e.dropNode,a=e.dragging,c=e.side,s=e.tr,u=e.view,d=e.leftContentSize,f=l.Z.getState(u.state);if(!f)return[];var p=f.getAnnotationsBetween(u.state,t,t+n.nodeSize),m=a.inBlock,h="left"===c?a.origNodePos:t,g="left"===c?t:a.origNodePos,v=o.Gt.getState(u.state),b=v.doc,y=v.type,x=v.binding,j=s.mapping.map(t),w=function(e,t){return function(n){var r=n.id,o=n.relativePos,a=(0,i.SF)(b,y,o,x.mapping);return null==a?null:{id:r,newPos:j+(a-e)+t}}},O=("left"===c?m:p).map(w(h,2)).filter(function(e){return!!e}),k=("left"===c?p:m).map(w(g,4+d)).filter(function(e){return!!e}),C=[].concat((0,r.Z)(O),(0,r.Z)(k)),P=a.inCard.filter(function(e){var t=e.id;return!C.find(function(e){return e.id===t})}).map(function(e){var t=e.id,n=e.pos,r=s.mapping.map(n);return n===r?null:{newPos:r,id:t}}).filter(function(e){return!!e});return[].concat((0,r.Z)(C),(0,r.Z)(P))},v=function(e){var t=e.contentPos,n=e.contentEnd,r=e.insertPos,a=e.editor,c=l.Z.getState(a.state);if(!c)return[];var s=a.state,u=c.getAnnotationsBetween(s,t,n),d=o.Gt.getState(a.view.state),f=d.doc,p=d.type,m=d.binding;return u.map(function(e){var n=e.id,o=e.relativePos,a=(0,i.SF)(f,p,o,m.mapping);return null==a?null:{id:n,newPos:r+(a-t)}}).filter(function(e){return!!e})},b=function(e){var t,n=e.dropPos,a=e.dragging,c=e.cardWrapOffset,s=e.tr,u=e.view;if(!l.Z.getState(u.state))return[];var d=o.Gt.getState(u.state),f=d.doc,p=d.type,m=d.binding,h=s.mapping.map(n,-1),g=a.inBlock.map((t=a.origNodePos,function(e){var n=e.id,r=e.relativePos,o=(0,i.SF)(f,p,r,m.mapping);return null==o?null:{id:n,newPos:h+(o-t)+c}})).filter(function(e){return!!e}),v=a.inCard.filter(function(e){var t=e.id;return!g.find(function(e){return e.id===t})}).map(function(e){var t=e.id,n=e.pos,r=s.mapping.map(n);return n===r?null:{newPos:r,id:t}}).filter(function(e){return!!e});return[].concat((0,r.Z)(g),(0,r.Z)(v))},y=function(e){var t=e.pos,n=e.tr,r=e.editor,o=l.Z.getState(r.view.state);if(!o)return[];var i=r.state.doc.resolve(t);return i.nodeAfter?o.getAnnotationsBetween(r.state,t,t+i.nodeAfter.nodeSize).map(function(e){var r=e.id,o=e.pos;return{id:r,newPos:o===t?n.mapping.map(o+1)-1:n.mapping.map(o)}}):[]}},61753:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(34676),o=n(72338),i=n(27191),a=n(52780),c=n(12691),s=n(39875),l=o.hj.create({name:"blockClass",addOptions:function(){return{blockClass:"block"}},addProseMirrorPlugins:function(){var e=this;return[new i.Sy({key:new i.H$("blockClass"),props:{decorations:function(t){var n=t.doc,o=[];return n.descendants(function(t,n,i,l){if((0,s.ZM)(i)&&o.push(a.p.node(n,n+t.nodeSize,{},{isAnnotatable:!0})),(0,c.zh)(t))o.push(a.p.node(n,n+t.nodeSize,{class:(0,r.cx)(e.options.blockClass,"block-".concat(t.type.name),0===l&&"first-block",l===i.childCount-1&&"last-block")}));else{if(!t.isLeaf&&!t.isBlock)return;o.push(a.p.node(n,n+t.nodeSize,{class:"node-".concat(t.type.name)}))}}),a.EH.create(n,o)}}})]}})},41962:function(e,t,n){n.d(t,{NM:function(){return g},eq:function(){return m}});var r=n(12741),o=n(96412),i=n(13089),a=n(95235),c=n(72338),s=n(27191),l=n(55079),u=n(17477),d=n(95472);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=new s.H$("menuBubble"),h=function(){function e(t){var n=this,r=t.editor,i=t.view;(0,o.Z)(this,e),(0,a.Z)(this,"editor",void 0),(0,a.Z)(this,"element",void 0),(0,a.Z)(this,"view",void 0),(0,a.Z)(this,"preventHide",!1),(0,a.Z)(this,"tippy",void 0),(0,a.Z)(this,"onHide",void 0),(0,a.Z)(this,"isEditable",void 0),(0,a.Z)(this,"isMouseDownOutsideMenu",void 0),(0,a.Z)(this,"cleanupPanelLifecycle",void 0),(0,a.Z)(this,"mousedownDocumentHandler",function(e){n.element.contains(e.target)?n.isMouseDownOutsideMenu=!1:n.isMouseDownOutsideMenu=!0}),(0,a.Z)(this,"mouseupDocumentHandler",function(){n.isMouseDownOutsideMenu=!1,n.update(n.editor.view)}),(0,a.Z)(this,"mousedownHandler",function(){n.preventHide=!0}),(0,a.Z)(this,"dragstartHandler",function(){n.hide()}),(0,a.Z)(this,"dragendHandler",function(){n.isMouseDownOutsideMenu=!1,setTimeout(function(){return n.update(n.editor.view)})}),(0,a.Z)(this,"focusHandler",function(){setTimeout(function(){return n.update(n.editor.view)})}),(0,a.Z)(this,"blurHandler",function(e){var t,r=e.event;if(n.preventHide){n.preventHide=!1;return}null!=r&&r.relatedTarget&&null!==(t=n.element.parentNode)&&void 0!==t&&t.contains(r.relatedTarget)||n.hide()}),this.editor=r,this.isEditable=r.isEditable,this.view=i}return(0,i.Z)(e,[{key:"initialize",value:function(e){var t=this,n=e.element,r=e.tippyOptions,o=e.panelLifecycle,i=e.onHide;if(!n){console.warn("[BubbleMenuView] initialize. No element provided");return}this.onHide=i,this.element=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.view.dom.addEventListener("dragend",this.dragendHandler),this.view.dom.addEventListener("drop",this.dragendHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible",document.addEventListener("mousedown",this.mousedownDocumentHandler,!0),document.addEventListener("mouseup",this.mouseupDocumentHandler,!0),o&&(this.cleanupPanelLifecycle=o.on("resize",function(){var e;null===(e=t.tippy.popperInstance)||void 0===e||e.update()}))}},{key:"createTooltip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.view.dom.parentElement;this.tippy=(0,l.ZP)(n,p({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},t)),this.editor.commands.command(function(t){return t.tr.setMeta(m,{tippyInstance:e.tippy}),!0})}},{key:"update",value:function(e,t){var n=t&&m.getState(t),o=m.getState(e.state),i=e.state,a=e.composing,s=i.doc,l=i.selection,f=t&&t.doc.eq(s)&&t.selection.eq(l)&&this.isEditable===this.editor.isEditable&&(null==n?void 0:n.forceHide)===o.forceHide;if(!this.element){if(!o.element)return;this.initialize(o)}if(this.isEditable=this.editor.isEditable,!this.editor.isEditable||!0===o.forceHide){this.hide();return}if(!a&&!f){var p=l.empty,h=l.ranges,g=Math.min.apply(Math,(0,r.Z)(h.map(function(e){return e.$from.pos}))),b=Math.max.apply(Math,(0,r.Z)(h.map(function(e){return e.$to.pos}))),y=!s.textBetween(g,b).length&&(0,c.xh)(e.state.selection);if(p||y){var x=l.$anchor.marks().some(function(e){return"link"===e.type.name})||"button"===l.$anchor.parent.type.name,j=(0,c.b5)(s,{from:g,to:b},function(e){return"emoji"===e.type.name});if(!x&&(null==j?void 0:j.length)===0){this.hide();return}}this.tippy.setProps({getReferenceClientRect:function(){if(!(0,c.EG)(e.state.selection))return(0,c.pr)(e,g,b);var t=e.nodeDOM(g);return t&&(0,u.Re)(t)?(v(t,".drag-handle")||v(t,"[data-content-reference]")||t).getBoundingClientRect():(0,c.pr)(e,g,b)}}),!this.isMouseDownOutsideMenu&&(0,d.KB)(this.editor)&&this.show()}}},{key:"show",value:function(){this.tippy.show(),document.body.classList.add("formatting-menu-open")}},{key:"hide",value:function(){this.onHide&&"function"==typeof this.onHide&&this.onHide(),this.tippy.hide(),document.body.classList.remove("formatting-menu-open")}},{key:"destroy",value:function(){var e,t;null===(e=this.tippy)||void 0===e||e.destroy(),null===(t=this.element)||void 0===t||t.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownDocumentHandler,!0),document.removeEventListener("mouseup",this.mouseupDocumentHandler,!0),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.cleanupPanelLifecycle&&this.cleanupPanelLifecycle()}}]),e}(),g=c.hj.create({name:"bubbleMenu",addCommands:function(){return{forceHideBubbleMenu:function(e){return function(t){return t.tr.setMeta(m,{forceHide:e}),!0}},refreshBubbleMenu:function(){return function(e){var t,n=e.state,r=m.getState(n).tippyInstance;return null==r||null===(t=r.popperInstance)||void 0===t||t.forceUpdate(),!0}}}},addProseMirrorPlugins:function(){var e=this.editor;return[new s.Sy({key:m,state:{init:function(){return{element:null,forceHide:!1,onHide:function(){},tippyOptions:{},tippyInstance:null}},apply:function(e,t){var n=e.getMeta(m);return n?p(p({},t),n):t}},view:function(t){return new h({view:t,editor:e})}})]}}),v=function(e,t){var n=e.querySelector(t),r=e.querySelector("[data-node-view-wrapper]");return n&&r&&(0,u.tl)(n,e,function(e){return e.hasAttribute("data-node-view-wrapper")})===r?n:null}},82577:function(e,t,n){n.d(t,{Di:function(){return p},NY:function(){return m},hw:function(){return f},ri:function(){return d}});var r=n(81333),o=n(60207),i=n(19593),a=n(99465),c=n(64971),s=n(28645),l=n(71903),u=n(87254),d=function(){return{note:{name:u.ag._({id:"KiJn9B"}),commandName:u.ag._({id:"Cq+sLh"}),description:u.ag._({id:"ooy/OF"}),icon:l.L4,colorScheme:"accent"},info:{name:u.ag._({id:"CE+M2e"}),commandName:u.ag._({id:"1E4ojF"}),description:u.ag._({id:"NfbNtV"}),icon:s.sq,colorScheme:"blue"},warning:{name:u.ag._({id:"r6y+jM"}),commandName:u.ag._({id:"xb1fsI"}),icon:c.faTriangleExclamation,description:u.ag._({id:"tpYgEx"}),colorScheme:"yellow"},caution:{name:u.ag._({id:"VvjZ7K"}),commandName:u.ag._({id:"tC/T1p"}),description:u.ag._({id:"nbib7S"}),icon:a.$9,colorScheme:"red"},success:{name:u.ag._({id:"zzDlyQ"}),commandName:u.ag._({id:"Vv+D/T"}),description:u.ag._({id:"pqvop4"}),icon:i.f8,colorScheme:"green"},question:{name:u.ag._({id:"bfgr/e"}),commandName:u.ag._({id:"Ev0Vqt"}),description:u.ag._({id:"IsUqRH"}),icon:o.sp,colorScheme:"gray"}}},f=function(e){return d()[e]||d().note},p=function(){return Object.entries(d()).map(function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1],i=o.commandName,a=o.icon;return{key:"calloutBox-".concat(n),name:function(){return i},nodeName:"calloutBox",icon:a,shortcut:"/".concat(n),keywords:["callout","box"],execute:function(e){return e.chain().focus().wrapIn("calloutBox",{variant:n}).run()}}})},m=Object.fromEntries(Object.keys(d()).map(function(e){return["calloutBox-".concat(e),{type:"calloutBox",attrs:{variant:e},content:[{type:"paragraph"}]}]}))},54074:function(e,t,n){n.d(t,{kc:function(){return D},$v:function(){return E}});var r=n(95235),o=n(55452),i=n(94659),a=n(50390),c=n(5766),s=n(46358),l=n(55921),u=n(62141),d=n(26806),f=n(58539),p=n(82269),m=n(56581),h=n(45650),g=n(11919),v=n(53738),b=n(91012),y=n(71354),x=n(35231),j=n(52322),w=["label","onClick","isChecked","cardBackground","isDark"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=function(e){var t=e.label,n=e.onClick,r=e.isChecked,o=e.cardBackground,i=e.isDark,a=(0,p.Z)(e,w),c=(0,x.wh)(o,void 0!==i&&i,!0);return(0,j.jsxs)(h.z,k(k({borderRadius:"md",display:"block",height:"auto",variant:"ghost",color:"black",onClick:n,p:1},a),{},{children:[(0,j.jsxs)(g.k,{borderWidth:"1px",borderColor:"gray.200",sx:c,p:2,backgroundAttachment:"unset",_focus:{boxShadow:"outline"},overflow:"hidden",position:"relative",direction:"column",align:"center",justify:"center",height:"80px",children:[(0,j.jsx)(f.g5,{background:o}),(0,j.jsx)(v.xu,{position:"relative",p:2,zIndex:0,transitionProperty:"inset",transitionDuration:"normal",width:"100%",overflow:"hidden",color:"var(--body-color)",children:(0,j.jsx)(P,{})})]}),(0,j.jsxs)(g.k,{align:"center",mt:1,children:[r&&(0,j.jsx)(m.n,{w:3,mr:1}),(0,j.jsx)(b.x,{fontSize:"sm",fontWeight:"medium",children:t})]})]}))},P=function(){var e="currentColor";return(0,j.jsxs)(y.K,{spacing:1,h:"28px",position:"relative",zIndex:1,children:[(0,j.jsx)(v.xu,{h:"6px",w:"50%",bg:e,borderRadius:"sm"}),(0,j.jsx)(v.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,j.jsx)(v.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,j.jsx)(v.xu,{h:"3px",w:"30%",bg:e,borderRadius:"sm"})]})};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=[{label:"Frosted",value:"frosted"},{label:"Faded",value:"faded"},{label:"Clear",value:"none"}],D=function(e){var t=e.background,n=e.container,r=e.updateAttributes,p=A(A({},f.xO),t.mask),m=(0,s.CG)(u.Pu),h=(0,d.BA)(m,n),g=(0,l.l)(m,void 0,h);return(0,j.jsx)(i.g,{spacing:4,w:"100%",align:"stretch",css:g,children:(0,j.jsxs)(i.g,{spacing:2,align:"stretch",children:[(0,j.jsx)(a.X,{size:"md",children:(0,j.jsx)(o.cC,{id:"OXOTHU"})}),(0,j.jsx)(c.M,{columns:2,spacing:2,children:E.map(function(e){var n,o=e.label,i=e.value,a=A(A({},t),{},{mask:A(A({},p),{},{effect:i})});return(0,j.jsx)(C,{onClick:function(){r({background:a})},label:o,isChecked:(null===(n=t.mask)||void 0===n?void 0:n.effect)===i,cardBackground:a,cardColor:h},o)})})]})})}},27948:function(e,t,n){n.d(t,{S:function(){return z},a:function(){return I}});var r=n(76547),o=n(48798),i=n(55452),a=n(75944),c=n(78116),s=n(56915),l=n(16796),u=n(64827),d=n(92619),f=n(2167),p=n(89190),m=n(73848),h=n(24798),g=n(53738),v=n(84520),b=n(95085),y=n(72360),x=n(48322),j=n(49929),w=n(2784),O=n(90254),k=n(35258),C=n(21529),P=n(76451),S=n(58539),A=n(16568),E=n(54074),D=n(52322),I=function(){var e=(0,a.q)(),t=e.isOpen,n=e.onOpen,r=e.onClose,o=(0,w.useState)(0),i=o[0],c=o[1],s=(0,w.useCallback)(function(e){n(),c(e)},[n]);return{openBackgroundTab:(0,w.useCallback)(function(){s(0)},[s]),openStylesTab:(0,w.useCallback)(function(){s(1)},[s]),isOpen:t,onClose:r,tabIndex:i,setTabIndex:c}},z=(0,w.memo)(function(e){var t=e.editor,n=e.isOpen,a=e.onClose,I=e.background,z=e.container,T=e.updateNestedAttributes,M=e.tabIndex,N=e.setTabIndex,R=e.isAccentImageDrawer,L=void 0!==R&&R,_=e.enableMask,H=(0,C.A)(t),Z=(0,w.useCallback)(function(){0!==M&&N(0),a()},[a,M,N]),B=(0,O.g)(),F=void 0!==_&&_&&(0,S.Zi)(I),W=L?A.kT.accentImage:A.kT.cardBackground,U=(0,w.useCallback)(function(e){return!L||e.backgroundType!==P.E.NONE},[L]);return(0,D.jsxs)(c.d,{trapFocus:!1,isOpen:n,placement:"right",onClose:Z,size:B,children:[(0,D.jsx)(s.Z,{background:"none"}),(0,D.jsxs)(l.s,{onKeyDown:H,"data-in-editor-focus":!0,"data-edit-background-drawer":!0,"data-testid":"card-style-drawer",children:[(0,D.jsx)(u.o,{}),(0,D.jsx)(d.x,{children:(0,D.jsx)(i.cC,{id:"xYilR2"})}),(0,D.jsx)(f.f,{overflowX:"hidden",children:(0,D.jsxs)(p.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:M,onChange:N,children:[F&&(0,D.jsxs)(m.t,{children:[(0,D.jsxs)(h.O,{children:[(0,D.jsx)(g.xu,{mr:2,children:(0,D.jsx)(j.G,{icon:o.re})}),(0,D.jsx)(i.cC,{id:"GtJbUa"})]}),(0,D.jsxs)(h.O,{children:[(0,D.jsx)(g.xu,{mr:2,children:(0,D.jsx)(j.G,{icon:r.Md})}),(0,D.jsx)(i.cC,{id:"9LBB6c"})]})]}),(0,D.jsxs)(v.n,{children:[(0,D.jsx)(b.x,{p:0,pb:1,mt:F?4:0,children:(0,D.jsx)(k.o,{editor:t,updateNestedAttributes:T,background:I,defaultMessage:(0,D.jsxs)(y.b,{children:[(0,D.jsx)(x.z,{}),W]}),isDark:!1,isValidSource:U})}),F&&(0,D.jsx)(b.x,{p:0,pb:1,mt:4,children:(0,D.jsx)(E.kc,{updateAttributes:T,background:I,container:z})})]})]})})]})]})})},16568:function(e,t,n){n.d(t,{My:function(){return r},fD:function(){return o},kT:function(){return i}});var r="card2-layout",o="25px",i={accentImage:"Try adding an image from this theme's accent image library or search Unsplash for inspiration. You can also upload your own image here.",cardBackground:"The page background will show up behind this card. You\n  can change the page background using the theme button in\n  the toolbar, or add a backdrop specific to this card."}},81170:function(e,t,n){n.d(t,{b:function(){return u},l:function(){return d}});var r=n(99258),o=n(79593),i=n(1340),a=n(69943),c=n(40701),s=n(87254),l=n(70982),u={fluid:{label:function(){return s.ag._({id:"f5YDMB"})},icon:c.fK,description:function(){return s.ag._({id:"K6Qymh"})},aspectRatio:null,defaultVerticalAlign:"center"},"16x9":{label:function(){return s.ag._({id:"ekoaFo"})},icon:a.r9,description:function(){return s.ag._({id:"dTW3cl"})},aspectRatio:l.tX["16x9"],defaultVerticalAlign:"center"},a4:{label:function(){return s.ag._({id:"i+5kKa"})},icon:i._c,description:function(){return s.ag._({id:"hmF0Hv"})},aspectRatio:l.tX.a4,defaultVerticalAlign:"center"},letter:{label:function(){return s.ag._({id:"S4Fsut"})},icon:o.wP,description:function(){return s.ag._({id:"hmF0Hv"})},aspectRatio:l.tX.letter,defaultVerticalAlign:"center"},square:{label:function(){return s.ag._({id:"1DA6ap"})},icon:r.pL,description:function(){return s.ag._({id:"U6v+EF"})},aspectRatio:l.tX.square,defaultVerticalAlign:"center"}},d=function(e){return e&&u[e]||u.fluid}},79073:function(e,t,n){n.d(t,{o4:function(){return O},Z8:function(){return w}});var r=n(81333),o=n(95235),i=n(12483),a=n(72338),c=n(27191),s=n(26151),l=n(32333),u=n(66902),d=n(96412),f=n(13089),p=n(18149),m=n.n(p),h=n(62141),g=n(12741),v=n(95472),b=n(12691),y=function(e){var t=[],n={tree:{},parents:{},treeArray:[]};return e.doc.descendants(function(r,o){if((0,b.KH)(r)){var i=e.doc.resolve(o),a=r.attrs.id;t.push(a);var c=(0,v.nv)(i,b.KH).reverse().map(function(e){return e.node.attrs.id}),s=[].concat((0,g.Z)(c),[a]);s.reduce(function(e,t){return e[t]=e[t]||{},e[t]},n.tree),n.parents[a]=c,s.reduce(function(e,t){var n=e.find(function(e){return e.id===t});return n?n.children:(e.push({id:a,children:[]}),e)},n.treeArray)}}),{cardIds:t,cardIdMap:n}},x=function(){function e(){(0,d.Z)(this,e),(0,o.Z)(this,"hasChanges",!1),(0,o.Z)(this,"duplicateCardIds",[]),(0,o.Z)(this,"value",null)}return(0,f.Z)(e,[{key:"compute",value:function(e){var t=this,n=y(e);m()(this.value,n)||(this.hasChanges=!0);var r=n.cardIds.filter(Boolean),o=r.filter(function(e,t){return r.includes(e,t+1)});return this.duplicateCardIds=o.filter(function(e){return!t.duplicateCardIds.includes(e)}),this.value=n,this}},{key:"apply",value:function(e,t){return e.docChanged&&this.compute(t),this}},{key:"processChanges",value:function(e){this.hasChanges&&this.value&&e((0,h.iX)(this.value)),this.hasChanges=!1}}]),e}();function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var w=new c.H$("cardIds"),O=a.hj.create({name:"cardIds",priority:u.a.CardIds,addOptions:function(){return{enabled:!0}},addProseMirrorPlugins:function(){return this.options.enabled?[new c.Sy({key:w,state:{init:function(){return new x},apply:function(e,t,n,r){return t.apply(e,r)}},appendTransaction:function(e,t,n){var r,a=w.getState(n);if(!(null!=a&&null!==(r=a.value)&&void 0!==r&&r.cardIds))return null;if(e.some(function(e){return e.docChanged})&&a.duplicateCardIds.length){var c={duplicateIds:JSON.stringify(a.duplicateCardIds),transactions:JSON.stringify(k(e))};null===l.co||void 0===l.co||l.co.track(l.xW.DUPLICATE_CARD_IDS,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},c)),i.Tb("[generateCardIdMap] Duplicate cardIds detected. This is unexpected and will cause spotlight issues. Additional metadata:",{extra:c})}return null}})]:[]}}),k=function(e){return e.map(function(e){var t=e.steps.map(function(e){if(e instanceof s.Pu||e instanceof s.FC){var t,n,r,o=(null===(t=e.slice.toJSON())||void 0===t?void 0:null===(n=t.content)||void 0===n?void 0:n[0])||{},i={type:o.type,attrs:o.attrs,contentLength:null===(r=o.content)||void 0===r?void 0:r.length};return{name:e.constructor.name,from:e.from,to:e.to,sliceContentSimple:i}}return e instanceof s.Cj?{name:e.constructor.name,pos:e.pos,attr:e.attr}:{name:e.constructor.name}}),n=Object.fromEntries(Object.entries(e.meta).map(function(e){var t,n,o,i,a,c=(0,r.Z)(e,2),s=c[0],l=c[1];return"annotationEvent"===s?[s,{type:l.type,droppedBlockPos:l.droppedBlockPos,dragging:{inBlockLength:null===(t=l.dragging)||void 0===t?void 0:null===(n=t.inBlock)||void 0===n?void 0:n.length,inCardLength:null===(o=l.dragging)||void 0===o?void 0:null===(i=o.inCard)||void 0===i?void 0:i.length,origNodePos:null===(a=l.dragging)||void 0===a?void 0:a.origNodePos}}]:"uiEvent"===s?[s,l]:[s,"object"==typeof l?"object":l]}));return{stepsData:t,docChanged:e.docChanged,selection:{from:e.selection.from,to:e.selection.to},selectionSet:e.selectionSet,metaData:n}})}},5811:function(e,t,n){n.d(t,{T:function(){return r}});var r=new(n(98555)).v},46695:function(e,t,n){n.d(t,{G:function(){return i}});var r=n(76451),o=n(42545),i=function(e,t,n,i,a){var c=e.view.state.doc.nodeAt(n);if((null==c?void 0:c.type.name)!=="card")return!1;var s=c.attrs,l=(0,o.$U)(i);if((0,o.Ux)(t,n,e.schema,l),i===s.layout)return!0;t.setNodeAttribute(n,"layout",i);var u=(0,o.wz)(t,n).accent;if(a&&u&&u.node.attrs.background.type===r.E.NONE){var d=a();d&&t.setNodeAttribute(u.pos,"background",d)}var f=c.attrs.layoutTemplateColumns,p=s.layout;return f&&("left"===p&&"right"===i||"right"===p&&"left"===i)&&t.setNodeAttribute(n,"layoutTemplateColumns",f.split(" ").reverse().join(" ")),!0}},48745:function(e,t,n){n.d(t,{$D:function(){return b},xL:function(){return v}});var r=n(13089),o=n(96412),i=n(27191),a=n(52780),c=n(44595),s=n(46358),l=n(95472),u=n(39875),d=n(42545),f=n(17033);n(6057);var p=n(34264),m=(0,r.Z)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,o.Z)(this,e),this.dragging=t}),h=new i.H$("cardPlugin"),g=["card","calloutBox","image","cardLayoutItem","cardAccentLayoutItem"],v=function(e){return new i.Sy({key:h,state:{init:function(){return new m},apply:function(e,t){return t}},props:{decorations:function(e){var t=e.doc,n=[];return t.descendants(function(e,r,o,i){if(g.includes(e.type.name)){var u,f,m,h=t.resolve(r),v=(0,l.nv)(h,p.KH).map(function(e){return e.node}),b=(0,p.sP)(v,"effect"),y=(0,p.sP)(v,"isDark"),x=(0,p.sP)(v,"width"),j=(0,p.KH)(e)?v.length:v.length-1,w=j>0,O=!w&&0===i,k=!w&&i===o.childCount-1,C=!!(e.firstChild&&(0,p.pv)(e.firstChild)),P=(0,d.Ap)(e),S=(null==P?void 0:P.type)==="none",A=null==P?void 0:null===(u=P.mask)||void 0===u?void 0:u.effect,E=null!==(f=null===(m=e.attrs.container)||void 0===m?void 0:m.isDark)&&void 0!==f?f:y,D=(0,c.ws)((0,s.bh)().getState()),I={isCardDecoration:!0,nestedDepth:j,isNested:w,isFirstCard:O,isLastCard:k,hasLayoutItem:C,hasNoAccentBackground:S,cardAccentBackgroundMaskEffect:A,isCardDark:E,displayLayout:(0,d.Hh)({layout:e.attrs.layout,parentCards:v,isMobileDevice:D}),insideSideLayout:(0,d.eZ)(v),inheritContainerEffect:b,inheritContainerIsDark:y,inheritContainerWidth:x};n.push(a.p.node(r,r+e.nodeSize,{},I))}}),n.length>0?a.EH.create(t,n):a.EH.empty},handleDOMEvents:{drop:function(e){var t,n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,r=h.getState(e.state);if(!r)return!1;r.dragging=n}},handleDrop:function(t,n,r){var o,i=h.getState(t.state),a=null==i?void 0:i.dragging;i&&(i.dragging=null);var c=(0,f.jz)(t,n,r);if(!c)return!1;var s=r.content.toJSON();if(!s)return!1;var l=(null===(o=s[0])||void 0===o?void 0:o.type)==="card";if(l&&a)return e.commands.rearrangeCards({from:a.origNodePos,to:c.pos,position:"above"});var d=!t.state.selection.empty;try{return e.chain().insertContentAt(c.pos,l?s:{type:"card",content:s},{updateSelection:!1}).command(function(n){var r=n.tr;if(d&&r.deleteSelection(),a){var o=(0,u.ei)({view:t,tr:r,cardWrapOffset:l?0:1,dragging:a,dropPos:c.pos});requestAnimationFrame(function(){var t,n;null===(t=(n=e.commands).moveAnnotations)||void 0===t||t.call(n,o)})}return!0}).focusMapped(c.pos,1).run()}catch(e){return console.error("(caught) [Cardplugin] handleDrop error:",e),!0}}}})},b=function(e){var t=e.find(function(e){return e.spec.isCardDecoration});return t?t.spec:{isNested:!1,hasLayoutItem:!1,nestedDepth:0,isFirstCard:!1,isCardDecoration:!0,isLastCard:!1,displayLayout:"blank",insideSideLayout:!1,hasNoAccentBackground:!0}}},81212:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(78102),o=n(46802),i=n(61751),a=n(53738),c=n(49929),s=n(2784),l=n(52322),u=(0,s.memo)(function(e){var t=e.isLocked,n=e.isDark;return(0,l.jsxs)(a.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,l.jsx)(c.G,{icon:i.nN}),t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.G,{icon:o.di,color:void 0!==n&&n?"var(--chakra-colors-gray-900)":"white",transform:"shrink-5 right-6 down-4"}),(0,l.jsx)(c.G,{icon:r.by,transform:"shrink-8 right-6 down-4"})]})]})});u.displayName="CardLinkIcon"},46279:function(e,t,n){n.d(t,{qA:function(){return I},ON:function(){return z}});var r=n(81333),o=n(6109),i=n(3440),a=n.n(i),c=n(87254),s=n(98875),l=n(54735),u={src:"/_next/static/media/Accent-left.ec4a8091.svg",height:44,width:92,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/Accent-right.c78c2203.svg",height:44,width:92,blurWidth:0,blurHeight:0},f={src:"/_next/static/media/Blank-card.33757130.svg",height:43,width:92,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/Title-card.409d7081.svg",height:33,width:92,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/Title-with-2-Column-Content.31842b2e.svg",height:45,width:92,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/Title-with-2-Column-Image-Left.a898abf9.svg",height:47,width:92,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/Title-with-2-Column-Image-Right.82d9989d.svg",height:47,width:92,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/Title-with-2-images.8c3df472.svg",height:65,width:92,blurWidth:0,blurHeight:0},b={src:"/_next/static/media/Title-with-3-boxes.8a28c3c6.svg",height:49,width:91,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/Title-with-3-Column-Content.a2e0f358.svg",height:45,width:92,blurWidth:0,blurHeight:0},x={src:"/_next/static/media/Title-with-3-images.172b44a3.svg",height:69,width:92,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/Title-with-3-nested-cards.c9385238.svg",height:83,width:92,blurWidth:0,blurHeight:0},w={src:"/_next/static/media/Title-with-3-toggles.c0b5bbb9.svg",height:49,width:92,blurWidth:0,blurHeight:0},O={src:"/_next/static/media/Title-with-Content-with-Button.0a656178.svg",height:51,width:91,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/Title-with-large-bullets.45506775.svg",height:53,width:91,blurWidth:0,blurHeight:0},C={src:"/_next/static/media/Title-with-team-photos.475f94b7.svg",height:61,width:91,blurWidth:0,blurHeight:0},P={src:"/_next/static/media/Title-with-text.2a88d207.svg",height:45,width:92,blurWidth:0,blurHeight:0},S={src:"/_next/static/media/Title-with-timeline.5a8d1065.svg",height:63,width:91,blurWidth:0,blurHeight:0},A=n(94827),E=n(90399),D=function(e){var t=(0,A.C)(e,"cardLayoutsEnabled"),n=s.VH.get("card1InCard2");return!t&&!n},I=function(){return[{type:"cardTemplate",key:"blankCard",name:function(){return c.ag._({id:"UQOvxZ"})},nodeName:"card",shortcut:"/new",icon:o.em,previewImage:f,execute:function(e){return e.commands.insertContentAndSelect(l.e.blankCard)},group:"basic"},{type:"cardTemplate",key:"titleCard",name:function(){return c.ag._({id:"5U/oBM"})},nodeName:"card",icon:o.em,previewImage:p,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleCard)},group:"basic"},{type:"cardTemplate",key:"titleWithText",name:function(){return c.ag._({id:"K9cc6R"})},nodeName:"card",icon:o.em,previewImage:P,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWithText)},group:"basic"},{type:"cardTemplate",key:"accentLeft",name:function(){return c.ag._({id:"5HMSY5"})},nodeName:"card",icon:o.em,previewImage:u,execute:function(e){return e.commands.insertContentAndSelect(l.e.accentLeft)},group:"twoCol",checkDisabled:D},{type:"cardTemplate",key:"accentRight",name:function(){return c.ag._({id:"Czo70+"})},nodeName:"card",icon:o.em,previewImage:d,execute:function(e){return e.commands.insertContentAndSelect(l.e.accentRight)},group:"twoCol",checkDisabled:D},{type:"cardTemplate",key:"titleWithContentAndButton",name:function(){return c.ag._({id:"FJJPAA"})},nodeName:"card",icon:o.em,previewImage:O,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWithContentAndButton)},group:"basic"},{type:"cardTemplate",key:"titleWith2ColumnContent",name:function(){return c.ag._({id:"yUsy1w"})},nodeName:"card",icon:o.em,previewImage:m,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith2ColumnContent)},group:"twoCol"},{type:"cardTemplate",key:"titleWith2ColumnImageLeft",name:function(){return c.ag._({id:"Rv3R2r"})},nodeName:"card",icon:o.em,previewImage:h,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith2ColumnImageLeft)},group:"twoCol"},{type:"cardTemplate",key:"titleWith2ColumnImageRight",name:function(){return c.ag._({id:"ZiIaUH"})},nodeName:"card",icon:o.em,previewImage:g,group:"twoCol",execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith2ColumnImageRight)}},{type:"cardTemplate",key:"titleWith2ImageColumns",name:function(){return c.ag._({id:"oVMU3f"})},nodeName:"card",icon:o.em,previewImage:v,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith2ImageColumns)},group:"twoCol"},{type:"cardTemplate",key:"titleWith3ColumnContent",name:function(){return c.ag._({id:"G9HV86"})},nodeName:"card",icon:o.em,previewImage:y,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith3ColumnContent)},group:"specialty"},{type:"cardTemplate",key:"titleWith3ImageColumns",name:function(){return c.ag._({id:"ZjjVJt"})},nodeName:"card",icon:o.em,previewImage:x,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith3ImageColumns)},group:"specialty"},{type:"cardTemplate",key:"titleWith3NestedCards",name:function(){return c.ag._({id:"JlzDZz"})},nodeName:"card",icon:o.em,previewImage:j,execute:function(e){e.chain().insertContentAndSelect((0,E.Zs)(l.e.titleWith3NestedCards)).run()},group:"specialty"},{type:"cardTemplate",key:"titleWith3Toggles",name:function(){return c.ag._({id:"I7+Gno"})},nodeName:"card",icon:o.em,previewImage:w,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith3Toggles)},group:"specialty"},{type:"cardTemplate",key:"titleWithTimeline",name:function(){return c.ag._({id:"lAEqDY"})},nodeName:"card",icon:o.em,previewImage:S,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWithTimeline)},group:"specialty"},{type:"cardTemplate",key:"titleWithLargeBulletList",name:function(){return c.ag._({id:"ftCzmF"})},nodeName:"card",icon:o.em,previewImage:k,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWithLargeBulletList)},group:"specialty"},{type:"cardTemplate",key:"titleWith3Boxes",name:function(){return c.ag._({id:"MP1CB9"})},nodeName:"card",icon:o.em,previewImage:b,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWith3Boxes)},group:"specialty"},{type:"cardTemplate",key:"titleWithTeamPhotos",name:function(){return c.ag._({id:"w+oRo/"})},nodeName:"card",icon:o.em,previewImage:C,execute:function(e){return e.commands.insertContentAndSelect(l.e.titleWithTeamPhotos)},group:"specialty"}]},z=function(){return Object.entries(a()(I(),"group")).map(function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];return{subcategory:({basic:c.ag._({id:"DJoVQx"}),twoCol:c.ag._({id:"qz7ItL"}),specialty:c.ag._({id:"65r5M1"})})[n],items:o}})}},71405:function(e,t,n){n.d(t,{re:function(){return o},qA:function(){return r.qA},ON:function(){return r.ON}});var r=n(46279),o={blankCard:{type:"card",content:[{type:"heading",attrs:{level:1}}]},titleCard:{type:"card",attrs:{background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"title",attrs:{horizontalAlign:"left",level:1},content:[{type:"text",text:"Title"}]},{type:"heading",attrs:{horizontalAlign:"left",level:3},content:[{type:"text",text:"Short description or subheading"}]}]},titleWithText:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]}]},titleWithBullets:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"bullet",attrs:{indent:0,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"}]},{type:"bullet",attrs:{indent:0,fontSize:null},content:[{type:"text",text:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}]},{type:"bullet",attrs:{indent:0,fontSize:null},content:[{type:"text",text:"Ut enim ad minim veniam, quis nostrud exercitation"}]},{type:"bullet",attrs:{indent:0,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate"}]},{type:"bullet",attrs:{indent:0,fontSize:null},content:[{type:"text",text:"Dolore eu fugiat nulla pariatur"}]}]},titleWith2ColumnContent:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}]}]},{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]}]}]}]},titleWith2ColumnImageLeft:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}}]},{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}]}]}]}]},titleWith2ColumnImageRight:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}}]}]}]},titleWith3ColumnContent:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[33.33,33.34,33.33],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]}]},{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam."}]}]}]}]},titleWith3NestedCards:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]},{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Section 1"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}}]}]}]},{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Section 2"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}}]}]}]},{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Section 3"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}}]}]}]}]},titleWith3Toggles:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"toggle",content:[{type:"toggleSummary",attrs:{fontSize:"lg"},content:[{type:"text",text:"Key point toggle 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]},{type:"toggle",content:[{type:"toggleSummary",attrs:{fontSize:"lg"},content:[{type:"text",text:"Key point toggle 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]},{type:"toggle",content:[{type:"toggleSummary",attrs:{fontSize:"lg"},content:[{type:"text",text:"Key point toggle 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]}]}]},titleWith2ImageColumns:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[50,50],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}]}]}]}]},titleWith3ImageColumns:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[33.33,33.33,33.33],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor."}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo."}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."}]}]}]}]},titleWith4ImageColumns:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"gridLayout",attrs:{colWidths:[25,25,25,25],fullWidthBlock:!1},content:[{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:4},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:4},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Ut enim ad minim veniam, quis nostrud exercitation"}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:4},content:[{type:"text",text:"Item 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit"}]}]},{type:"gridCell",content:[{type:"mediaPlaceholder",attrs:{horizontalAlign:null,source:"image.custom",fullWidthBlock:!1}},{type:"heading",attrs:{horizontalAlign:null,level:4},content:[{type:"text",text:"Item 4"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Neque porro quisquam est, qui dolorem ipsum quia dolor sit"}]}]}]}]},titleWithContentAndButton:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank"},content:[{type:"heading",attrs:{horizontalAlign:"center",level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]},{type:"buttonGroup",attrs:{horizontalAlign:"center"},content:[{type:"button",attrs:{href:"",variant:"solid"},content:[{type:"text",text:"Button 1"}]}]}]},accentLeft:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"left"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]}]},accentRight:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"right"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]}]},accentTop:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"top"},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]}]},titleWithTimeline:{type:"card",attrs:{id:"sb2yzx7mi78270g",previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank",layoutTemplateColumns:null},content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}]},{type:"smartLayout",attrs:{variantKey:"timeline",options:{},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"}]}]}]}]}]},titleWithLargeBulletList:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank",layoutTemplateColumns:null},content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:25},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 3"}]}]}]}]}]},titleWithTeamPhotos:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank",layoutTemplateColumns:null},content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:10,imageSize:1,horizontalAlign:"center",imageShape:"circle"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/c1414815be03462f8862cb80f89f720d/optimized/tesla.jpg",meta:{width:820,height:709,date_file_modified:"2023/02/07 22:20:08 GMT",aspect_ratio:1.157,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#828282",orientation:"Horizontal (normal)"},name:"tesla.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Nikola Tesla"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor"},{type:"hardBreak"},{type:"text",text:"@ Tesla Inc. "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/53ab692111294834a286002e3ecfdf2b/optimized/marie-curie.jpg",meta:{width:1200,height:1631,date_file_modified:"2023/02/07 22:20:11 GMT",aspect_ratio:.736,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#3b3b3b"},name:"marie-curie.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Marie Curie"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Physicist and Chemist"},{type:"hardBreak"},{type:"text",text:"@ Radioactivity"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e5d0250f2e054ee3a4c63a8e11f39c36/optimized/thomas-edison.webp",meta:{width:360,height:450,date_file_modified:"2023/02/07 22:20:22 GMT",aspect_ratio:.8,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#606060",orientation:"Horizontal (normal)"},name:"thomas edison.webp"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Thomas Edison"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor "},{type:"hardBreak"},{type:"text",text:"@ Light bulb "}]}]}]}]}]},titleWith3Boxes:{type:"card",attrs:{previewContent:null,background:{type:"none"},container:{},cardSize:"default",layout:"blank",layoutTemplateColumns:null},content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{horizontalAlign:null,level:1},content:[{type:"text",text:"Card Title"}]},{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]}]}]}]}}},30726:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(46358),o=n(53865),i=n(62141),a=n(48745),c=function(e){var t=(0,r.CG)(i.Pu),n=(0,a.$D)(e).isCardDark;return{theme:t,isDarkOverride:void 0!==n&&n!==(0,o.wj)(t)?n:void 0,isDark:null!=n?n:(0,o.wj)(t)}}},14653:function(e,t,n){n.d(t,{v:function(){return m}});var r=n(81333),o=n(46358),i=n(24224),a=n(62141),c=n(26087),s=n(99703),l=n(93897),u=n(81170),d=n(48745),f=n(30726),p=n(19386),m=function(e){var t,n=e.node,m=e.decorations,h=e.editor,g=n.attrs,v=g.id,b=g.previewContent,y=(0,i.TZ)(),x=h.isThumbnail,j=(0,o.CG)(a.Ql),w=(0,p.D)(v),O=(0,r.Z)(w,2),k=O[0],C=O[1],P="doc"===k?c.q.DOC_VIEW:c.q.SLIDE_VIEW,S=(0,o.CG)(function(e){return(0,a.hN)(e,P)}),A=P===c.q.SLIDE_VIEW,E=(0,o.CG)(a.SU),D=(0,l.v)(m),I=(0,o.CG)((0,a.yH)(v)),z=(0,s.yv)(m),T=(0,d.$D)(m),M=T.isNested,N=T.nestedDepth,R=T.isFirstCard,L=T.isLastCard,_=T.inheritContainerEffect,H=T.inheritContainerIsDark,Z=T.inheritContainerWidth,B=T.displayLayout,F=T.insideSideLayout,W=T.cardAccentBackgroundMaskEffect,U=T.hasLayoutItem,G=(0,f.t)(m),q=G.theme,V=G.isDark,$=G.isDarkOverride,K=(0,o.CG)(a.US),Y=K.cardDimensions,X=K.defaultFullBleed,J=K.defaultContentWidth,Q=K.presentBackdrop,ee=(0,u.l)(Y),et="default"===g.cardSize?"full"===X:"full"===g.cardSize,en=(null!==(t=g.container.width)&&void 0!==t?t:J)==="lg";return{inheritContainer:{effect:_,isDark:H,width:Z},isCollapsed:I,isEditable:S,isFirstCard:R,isFocused:D,isExpandableSelected:z,isLastCard:L,isNested:M,isPresenting:"doc"!==k&&"presentCollapsed"!==k,isPresentingCurrent:"presentCurrent"===k,isPresentingParent:"presentParent"===k,isPresentMode:A,isStatic:j,isDark:V,isDarkOverride:$,isThumbnail:x,mode:P,nestedDepth:N,presentVariant:k,prevPresentVariant:C,previewContent:b,theme:q,attrs:g,cardId:v,isFullBleed:et,isWideContent:en,displayLayout:B,insideSideLayout:F,cardAccentBackgroundMaskEffect:W,cardDimensions:ee,showPresentBackdrop:void 0!==Q&&Q,hasLayoutItem:U,userZoomLevel:E,isMobileDevice:y}}},280:function(e,t,n){n.d(t,{W:function(){return s}});var r=n(4742),o=n.n(r),i=n(2784),a=n(46358),c=n(62141),s=function(){var e=(0,a.CG)(c.Pu);return(0,i.useCallback)(function(){return o()(e.config.accentBackgrounds)},[e])}},19386:function(e,t,n){n.d(t,{D:function(){return f},c:function(){return d}});var r=n(81333),o=n(2784),i=n(98875),a=n(46358),c=n(62141),s=n(26087),l=n(47592),u=n(6057),d={doc:function(){return{position:"relative",overflowY:"visible",zIndex:"auto",transitionEnd:{y:0}}},presentCollapsed:function(e,t){var n=t.y;return{y:0,position:"relative",zIndex:"auto",transition:n&&0!==n?{y:{duration:0}}:void 0}},presentPrev:function(e,t){var n=(0,r.Z)(e,2);return n[0],n[1],{y:"-100%",transitionEnd:{position:"fixed",zIndex:2,overflowY:"hidden"},transition:"relative"==t.position?{duration:0}:u.Vs}},presentNext:function(e,t){var n=(0,r.Z)(e,2);return n[0],n[1],{y:"100%",transitionEnd:{overflowY:"hidden",position:"fixed",zIndex:2},transition:"relative"==t.position?{duration:0}:u.Vs}},presentCurrent:function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1],i={y:0,overflowY:"auto",position:"fixed",zIndex:2,transition:u.Vs};return console.debug("%c[PresentVariants] Card id ".concat(o," is presentCurrent"),"background-color: deeppink",{mode:n,props:i}),i},presentParent:function(e){var t=(0,r.Z)(e,2);return t[0],t[1],{y:0,position:"fixed",zIndex:2}}},f=function(e){var t=(0,o.useRef)("doc"),n=(0,a.qr)(),r=(0,a.CG)(function(n){var r=(0,c.i2)(n)||"",o=(0,c.X9)(n),a=(0,c.xb)(n),l=(0,c.gh)(n),u=o.parents[r]||[],d=u.reduce(function(e,t){return e[t]},o.tree),f=a.includes(r),p=l===s.q.SLIDE_VIEW;if(p&&!f||!p&&f)return t.current;if(!p&&!f)return"doc";var m=a.filter(function(e){return d[e]}),h=function(e){return d[e]?m.indexOf(e)-m.indexOf(r):1/0},g=h(e),v=u.indexOf(e)>-1,b=m.some(function(t){return d[t][e]&&1>=Math.abs(h(t))}),y=r===e,x=i.VH.get("presentModeFlat"),j=o.parents[e];if(!j)return t.current;var w=j.includes(r);return b||x&&w?"presentCollapsed":v?"presentParent":y?"presentCurrent":-1===g?"presentPrev":1===g?"presentNext":"doc"});return(0,o.useEffect)(function(){t.current=r;var o=n.getState();if(!(0,c.ks)(o)){var a=i.VH.get("presentModeFlat");"presentCollapsed"!==r||a?["presentParent","presentCurrent","presentPrev","presentNext"].includes(r)&&(0,l.Nn)(e,!1):(0,l.Nn)(e,!0)}},[n,r,e]),[r,t.current]}},41261:function(e,t,n){n.d(t,{id:function(){return k.id},pL:function(){return k.pL},W4:function(){return k.W4},vD:function(){return k.vD},Zb:function(){return rd},nY:function(){return k.nY},r0:function(){return k.r0},Sf:function(){return k.Sf},jz:function(){return ra.jz},J9:function(){return ra.J9},AQ:function(){return ra.AQ},U8:function(){return k.U8},YS:function(){return ra.YS},pr:function(){return rl},pE:function(){return ra.pE}});var r,o,i=n(95235),a=n(65742),c=n(72338),s=n(27191),l=n(73805),u=n(34264),d=n(13121),f=n(13110),p=n(95472),m=n(21350),h=n(66902),g=n(87819),v=n(88646),b=n(47592),y=n(42545),x=n(3027),j=n(66558),w=!1,O=n(48745),k=n(6057),C=n(2784),P=n(98875),S=n(46358),A=n(62141),E=n(94827),D=n(53738),I=n(11919),z=n(34676),T=n(55966),M=n(98841),N=n(92527),R=n(32333),L=n(82269),_=n(67769),H=n(52322),Z=["cardId"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=function(e){var t=e.cardId,n=(0,L.Z)(e,Z),r=(0,C.useState)(0),o=r[0],i=r[1],a=(0,C.useState)(!1),c=a[0],s=a[1],l=(0,C.useState)(0),u=l[0],d=l[1];return(0,C.useEffect)(function(){var e=_.f.on("cardViewed",function(e){var n=e.cardId,r=e.interval;t===n&&i(function(e){return e+r})}),n=_.f.on("flush",function(e){var n=e.viewed;i(0),n[t]&&(s(!0),d(n[t]),setTimeout(function(){return s(!1)},2e3))});return function(){e(),n()}},[t]),(0,H.jsxs)(D.xu,F(F({},n),{},{bg:c?"#c3313a":"#f5ae00",children:[!c&&(0,H.jsxs)(D.xu,{children:["time on card: ",Math.floor(o/1e3),"s"]}),c&&(0,H.jsxs)(D.xu,{children:["Tracked View: ",u,"s"]})]}))},U=n(23015),G=n(33569),q=n(48798),V=n(55452),$=n(56581),K=n(78116),Y=n(56915),X=n(16796),J=n(64827),Q=n(92619),ee=n(2167),et=n(89190),en=n(73848),er=n(24798),eo=n(84520),ei=n(95085),ea=n(72360),ec=n(48322),es=n(80353),el=n(76648),eu=n(45650),ed=n(94659),ef=n(50390),ep=n(5766),em=n(91012),eh=n(71354),eg=n(49929),ev=n(43997),eb=n(53865),ey=n(24224),ex=n(76451),ej=n(21529),ew=n(35231),eO=n(26806),ek=n(74928),eC=n(35258),eP=n(90254),eS=["container","label","onClick","isChecked","cardBackground","docBackground","theme"];function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eD=(0,C.memo)(function(e){var t=e.editor,n=e.isOpen,r=e.isNested,o=e.setIsStyleDrawerOpen,i=e.cardContainer,a=e.cardBackground,c=e.updateAttributes,s=e.tabIndex,l=e.setTabIndex,u=(0,ev.v9)(A.XV),d=(0,ev.v9)(A.Pu),f=(0,ew.R5)(d,u),p=(0,R.z$)(),m=(0,C.useCallback)(function(e){var t;null!==(t=e.background)&&void 0!==t&&t.type&&e.background.type!==ex.E.NONE&&void 0===e.background.inside&&(e.background.inside=r,e.container=eE(eE({},e.container),{},{effect:e.background.inside?ex.v.FADED:ex.v.FROSTED})),c(e),null==p||p.track(R.AA.CARD_STYLES_UPDATED,e)},[c,p,r]),h=(0,C.useCallback)(function(){return o(!1)},[o]),g=(0,ej.A)(t),v=(0,eO.Jh)(d,i),b=(0,C.useCallback)(function(){c({container:{},background:{type:ex.E.NONE}}),null==p||p.track(R.AA.CARD_STYLES_RESET)},[c,p]),y=(0,eP.g)();return(0,H.jsxs)(K.d,{trapFocus:!1,isOpen:n,placement:"right",onClose:h,size:y,children:[(0,H.jsx)(Y.Z,{background:"none"}),(0,H.jsxs)(X.s,{onKeyDown:g,"data-in-editor-focus":!0,"data-testid":"card-style-drawer",children:[(0,H.jsx)(J.o,{}),(0,H.jsx)(Q.x,{children:(0,H.jsx)(V.cC,{id:"1CalO6"})}),(0,H.jsx)(ee.f,{overflowX:"hidden",children:(0,H.jsxs)(et.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:s,onChange:l,children:[(0,H.jsxs)(en.t,{children:[(0,H.jsxs)(er.O,{children:[(0,H.jsx)(D.xu,{mr:2,children:(0,H.jsx)(eg.G,{icon:q.re})}),(0,H.jsx)(V.cC,{id:"GtJbUa"})]}),(0,H.jsxs)(er.O,{children:[(0,H.jsx)(D.xu,{mr:2,children:(0,H.jsx)(eg.G,{icon:G.A0})}),(0,H.jsx)(V.cC,{id:"sxkWRg"})]})]}),(0,H.jsxs)(eo.n,{children:[(0,H.jsx)(ei.x,{p:0,pb:1,mt:4,children:(0,H.jsx)(eC.o,{editor:t,updateNestedAttributes:m,background:a,defaultMessage:(0,H.jsxs)(ea.b,{children:[(0,H.jsx)(ec.z,{}),(0,H.jsx)(V.cC,{id:"UvZuhl"})]}),isDark:v.isDark,isValidSource:ek.Rr})}),(0,H.jsx)(ei.x,{p:0,pb:1,mt:4,children:(0,H.jsx)(eR,{container:v,updateAttributes:m,background:a,docBackground:f,theme:d,isNested:r})})]})]})}),(0,H.jsx)(es.m,{children:(0,H.jsxs)(el.h,{w:"100%",children:[(0,H.jsx)(T.kH,{placement:"top",label:(0,H.jsx)(V.cC,{id:"qIgj0U"}),children:(0,H.jsx)(eu.z,{variant:"ghost",colorScheme:"gray",onClick:b,"data-testid":"reset-card-style",children:(0,H.jsx)(V.cC,{id:"OfhWJH"})})}),(0,H.jsx)(eu.z,{flex:"1",variant:"solid",onClick:h,children:(0,H.jsx)(V.cC,{id:"DPfwMq"})})]})})]})]})}),eI=[{isDark:!1,label:"Light",key:"color-light"},{isDark:!0,label:"Dark",key:"color-dark"}],ez=[{inside:!1,label:"Outside",key:"size-outside"},{inside:!0,label:"Inside",key:"size-inside"}],eT=[{effect:ex.v.SOLID,label:"Solid",disableInside:!0,key:"effect-solid"},{effect:ex.v.FROSTED,label:"Frosted",disableInside:!0,key:"effect-frosted"},{effect:ex.v.FADED,label:"Faded",key:"effect-faded"},{effect:ex.v.CLEAR,label:"Clear",key:"effect-clear"}],eM=[{width:"full",label:"Full",key:"full"},{width:"lg",label:"Wide",key:"lg",disabled:!0},{width:"md",label:"Default",key:"md"},{width:"sm",label:"Narrow",key:"sm",disabled:!0}],eN=function(e){var t;return null===(t=eT.find(function(t){return t.effect===e}))||void 0===t?void 0:t.disableInside},eR=function(e){var t=e.container,n=e.background,r=e.docBackground,o=e.updateAttributes,i=e.theme,a=e.isNested,c=void 0!==a&&a,s=e.enableBackgroundSizes,l=e.disableEffects,u=void 0===l?[]:l,d=n.type!==ex.E.NONE&&(!c||c&&!n.inside)&&(void 0===s||s),f=(0,P.ye)("cardWidthOptions");return(0,H.jsxs)(ed.g,{spacing:4,w:"100%",align:"stretch",children:[f&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ef.X,{size:"md",mb:2,children:(0,H.jsx)(V.cC,{id:"aFWU1n"})}),(0,H.jsx)(ep.M,{columns:2,spacing:2,children:eM.map(function(e){var a=e.width,c=e.label,s=e.key;if(!e.disabled||s===t.width){var l=eE(eE({},t),{},{width:a});return(0,H.jsx)(eL,{container:l,onClick:function(){return o({container:l})},"data-testid":"container-style-preview-".concat(s),label:c,isChecked:(t.width||"md")===a,cardBackground:n,docBackground:r,theme:i},s)}})})]}),d&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ef.X,{size:"md",mb:2,children:(0,H.jsx)(V.cC,{id:"IoQ9WT"})}),(0,H.jsx)(ep.M,{columns:2,spacing:2,children:ez.map(function(e){var a=e.inside,c=e.label,s=e.key,l=eE(eE({},n),{},{inside:a}),u=a&&eN(t.effect)?eE(eE({},t),{},{effect:ex.v.FADED}):t;return(0,H.jsx)(eL,{container:u,onClick:function(){o({background:l,container:u})},"data-testid":"container-style-preview-".concat(s),label:c,isChecked:n.inside===a,cardBackground:l,docBackground:r,theme:i},s)})})]}),(0,H.jsx)(ef.X,{size:"md",mb:2,children:(0,H.jsx)(V.cC,{id:"OXOTHU"})}),(0,H.jsx)(ep.M,{columns:2,spacing:2,children:eT.map(function(e){var a=e.effect,c=e.label,s=e.disableInside,l=e.key,d=eE(eE({},t),{},{effect:a});return s&&n.inside||u.includes(a)?null:(0,H.jsx)(eL,{container:d,onClick:function(){return o({container:d})},"data-testid":"container-style-preview-".concat(l),label:c,isChecked:t.effect===a,cardBackground:n,docBackground:r,theme:i},l)})}),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ef.X,{size:"md",mb:2,children:(0,H.jsx)(V.cC,{id:"jZlrte"})}),(0,H.jsx)(ep.M,{columns:2,spacing:2,children:eI.map(function(e){var a=e.isDark,c=e.label,s=e.key,l=eE(eE({},t),{},{isDark:a});return(0,H.jsx)(eL,{container:l,onClick:function(){return o({container:l})},"data-testid":"container-style-preview-".concat(s),label:c,isChecked:t.isDark===a,cardBackground:n,docBackground:r,theme:i},s)})})]})]})},eL=function(e){var t,n=e.container,r=e.label,o=e.onClick,i=e.isChecked,a=e.cardBackground,c=e.docBackground,s=e.theme,l=(0,L.Z)(e,eS),u=k.ZX[n.width||"md"],d="full"===n.width,f=(0,P.ye)("cardWidthOptions"),p=(0,ey.TZ)(),m=null!==(t=n.isDark)&&void 0!==t?t:(0,eb.wj)(s);return(0,H.jsxs)(eu.z,eE(eE({borderRadius:"md",display:"block",height:"auto",variant:"ghost",color:"black",onClick:o,p:1},l),{},{children:[(0,H.jsxs)(I.k,eE(eE({borderWidth:"1px",borderColor:"gray.200",borderRadius:"md"},(0,ew.wh)(c,m,!0)),{},{backgroundAttachment:"unset",_focus:{boxShadow:"outline"},p:d?0:2,overflow:"hidden",position:"relative",direction:"column",align:"center",justify:"center",children:[(0,H.jsx)(D.xu,eE(eE({},(0,ew.wh)(a,m,!0)),{},{backgroundAttachment:"unset",position:"absolute",borderRadius:"md",inset:a.inside?4:0,zIndex:0,transitionProperty:"inset",transitionDuration:"normal"})),(0,H.jsx)(D.xu,{px:3,py:d?6:4,mx:d?-1:0,transitionProperty:"background, color, opacity, backdrop-filter",transitionDuration:"normal",borderRadius:d?"none":"md",border:"1px solid transparent",sx:(0,eO.Oj)(n,s,p),color:n.isDark?"white":"gray.900",position:"relative",zIndex:1,w:f?"".concat(100*Math.min(u/k.ZX.lg,1),"%"):"100%",children:(0,H.jsx)(e_,{})})]})),(0,H.jsxs)(I.k,{align:"center",mt:1,children:[i&&(0,H.jsx)($.n,{w:3,mr:1}),(0,H.jsx)(em.x,{fontSize:"sm",fontWeight:"medium",children:r})]})]}))},e_=function(){var e="currentColor";return(0,H.jsxs)(eh.K,{spacing:1,h:"28px",children:[(0,H.jsx)(D.xu,{h:"6px",w:"50%",bg:e,borderRadius:"sm"}),(0,H.jsx)(D.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,H.jsx)(D.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,H.jsx)(D.xu,{h:"3px",w:"30%",bg:e,borderRadius:"sm"})]})},eH=n(80318),eZ=n(15723),eB=n(75695),eF=n(49626),eW=n(87254),eU=n(83906),eG=n(34638),eq=n(9088),eV=n(67887),e$=n(8283),eK=n(30893),eY=n(94301),eX=n(16975),eJ=n(54735),eQ=n(2875),e0=n(40771),e1=n(91930),e2=n(82904),e3=n(36895),e4=n(46279),e5=(0,C.memo)(function(e){var t=e.editor,n=e.appendCard,r=(0,eG.ff)("invert(0)","invert(.7) brightness(1.2)");return(0,H.jsx)(e0.q,{"data-guider-highlight":"add-card-template-menu",maxH:"400px",overflowY:"auto",children:(0,e4.ON)().map(function(e){var o=e.subcategory,i=e.items.filter(function(e){return!(0,eX.pP)(t,e,!1)});if(0!==i.length)return(0,H.jsx)(e1.k,{title:o,children:i.map(function(e){var t;return(0,H.jsx)(e2.s,{icon:(null==e?void 0:null===(t=e.previewImage)||void 0===t?void 0:t.src)&&(0,H.jsx)(e3.E,{src:e.previewImage.src,alt:e.name(),filter:r})||void 0,onClick:function(){n(e.key)},children:e.name()},e.name())})},o)})})}),e8=n(90399),e6=(0,C.memo)(function(e){var t=e.editor,n=e.getPos,r=e.display,o=e.isNested,i=(0,P.ye)("aiRewrite"),a=(0,C.useCallback)(function(e){var r=(0,eX.zm)(),o=n(),i=t.view.state.doc.nodeAt(o);if(!i){console.error("[CardDivider] Cannot append card. Node unknown");return}var a=o+i.nodeSize,c=eJ.e.blankCard;e&&(c=eJ.e[e]);var s=e?R.fe.CARD_DIVIDER_DROPDOWN:R.fe.CARD_DIVIDER,l=e?r[e]:r.blankCard;(0,eX.ZT)(l,s),t.chain().insertContentAt(a,(0,e8.Zs)(c)).focus().selectInsertedNode().run()},[t,n]),c=(0,eG.ff)("gray.100","gray.700");return(0,H.jsx)(eq.v,{isLazy:!0,children:function(e){var n=e.isOpen;return(0,H.jsx)(I.k,{contentEditable:!1,suppressContentEditableWarning:!0,className:"card-divider","data-is-nested-card":String(o),position:"absolute",zIndex:2,bottom:-4,w:"100%",justify:"center",align:"center",display:r,opacity:n?1:0,transitionProperty:"opacity",transitionDuration:"normal","data-print-hidden":!0,"data-id":"card-divider",children:(0,H.jsxs)(el.h,{size:"sm",isAttached:!0,"data-guider-highlight":"add-card-button",className:"card-divider-button-group",variant:"plain",shadow:"md",borderRadius:"md",opacity:"1",transitionProperty:"opacity",transitionDuration:"normal",children:[(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"7iE+3N"}),children:(0,H.jsx)(eV.h,{className:"insert-card-button",variant:"plain","aria-label":eW.ag._({id:"g+7nXG"}),icon:(0,H.jsx)(eg.G,{icon:eF.r8}),onClick:function(){return a()},onMouseDown:U.Wg,size:"sm",shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:c})}),i&&(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"kLZLXX"}),children:(0,H.jsx)(eV.h,{borderLeft:"none",className:"insert-ai-card-button",variant:"plain","aria-label":eW.ag._({id:"g+7nXG"}),icon:(0,H.jsx)(e$.U,{spacing:0,children:(0,H.jsx)(eg.G,{icon:eB.KC})}),onClick:function(){eQ.pw.emit("queueDesignPartnerTask",{message:eW.ag._({id:"JoMQgx",values:{placeholder:""}}),submit:!1})},onMouseDown:U.Wg,size:"sm",shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:c})}),(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"UgOs5x"}),children:(0,H.jsx)(eK.j,{borderLeft:"none",as:eV.h,color:"gray.400",icon:(0,H.jsx)(eU.v,{}),shadow:"none",fontSize:"lg",onMouseDown:U.Wg,maxW:"6",borderRadius:"md",minW:"6",borderColor:c,transitionProperty:"none","data-guider-highlight":"add-card-template-button"})}),(0,H.jsx)(eY.h,{children:(0,H.jsx)(e5,{editor:t,appendCard:a})})]})})}})}),e9=n(55921),e7=n(13720);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tn=function(e){var t,n=e.node,r=e.isCollapsed,o=e.isNested,i=e.isEditable,a=e.isMobileDevice,c=e.nestedDepth,s=e.isPresentMode,l=e.inheritContainer,u=(0,S.CG)(A.Pu),d=n.attrs,f=d.background,p=d.container,m=(0,eO.Jh)(u,r?tt(tt({},l),{},{effect:ex.v.COLLAPSED}):tt(tt({},l),p)),h=(0,C.useMemo)(function(){return(0,eO.Oj)(m,u,a)},[m,u,a]),g=m.isDark,v=m.width||"md",b=(0,P.ye)("presentFullWidth"),y=("full"===m.width||b&&s)&&!r&&!a,x=f.type!==ex.E.NONE,j=(0,S.CG)(A.XV),w=(0,ew.R5)(u,j),O=x?f:w,E=x&&!r&&!o&&!O.inside,D=(0,P.ye)("presentScaleFont"),I=(0,e7.i)({base:1,lg:1.125,xl:1.25,"2xl":1.5,"3xl":1.75})||1,z=(0,S.CG)(A.SU),T=a?1:1.125*(s?I*z:1),M=(r?.66:1)*T,N=1.75*z*(r?.66:1),R=D&&s?"clamp(1rem, ".concat(N,"vw, ").concat(1.5*N,"vh)"):"".concat(M,"rem"),L=(0,e7.i)(r&&o?[0]:o?[1]:!E||s||a?[.5,1.75]:k.yh)||0,_=((0,e7.i)(r?[0]:y&&i?{md:2,lg:6}:[.5,2])||0)-c*k.GG,H="".concat(L,"rem ").concat(_,"rem"),Z=((0,e7.i)(r?[1,1.25]:[1.5,2.5])||1)*T,B=((0,e7.i)(r||y?[1,2]:[1.5,4.5])||1)*T+(r||y?0:c*k.GG),F="".concat(Z,"rem ").concat(B,"rem"),W=T*(y?k.ZX.full:k.ZX[v])+2*B+2*_,U=g!==(0,eb.wj)(u)?g:void 0,G=tt(tt({},(0,e9.l)(u,U)),{},{"--font-size":"".concat(null!==(t=u.config.fontSize)&&void 0!==t?t:eb.ke.fontSize,"em")}),q=b&&s?"calc(".concat(k.ZX.lg," * ").concat(R,")"):y?"calc(".concat(k.ZX.md," * ").concat(R,")"):void 0;return{background:O,cardWidth:W,containerOptions:m,containerStyles:h,zoomFactor:T,foregroundColor:g?"white":"black",hasCardBackground:x,innerPadding:F,innerPaddingX:B,innerPaddingY:Z,outerPaddingY:L,isDark:g,isBackgroundOutside:E,outerPadding:H,theme:u,cssVars:G,isFullWidth:y,maxTextWidth:q,fontSize:R}},tr=function(e){var t=e.isCollapsed,n=e.isFocused,r=e.containerStyles,o=e.isFullWidth;return o&&(r.borderRadius="none"),(0,H.jsx)(D.xu,{sx:r,className:k.AX,"data-guider-highlight":"card-body",inset:0,"data-selection-ring":!0,"data-selection-background":!0,outline:n&&!t?"2px solid var(--chakra-ring-color)":void 0,right:o?"calc(1 * var(--comment-slide-margin))":0,position:"absolute",boxSizing:"content-box",transitionProperty:"border-radius, background, backdrop-filter, filter, box-shadow, inset",transitionDuration:"normal",contentEditable:!1,pointerEvents:"none"})},to=function(e){var t=e.background,n=e.containerStyles,r=(e.containerOptions,e.hasCardBackground),o=e.isCollapsed,i=e.isPresenting,a=e.isFullWidth,c=e.isDark,s=e.isBackgroundOutside,l=e.outerPaddingY,u=(0,C.useMemo)(function(){return(0,ew.wh)(t,c||!1)},[t,c]);return i&&s||o||!r?null:(0,H.jsx)(D.xu,tt(tt({className:k.j6,contentEditable:!1,position:"absolute",borderRadius:s?0:n.borderRadius,sx:{"@media print":{borderRadius:"none"}},width:s?"var(--editor-width)":void 0,insetY:"-".concat(s&&!a?l:0,"rem"),insetX:s?"auto":0,ml:s?"calc(-1 * var(--comment-slide-margin))":0,border:"1px solid transparent",boxSizing:"content-box",transitionProperty:"background, border-radius, border, width, inset, margin",transitionDuration:"normal"},u),{},{backgroundAttachment:"unset",backgroundRepeat:"no-repeat","data-outside-card-body":s}))},ti=n(26673),ta=n(420),tc=n(8635),ts=n(69551),tl=n(32371),tu=(0,tl.v0)("h4"),td=(0,C.memo)(function(e){var t=e.isCollapsed,n=e.cardId,r=e.node,o=(0,tc.c)(n),i=null==o?void 0:o.title,a=null==o?void 0:o.text,c=""===r.attrs.previewContent;return(0,H.jsxs)(D.xu,{display:t?"block":"none",contentEditable:!1,userSelect:"none","data-collapsed-card-preview":!0,children:[(0,H.jsx)(em.x,{sx:tu,noOfLines:1,mr:8,mb:2,className:(0,z.cx)(ts.A8),children:i||(void 0===o?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ta.$,{size:"sm",mr:2})," ",(0,H.jsx)(V.cC,{id:"Z3FXyt"})]}):(0,H.jsx)(em.x,{as:"span",color:"gray.400",children:(0,H.jsx)(V.cC,{id:"gLDJuJ"})}))}),(0,H.jsxs)(e$.U,{color:"var(--body-color-muted)",children:[(0,H.jsx)(em.x,{noOfLines:1,fontSize:"0.9em",children:c?(0,H.jsx)(V.cC,{id:"4m3nxQ"}):a}),c&&(0,H.jsx)(eg.G,{icon:ti.pt,size:"sm"})]})]})}),tf=n(14653),tp=n(19386),tm=n(16431),th=n(94370),tg=n(68945),tv=n(52879),tb=n(9734),ty=n(51823),tx=n(29787),tj=["containerRef"],tw=(0,H.jsx)(eg.G,{icon:tg.V9}),tO=(0,H.jsx)(eg.G,{icon:th.cN}),tk=(0,C.memo)(function(e){var t=e.cardId,n=e.docId,r=e.openStyleDrawer,o=e.getPos,i=e.editor,a=e.isFirstCard,s=e.isNested,l=e.isCollapsed,d=e.isPresentMode,f=e.isEditable,p=e.isStatic,m=e.isDark,h=e.hasCardBackground,g=e.previewContent,v=e.updateAttributes,y=e.hideManageCardMenuButton,x=e.top,j=(0,R.z$)(),w=(0,C.useCallback)(function(){if(d&&!f)i.commands.spotlightCollapseCard(o());else{(0,b.Nn)(t,!0);var e=i.state.selection,n=(0,c.Kk)(u.KH)(e);n&&n.node.attrs.id===t&&i.commands.selectNodeAtPos(o())}null==j||j.track(R.AA.CARD_COLLAPSED,{method:"collapse_button",is_present_mode:!1})},[i,o,j,t,f,d]),O=(0,tv.jj)(),k=(0,C.useMemo)(function(){return(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"kBUgVh"}),placement:"top",portalProps:{containerRef:O},children:(0,H.jsx)(eV.h,{variant:"ghost",size:"sm",pl:(0,tb.s2)()?6:0,pr:(0,tb.s2)()?2:0,onClick:w,onMouseDown:U.br,colorScheme:"gray",isRound:!0,"aria-label":eW.ag._({id:"H86f9p"}),"data-collapse-card-button":!0,icon:tw,color:m?"gray.300":"gray.600"})})},[w,O,m]),P=(0,C.useMemo)(function(){return(0,H.jsx)(eu.z,{size:"sm",variant:"ghost",position:"absolute",zIndex:2,bottom:[1,3],right:[2,4],rightIcon:(0,H.jsx)(eg.G,{icon:tm.mT}),colorScheme:"gray","data-collapse-card-button":!0,onClick:w,fontWeight:"normal",color:m?"gray.300":"gray.600",children:(0,H.jsx)(V.cC,{id:"H86f9p"})})},[w,m]),S=d&&l||p,A=S?"":(0,ty.gq)({cardId:t,docId:n,isPresentMode:d});return(0,H.jsxs)(I.k,{contentEditable:!1,onClick:U.UW,className:"manage-card-controls","data-print-hidden":!0,transitionProperty:"common",transitionDuration:"normal",opacity:y?1:0,display:"inherit",_hover:{opacity:1},sx:{"[data-collapse-card-button]":{visibility:S||!s||l?"hidden":"visible"},"[data-manage-card-menu-button]":{display:S?"none":void 0}},children:[(0,H.jsxs)(e$.U,{spacing:1,position:"absolute",top:x||[1,3],right:[2,4],zIndex:2,children:[k,!(0,tb.s2)()&&!y&&(0,H.jsx)(tC,{containerRef:O,openStyleDrawer:r,cardUrl:A,getPos:o,isNested:s,isFirstCard:a,isCollapsed:l,hasCardBackground:h,previewContent:g,updateAttributes:v})]}),s&&!l&&P]})}),tC=(0,C.memo)(function(e){var t=e.containerRef,n=(0,L.Z)(e,tj),r=(0,tx.y)(n),o=r.openManageCardMenuClickHandler,i=r.activatorRef;return(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"c44pvY"}),placement:"top",portalProps:{containerRef:t},children:(0,H.jsx)(eV.h,{ref:i,"data-manage-card-menu-button":!0,variant:"ghost",size:"sm",colorScheme:"gray",isRound:!0,icon:tO,"aria-label":eW.ag._({id:"c44pvY"}),onClick:o,onMouseDown:U.br,children:(0,H.jsx)(V.cC,{id:"7L01XJ"})})})});function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tA=(0,M.E)(D.xu),tE=function(e){var t=(0,S.TL)(),n=(0,S.qr)(),r=e.getPos,o=e.node,a=e.editor,c=e.updateAttributes,s=o.attrs,l=s.id,u=s.background,f=a.gammaDocId,p=(0,R.z$)(),m=(0,A.P7)(n.getState()),h=(0,P.ye)("presentModeFlat"),g=(0,P.ye)("debugCardViewed"),v=(0,P.ye)("renderCollapsedCards"),y="debugScreenshot"in window,x=(0,tf.v)(e),j=x.isCollapsed,w=x.isPresentMode,O=x.isPresenting,E=x.isPresentingCurrent,M=x.isNested,L=x.isFocused,_=x.isEditable,Z=x.isExpandableSelected,B=x.isMobileDevice,F=(0,P.ye)("realUserMetrics");(0,N.MI)(F,l,x.presentVariant,x.prevPresentVariant);var G=(0,C.useState)(!1),q=G[0],V=G[1],$=(0,C.useState)(0),K=$[0],Y=$[1],X=(0,C.useCallback)(function(e){V(!0),Y(e)},[]),J=(0,C.useCallback)(function(e){j&&(e.stopPropagation(),w&&!_?(t((0,A.Qx)({attached:!1})),a.commands.descendIntoCurrentCard(r(),"push"),null==p||p.track(R.AA.CARD_EXPANDED,{is_present_mode:!0,method:"click"})):((0,b.Nn)(l,!1),setTimeout(function(){if(_&&!a.isDestroyed){var e=r();a.commands.selectInsideNodeAtPos(e)}},50),null==p||p.track(R.AA.CARD_EXPANDED,{is_present_mode:!1,method:"click"})))},[a,t,l,r,j,_,w,p]),Q=tn(tS({node:o},x)),ee=Q.isDark;console.debug("%c[CardComponent] Card id ".concat(l," is rerendering"),"background-color: aqua",{cardState:x,cardStyles:Q});var et=(0,C.useCallback)(function(){(0,A.wc)(n.getState())&&(t((0,A.e)({isEditingInSlideView:!0})),t((0,A.Qx)({attached:!1})),a.commands.turnOffSpotlight())},[a,t,n]),en=w&&M&&!h,er=!B&&!Q.isFullWidth&&!j&&(en||!w&&x.isFirstCard&&!Q.isBackgroundOutside);return(0,H.jsx)(eH.lO,tS(tS({as:"div",className:k.vD,style:{minHeight:E?"100vh":0},hideComments:!j,readOnly:j},e),{},{children:(0,H.jsxs)(tA,{className:(0,z.cx)(j?"card-collapsed":"card-expanded",E&&k.aY),"data-card-id":l,"data-card-scroll-element":!0,width:"100%",transition:m?k.Vs:{},transitionProperty:"transform, padding-left, padding-right",custom:[x.mode,l],animate:x.presentVariant,"data-animate-value":x.presentVariant,variants:tp.c,visibility:x.isPresentingParent?"hidden":"visible",top:0,left:0,overflowY:E?"auto":void 0,overflowX:E?"hidden":void 0,height:"100%",onDragOver:U.Gb,onClick:function(e){E&&e.target&&!e.target.closest('[data-card-body="'.concat(l,'"]'))&&((0,A.JA)(n.getState())?t((0,A.e)({isEditingInSlideView:!1})):M&&(a.commands.ascendUpToParentCard(),null==p||p.track(R.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"outside_click"})))},children:[(0,H.jsxs)(I.k,{"data-testid":"card-".concat(l),justify:"center",align:"center",direction:"column",minH:O?"var(--100vh)":"0vh",paddingTop:er?k.Sf:void 0,paddingBottom:w&&er?k.Sf:void 0,position:"relative",cursor:j?"pointer":_?void 0:"default",onClick:J,"data-content-reference":!!Q.isFullWidth||void 0,children:[Q.isFullWidth&&(0,H.jsxs)(I.k,{position:"absolute",w:"var(--editor-width)",h:"100%",children:[(0,H.jsx)(to,tS(tS({},x),Q)),(0,H.jsx)(tr,tS(tS({},x),Q))]}),(0,H.jsx)(T.Wk,{isDark:ee||!1,children:(0,H.jsx)(D.xu,{padding:Q.outerPadding,width:j?"100%":"".concat(Q.cardWidth,"rem"),transitionProperty:"width",transitionDuration:m?"".concat(k.nY,"ms"):void 0,maxW:j?"100%":"var(--editor-width)","data-content-reference":!Q.isFullWidth||void 0,children:(0,H.jsxs)(I.k,{"data-card-body":l,className:(0,z.cx)(k.ar,Z&&"expandable-selected"),position:"relative",justify:"center",align:"center",borderRadius:Q.containerStyles.borderRadius,_hover:j?(0,i.Z)({boxShadow:"md"},".".concat(k.AX),{filter:ee?"brightness(1.2)":"brightness(0.9)"}):{},transitionProperty:"box-shadow",transitionDuration:"normal",children:[(0,H.jsx)(eZ.A,tS(tS({},e),{},{zIndex:3,"data-testid":"card-drag-handle",left:M&&j?-6:2,top:M&&j?0:3})),(g||y)&&(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(I.k,{left:2,top:2,zIndex:"overlay",position:"absolute",opacity:.5,contentEditable:!1,children:[(0,H.jsx)(D.xu,{bg:"yellow",px:2,mr:2,borderRadius:"md",children:l}),(0,H.jsxs)(D.xu,{bg:"trueblue.200",px:2,mr:2,borderRadius:"md",children:["f:",r()," t:",r()+o.nodeSize]}),(0,H.jsx)(W,{cardId:l,px:2,borderRadius:"md"})]})}),!Q.isFullWidth&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(to,tS(tS({},x),Q)),(0,H.jsx)(tr,tS(tS({},x),Q))]}),(0,H.jsx)(D.xu,{w:"100%",position:"relative",transform:E?"translateZ(0)":void 0,onDoubleClick:w&&!_?et:void 0,children:(0,H.jsxs)(D.xu,{margin:Q.innerPadding,spellCheck:L,color:Q.foregroundColor,children:[(0,H.jsx)(td,{isCollapsed:j,cardId:l,node:o}),(!j||v)&&(0,H.jsx)(D.xu,{fontSize:Q.fontSize,opacity:j?0:1,height:j?"0px":"auto",transitionProperty:"font-size, opacity, height",transitionDuration:m?"".concat(k.nY,"ms"):void 0,css:tS(tS({},Q.cssVars),{},{"--comment-padding":"".concat(Q.innerPaddingX,"rem"),"--font-size":Q.fontSize}),children:(0,H.jsx)(d.ms,{className:(0,z.cx)(k.pL,ee&&"is-dark",L&&"is-focused",Q.isFullWidth&&"is-full-width"),style:j?{display:"none"}:{}})})]})}),(0,H.jsx)(tk,tS(tS({docId:f,openStyleDrawer:X,hasCardBackground:Q.hasCardBackground},x),e))]})})}),(0,H.jsx)(e6,tS(tS({},e),{},{isNested:M,display:!_||j||M||w?"none":"flex"}))]}),(0,H.jsx)(eD,{editor:a,isOpen:q,isNested:M,setIsStyleDrawerOpen:V,tabIndex:K,setTabIndex:Y,updateAttributes:c,cardBackground:u,cardContainer:Q.containerOptions})]})}))},tD=n(40618),tI=n(99638),tz=n(11723),tT=n(7328),tM=n(28165),tN=n(9121),tR=n(14115),tL=["borderRadius"];function t_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tZ=(0,tM.keyframes)(r||(r=(0,tT.Z)(["\n  0% {\n    margin-inline: 0;\n  }\n  100% {\n    margin-inline: var(--nested-card-margin);\n  }\n"]))),tB=["0.5rem","2.5rem"],tF=function(e){var t=e.attrs,n=e.isFullBleed,r=e.isNested,o=e.isPresentMode,i=e.isEditable,a=e.isMobileDevice,c=e.isFirstCard,s=e.isLastCard,l=e.isFocused,u=e.isDarkOverride,d=e.isThumbnail,f=e.showPresentBackdrop,p=e.theme,m=e.children,h=t.id,g=t.container,v=(0,tN.c)(p),b=(0,eO.BA)(p,g),y=tH(tH({},r?v.clickableSx:void 0),v.cardSx),x=y.borderRadius,j=(0,L.Z)(y,tL),w=o&&!r,O=(0,e9.l)(p,u,g.background?b:void 0),C=n?{width:r?"var(--card-width)":"100%"}:{mt:!c||a||o||d?void 0:tB,mb:!s||a||o||i||d?void 0:tB,zIndex:r?1:void 0,width:"var(--card-width)"},P=tR.cx?0:k.nY;return(0,H.jsxs)(I.k,tH(tH(tH({className:(0,z.cx)(k.ar),"data-card-body":h,"data-selection-ring":!0,"data-guider-highlight":"card-body","data-content-reference":!0,"data-hide-comments":o&&!f,transitionProperty:"min-height, min-width, width, font-size, padding",transitionDuration:"".concat(P,"ms"),fontSize:"var(--font-size)",animation:r?"".concat(tZ," ").concat(P,"ms ease-out forwards"):void 0,position:"relative"},C),w?{minW:f?"auto":"100%",maxW:"var(--card-max-width)",minH:"var(--card-min-height)",my:"auto"}:{minW:"0%",minH:"var(--card-min-height)"}),{},{css:tH({"--card-border-radius":"var(--border-radius-override, ".concat(x,")")},O),justify:"center",borderRadius:"var(--card-border-radius)",pl:n&&!r?"var(--editor-padding-left)":void 0,pr:n&&!r?"var(--editor-padding-right)":void 0,children:[(0,H.jsx)(D.xu,{position:"absolute",inset:"0",sx:j,borderRadius:"inherit",contentEditable:!1,zIndex:o?-1:void 0,outline:l?"2px solid var(--chakra-ring-color)":void 0,outlineOffset:n&&!o?"-3px":void 0}),m]}))},tW=n(63784);function tU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tG=function(){return(0,H.jsx)(D.xu,{position:"absolute",inset:"0",pointerEvents:"none",overflow:"hidden",display:{base:"none",lg:"block"},children:(0,H.jsxs)(D.xu,{position:"absolute",top:"var(--card-min-height)",left:"0",w:"100%",h:"1px",borderBottom:"2px dashed",borderBottomColor:"var(--body-color)",opacity:"0.15",children:[(0,H.jsx)(tq,{left:0}),(0,H.jsx)(tq,{right:0})]})})},tq=function(e){return(0,H.jsx)(T.kH,{placement:"top",w:"250px",label:(0,H.jsx)(V.cC,{id:"0Gqs/k",components:{0:(0,H.jsx)(em.x,{}),1:(0,H.jsx)(em.x,{color:"gray.500"})}}),children:(0,H.jsx)(D.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"absolute",w:"var(--card-inner-padding-x)",h:"".concat(20,"px"),top:"-".concat(10,"px"),pointerEvents:"auto",cursor:"help"},e))})},tV=n(16568);function t$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t$(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tY=function(e){var t=e.displayLayout,n=e.children,r=e.isExpandableSelected,o=e.isFocused,a=e.isFullBleed,c=e.isFirstCard,s=e.isPresentMode,l=(e.isNested,e.isEditable),u=e.attrs,d=e.hasLayoutItem,f=e.onDoubleClick,p=e.cardDimensions;e.showPresentBackdrop;var m=(0,S.CG)(A.Pu).logoUrl&&(0,tb.mr)(),h=(0,y.$U)(t),g=(0,y.jS)(t),v=u.layoutTemplateColumns;return(0,H.jsxs)(D.xu,{className:(0,z.cx)(tV.My,r&&"expandable-selected"),onDoubleClick:f,w:"var(--card-width)",maxW:"100%",position:"relative",spellCheck:o,cursor:"auto",color:"var(--body-color)",sx:(0,i.Z)({},"> .".concat(k.pL),{padding:d?void 0:"var(--card-inner-padding)",'> [data-node-view-content-inner="card"]':tK(tK({},d?tK(tK(tK({display:"grid",alignItems:"stretch",justifyContent:"stretch",minH:"100%",transitionDuration:"".concat(k.nY,"ms"),transitionProperty:"grid-template-columns, min-height"},h.grid),v&&h.allowResizing&&{gridTemplateColumns:v}),g):{display:"block",mx:"auto",maxW:"var(--max-content-width)",width:"100%",boxSizing:"border-box",minW:0}),{},{"> .node-cardLayoutItem, > .node-cardAccentLayoutItem":{"> [data-node-view-wrapper]":{"> .card-layout-cell-bg":{"> [data-node-view-content]":{"> [data-node-view-content-inner]":{maxWidth:"var(--max-content-width)",margin:"auto",marginTop:a&&c&&l&&!s?"2rem":"auto"},padding:"var(--card-inner-padding)",pb:m?"calc(".concat(tW.l9," + ").concat(tW.mq,")"):void 0}}}}})}),children:[n,o&&p.aspectRatio&&(0,H.jsx)(tG,{})]})};function tX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tQ=function(e){var t=e.attrs,n=e.children,r=e.presentVariant,o=e.isPresentMode,i=e.isDark,a=e.isNested,c=e.isThumbnail,s=e.css,l=t.background,u=t.id,d=(0,S.CG)(A.P7),f=a||c?void 0:(0,ew.wh)(l,i);return(0,H.jsx)(I.k,tJ(tJ({onDragOver:U.Gb,top:0,left:0,position:"relative",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",cursor:"default","data-animate-value":r,fontSize:"var(--editor-font-size, 1rem)",py:"var(--card-outer-padding-y)",pl:"var(--card-outer-padding-left)",pr:"var(--card-outer-padding-right)","data-card-id":u,"data-card-scroll-element":!0,overflow:o&&!a?"hidden auto":void 0,className:(0,z.cx)(k.vD,"card-expanded",o&&k.aY,o&&"card-present-mode card-present-mode--".concat(r)),transitionProperty:"transform, padding",transitionDuration:"".concat(d?k.id:0,"ms")},f),{},{css:s,children:(0,H.jsx)(T.Wk,{isDark:i,children:n})}))};tQ.displayName="CardContainer";var t0=function(e){var t=(0,P.ye)("debugCardViewed"),n=e.getPos,r=e.node,o=r.attrs.id;return t?(0,H.jsxs)(I.k,{left:8,top:2,zIndex:"overlay",position:"absolute",pointerEvents:"none",opacity:.5,contentEditable:!1,children:[(0,H.jsx)(D.xu,{bg:"yellow",px:2,mr:2,borderRadius:"md",children:o}),(0,H.jsxs)(D.xu,{bg:"trueblue.200",px:2,mr:2,borderRadius:"md",children:["f:",n()," t:",n()+r.nodeSize]}),(0,H.jsx)(W,{cardId:o,px:2,borderRadius:"md"})]}):null},t1=n(18504),t2=n(74637),t3=n(55479),t4=n(84103),t5=n(54728),t8=n(51434),t6=n(91333),t9=n(40110),t7=n(85982),ne=n(56143),nt=n(47678),nn=n(25756),nr=n(58539),no=n(36471),ni=n(60831),na=n(5811),nc=n(93319),ns=["icon","label","children"];function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nd=function(e){var t=e.icon,n=e.label,r=e.children,o=(0,L.Z)(e,ns);return(0,H.jsxs)(I.k,nu(nu({alignItems:"center"},o),{},{children:[(0,H.jsx)(eg.G,{fixedWidth:!0,icon:t}),(0,H.jsx)(em.x,{ml:2,children:n}),(0,H.jsx)(nc.L,{}),r]}))},nf=function(e){var t=e.editor,n=e.accentPos,r=e.cardId,o=e.hasAccentImage,i=e.isBehindLayout,a=(0,C.useCallback)(function(){n&&t.commands.updateAttributesAtPos(n,{background:{type:ex.E.NONE}})},[t,n]),c=(0,C.useCallback)(function(){na.T.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:r})},[r]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(nd,{label:i?(0,H.jsx)(V.cC,{id:"23c2Uw"}):(0,H.jsx)(V.cC,{id:"e5Sy/T"}),icon:ni.Vm,children:(0,H.jsx)(e$.U,{spacing:1,children:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(eu.z,{size:"sm",variant:"link",onClick:c,colorScheme:"black",children:o?(0,H.jsx)(V.cC,{id:"ePK91l"}):(0,H.jsx)(V.cC,{id:"PNapeY"})}),o&&(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"sGYCGx"}),placement:"top",children:(0,H.jsx)(eV.h,{"aria-label":eW.ag._({id:"sGYCGx"}),size:"sm",variant:"link",onClick:a,colorScheme:"red",icon:(0,H.jsx)(eg.G,{icon:no.$})})})]})})})})},np=n(37480),nm=n(2885),nh=function(e){var t=e.editor,n=e.getPos,r=e.onAddOrEditClick,o=e.isDisabled,i=e.hasBackdrop,a=(0,C.useCallback)(function(){t.commands.updateAttributesAtPos(n(),{background:{type:ex.E.NONE}})},[t,n]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(nd,{icon:nm.UH,label:(0,H.jsx)(V.cC,{id:"ANn8Qe"}),color:o?"gray.500":void 0,children:[o&&(0,H.jsx)(T.kH,{placement:"top",label:(0,H.jsx)(V.cC,{id:"ZnOCf5"}),isDisabled:!o,children:(0,H.jsx)(eg.G,{fixedWidth:!0,icon:np.Aq})}),(0,H.jsx)(e$.U,{spacing:1,children:!o&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(eu.z,{size:"sm",variant:"link",onClick:r,colorScheme:"black",children:i?(0,H.jsx)(V.cC,{id:"ePK91l"}):(0,H.jsx)(V.cC,{id:"PNapeY"})}),i&&(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"IfZ6hd"}),placement:"top",children:(0,H.jsx)(eV.h,{"aria-label":eW.ag._({id:"IfZ6hd"}),size:"sm",variant:"link",onClick:a,colorScheme:"red",icon:(0,H.jsx)(eg.G,{icon:no.$})})})]})})]})})},ng=n(75821),nv=n(63849),nb=n(2575),ny=n(54074);function nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nx(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nw=function(e){var t,n,r=e.editor,o=e.accentPos,i=e.accentBackground,a=e.effect,c=(0,C.useCallback)(function(e){if(o&&i){var t={background:{mask:nj(nj({},i.mask),{},{effect:e})}};r.commands.updateNestedAttributesAtPos(o,t)}},[r,i,o]),s=null!=a?a:nr.xO.effect,l=null!==(t=null===(n=ny.$v.find(function(e){return e.value===a}))||void 0===n?void 0:n.label)&&void 0!==t?t:"Faded";return(0,H.jsx)(nd,{label:(0,H.jsx)(V.cC,{id:"u4YODQ"}),icon:ng.Dh,children:(0,H.jsxs)(eq.v,{isLazy:!0,children:[(0,H.jsx)(eK.j,{as:eu.z,variant:"plain",size:"sm",minW:"128px",boxShadow:"none",textAlign:"left",rightIcon:(0,H.jsx)(eU.v,{}),children:l}),(0,H.jsx)(e0.q,{children:(0,H.jsx)(nv._,{value:s,type:"radio",onChange:c,children:ny.$v.map(function(e){var t=e.value,n=e.label;return(0,H.jsx)(nb.i,{value:t,children:n},t)})})})]})})},nO=n(87519),nk=n(98621),nC=n.n(nk),nP=n(56345);function nS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nS(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nE=function(e){var t,n,r=e.editor,o=e.attrs,i=e.getPos,a=(0,S.CG)(A.Pu);return{currentColor:(0,ew.dF)(null===(t=o.container)||void 0===t?void 0:t.background),themeCardColor:null!==(n=(0,eb.yU)(a))&&void 0!==n?n:(0,eO.BA)(a),setCardColor:function(e){var t=o.container,n=e?{background:{type:ex.E.COLOR,color:{hex:e}}}:{background:void 0};void 0!==t.isDark&&(n.isDark=void 0),r.commands.updateNestedAttributesAtPos(i(),{container:nA(nA({},t),n)})}}},nD=function(e){var t=e.editor,n=e.attrs,r=nE({editor:t,attrs:n,getPos:e.getPos}),o=r.setCardColor,i=r.currentColor,a=r.themeCardColor,c=void 0===i;return(0,H.jsx)(nd,{icon:nO.MX,label:"behind"===n.layout?(0,H.jsx)(V.cC,{id:"cA3hQ0"}):(0,H.jsx)(V.cC,{id:"9d2iLQ"}),children:(0,H.jsxs)(eq.v,{isLazy:!0,children:[(0,H.jsx)(eK.j,{as:eu.z,variant:"plain",size:"sm",boxShadow:"none",minW:"128px",textAlign:"left",rightIcon:(0,H.jsx)(eU.v,{}),children:(0,H.jsxs)(I.k,{as:"span",alignItems:"center",gap:2,children:[(0,H.jsx)(nI,{color:null!=i?i:a}),(0,H.jsx)(em.x,{as:"span",fontFamily:c?void 0:"mono",textTransform:c?void 0:"uppercase",fontSize:"sm",children:c?(0,H.jsx)(V.cC,{id:"ovBPCi"}):nC()(i).toHexString()})]})}),(0,H.jsx)(e0.q,{overflow:"hidden",children:(0,H.jsx)(nP.M,{currentColor:null!=i?i:a,setColor:o,source:"CardColor"})})]})})},nI=function(e){var t=e.color;return(0,H.jsx)(D.xu,{as:"span",alignSelf:"center",boxSize:5,borderRadius:"md",border:"2px solid",borderColor:"gray.300",bgColor:null!=t?t:"#FFFFFF"})},nz=n(97968),nT=n(71193),nM=function(e){var t=e.editor,n=e.getPos,r=e.isWideContent,o=(0,C.useCallback)(function(){t.commands.updateNestedAttributesAtPos(n(),{container:{width:r?"md":"lg"}})},[t,n,r]);return(0,H.jsx)(nd,{icon:nz.dH,label:(0,H.jsx)(V.cC,{id:"lklIf1"}),children:(0,H.jsx)(nT.r,{isChecked:r,onChange:o})})},nN=n(65903),nR=n.n(nN),nL=n(280),n_=["blank","top","left","right","behind"],nH=function(e){var t=e.layout,n=e.editor,r=e.getPos,o=e.edgeLayoutsEnabled,i=(0,nL.W)(),a=(0,C.useCallback)(function(e){"blank"===e?n.commands.setCardLayout(r(),e):n.commands.setCardLayout(r(),e,i)},[n,r,i]),c=n_.filter(function(e){return o||["blank","behind"].includes(e)});return(0,H.jsx)(el.h,{mb:2,children:c.map(function(e){var n="blank"===e?eW.ag._({id:"6JcK6b"}):"behind"===e?eW.ag._({id:"SQOVlA"}):eW.ag._({id:"T8aKxO",values:{0:nR()(e)}});return(0,H.jsx)(T.kH,{label:n,placement:"top",children:(0,H.jsx)(eV.h,{"aria-label":n,flex:1,variant:"plain",size:"md",onClick:function(){return a(e)},icon:(0,H.jsx)(nZ,{layout:e,isSelected:t===e}),boxShadow:"none",background:t===e?"trueblue.50":"white"})},e)})})},nZ=function(e){var t=e.layout,n=e.isSelected?"trueblue.400":"gray.300",r=null;return"top"===t?r=(0,H.jsx)(D.xu,{height:"0.375rem",width:"100%",background:n}):"left"===t?r=(0,H.jsxs)(I.k,{height:"100%",minH:"100%",children:[(0,H.jsx)(D.xu,{width:"0.625rem",minH:"100%",background:n}),(0,H.jsx)(D.xu,{flex:"1",minH:"100%"})]}):"right"===t&&(r=(0,H.jsxs)(I.k,{height:"100%",minH:"100%",children:[(0,H.jsx)(D.xu,{flex:"1",minH:"100%"}),(0,H.jsx)(D.xu,{width:"0.625rem",minH:"100%",background:n})]})),(0,H.jsx)(D.xu,{boxSizing:"border-box",height:"1.25rem",width:"1.75rem",border:"2px solid",borderRadius:"sm",borderColor:n,background:"behind"===t?n:"none",children:r})},nB=n(69943),nF=function(e){var t=e.editor,n=e.getPos,r=e.isFullWidth,o=(0,C.useCallback)(function(){t.commands.updateAttributesAtPos(n(),{cardSize:r?"contained":"full"})},[t,n,r]);return(0,H.jsx)(nd,{icon:nB.r9,label:(0,H.jsx)(V.cC,{id:"BquNv8"}),children:(0,H.jsx)(nT.r,{isChecked:r,onChange:o})})},nW=n(78194),nU=n(27948),nG=["openBackgroundTab"];function nq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nq(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n$=(0,C.memo)(function(e){var t,n,r=e.editor,o=e.getPos,i=e.attrs,a=e.accentBackgroundMaskEffect,c=e.displayLayout,s=e.insideSideLayout,l=e.isNested,u=e.isFullBleed,d=e.isWideContent,f=e.topMargin,p=(0,nn.lv)(),m=p.color,h=p.bg,g=p.hoverColor,v=p.hoverBg,b=p.borderColor,x=(0,C.useRef)(null),j=(0,S.CG)((0,nW.v3)(i.id)),w=(0,S.TL)(),O=(0,C.useCallback)(function(){w((0,nW.UA)())},[w]),k=(0,C.useCallback)(function(){w((0,nW.zD)({cardId:i.id}))},[w,null==i?void 0:i.id]);(0,t2.O)({ref:x,handler:function(e){if(j){var t,n=e.target,r=null==n?void 0:n.closest('[data-card-styles-menu-trigger="'.concat(i.id,'"]')),o=!!(null!=n&&null!==(t=n.closest(".chakra-modal__content-container"))&&void 0!==t&&t.querySelector("[data-edit-background-drawer]"));r||o||O()}}});var A=(0,P.ye)("borderless"),E=(0,P.ye)("cardWidthOptions"),I=(0,P.ye)("pageSetup"),z=(0,y.gF)(r.state.doc.resolve(o())),M=(null===(t=z.accent)||void 0===t?void 0:t.pos)||null,N=null===(n=z.accent)||void 0===n?void 0:n.node.attrs.background,R=N&&N.type!==ex.E.NONE,_="none"!==i.background.type,Z="default"!==i.cardSize||_||R||i.container.width||i.container.background||"blank"!==c,B="behind"===c&&R&&(0,nr.Zi)(N),F=(0,t3.p)(),W=(0,nU.a)(),G=W.openBackgroundTab,q=(0,L.Z)(W,nG),$=(0,C.useCallback)(function(e){(0,nt.y)(r,o(),e)},[r,o]),K=(0,C.useCallback)(function(){var e={};_&&(e.background={type:ex.E.NONE,source:void 0}),e.cardSize=void 0,e.container=nV(nV({},i.container),{},{width:void 0}),i.container.background&&(e.container=nV(nV({},i.container),{},{background:void 0})),"blank"!==c&&(e.layout="blank"),M?r.chain().updateAttributesAtPos(o(),e).updateNestedAttributesAtPos(M,{background:{type:ex.E.NONE}}).run():r.commands.updateAttributesAtPos(o(),e);var t=eW.ag._({id:"rQHMjX"}),n=eW.ag._({id:"9uI/rE"}),a=F({title:(0,H.jsxs)(e$.U,{children:[(0,H.jsx)(em.x,{children:t}),(0,H.jsx)(t4.r,{textDecoration:"underline",onClick:function(){(0,ne.Yw)(r.state),F.close(a)},children:n})]}),status:"info",duration:3e3,position:"top"})},[_,i.container,c,M,r,o,F]);return(0,H.jsx)(T.Wk,{isDark:!1,children:(0,H.jsxs)(e$.U,{spacing:1,left:8,zIndex:4,position:"absolute",mt:f,onClick:U.UW,contentEditable:!1,children:[(0,H.jsxs)(t5.J,{isLazy:!0,returnFocusOnClose:!1,isOpen:j,onClose:O,closeOnBlur:!1,children:[(0,H.jsx)(T.kH,{label:(0,H.jsx)(V.cC,{id:"F153E+"}),placement:"top",shouldWrapChildren:!0,children:(0,H.jsx)(t8.x,{children:(0,H.jsxs)(eu.z,{"data-card-styles-menu-trigger":i.id,height:tV.fD,fontWeight:"900",alignItems:"center",fontFamily:"Inter, sans-serif",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:b,color:m,boxShadow:"sm",cursor:"pointer",fontSize:"14px",bg:h,px:.5,_hover:{color:g,background:v},onClick:k,children:[(0,H.jsx)(D.xu,{as:"span",display:"inline-flex",mr:1,children:(0,H.jsx)(eg.G,{icon:t1.q2})}),(0,H.jsx)(eU.v,{})]})})}),(0,H.jsx)(eY.h,{children:(0,H.jsxs)(t6.y,{"data-card-styles-menu":!0,ref:x,maxWidth:"320px",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,H.jsxs)(eh.K,{spacing:5,p:4,children:[(0,H.jsx)(nH,{editor:r,layout:c,getPos:o,edgeLayoutsEnabled:!s}),"blank"!==c&&(0,H.jsx)(nf,{editor:r,accentPos:M,cardId:i.id,hasAccentImage:!!R,isBehindLayout:"behind"===c}),B&&(0,H.jsx)(nw,{editor:r,accentBackground:N,accentPos:M,effect:a}),(0,H.jsx)(nD,{editor:r,attrs:i,getPos:o}),!l&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(t9.i,{my:"3"}),A&&(0,H.jsx)(nF,{editor:r,getPos:o,isFullWidth:u}),E&&(0,H.jsx)(nM,{editor:r,getPos:o,isWideContent:d}),(0,H.jsx)(nh,{editor:r,getPos:o,onAddOrEditClick:G,hasBackdrop:_,isDisabled:u})]})]}),(0,H.jsxs)(t7.E,{px:5,py:3,bg:"gray.100",mx:-1,mb:-1,justify:Z?"space-between":"center",alignItems:"center",borderBottomRadius:"xl",children:[Z&&(0,H.jsx)(t7.U,{children:(0,H.jsx)(eu.z,{onClick:K,variant:"link",size:"sm",colorScheme:"gray",my:0,children:(0,H.jsx)(V.cC,{id:"6hU6uw"})})}),I&&(0,H.jsx)(t7.U,{children:(0,H.jsx)(eu.z,{onClick:function(){O(),eQ.pw.emit(eQ.TI.OPEN_PAGE_SETUP,"cards")},variant:"link",size:"sm",colorScheme:"gray",my:0,children:(0,H.jsx)(V.cC,{id:"fvaOtb"})})})]})]})})]}),(0,H.jsx)(nU.S,nV({editor:r,updateNestedAttributes:$,background:i.background,container:i.container},q))]})})}),nK=n(79183);function nY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nY(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nJ=function(e){var t=(0,S.TL)(),n=(0,S.qr)(),r=e.getPos,o=e.editor,i=e.decorations,a=o.gammaDocId,c=(0,tf.v)(e),s=c.isPresentMode,l=c.isNested,u=c.isFocused,f=c.isEditable,p=c.isFirstCard,m=c.cardAccentBackgroundMaskEffect,h=c.cardId,g=c.isFullBleed,v=(0,nK.H)(c),b=(0,P.ye)("realUserMetrics");(0,N.MI)(b,h,c.presentVariant,c.prevPresentVariant);var y=(0,C.useCallback)(function(){(0,A.wc)(n.getState())&&(t((0,A.e)({isEditingInSlideView:!0})),t((0,A.Qx)({attached:!1})),o.commands.turnOffSpotlight())},[o,t,n]),x=(0,tI.WE)(i),j=(0,tz.EL)(i),w=(0,S.CG)((0,nW.v3)(h)),O=f&&(x||u||j||w),E=p&&g&&!s?"4rem":3;return(0,H.jsx)(eH.lO,nX(nX({as:"div",style:{minHeight:s&&!l?"100vh":0},hideComments:!0},e),{},{children:(0,H.jsxs)(tQ,nX(nX({},c),{},{css:v,children:[(0,H.jsx)(tF,nX(nX({},c),{},{children:(0,H.jsxs)(tY,nX(nX({},c),{},{onDoubleClick:s&&!f?y:void 0,children:[(0,H.jsx)(t0,nX({},e)),(0,H.jsx)(eZ.A,nX(nX({},e),{},{"data-testid":"card-drag-handle",zIndex:3,left:2,top:E,width:"18px",height:tV.fD,label:(0,H.jsxs)(ed.g,{spacing:0,children:[(0,H.jsx)(em.x,{color:"gray.400",children:(0,H.jsx)(V.cC,{id:"63lY3K",components:{0:(0,H.jsx)(em.x,{color:"white",as:"span"})}})}),(0,H.jsx)(em.x,{color:"gray.400",children:(0,H.jsx)(V.cC,{id:"COhrZ5",components:{0:(0,H.jsx)(em.x,{color:"white",as:"span"})}})})]})})),O&&(0,H.jsx)(n$,nX(nX({editor:o,getPos:r},c),{},{accentBackgroundMaskEffect:m,topMargin:E})),(0,H.jsx)(d.ms,{className:(0,z.cx)(k.pL,u&&"is-focused",l&&"is-nested",(s||g)&&"is-full-width",g&&!s&&"is-borderless",c.isDark&&"is-dark")}),l&&(0,H.jsx)(tk,nX(nX({top:[1,3],docId:a,hasCardBackground:!1,hideManageCardMenuButton:!0},c),e))]}))})),(0,H.jsx)(tD.a,{children:(0,H.jsx)(e6,{display:!f||l||s?"none":"flex",editor:o,getPos:r,isNested:l})})]}))}))},nQ=n(15438),n0=n(95896),n1=n(78308),n2=n(59910),n3=n(16531),n4=n(35368),n5=n.n(n4)()(o),n8=n(99703);function n6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n6(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n7=(0,tl.v0)("h4"),re=(0,C.memo)(function(e){var t=e.decorations,n=e.editor,r=e.getPos,o=e.node,i=(0,n0.z$)(),a=(0,S.TL)(),c=(0,tf.v)(e),s=c.cardId,l=c.isPresentMode,u=c.isEditable,d=c.isMobileDevice,f=(0,tc.T)({node:o,cardId:s}),p=f.title,m=f.text,h=e.node.attrs,g=h.previewContent,v=h.container,y=""===g,x=null==p?void 0:p.replaceAll(n3.V,function(e){return'<span class="emoji">'.concat(e,"</span>")}),j=(0,S.CG)(A.Pu),w=(0,ew.dF)(v.background),O=w&&(0,e9.l)(j,void 0,w),P=(0,n8.yv)(t),E=(0,C.useCallback)(function(e){e.stopPropagation(),l&&!u?(a((0,A.Qx)({attached:!1})),n.commands.descendIntoCurrentCard(r(),"push"),null==i||i.track(n1.AA.CARD_EXPANDED,{is_present_mode:!0,method:"click"})):((0,b.Nn)(s,!1),setTimeout(function(){if(u&&!n.isDestroyed){var e=r();n.commands.selectInsideNodeAtPos(e)}},50),null==i||i.track(n1.AA.CARD_EXPANDED,{is_present_mode:!1,method:"click"}))},[s,l,u,a,n,r,i]);return(0,H.jsxs)(eH.lO,n9(n9({},e),{},{children:[(0,H.jsx)(eZ.A,n9(n9({},e),{},{"data-testid":"card-drag-handle",handlePlacement:"outside"})),(0,H.jsxs)(D.xu,{mb:"0.25em",position:"relative",contentEditable:!1,userSelect:"none",role:"group","data-card-id":s,"data-export-as-image":!0,children:[(0,H.jsxs)(el.h,{position:"absolute",right:"0.75em",top:"0.75em","data-print-hidden":!0,variant:"unstyled",colorScheme:"gray","data-thumbnail-hidden":!0,children:[u&&(0,H.jsx)(rt,n9({hidePreview:y},e)),(0,H.jsx)(rn,{onClick:E})]}),(0,H.jsxs)(D.xu,{cursor:"pointer",className:(0,z.cx)(n2.wY,k.vD,"card-collapsed",P&&"expandable-selected"),_groupHover:n2.HM,paddingX:d?"1em":"1.5em",paddingY:"1em",onClick:E,"data-collapsed-card":!0,"data-selection-ring":!0,"data-selection-background":!0,"data-content-reference":!0,css:O,sx:{backgroundColor:w},children:[(0,H.jsx)(em.x,{sx:n7,noOfLines:1,mr:"1.75em",mb:"0.375em",className:(0,z.cx)(ts.A8),children:x?(0,H.jsx)(em.x,{as:"span",dangerouslySetInnerHTML:{__html:n5.sanitize(x)}}):p||(0,H.jsx)(em.x,{as:"span",color:"gray.400",children:(0,H.jsx)(V.cC,{id:"gLDJuJ"})})}),(0,H.jsxs)(e$.U,{color:"var(--body-color-muted)",children:[(0,H.jsx)(em.x,{noOfLines:1,fontSize:"0.9em",children:y||!(null!=m&&m.trim())?(0,H.jsx)(V.cC,{id:"4m3nxQ"}):m}),y&&(0,H.jsx)(eg.G,{icon:ti.pt,size:"sm"})]})]})]})]}))});re.displayName="CollapsedCard";var rt=function(e){var t=e.hidePreview,n=e.updateAttributes,r=(0,C.useCallback)(function(e){n&&(n({previewContent:t?null:""}),e.stopPropagation())},[n,t]);return(0,H.jsx)(eu.z,{opacity:0,transitionProperty:"opacity",transitionDuration:"normal",_groupHover:{opacity:1},sx:n2.un,fontSize:"0.7em",onClick:r,className:n2.wY,zIndex:1,children:t?(0,H.jsx)(V.cC,{id:"fsyAH8"}):(0,H.jsx)(V.cC,{id:"Po0vX/"})})},rn=function(e){var t=e.onClick;return(0,H.jsxs)(eu.z,{"aria-label":eW.ag._({id:"JjrOSL"}),className:n2.wY,onClick:t,zIndex:1,sx:n2.un,fontSize:"0.7em","data-testid":"expand-card-button",children:[(0,H.jsx)(eg.G,{icon:nQ.TT,fontSize:"0.9em"}),(0,H.jsx)(em.x,{as:"span",_groupHover:{opacity:1,display:"inline"},opacity:"0",display:"none",ml:2,children:(0,H.jsx)(V.cC,{id:"1A3EXy"})})]})};function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ri=function(e){var t=e.node.attrs.id,n=(0,E.i)(e.editor,"cardLayoutsEnabled"),r=(0,P.ye)("card1InCard2"),o=(0,S.CG)((0,A.yH)(t));return n||r?o?(0,H.jsx)(re,ro({},e)):(0,H.jsx)(nJ,ro({},e)):(0,H.jsx)(tE,ro({},e))},ra=n(17033);function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(){if(!w){var e=x.Q.valid;x.Q.valid=function(t){if(!(0,j.u)(t.doc).cardLayoutsEnabled)return e(t);var n=e(t);return!(n&&(t.nodeAfter&&(0,u.pv)(t.nodeAfter)||t.nodeBefore&&(0,u.pv)(t.nodeBefore)))&&n},w=!0}}();var rl=function(e){if((0,p.bR)(e)||1===e.childCount&&(0,p.bR)(e.firstChild))return!0;if("blank"!==e.attrs.layout)return!1;var t=(0,u.c6)(e);if(0===t.length)return!1;var n=t.find(function(e){return"body"===e.attrs.itemId});return!!n&&1===n.childCount&&(0,p.bR)(n.firstChild)},ru=function(e){var t=e.newNode,n=e.newDecorations,r=e.oldNode,o=e.oldDecorations,i=e.updateProps,a=JSON.stringify(t.attrs)!==JSON.stringify(r.attrs),c=(0,v.I1)(o,n),s=rl(t)!==rl(r);return(a||c||s)&&(console.debug("[cardUpdateFn] Card ".concat(t.attrs.id," updateProps will be called:"),{oldDecorations:o,newDecorations:n,decorationsChanged:c}),i()),!0},rd=c.NB.create({name:k.W4,content:"(block | cardBlock)+ | cardLayoutItemGroup{1,2}",group:"cardBlock",defining:!1,isolating:!0,selectable:!1,draggable:!0,priority:h.a.Card,containerHandle:!0,expandable:!0,addNodeView:function(){var e=this;return(0,d.fW)(ri,{update:ru,ignoreMutation:function(t){var n=t.mutation,r=e.editor.state.selection,o=n.target instanceof HTMLElement?n.target:n.target.parentElement,i="selection"!==n.type&&rf(o),a="selection"===n.type&&r instanceof s.qv&&(0,g.fP)(r.node);return!!i||!!a}})},addProseMirrorPlugins:function(){return[(0,O.xL)(this.editor)]},addOptions:function(){return{isStatic:!1}},addAttributes:function(){return{id:{},previewContent:{default:null},background:rs({default:f.jg},(0,p.sw)("background")),container:rs({default:{}},(0,p.sw)("container")),cardSize:{default:"default"},layout:{default:"blank"},layoutTemplateColumns:{default:null}}},addExtensions:function(){return[e8.pK.configure({callback:function(e,t,n){0!==t.length&&t.forEach(function(e){var t=e.val;e.pos,console.debug("[Card.UniqueCardId] New card id(".concat(t,") created. Will be created in postgres through content service.")),(0,b.Ay)(t)})},types:[this.name]})]},addCommands:function(){return{}},parseHTML:function(){return[{tag:"div[class=gamma-card]"},{tag:"section"},{tag:"card[bookmark]",getAttrs:(0,m.xF)(this.storage),getContent:(0,m.eV)(this.storage)}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,c.P1)(t,{class:"gamma-card"}),0]},addStorage:m.gk,renderHTMLforAI:function(e){var t=e.node,n=(0,m.ml)(this.storage,t),r=(0,a.getCardTitle)(t.toJSON()),o=(0,y.Ap)(t);return["card",{bookmark:n,title:r,accentPosition:t.attrs.layout,accentImage:null!=o&&o.image?(0,l.K)(o.image):void 0}]}}),rf=function(e){var t;return(null==e?void 0:e.parentElement)&&(e.classList.contains(k.vD)||(null===(t=e.parentElement.closest(".".concat(k.pL,", .").concat(k.vD)))||void 0===t?void 0:t.classList.contains(k.vD)))}},90399:function(e,t,n){n.d(t,{C2:function(){return f},Zs:function(){return m},pK:function(){return h}});var r=n(95235),o=n(38564),i=n(37164),a=n(30764),c=n(27191),s=n(74203),l=n(6057);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={generate:(0,i.kP)("0123456789abcdefghijklmnopqrstuvwxyz",15)},p=new c.H$("UniqueCardId"),m=function(e){return Object.assign({},e,{content:function e(t){var n;return null===(n=t.content)||void 0===n?void 0:n.map(function(t){if(!t.content||t.type!==l.W4)return t;var n=d(d({},t),{},{attrs:d(d({},t.attrs),{},{id:f.generate()})});return n.content=e(n),n})}(e)})},h=s.I.extend({name:"UniqueCardId"}).configure({attributeName:"id",initialValue:function(){return f.generate()},filterTransaction:function(e){var t=e.getMeta(o.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:p,transformPasted:function(e,t,n){var o=t.types,i=t.initialValue,c=t.attributeName,s={},u=function e(t){var r=[];return t.forEach(function(t){if(t.isText){r.push(t);return}if("cardMention"===t.type.name){var o=s[t.attrs.id];if(o){var i=t.type.create(d(d(d({},t.attrs),o?{id:o}:{}),{},{docId:n}));r.push(i)}else r.push(t);return}r.push(t.copy(e(t.content)))}),a.HY.from(r)}(function e(t){var n=[];return t.forEach(function(t){if(t.isText){n.push(t);return}if(!o.includes(t.type.name)){n.push(t.copy(e(t.content)));return}var a=i(),u=t.type.create(d(d({},t.attrs),{},(0,r.Z)({},c,a)),e(t.content),t.marks);t.type.name===l.W4&&(s=d(d({},s),{},(0,r.Z)({},t.attrs.id,a))),n.push(u)}),a.HY.from(n)}(e.content));return new a.p2(u,e.openStart,e.openEnd)}})},72438:function(e,t,n){n.d(t,{O:function(){return o},g:function(){return i}});var r=n(28703);function o(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}var i=function(e,t,n){if(!n)return!0;var i=o(n),a=i?e.state.tr.replaceSelectionWith(i,e.input.shiftKey):e.state.tr.replaceSelection(n),c=(0,r.a)(a);return c&&a.setSelection(c),e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}},60363:function(e,t,n){n.d(t,{Lv:function(){return p},i1:function(){return h},tf:function(){return m}});var r=n(72338),o=n(3027),i=n(27191),a=n(95472),c=n(46398),s=n(51823),l=n(28703),u=n(60940),d=n(92771),f=function(e){return"gallery"===e.type.name},p=function(e,t,n){var u,p=v(n);if(p.length>0)return p.forEach(function(t){var n=t.mark;(0,d.Td)(n)||(0,d.m7)(n.attrs.href,e)}),!1;var h=null===(u=t.clipboardData)||void 0===u?void 0:u.getData("text/plain");if(!h||!m(h))return!1;var b=e.state.selection;if(b instanceof i.Bs&&!b.empty)return t.preventDefault(),g(e,h),!0;if(h.match(s.nP)||(0,c.hU)(h))return!1;var y=b instanceof o.Q,x=b.empty&&["paragraph","heading","title"].includes(b.$from.parent.type.name)&&(0,a.bR)(b.$from.parent),j=f(b.$from.parent),w=(0,r.EG)(b)&&f(b.node);if(!(x||j||w||y))return!1;var O=b.from-1,k=w?{from:b.to-1,to:b.to-1}:x?{from:O,to:O+b.$from.parent.nodeSize}:{from:b.from,to:b.to};return e.chain().setTextSelection(k).insertEmbedAndFetchMetadata(h,void 0,!0).command(function(e){var t=e.tr,n=(0,l.a)(t);return n&&t.setSelection(n),!0}).run(),!0},m=function(e){return(0,c.kr)(e)&&!e.includes("\n")&&(0,c.jv)(e)},h=function(e){return 1===e.content.childCount&&e.content.firstChild.isTextblock&&m(e.content.firstChild.textContent)},g=function(e,t){e.commands.setMark(u.r.name,{href:t}),(0,d.m7)(t,e)},v=function(e){var t=[];return e.content.descendants(function(e,n){e.marks.filter(function(e){return"link"===e.type.name}).forEach(function(e){t.push({mark:e,pos:n})})}),t}},18635:function(e,t,n){n.d(t,{A0:function(){return v},Ck:function(){return h},MF:function(){return g},aT:function(){return l},c$:function(){return p},c8:function(){return m},iO:function(){return s}});var r=n(19870),o=n(6382),i=n(60363),a=n(74993),c=n(583),s=function(e,t){if(!e.isEditable||!t.clipboardData)return!1;var n=t.clipboardData.getData("text/plain");if(!n||(0,i.tf)(n))return!1;var r=t.clipboardData.getData("text/html");if(null!=r&&r.includes("data-pm-slice"))return!1;var o=e.state;if(o.selection.$from.parent.type.spec.code){var a=o.tr.insertText(n);return e.view.dispatch(a),!0}var c=t.clipboardData.getData("vscode-editor-data"),s=c?JSON.parse(c):void 0,l=null==s?void 0:s.mode;if(!(!r||"markdown"===l||u(n)))return!1;var d=o.selection,f=d.from,p=d.to;return t.preventDefault(),e.commands.insertMarkdownAt({from:f,to:p},n)},l=function(e,t,n){var o=r.TU.parse(e);return(0,a.T)(o,t,n,!1).slice},u=function(e){var t=e.match(/^```/gm);if(t&&t.length>1||e.match(/\[[^]+\]\(https?:\/\/\S+\)/gm)||e.match(/\[[^]+\]\(\/\S+\)/gm)||e.match(/^#{1,6}\s+\S+/gm))return!0;var n=e.match(/^\s*[\d-*].?\s\S+/gm);return!!n&&n.length>1},d=(0,o.Z)({headingStyle:"atx",bulletListMarker:"-",codeBlockStyle:"fenced",hr:"---"}).remove(["style"]),f=o.Z.prototype.escape,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(o.Z.prototype.escape=function(e){return e});var n=d.turndown(e);return t&&(o.Z.prototype.escape=f),n},m=function(e){return r.TU.parse(e,{})},h=function(e,t,n,r){var o=e.slice(t,n).content,i=(0,c.Xb)(o,e.type.schema),a=document.createElement("div");return a.appendChild(i),p(a.innerHTML,r)},g=function(e,t){return h(e,1,e.nodeSize-2,t)},v=function(e){return g(e,!0)}},74993:function(e,t,n){n.d(t,{T:function(){return a}});var r=n(30764),o=n(69981),i=n(90044),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,i.B)(e),s=new DOMParser().parseFromString(c,"text/html"),l=r.aw.fromSchema(t).parseSlice(s,{preserveWhitespace:a}),u=(0,o.iu)(l,t,n);return{content:u.content,dom:s.body,slice:u}}},69981:function(e,t,n){n.d(t,{iu:function(){return b}});var r=n(12741),o=n(95235),i=n(30764),a=n(639),c=n(10395),s=function(e){if((0,a.zx)()&&e&&0!==e.length)for(var t=0;t<e.length;t++)l(e[t],e,t)},l=function e(t,n,o){if("text"===t.type){if(!t.text)return;var i=(0,c.W)(t.text,t.marks),a=i.replaced,s=i.nodes;a&&n.splice.apply(n,[o,1].concat((0,r.Z)(s)));return}if(t.content&&t.content.length>0)for(var l=0;l<t.content.length;l++)e(t.content[l],t.content,l)},u=n(35676),d=n.n(u),f=n(27875),p=n.n(f),m=function(e,t){for(var n={type:"document",content:[]},r=function(e,t){for(var r=n,o=0;o<t;o++){(a=r).content||(a.content=[]);var i,a,c=r.content[r.content.length-1];c&&"card"===c.type||(c={type:"card",content:[]},r.content.push(c)),r=c}null===(i=r.content)||void 0===i||i.push(e)},o=1,i=null,a=0;a<e.length;a++){var c,s=e[a];if(t.splitOnHeadings&&"heading"===s.type&&null!==(c=s.content)&&void 0!==c&&c.length){var l=(s.attrs||{}).level;if(null==i?i=l:l>i?(o+=1,i=l):l<i&&(o=l,i=l),o>1&&!t.nested){i=1,r(s,o=1);continue}r({type:"card",content:[]},(o=p()(o,1,3))-1)}else if(t.splitOnDividers&&"divider"===s.type){r({type:"card",content:[]},o-1);continue}r(s,o)}var u=d()(h(n));return console.debug("splitCards",n,u),u},h=function e(t){var n;return null!==(n=t.content)&&void 0!==n&&n.every(function(e){return"card"===e.type})?d()(t.content.map(e)):[t]};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(e,t,n){var r,o=null===(r=e.toJSON())||void 0===r?void 0:r.content;if(s(o),!o||0===o.length||1===o.length&&("document"===o[0].type||"card"===o[0].type))return e;if(o.every(function(e){return t.nodes[e.type].isInline}))return i.p2.fromJSON(t,v(v({},e),{},{content:o}));try{return o=x(o,t),o=y(o),n&&(o=m(o,n)),i.p2.fromJSON(t,v(v({},e),{},{content:o}))}catch(t){return console.error("Error transforming slice",t),e}},y=function(e){var t=(0,r.Z)(e);return e.forEach(function(n,r){if(!(r<1)){var o,i=e[r-1];if(i.type===n.type&&i.content){var a=null===(o=n.content)||void 0===o?void 0:o[0];a&&"footnote"===a.type&&(i.content=i.content.concat(n.content),t[r]=null)}}}),t.filter(function(e){return null!==e})},x=function(e,t){var n=[];return e.forEach(function(e){if(e.type){if(null===(r=t.nodes[e.type])||void 0===r?void 0:r.isBlock)n.push(e);else{var r,o,i=n[n.length-1];if(!i||!i.content||!t.nodes[i.type].isTextblock||"text"===e.type&&(null===(o=e.text)||void 0===o?void 0:o.trim())==="")return;i.content.push(e)}}}),n}},90044:function(e,t,n){n.d(t,{B:function(){return v}});var r=n(583),o=n(63982),i=function(e){(0,o.F)(e,"p.title").forEach(l),(0,o.F)(e,"br").forEach(s),(0,o.F)(e,"a[href]").forEach(d),(0,o.F)(e,"a[href][id]").forEach(f),(0,o.F)(e,"span").forEach(p),(0,o.F)(e,"a[href][id]").forEach(function(t){return h(t,e)})},a=function(e){(0,o.F)(e,"h1").forEach(c)},c=function(e){if("always"==e.style.pageBreakBefore){var t=document.createElement("hr");t.style.pageBreakBefore="always",t.classList.add("divider"),e.before(t)}},s=function(e){var t;((null===(t=e.previousElementSibling)||void 0===t?void 0:t.tagName)=="P"||e.classList.contains("Apple-interchange-newline"))&&e.remove()},l=function(e){var t=document.createElement("h1");t.className="title",t.innerHTML=e.innerHTML,e.replaceWith(t)},u=/^https:\/\/docs\.google\.com\/document\/d\/[^/]+\/edit#heading=(h\.[^/]+)/,d=function(e){var t=e.getAttribute("href");if(t&&(t.startsWith("#h.")||u.test(t))){var n=e.closest("p");n&&n.textContent==e.textContent?n.remove():e.removeAttribute("href")}},f=function(e){var t,n;if(null!==(t=e.getAttribute("id"))&&void 0!==t&&t.startsWith("cmnt_ref")){var r=e.closest("sup");null==r||r.remove()}else if(null!==(n=e.getAttribute("id"))&&void 0!==n&&n.startsWith("cmnt")){var o=e.closest("div");null==o||o.remove()}},p=function(e){e.innerHTML=e.innerHTML.replace(/(&nbsp;){2,}/g,"").replace(/&nbsp;/g," ")},m=/ftnt_ref(\d+)/,h=function(e,t){var n=e.getAttribute("id");if(n&&n.startsWith("ftnt_ref")){var r,o=parseInt((null===(r=n.match(m))||void 0===r?void 0:r[1])||""),i=e.closest("sup"),a=t.querySelector("#ftnt".concat(o)),c=null==a?void 0:a.closest("div");if(!o||!i||!c)return;null==a||a.remove();var s=document.createElement("div");s.className="imported-footnote",s.appendChild(c),i.replaceWith(s)}},g=n(59026),v=function(e){try{var t=new DOMParser().parseFromString(e,"text/html");return(0,o.F)(t,"li",!0).forEach(g.e),(0,o.F)(t,"img").forEach(b),a(t),i(t),(0,o.F)(t,"p").forEach(y),t.body.innerHTML}catch(t){return console.error("Error transforming pasted HTML",t),e}},b=function(e){var t=e.closest("p, h1, h2, h3, h4, h5, h6, ul, ol, li");t&&t.after(e)},y=function(e){if((0,r.np)(e)){var t;(null===(t=e.parentElement)||void 0===t?void 0:t.childElementCount)!==1&&e.remove()}}},583:function(e,t,n){n.d(t,{G8:function(){return u},PZ:function(){return l},Xb:function(){return a},np:function(){return s}});var r=n(12741),o=n(30764),i=n(314),a=function(e,t,n){null!==(r=n)&&void 0!==r||(n=o.PW.fromSchema(t));var r,a=n.serializeFragment(e);return(0,i.S)(a)},c=["img"],s=function e(t){var n;return!t.hasChildNodes()||!((null===(n=t.textContent)||void 0===n?void 0:n.trim())!=""||c.includes(t.nodeName))&&(0,r.Z)(t.childNodes).every(function(t){return e(t)})},l=function(e,t){var n=e.state.doc.nodeAt(t);if(n){var r=a(o.HY.from(n),e.schema),i=document.createElement("div");return i.appendChild(r),i.innerHTML}},u=function(e,t,n){var r=a(e,t,n),o=document.createElement("div");return o.appendChild(r),o.innerHTML}},66558:function(e,t,n){n.d(t,{u:function(){return c}});var r=n(95235);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var a={cardLayoutsEnabled:!1},c=function(e){if(!e)return i({},a);var t=null;return("doc"===e.type.name?t=e.nodeAt(0):"document"===e.type.name&&(t=e),t)?i(i({},a),t.attrs.docFlags):(console.debug("[getDocFlags] could not find document node, returning defaults"),i({},a))}},94827:function(e,t,n){n.d(t,{C:function(){return i},i:function(){return o}});var r=n(66558);function o(e,t){return(0,r.u)(null==e?void 0:e.state.doc)[t]}var i=o},63784:function(e,t,n){n.d(t,{LN:function(){return v},kT:function(){return b},l9:function(){return g},mq:function(){return h}});var r=n(95235),o=n(11919),i=n(36895),a=n(46358),c=n(9734),s=n(62141),l=n(26087),u=n(25878),d=n(52322);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m="10vh",h="var(--chakra-space-10)",g="80px",v=function(){var e=(0,a.CG)(s.Pu),t=(0,a.CG)(s.gh)===l.q.SLIDE_VIEW,n=e.logoUrl;if(!n)return null;var r=(0,c.mr)()?{position:"fixed",right:h,top:"calc(100% - ".concat(g,")"),height:g,maxHeight:g,width:"80px"}:t?{position:"fixed",right:"clamp(2rem, 3vw, 5rem)",top:"3rem",justify:"end",align:"start",width:"12vw",height:"5vh"}:{position:"sticky",left:"3rem",top:"calc(100% - ".concat(m," - 4.5rem)"),justify:"start",width:"8vw",height:m},f=(0,c.mr)()?u.S.customerLogo:{base:void 0,xl:u.S.customerLogo};return(0,d.jsx)(o.k,p(p({},r),{},{className:"logo",zIndex:f,borderRadius:"md",children:(0,d.jsx)(i.E,{src:n,maxH:"100%",maxW:"100%",transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none","data-testid":"customer-logo",objectFit:"contain",objectPosition:t?"top right":"bottom left"})}))},b=function(){var e=(0,a.CG)(s.Pu).logoUrl;return e?(0,d.jsx)(o.k,{w:"100%",justify:"center",align:"center",mt:8,mb:10,"data-id":"customer-logo-wrapper",children:(0,d.jsx)(i.E,{src:e,maxW:"12em",zIndex:u.S.customerLogo,maxH:m,transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none",objectFit:"contain",objectPosition:"bottom"})}):null}},66843:function(e,t,n){n.d(t,{x:function(){return p},S:function(){return f}});var r=n(72338),o=n(27191),i=n(96412),a=n(13089),c=n(95235),s=n(18149),l=n.n(s),u=n(62141),d=function(){function e(){(0,i.Z)(this,e),(0,c.Z)(this,"hasChanges",!1),(0,c.Z)(this,"value",null)}return(0,a.Z)(e,[{key:"compute",value:function(e){var t=e.firstChild;if(!t)return this;var n=t.attrs;return l()(n,this.value)||(this.hasChanges=!0),this.value=n,this}},{key:"apply",value:function(e,t){return e.docChanged&&this.compute(e.doc),this}},{key:"processChanges",value:function(e){this.hasChanges&&this.value&&e((0,u.Qt)({docAttrs:this.value})),this.hasChanges=!1}}]),e}(),f=new o.H$("documentAttrs"),p=r.hj.create({name:"documentAttrs",addProseMirrorPlugins:function(){return[new o.Sy({key:f,state:{init:function(){return new d},apply:function(e,t,n,r){return t.apply(e,r)}}})]}})},38876:function(e,t,n){n.d(t,{i:function(){return o},m:function(){return r}});var r="10vh",o="80vh"},25878:function(e,t,n){n.d(t,{S:function(){return r}});var r={presentBg:1,customerLogo:4}},15723:function(e,t,n){n.d(t,{A:function(){return k}});var r=n(95235),o=n(82269),i=n(2784),a=n(46358),c=n(62141),s=n(99638),l=n(11723),u=n(93897),d=n(65542),f=n(27302),p=n(55966),m=n(25756),h=n(52322),g=["icon","isVisible","isSelected","label","onClick","onDragStart"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=e.icon,n=e.isVisible,r=e.isSelected,i=e.label,a=e.onClick,c=e.onDragStart,s=(0,o.Z)(e,g),l=(0,m.lv)(r),u=l.color,d=l.bg,v=l.hoverColor,y=l.hoverBg,x=l.borderColor;return(0,h.jsx)(p.kH,{placement:"top",label:r?void 0:i,children:(0,h.jsx)(f.M,b(b({position:"absolute",width:"16px",height:"22px",fontWeight:"900",fontFamily:"Inter, sans-serif",background:d,backdropFilter:"blur(8px)",border:"1px solid",borderColor:x,color:u,borderRadius:"sm",boxShadow:"sm",fontSize:"16px",cursor:"pointer",opacity:r||n?1:0,_hover:{color:v,background:y,opacity:1}},s),{},{className:"drag-handle",onClick:a,onDragStart:c,draggable:!0,contentEditable:!1,_after:{position:"absolute",content:'""',inset:-2},children:void 0===t?"":t}))})},x=["handlePlacement","editor","getPos","decorations","isVisible","onClick","node","selected","extension","updateAttributes","deleteNode"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O={top:{top:"0",left:"50%",height:"16px",width:"26px",pt:"1px",icon:"",zIndex:"3",transform:"translateY(-50%) translateX(-50%)",fontSize:"15px"},left:{top:"50%",left:"0",height:"26px",width:"16px",zIndex:"3",transform:"translateY(-50%) translateX(-50%)",fontSize:"15px"},outside:{top:0,left:-6},inside:{top:2,left:3}},k=function(e){var t,n=e.handlePlacement,r=e.editor,f=e.getPos,p=e.decorations,m=e.isVisible,g=e.onClick,v=(e.node,e.selected,e.extension,e.updateAttributes,e.deleteNode,(0,o.Z)(e,x)),b=(0,a.CG)(c.hN),j=(0,i.useCallback)(function(e){r.commands.selectNodeAtPos(f()),e.stopPropagation()},[r,f]),k=(0,i.useCallback)(function(e){var t,n=(null===(t=e.target.closest("[data-node-view-wrapper]"))||void 0===t?void 0:t.querySelector("[data-selection-ring]"))||void 0;(0,d.SS)(r,e.nativeEvent,f(),n),e.stopPropagation()},[r,f]);if(!b)return null;var C=(0,s.WE)(p),P=(0,u.v)(p),S=(0,l.EL)(p);return null!==(t=m)&&void 0!==t||(m=C||P),(0,h.jsx)(y,w(w({isSelected:S,isVisible:m,onClick:g||j,onDragStart:k},O[void 0===n?"outside":n]),v))}},25756:function(e,t,n){n.d(t,{lv:function(){return d},vu:function(){return l}});var r=n(95235),o=n(2784),i=n(32736);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={borderColor:e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-blackAlpha-200)"};return t?c(c({},n),{},{bg:e?"var(--chakra-colors-trueblue-300)":"var(--chakra-colors-trueblue-50)",color:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-300)",hoverBg:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-100)",hoverColor:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-600)"}):c(c({},n),{},{bg:e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-whiteAlpha-900)",color:e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-500)",hoverBg:e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",hoverColor:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-gray-800)"})},l=function(e){var t=s(e);return{"--global-drag-handle-background":t.bg,"--global-drag-handle-color":t.color,"--global-drag-handle-hover-background":t.hoverBg,"--global-drag-handle-hover-color":t.hoverColor,"--global-drag-handle-border":t.borderColor}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?s(e,!0):{bg:"var(--global-drag-handle-background)",color:"var(--global-drag-handle-color)",hoverBg:"var(--global-drag-handle-hover-background)",hoverColor:"var(--global-drag-handle-hover-color)",borderColor:"var(--global-drag-handle-border)"}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.Yy)();return(0,o.useMemo)(function(){return u(t,e)},[t,e])}},17945:function(e,t,n){n.d(t,{f:function(){return g},r:function(){return p}});var r=n(13089),o=n(96412),i=n(72338),a=n(27191),c=n(60636),s=n(17477),l=n(12236),u=n(16409),d=n(45219),f=n(65542),p="data-drag-handle-hovering",m=(0,r.Z)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,o.Z)(this,e),this.dragging=t}),h=new a.H$("globalDragHandle"),g=function(e){var t,n,r,o,g=document.querySelector(e.scrollerSelector),v=e.editor,b=function(){w()},y=function(){if(r&&r.el){var e=r,t=e.pos,n=e.node;"table"===n.type.name?v.chain().focus(void 0,{scrollIntoView:!1}).selectTable(t+2).run():n.isTextblock&&!(0,u.Q)(n)?v.chain().focus(void 0,{scrollIntoView:!1}).setTextSelection({from:t+1,to:t+n.nodeSize-1}).run():v.chain().focus(void 0,{scrollIntoView:!1}).command(function(e){var n=e.tr,r=e.state.doc.resolve(t),o=new a.qv(r);return n.setSelection(o),!0}).run()}},x=function(e){if(r&&r.el){var t=r,n=t.el,o=t.pos;(0,f.SS)(v,e,o,n)}},j=function(){},w=function(){document.querySelectorAll("[".concat(p,"]")).forEach(function(e){return e.removeAttribute(p)}),t&&(t.style.display="none")},O=function(){t&&(t.style.display="block")},k=function(n){if(!v.isEditable||!o||!t||!e.storage.enabled||!(r=(0,f.rc)(o,n))||!r.el){w();return}document.querySelectorAll("[".concat(p,"]")).forEach(function(e){return e.removeAttribute(p)});var a=r,c=a.el,s=a.node,l=(0,f.z7)(s,c),u=c.closest(".block-gridLayout, .block-gallery, .block-smartLayout");u&&u.setAttribute(p,"true");var d=v.state.doc.resolve(r.pos),m=(0,i.qv)(d,function(e){return!!e.type.spec.isolating}),h=(null==m?void 0:m.node.type.name)||"";try{var g=c.getBoundingClientRect(),b=g.top,y=g.left;b+=window.pageYOffset+l.top,y+=window.pageXOffset+l.left,t.setAttribute("data-isolating-parent",h),("tableCell"===h||"gridCell"===h)&&(y+=12),t.style.left="".concat(-f.YR+y,"px"),t.style.top="".concat(b,"px"),O()}catch(e){console.warn("[GlobalDragHandle] Error showing drag handle",e),w()}};return new a.Sy({key:h,state:{init:function(){return new m},apply:function(e,t){return t}},view:function(){var e;return(0,s.u0)("#editor-core-root").then(function(r){var i;n=r,t=document.createElement("div"),null===(i=n)||void 0===i||i.appendChild(t),t.draggable=!0,t.classList.add("global-drag-handle"),t.addEventListener("dragstart",x),t.addEventListener("dragend",j),t.addEventListener("click",y),null==g||g.addEventListener("scroll",b),e=function(e){o={left:e.clientX,top:e.clientY},(0,l.N)().push(function(){k(v.view)},"moveDragHandle")},document.addEventListener("mousemove",e)}).catch(function(){console.error("[GlobalDragHandlePlugin.view] Could not find editor-core-root element. This is highly unexpected.")}),{update:function(e){(0,l.N)().push(function(){k(e)},"moveDragHandle")},destroy:function(){var r,o;n=null===(r=document)||void 0===r?void 0:r.querySelector("#editor-core-root"),e&&t&&(null==g||g.removeEventListener("scroll",b),null===(o=n)||void 0===o||o.removeChild(t),t.removeEventListener("dragstart",x),t.removeEventListener("dragend",j),t.removeEventListener("click",y),t=void 0,document.removeEventListener("mousemove",e))}}},props:{handleDOMEvents:{drop:function(e){var t,n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,r=h.getState(e.state);if(!r)return!1;r.dragging=n}},handleDrop:function(e,t,n,r){var o=h.getState(e.state),i=null==o?void 0:o.dragging;o&&(o.dragging=null),t.preventDefault();var s=(0,d.Z)(e,t,n);if(!s)return!0;var l=e.state.tr;r&&l.deleteSelection();var u=l.mapping.map(s),f=0==n.openStart&&0==n.openEnd&&1==n.content.childCount,p=l.doc;if(f?l.replaceRangeWith(u,u,n.content.firstChild):l.replaceRange(u,u,n),l.doc.eq(p))return!0;var m=l.doc.resolve(u);if(f&&m.nodeAfter&&m.nodeAfter.sameMarkup(n.content.firstChild)){var g=(0,c.t)(m);g&&l.setSelection(g)}else{var v=l.mapping.map(s);l.mapping.maps[l.mapping.maps.length-1].forEach(function(e,t,n,r){return v=r});var b=a.Bs.between(m,l.doc.resolve(v));l.setSelection(b)}return e.focus(),i&&l.setMeta("annotationEvent",{type:"drop",dragging:i,droppedBlockPos:u}),e.dispatch(l.setMeta("uiEvent","drop")),!0}}})}},65542:function(e,t,n){n.d(t,{SS:function(){return O},YR:function(){return y},nM:function(){return k},rc:function(){return j},z7:function(){return w}});var r=n(81333),o=n(95235),i=n(72338),a=n(27191),c=n(12691),s=n(9734),l=n(39875),u=n(41261),d=n(47592),f=n(20046),p=n(87819),m=n(82360),h=n(47191),g=n(56261);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=24,x=function(e,t,n,r){if(r&&((0,h.BF)(r)||(0,m.E)(r))||k(e)||(0,g.O4)(e)||!(0,c.zh)(e))return!1;if((0,p.fP)(e)){var o=n.state.doc.resolve(t);return!(0,f.u5)(o)}return!0},j=function(e,t){var n,r,o,a,c=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1,(null===(r=t.posAtCoords(b(b({},e),{},{left:e.left+26})))||void 0===r?void 0:r.inside)||-1,(null===(o=t.posAtCoords(b(b({},e),{},{left:e.left+26+22})))||void 0===o?void 0:o.inside)||-1);if(-1!=c){try{a=t.state.doc.resolve(c)}catch(e){return}var s=a.nodeAfter,l=s&&x(s,c,t,a.parent)?{pos:c,depth:a.depth,node:s}:(0,i.qv)(a,function(e){return x(e,c,t)});if(l){var u=l.pos,d=l.depth,f=l.node,p=t.nodeDOM(u);if(!(p instanceof HTMLElement))return;var m=p,h=p.querySelector("[data-content-reference]");if(h){var g=t.posAtDOM(h,0);(f.isAtom&&g===u||g===u+1)&&(m=h)}return{pos:u,depth:d,el:m,node:f}}}},w=function(e,t){var n={left:0,top:0};if(e.isTextblock){var r=t.querySelector("[data-node-view-content]")||t,o=parseInt(window.getComputedStyle(r).lineHeight);n.top=(o-22)/2}else(0,c.KH)(e)?(0,d.HD)(e)?n.left=0-t.clientWidth*(u.r0-1)/2:(n.left=32,n.top=12):(0,h.CU)(e)&&(n.left=-22);return n},O=function(e,t,n,o){var i=e.view,c=e.state;if(t.dataTransfer&&(o||(o=e.view.domAtPos(n).node))){var u=o.dataset.contentReference,d=0,f=0;if((0,s.i7)()&&u){var p=u.split(",").map(parseFloat),m=(0,r.Z)(p,2),h=m[0],g=m[1];h&&g&&(d=h,f=g)}t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",o.innerHTML),t.dataTransfer.setData("text/plain",o.textContent||""),t.dataTransfer.setDragImage(o,d,f);var v=a.qv.create(c.doc,n),b=v.content();i.dispatch(i.state.tr.setSelection(v)),i.dragging={slice:b,move:!0};var y=(0,l.lG)({pos:n,editor:e,from:v.from,to:v.to});y&&(i.dragging.annotations=y)}},k=function(e){return e.type.spec.containerHandle}},12823:function(e,t,n){n.d(t,{h:function(){return p}});var r={staircase:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"2fe86829-fd3e-4e73-309a-9c88978544b6":{id:"2fe86829-fd3e-4e73-309a-9c88978544b6",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:5.666666666666667,point:[312,728],size:[245.61,36.31],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"e7f37a08-32c9-4a9e-3e82-d4eb03c55ce3":{id:"e7f37a08-32c9-4a9e-3e82-d4eb03c55ce3",type:"text",name:"Text",parentId:"page",childIndex:6.666666666666667,point:[312,792],rotation:0,text:"S T E P   1",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0735548818438974,font:"script",textAlign:"middle"}},"707d08b1-ef6d-4402-2b83-8242300be57c":{id:"707d08b1-ef6d-4402-2b83-8242300be57c",type:"text",name:"Text",parentId:"page",childIndex:7.666666666666667,point:[312,856],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.7890928011383548,font:"script",textAlign:"middle"}},"aa532a44-94e2-4d73-10a4-47aaec919c99":{id:"aa532a44-94e2-4d73-10a4-47aaec919c99",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:8.666666666666668,point:[664,664],size:[245.61,36.31],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"4fa8a112-49a2-4ff1-3386-97befd6c8719":{id:"4fa8a112-49a2-4ff1-3386-97befd6c8719",type:"text",name:"Text",parentId:"page",childIndex:9.666666666666668,point:[664,728],rotation:0,text:"S T E P   2",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0735548818438974,font:"script",textAlign:"middle"}},"80dde81a-0620-46be-0ee1-2f00db00d9f0":{id:"80dde81a-0620-46be-0ee1-2f00db00d9f0",type:"text",name:"Text",parentId:"page",childIndex:10.666666666666668,point:[664,792],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.7890928011383548,font:"script",textAlign:"middle"}},"e7f6c66e-e78f-4131-003a-4c6a7cc79d38":{id:"e7f6c66e-e78f-4131-003a-4c6a7cc79d38",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:11.666666666666668,point:[1016,632],size:[245.61,36.31],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"111dc4dd-0162-420b-1a9d-f836e8dc1b0d":{id:"111dc4dd-0162-420b-1a9d-f836e8dc1b0d",type:"text",name:"Text",parentId:"page",childIndex:12.666666666666668,point:[1016,696],rotation:0,text:"S T E P   3",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0735548818438974,font:"script",textAlign:"middle"}},"00c3c74b-cd1a-4b26-1ea2-96d342fadd96":{id:"00c3c74b-cd1a-4b26-1ea2-96d342fadd96",type:"text",name:"Text",parentId:"page",childIndex:13.666666666666668,point:[1016,760],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.7890928011383548,font:"script",textAlign:"middle"}},"936954c8-6148-40d6-36d5-1363f32a31c3":{id:"936954c8-6148-40d6-36d5-1363f32a31c3",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:14.666666666666668,point:[1368,600],size:[245.61,36.31],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"ab2480c2-a0c2-4dc2-2850-d2e90d051ec1":{id:"ab2480c2-a0c2-4dc2-2850-d2e90d051ec1",type:"text",name:"Text",parentId:"page",childIndex:15.666666666666668,point:[1368,664],rotation:0,text:"S T E P   4",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0735548818438974,font:"script",textAlign:"middle"}},"7c0ee72e-973f-48d6-0651-b6c75f9d5411":{id:"7c0ee72e-973f-48d6-0651-b6c75f9d5411",type:"text",name:"Text",parentId:"page",childIndex:16.666666666666668,point:[1368,728],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.7890928011383548,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:1304,height:354},width:1304,svg:'<svg viewBox="0 0 1304 354" width="1304" height="354" style="background-color: transparent;"><g class="" transform="translate(0.00, 128.00) rotate(0.00, 122.81, 18.16)"><rect x="2.1180000000000003" y="2.1180000000000003" width="243.49200000000002" height="34.192" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="243.49200000000002" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="2.1180000000000003" x2="243.49200000000002" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="34.192" x2="2.1180000000000003" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="34.192" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(0.00, 192.00) rotate(0.00, 70.00, 20.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0735548818438974)" x="65.20393245268527">S T E P   1</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(0.00, 256.00) rotate(0.00, 124.00, 49.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">incididunt ut labore etlor</text></g><g class="" transform="translate(352.00, 64.00) rotate(0.00, 122.81, 18.16)"><rect x="2.1180000000000003" y="2.1180000000000003" width="243.49200000000002" height="34.192" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="243.49200000000002" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="2.1180000000000003" x2="243.49200000000002" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="34.192" x2="2.1180000000000003" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="34.192" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(352.00, 128.00) rotate(0.00, 72.50, 20.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0735548818438974)" x="67.53264432599546">S T E P   2</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(352.00, 192.00) rotate(0.00, 124.00, 49.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">incididunt ut labore etlor</text></g><g class="tl-centered-g" transform="translate(704.00, 32.00) rotate(0.00, 122.81, 18.16)"><rect x="2.1180000000000003" y="2.1180000000000003" width="243.49200000000002" height="34.192" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="243.49200000000002" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="2.1180000000000003" x2="243.49200000000002" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="34.192" x2="2.1180000000000003" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="34.192" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(704.00, 96.00) rotate(0.00, 72.50, 20.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0735548818438974)" x="67.53264432599546">S T E P   3</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(704.00, 160.00) rotate(0.00, 124.00, 49.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">incididunt ut labore etlor</text></g><g class="tl-centered-g" transform="translate(1056.00, 0.00) rotate(0.00, 122.81, 18.16)"><rect x="2.1180000000000003" y="2.1180000000000003" width="243.49200000000002" height="34.192" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="243.49200000000002" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="2.1180000000000003" x2="243.49200000000002" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="243.49200000000002" y1="34.192" x2="2.1180000000000003" y2="34.192" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="34.192" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(1056.00, 64.00) rotate(0.00, 73.00, 20.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0735548818438974)" x="67.99838670065749">S T E P   4</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(1056.00, 128.00) rotate(0.00, 124.00, 49.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7890928011383548)" x="157.14248035353523">incididunt ut labore etlor</text></g></svg>'}},sequence:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"09001ea2-ce96-4d72-05af-5e4cefe2b975":{id:"09001ea2-ce96-4d72-05af-5e4cefe2b975",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[320,8],size:[352,88],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"Step 1",labelPoint:[.5,.5]},"d6511d0b-9e7c-47cb-3989-9433cdd5f125":{id:"d6511d0b-9e7c-47cb-3989-9433cdd5f125",type:"text",name:"Text",parentId:"page",childIndex:1.6666666666666665,point:[358,128],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8841156470471224,font:"script",textAlign:"middle"}},"0db77405-03ce-4809-2f92-1afa74a6dfbe":{id:"0db77405-03ce-4809-2f92-1afa74a6dfbe",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1.3333333333333333,point:[704,8],size:[352,88],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"Step 2",labelPoint:[.5,.5]},"89c2bb29-dc42-41b9-23be-f21e29a77951":{id:"89c2bb29-dc42-41b9-23be-f21e29a77951",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1.6666666666666665,point:[1472,8],size:[352,88],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"Step 4",labelPoint:[.5,.5]},"61c78694-5ac6-4aff-1853-8fbe63b68f44":{id:"61c78694-5ac6-4aff-1853-8fbe63b68f44",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1.3333333333333333,point:[1088,8],size:[352,88],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"Step 3",labelPoint:[.5,.5]},"80d80fdc-3a9f-411c-3902-135a5d234b77":{id:"80d80fdc-3a9f-411c-3902-135a5d234b77",type:"text",name:"Text",parentId:"page",childIndex:1.6666666666666665,point:[742,128],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8841156470471224,font:"script",textAlign:"middle"}},"904a74d6-1b65-40e7-2556-6140bcb8fb88":{id:"904a74d6-1b65-40e7-2556-6140bcb8fb88",type:"text",name:"Text",parentId:"page",childIndex:2,point:[1126,128],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8841156470471224,font:"script",textAlign:"middle"}},"eb8b1bc6-d282-4dd7-25a0-84048e732951":{id:"eb8b1bc6-d282-4dd7-25a0-84048e732951",type:"text",name:"Text",parentId:"page",childIndex:2.3333333333333335,point:[1510,128],rotation:0,text:"Lorem ipsum dolor sit,\nconsectetur adipiscing,\nsed do eiusmod tempor\nincididunt ut labore etlor",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8841156470471224,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:1504,height:229},width:1504,svg:'<svg viewBox="0 0 1504 229" width="1504" height="229" style="background-color: transparent;"><g text-align="center" text-anchor="middle" transform="translate(0.00, 0.00) rotate(0.00, 176.00, 44.00)"><g class=""><rect x="2.1180000000000003" y="2.1180000000000003" width="349.882" height="85.882" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="349.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="2.1180000000000003" x2="349.882" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="85.882" x2="2.1180000000000003" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="85.882" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g fill="#7746f1" transform-origin="top left" transform="translate(176, 25)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="left" alignment-baseline="central">Step 1</text></g></g><g text-align="center" text-anchor="middle" transform="translate(384.00, 0.00) rotate(0.00, 176.00, 44.00)"><g class=""><rect x="2.1180000000000003" y="2.1180000000000003" width="349.882" height="85.882" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="349.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="2.1180000000000003" x2="349.882" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="85.882" x2="2.1180000000000003" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="85.882" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g fill="#7746f1" transform-origin="top left" transform="translate(176, 25)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="left" alignment-baseline="central">Step 2</text></g></g><g text-align="center" text-anchor="middle" transform="translate(768.00, 0.00) rotate(0.00, 176.00, 44.00)"><g class="tl-centered-g"><rect x="2.1180000000000003" y="2.1180000000000003" width="349.882" height="85.882" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="349.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="2.1180000000000003" x2="349.882" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="85.882" x2="2.1180000000000003" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="85.882" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g fill="#7746f1" transform-origin="top left" transform="translate(176, 25)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="left" alignment-baseline="central">Step 3</text></g></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(38.00, 120.00) rotate(0.00, 138.00, 54.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">incididunt ut labore etlor</text></g><g text-align="center" text-anchor="middle" transform="translate(1152.00, 0.00) rotate(0.00, 176.00, 44.00)"><g class="tl-centered-g"><rect x="2.1180000000000003" y="2.1180000000000003" width="349.882" height="85.882" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="349.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="2.1180000000000003" x2="349.882" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="349.882" y1="85.882" x2="2.1180000000000003" y2="85.882" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="85.882" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g fill="#7746f1" transform-origin="top left" transform="translate(176, 25)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="left" alignment-baseline="central">Step 4</text></g></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(422.00, 120.00) rotate(0.00, 138.00, 54.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">incididunt ut labore etlor</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(806.00, 120.00) rotate(0.00, 138.00, 54.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">incididunt ut labore etlor</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(1190.00, 120.00) rotate(0.00, 138.00, 54.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">Lorem ipsum dolor sit,</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">consectetur adipiscing,</text><text y="70" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">sed do eiusmod tempor</text><text y="98" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8841156470471224)" x="156.08817744704473">incididunt ut labore etlor</text></g></svg>'}},flywheel:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"5b3035a3-027b-4f91-3a78-511b4ab1437a":{id:"5b3035a3-027b-4f91-3a78-511b4ab1437a",type:"arrow",name:"Arrow",parentId:"page",childIndex:2,point:[607.42,127.33],rotation:0,bend:.38579003941729895,handles:{start:{id:"start",index:0,point:[-14.48,-2.33],canBind:!0},end:{id:"end",index:1,point:[160.31,200.34],canBind:!0},bend:{id:"bend",index:2,point:[112.01,65.29]}},decorations:{end:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"55c7268a-8e7b-4283-1b8e-d7adb49b60e6":{id:"55c7268a-8e7b-4283-1b8e-d7adb49b60e6",type:"arrow",name:"Arrow",parentId:"page",childIndex:3,point:[605.04,384.78],rotation:0,bend:.3095854342501735,handles:{start:{id:"start",index:0,point:[162.88,-13.11],canBind:!0},end:{id:"end",index:1,point:[-13.04,167.22],canBind:!0},bend:{id:"bend",index:2,point:[102.83,104.29]}},decorations:{end:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"3cfcd160-f69e-4631-1fe5-a7651145ce0d":{id:"3cfcd160-f69e-4631-1fe5-a7651145ce0d",type:"arrow",name:"Arrow",parentId:"page",childIndex:4,point:[336,384],rotation:0,bend:.3096244996346072,handles:{start:{id:"start",index:0,point:[167.17,167.02],canBind:!0},end:{id:"end",index:1,point:[-2.42,-12.91],canBind:!0},bend:{id:"bend",index:2,point:[54.52,103.31]}},decorations:{end:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"3a336e31-7d15-472e-1069-0088b69aa6bb":{id:"3a336e31-7d15-472e-1069-0088b69aa6bb",type:"arrow",name:"Arrow",parentId:"page",childIndex:5,point:[328,128],rotation:0,bend:.3361081327617002,handles:{start:{id:"start",index:0,point:[-1.29,204.46],canBind:!0},end:{id:"end",index:1,point:[175.4,-3.64],canBind:!0},bend:{id:"bend",index:2,point:[52.08,70.72]}},decorations:{end:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"d6fc4f6d-b407-41d4-0b15-1741656a6c33":{id:"d6fc4f6d-b407-41d4-0b15-1741656a6c33",type:"text",name:"Text",parentId:"page",childIndex:6,point:[520,104],rotation:0,text:"One",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8260586360543353,font:"script",textAlign:"middle"}},"b12531f9-c8fa-477b-2d25-870193af6ff1":{id:"b12531f9-c8fa-477b-2d25-870193af6ff1",type:"text",name:"Text",parentId:"page",childIndex:7,point:[752,336],rotation:0,text:"Two",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8260586360543353,font:"script",textAlign:"middle"}},"a3df395b-79b9-4d53-1f84-63cfc1ec1bc8":{id:"a3df395b-79b9-4d53-1f84-63cfc1ec1bc8",type:"text",name:"Text",parentId:"page",childIndex:8,point:[512,536],rotation:0,text:"Three",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8260586360543353,font:"script",textAlign:"middle"}},"27670358-2271-4bd5-2c64-598eb9eb4dc6":{id:"27670358-2271-4bd5-2c64-598eb9eb4dc6",type:"text",name:"Text",parentId:"page",childIndex:9,point:[294.5,336],rotation:0,text:"Four",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:.8260586360543353,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:510.5,height:465},width:510.5,svg:'<svg viewBox="0 0 510.5 465" width="510.5" height="465" style="background-color: transparent;"><g class="" transform="translate(312.92, 23.33) rotate(0.00, 80.07, 92.84)"><defs><mask><rect x="-100" y="-100" width="360.1300564607744" height="385.67171201387475" fill="white"></rect><rect x="112.00502823038723" y="65.28585600693738" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M -14.48 -2.33 A 199.24326528571817 199.24326528571817 0 0 1 160.31 200.34" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path><g><path d="M 168.30871236075654,186.48285020035215 L 160.31,200.34 152.3087124298368,186.4843369981963" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g class="" transform="translate(310.54, 280.78) rotate(0.00, 80.09, 82.10)"><defs><mask><rect x="-100" y="-100" width="360.18709717016566" height="364.2027014136878" fill="white"></rect><rect x="102.83354858508284" y="104.29135070684393" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M 162.88 -13.11 A 222.9364239272154 222.9364239272154 0 0 1 -13.04 167.22" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path><g><path d="M 2.225876144821453,172.01093159322602 L -13.04,167.22 -1.2579934600620746,156.39482924417078" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g class="tl-centered-g" transform="translate(41.50, 280.00) rotate(0.00, 77.21, 81.92)"><defs><mask><rect x="-100" y="-100" width="354.42364046520083" height="363.83893878709597" fill="white"></rect><rect x="54.521820232600426" y="103.30946939354799" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M 167.17 167.02 A 218.78103103315786 218.78103103315786 0 0 1 -2.42 -12.91" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path><g><path d="M -7.841710609421167,2.1434067263091645 L -2.42,-12.91 7.905777333772692,-0.6879575171190755" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g class="tl-centered-g" transform="translate(33.50, 24.00) rotate(0.00, 80.60, 94.93)"><defs><mask><rect x="-100" y="-100" width="361.20939101407447" height="389.86741903915834" fill="white"></rect><rect x="52.08469550703724" y="70.72370951957916" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M -1.29 204.46 A 225.99291426488986 225.99291426488986 0 0 1 175.4 -3.64" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path><g><path d="M 160.03808035667558,-8.113413112159797 L 175.4,-3.64 163.844950781585,7.427106105934227" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(225.50, 0.00) rotate(0.00, 26.50, 16.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8260586360543353)" x="32.080047158125616">One</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(457.50, 232.00) rotate(0.00, 26.50, 16.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8260586360543353)" x="32.080047158125616">Two</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(217.50, 432.00) rotate(0.00, 35.00, 16.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8260586360543353)" x="42.36987360507157">Three</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(0.00, 232.00) rotate(0.00, 28.00, 16.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.8260586360543353)" x="33.89589888405725">Four</text></g></svg>'}},quadrant:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"d4981fab-f010-41b4-3918-0b4c10baea01":{id:"d4981fab-f010-41b4-3918-0b4c10baea01",type:"arrow",name:"Arrow",parentId:"page",childIndex:1,point:[608,160],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[0,320],canBind:!0},end:{id:"end",index:1,point:[0,0],canBind:!0},bend:{id:"bend",index:2,point:[0,160]}},decorations:{end:"arrow",start:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"17eb22ab-7b7d-4ce1-0570-abe7c680dec3":{id:"17eb22ab-7b7d-4ce1-0570-abe7c680dec3",type:"arrow",name:"Arrow",parentId:"page",childIndex:2,point:[424,320],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[0,0],canBind:!0},end:{id:"end",index:1,point:[368,0],canBind:!0},bend:{id:"bend",index:2,point:[184,0]}},decorations:{end:"arrow",start:"arrow"},style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"bad53771-dcfa-4761-2446-aeecdfc7fd36":{id:"bad53771-dcfa-4761-2446-aeecdfc7fd36",type:"text",name:"Text",parentId:"page",childIndex:3,point:[576,112],rotation:0,text:"$$$",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1,font:"script",textAlign:"middle"}},"79f58b13-46e9-4dbb-1ade-02c007416434":{id:"79f58b13-46e9-4dbb-1ade-02c007416434",type:"text",name:"Text",parentId:"page",childIndex:4,point:[593,488],rotation:0,text:"$",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1,font:"script",textAlign:"middle"}},"e07ad3d9-9a1d-4757-1d2c-a906841f014c":{id:"e07ad3d9-9a1d-4757-1d2c-a906841f014c",type:"text",name:"Text",parentId:"page",childIndex:5,point:[795.5,304],rotation:0,text:"Hard",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1,font:"script",textAlign:"middle"}},"28948bec-db32-4e7b-308f-9f3227021aa3":{id:"28948bec-db32-4e7b-308f-9f3227021aa3",type:"text",name:"Text",parentId:"page",childIndex:6,point:[344,304],rotation:0,text:"Easy",style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:521.5,height:414},width:521.5,svg:'<svg viewBox="0 0 521.5 414" width="521.5" height="414" style="background-color: transparent;"><g class="" transform="translate(264.00, 48.00) rotate(0.00, 0.50, 160.00)"><defs><mask><rect x="-100" y="-100" width="201" height="520" fill="white"></rect><rect x="0" y="160" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M0,320L0,0" fill="#1d1d1d" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path><g><path d="M 7.999999999999999,306.143593539449 L 0,320 -7.999999999999999,306.143593539449" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g><g><path d="M -7.999999999999999,13.85640646055102 L 0,0 7.999999999999999,13.85640646055102" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g class="" transform="translate(80.00, 208.00) rotate(0.00, 184.00, 0.50)"><defs><mask><rect x="-100" y="-100" width="568" height="201" fill="white"></rect><rect x="184" y="0" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M0,0L368,0" fill="#1d1d1d" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path><g><path d="M 13.85640646055102,7.999999999999999 L 0,0 13.85640646055102,-7.999999999999999" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g><g><path d="M 354.143593539449,-7.999999999999999 L 368,0 354.143593539449,7.999999999999999" fill="none" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-linejoin="round" pointer-events="none"></path></g></g></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(232.00, 0.00) rotate(0.00, 30.50, 19.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" x="30.5">$$$</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(249.00, 376.00) rotate(0.00, 13.50, 19.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" x="13.5">$</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(451.50, 192.00) rotate(0.00, 35.00, 19.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" x="35">Hard</text></g><g text-align="center" text-anchor="middle" fill="#1d1d1d" transform="translate(0.00, 192.00) rotate(0.00, 34.50, 19.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" x="34.5">Easy</text></g></svg>'}},venn:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"05b9987d-ea31-4664-2bf7-8cdff61c1c52":{id:"05b9987d-ea31-4664-2bf7-8cdff61c1c52",type:"text",name:"Text",parentId:"page",childIndex:9,point:[816,368],rotation:0,text:"Good",style:{color:"blue",size:"small",isFilled:!0,dash:"solid",scale:1.432720080681665,font:"script",textAlign:"middle"}},"84ec762b-f98e-4e75-1c5d-e656b272b97e":{id:"84ec762b-f98e-4e75-1c5d-e656b272b97e",type:"text",name:"Text",parentId:"page",childIndex:9.25,point:[624,688],rotation:0,text:"Fast",style:{color:"red",size:"small",isFilled:!0,dash:"solid",scale:1.432720080681665,font:"script",textAlign:"middle"}},"9f932b53-a194-4803-16c0-9b3bcb1ea26e":{id:"9f932b53-a194-4803-16c0-9b3bcb1ea26e",type:"text",name:"Text",parentId:"page",childIndex:9.5,point:[984,696],rotation:0,text:"Cheap",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.432720080681665,font:"script",textAlign:"middle"}},"b4fb4c43-a940-4abb-0425-30ca0e2ef3df":{id:"b4fb4c43-a940-4abb-0425-30ca0e2ef3df",type:"text",name:"Text",parentId:"page",childIndex:9.75,point:[824,712],rotation:0,text:"Low\nQuality",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:.7125938829717526,font:"script",textAlign:"middle"}},"1998e34a-0f81-41e6-1345-51c4aaa3fa4f":{id:"1998e34a-0f81-41e6-1345-51c4aaa3fa4f",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:.125,point:[528,472],radius:[199.94000000000005,199.94000000000005],rotation:0,style:{color:"red",size:"small",isFilled:!1,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"ead057fa-ce8c-4406-2ec0-d746ed921ee4":{id:"ead057fa-ce8c-4406-2ec0-d746ed921ee4",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:.25,point:[792,472],radius:[199.94000000000005,199.94000000000005],rotation:0,style:{color:"violet",size:"small",isFilled:!1,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"33fb46c5-b489-46f8-36a7-5d1ca38f78d1":{id:"33fb46c5-b489-46f8-36a7-5d1ca38f78d1",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:.375,point:[664,288],radius:[199.94000000000005,199.94000000000005],rotation:0,style:{color:"blue",size:"small",isFilled:!1,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"9ebe9241-a315-4435-28cb-aa226ff83005":{id:"9ebe9241-a315-4435-28cb-aa226ff83005",type:"text",name:"Text",parentId:"page",childIndex:10.75,point:[921.5,536],rotation:0,text:"Take Time",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:.7125938829717526,font:"script",textAlign:"middle"}},"c3c12744-fa0e-41f3-0a76-393cb9fbff1e":{id:"c3c12744-fa0e-41f3-0a76-393cb9fbff1e",type:"text",name:"Text",parentId:"page",childIndex:11.75,point:[712.5,536],rotation:0,text:"Expensive",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:.7125938829717526,font:"script",textAlign:"middle"}},"ff77e033-6f2f-4856-14f4-38f2d2e6c135":{id:"ff77e033-6f2f-4856-14f4-38f2d2e6c135",type:"text",name:"Text",parentId:"page",childIndex:11.75,point:[851,616],rotation:0,text:" ",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:.7125938829717526,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:663.8800000000001,height:583.8800000000001},width:663.8800000000001,svg:'<svg viewBox="0 0 663.8800000000001 583.8800000000001" width="663.8800000000001" height="583.8800000000001" style="background-color: transparent;"><g class="" transform="translate(0.00, 184.00) rotate(0.00, 199.94, 199.94)"><ellipse cx="199.94000000000005" cy="199.94000000000005" rx="197.82200000000006" ry="197.82200000000006" fill="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" pointer-events="none" stroke-linecap="round" stroke-linejoin="round"></ellipse></g><g class="" transform="translate(264.00, 184.00) rotate(0.00, 199.94, 199.94)"><ellipse cx="199.94000000000005" cy="199.94000000000005" rx="197.82200000000006" ry="197.82200000000006" fill="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" pointer-events="none" stroke-linecap="round" stroke-linejoin="round"></ellipse></g><g class="tl-centered-g" transform="translate(136.00, 0.00) rotate(0.00, 199.94, 199.94)"><ellipse cx="199.94000000000005" cy="199.94000000000005" rx="197.82200000000006" ry="197.82200000000006" fill="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" pointer-events="none" stroke-linecap="round" stroke-linejoin="round"></ellipse></g><g text-align="center" text-anchor="middle" fill="#1c7ed6" transform="translate(288.00, 80.00) rotate(0.00, 54.00, 25.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.432720080681665)" x="37.690544530029676">Good</text></g><g text-align="center" text-anchor="middle" fill="#ff2133" transform="translate(96.00, 400.00) rotate(0.00, 43.50, 25.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.432720080681665)" x="30.36182753807946">Fast</text></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(456.00, 408.00) rotate(0.00, 63.50, 25.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.432720080681665)" x="44.32128847512749">Cheap</text></g><g text-align="center" text-anchor="middle" fill="#788492" transform="translate(296.00, 424.00) rotate(0.00, 36.00, 25.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7125938829717526)" x="50.51965903758263">Low</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7125938829717526)" x="50.51965903758263">Quality</text></g><g text-align="center" text-anchor="middle" fill="#788492" transform="translate(393.50, 248.00) rotate(0.00, 50.50, 15.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7125938829717526)" x="70.86785503883118">Take Time</text></g><g text-align="center" text-anchor="middle" fill="#788492" transform="translate(184.50, 248.00) rotate(0.00, 50.00, 15.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7125938829717526)" x="70.16619310775364">Expensive</text></g><g text-align="center" text-anchor="middle" fill="#788492" transform="translate(323.00, 328.00) rotate(0.00, 7.50, 15.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(0.7125938829717526)" x="10.524928966163047"> </text></g></svg>'}},pyramid:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"0886084d-8916-4544-188e-1b8a5f9d43db":{id:"0886084d-8916-4544-188e-1b8a5f9d43db",type:"triangle",name:"Triangle",parentId:"page",childIndex:1,point:[496.00000000000006,184],size:[1013.15,800.74],rotation:0,style:{color:"white",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"d22e1b19-cdf0-4e9b-3bf5-a03a15862c9f":{id:"d22e1b19-cdf0-4e9b-3bf5-a03a15862c9f",type:"arrow",name:"Arrow",parentId:"page",childIndex:3,point:[222.58,456],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[952,0],canBind:!0},end:{id:"end",index:1,point:[0,0],canBind:!0,bindingId:"bf28142e-325a-49b3-2b50-44f6c25460b2"},bend:{id:"bend",index:2,point:[476,0]}},decorations:{},style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"69d5b18d-926e-436b-0ec5-217293e2b2ef":{id:"69d5b18d-926e-436b-0ec5-217293e2b2ef",type:"arrow",name:"Arrow",parentId:"page",childIndex:4,point:[218.58,589],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[1040,0],canBind:!0},end:{id:"end",index:1,point:[0,0],canBind:!0},bend:{id:"bend",index:2,point:[520,0]}},decorations:{},style:{color:"blue",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"c21444f2-93d1-40d7-2a6a-f71d841e29a7":{id:"c21444f2-93d1-40d7-2a6a-f71d841e29a7",type:"arrow",name:"Arrow",parentId:"page",childIndex:5,point:[224,722],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[1120,0],canBind:!0},end:{id:"end",index:1,point:[0,0],canBind:!0},bend:{id:"bend",index:2,point:[560,0]}},decorations:{},style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"b75e5507-249c-4a34-0df3-282340c3f21b":{id:"b75e5507-249c-4a34-0df3-282340c3f21b",type:"arrow",name:"Arrow",parentId:"page",childIndex:6,point:[216,855],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[1208,0],canBind:!0},end:{id:"end",index:1,point:[0,0],canBind:!0},bend:{id:"bend",index:2,point:[604,0]}},decorations:{},style:{color:"blue",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"8f9b0d72-fdef-4ec0-1080-7e144d3d2eb3":{id:"8f9b0d72-fdef-4ec0-1080-7e144d3d2eb3",type:"text",name:"Text",parentId:"page",childIndex:7,point:[211,392],rotation:0,text:"Self-actualization",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.6942371033092245,font:"script",textAlign:"middle"}},"22a8bb2a-d70b-46b4-19cb-b2544acc01b6":{id:"22a8bb2a-d70b-46b4-19cb-b2544acc01b6",type:"text",name:"Text",parentId:"page",childIndex:8,point:[211,520],rotation:0,text:"Esteem",style:{color:"blue",size:"small",isFilled:!0,dash:"solid",scale:1.6942371033092245,font:"script",textAlign:"middle"}},"115f9e96-a566-46aa-042e-8378c7bb92dd":{id:"115f9e96-a566-46aa-042e-8378c7bb92dd",type:"text",name:"Text",parentId:"page",childIndex:9,point:[211,648],rotation:0,text:"Love/Belonging",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.6942371033092245,font:"script",textAlign:"middle"}},"a398402f-af3d-4743-3dc9-386370b2620d":{id:"a398402f-af3d-4743-3dc9-386370b2620d",type:"text",name:"Text",parentId:"page",childIndex:10,point:[211,784],rotation:0,text:"Safety",style:{color:"blue",size:"small",isFilled:!0,dash:"solid",scale:1.6942371033092245,font:"script",textAlign:"middle"}},"e20bae77-d2f8-404e-3292-f0d78e6f5d2e":{id:"e20bae77-d2f8-404e-3292-f0d78e6f5d2e",type:"text",name:"Text",parentId:"page",childIndex:11,point:[211,904],rotation:0,text:"Physiological",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.6942371033092245,font:"script",textAlign:"middle"}},"18430d21-d0d1-4605-04d9-21dcd0f3c6a3":{id:"18430d21-d0d1-4605-04d9-21dcd0f3c6a3",type:"arrow",name:"Arrow",parentId:"page",childIndex:7,point:[216,983.93],rotation:0,bend:0,handles:{start:{id:"start",index:0,point:[280.51,0],canBind:!0,bindingId:"0c2729e8-0d53-4dee-1c12-9ee7369d1395"},end:{id:"end",index:1,point:[0,.04],canBind:!0},bend:{id:"bend",index:2,point:[140.26,.02]}},decorations:{},style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"4f4681b8-2cb0-42db-386c-866cbc24a311":{id:"4f4681b8-2cb0-42db-386c-866cbc24a311",type:"text",name:"Text",parentId:"page",childIndex:7,point:[935.58,330.62],rotation:0,text:"morality,\ncreativity",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:1.087495623855612,font:"script",textAlign:"middle"}},"90751c3c-1f94-4fa4-2823-84485d39700b":{id:"90751c3c-1f94-4fa4-2823-84485d39700b",type:"text",name:"Text",parentId:"page",childIndex:8,point:[826.08,475.5],rotation:0,text:"self-esteem, confidence, \nachievement, respect ",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:1.087495623855612,font:"script",textAlign:"middle"}},"2a1f7b3d-5d42-42ba-250a-65a294f0a741":{id:"2a1f7b3d-5d42-42ba-250a-65a294f0a741",type:"text",name:"Text",parentId:"page",childIndex:9,point:[876.38,634],rotation:0,text:"friendship, family",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:1.087495623855612,font:"script",textAlign:"middle"}},"2e43b13a-6795-4270-1d7e-1f07d08bb10e":{id:"2e43b13a-6795-4270-1d7e-1f07d08bb10e",type:"text",name:"Text",parentId:"page",childIndex:10,point:[683.58,747.81],rotation:0,text:"security of body, of employment, of resources,\nof morality, of the family, of health, of property",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:1.087495623855612,font:"script",textAlign:"middle"}},"057384d4-c107-4b13-2340-a932f1ef546d":{id:"057384d4-c107-4b13-2340-a932f1ef546d",type:"text",name:"Text",parentId:"page",childIndex:11,point:[711.58,895.13],rotation:0,text:"breathing, food, water, sleep, homeostasis",style:{color:"gray",size:"small",isFilled:!0,dash:"solid",scale:1.087495623855612,font:"script",textAlign:"middle"}}},bindings:{"0c2729e8-0d53-4dee-1c12-9ee7369d1395":{id:"0c2729e8-0d53-4dee-1c12-9ee7369d1395",type:"arrow",fromId:"18430d21-d0d1-4605-04d9-21dcd0f3c6a3",toId:"0886084d-8916-4544-188e-1b8a5f9d43db",handleId:"start",point:[.98,.98],distance:16},"bf28142e-325a-49b3-2b50-44f6c25460b2":{id:"bf28142e-325a-49b3-2b50-44f6c25460b2",type:"arrow",fromId:"d22e1b19-cdf0-4e9b-3bf5-a03a15862c9f",toId:"8f9b0d72-fdef-4ec0-1080-7e144d3d2eb3",handleId:"end",point:[.03,.99],distance:8}}},assets:{},meta:{width:1298.15,height:800.74},width:2162,svg:'<svg viewBox="0 0 1300.15 802.74" width="1300.15" height="802.74" style="background-color: transparent;"><defs><style>@import url(\'https://fonts.googleapis.com/css2?family=Caveat+Brush&amp;family=Source+Code+Pro&amp;family=Source+Sans+Pro&amp;family=Crimson+Pro&amp;display=block\');</style></defs><g transform="translate(286.00, 1.00) rotate(0.00, 506.57, 400.37)"><g class="" data-color="white" data-fill="true"><polygon fill="#fefefe" points="506.575,0,1013.15,800.74,0,800.74" pointer-events="none"></polygon><g pointer-events="stroke"><line x1="506.575" y1="0" x2="1013.15" y2="800.74" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="1013.15" y1="800.74" x2="0" y2="800.74" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="0" y1="800.74" x2="506.575" y2="0" stroke="#1d1d1d" stroke-width="4.236000000000001" stroke-linecap="round" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><text font-size="28px" font-family="Caveat Brush" font-weight="normal" line-height="36.4px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#1d1d1d" transform-origin="top left" transform="translate(498.575, 480.4588)"><tspan y="18.2px" x="12">\n</tspan></text></g><g class="tl-centered-g" data-color="violet" data-fill="true" transform="translate(12.58, 273.00) rotate(0.00, 476.00, 0.50)"><defs><mask id="d22e1b19-cdf0-4e9b-3bf5-a03a15862c9f_clip"><rect x="-100" y="-100" width="1152" height="201" fill="white"></rect><rect x="476" y="0" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M952,0L0,0" fill="#7746f1" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path></g></g><g class="tl-centered-g" data-color="blue" data-fill="true" transform="translate(8.58, 406.00) rotate(0.00, 520.00, 0.50)"><defs><mask id="69d5b18d-926e-436b-0ec5-217293e2b2ef_clip"><rect x="-100" y="-100" width="1240" height="201" fill="white"></rect><rect x="520" y="0" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M1040,0L0,0" fill="#1c7ed6" stroke="#1c7ed6" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path></g></g><g class="tl-centered-g" data-color="violet" data-fill="true" transform="translate(14.00, 539.00) rotate(0.00, 560.00, 0.50)"><defs><mask id="c21444f2-93d1-40d7-2a6a-f71d841e29a7_clip"><rect x="-100" y="-100" width="1320" height="201" fill="white"></rect><rect x="560" y="0" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M1120,0L0,0" fill="#7746f1" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path></g></g><g class="tl-centered-g" data-color="blue" data-fill="true" transform="translate(6.00, 672.00) rotate(0.00, 604.00, 0.50)"><defs><mask id="b75e5507-249c-4a34-0df3-282340c3f21b_clip"><rect x="-100" y="-100" width="1408" height="201" fill="white"></rect><rect x="604" y="0" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M1208,0L0,0" fill="#1c7ed6" stroke="#1c7ed6" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path></g></g><text font-size="47.43863889265829px" font-family="Caveat Brush" font-weight="normal" line-height="61.67023056045578px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#7746f1" data-color="violet" transform="translate(1.00, 209.00) rotate(0.00, 187.50, 36.00)"><tspan y="30.83511528022789px" x="191.5">Self-actualization\n</tspan></text><g class="tl-centered-g" data-color="violet" data-fill="true" transform="translate(6.00, 800.93) rotate(0.00, 140.25, 0.50)"><defs><mask id="18430d21-d0d1-4605-04d9-21dcd0f3c6a3_clip"><rect x="-100" y="-100" width="480.51" height="201" fill="white"></rect><rect x="140.255" y="0.020000000000000018" width="0" height="0" rx="4" ry="4" fill="black" opacity="1"></rect></mask></defs><g pointer-events="none" opacity="1" mask=""><path d="M280.51,0L0,0.04" fill="#7746f1" stroke="#7746f1" stroke-width="4.236000000000001" stroke-dasharray="none" stroke-dashoffset="none" stroke-linecap="round" stroke-linejoin="round" pointer-events="stroke"></path></g></g><text font-size="30.449877467957133px" font-family="Caveat Brush" font-weight="normal" line-height="39.584840708344274px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#788492" data-color="gray" transform="translate(725.58, 147.62) rotate(0.00, 67.00, 44.50)"><tspan y="19.792420354172137px" x="71">morality,\n</tspan><tspan y="59.37726106251641px" x="71">\ncreativity\n</tspan></text><text font-size="47.43863889265829px" font-family="Caveat Brush" font-weight="normal" line-height="61.67023056045578px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#1c7ed6" data-color="blue" transform="translate(1.00, 337.00) rotate(0.00, 84.00, 36.00)"><tspan y="30.83511528022789px" x="88">Esteem\n</tspan></text><text font-size="30.449877467957133px" font-family="Caveat Brush" font-weight="normal" line-height="39.584840708344274px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#788492" data-color="gray" transform="translate(616.08, 292.50) rotate(0.00, 176.50, 44.50)"><tspan y="19.792420354172137px" x="180.5">self-esteem, confidence, \n</tspan><tspan y="59.37726106251641px" x="180.5">\nachievement, respect \n</tspan></text><text font-size="47.43863889265829px" font-family="Caveat Brush" font-weight="normal" line-height="61.67023056045578px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#7746f1" data-color="violet" transform="translate(1.00, 465.00) rotate(0.00, 168.50, 36.00)"><tspan y="30.83511528022789px" x="172.5">Love/Belonging\n</tspan></text><text font-size="30.449877467957133px" font-family="Caveat Brush" font-weight="normal" line-height="39.584840708344274px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#788492" data-color="gray" transform="translate(666.38, 451.00) rotate(0.00, 120.00, 25.00)"><tspan y="19.792420354172137px" x="124">friendship, family\n</tspan></text><text font-size="47.43863889265829px" font-family="Caveat Brush" font-weight="normal" line-height="61.67023056045578px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#1c7ed6" data-color="blue" transform="translate(1.00, 601.00) rotate(0.00, 73.00, 36.00)"><tspan y="30.83511528022789px" x="77">Safety\n</tspan></text><text font-size="30.449877467957133px" font-family="Caveat Brush" font-weight="normal" line-height="39.584840708344274px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#788492" data-color="gray" transform="translate(473.58, 564.81) rotate(0.00, 319.00, 44.50)"><tspan y="19.792420354172137px" x="323">security of body, of employment, of resources,\n</tspan><tspan y="59.37726106251641px" x="323">\nof morality, of the family, of health, of property\n</tspan></text><text font-size="47.43863889265829px" font-family="Caveat Brush" font-weight="normal" line-height="61.67023056045578px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#7746f1" data-color="violet" transform="translate(1.00, 721.00) rotate(0.00, 142.00, 36.00)"><tspan y="30.83511528022789px" x="146">Physiological\n</tspan></text><text font-size="30.449877467957133px" font-family="Caveat Brush" font-weight="normal" line-height="39.584840708344274px" letter-spacing="-0.03em" text-align="center" dominant-baseline="mathematical" alignment-baseline="mathematical" text-anchor="middle" fill="#788492" data-color="gray" transform="translate(501.58, 712.13) rotate(0.00, 291.00, 25.00)"><tspan y="19.792420354172137px" x="295">breathing, food, water, sleep, homeostasis\n</tspan></text></svg>'}},callouts3:{type:"drawing",attrs:{horizontalAlign:null,page:{id:"page",name:"Page 1",childIndex:1,shapes:{"c9608754-47d2-466e-02ab-b9a4b7b4f112":{id:"c9608754-47d2-466e-02ab-b9a4b7b4f112",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[392,184],size:[270,319.79],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"123a9ace-99c9-4623-26a4-dd6d93bfd888":{id:"123a9ace-99c9-4623-26a4-dd6d93bfd888",type:"text",name:"Text",parentId:"page",childIndex:5,point:[452,264],rotation:0,text:"400",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:2.7834210526315784,font:"script",textAlign:"middle"}},"72ad12a3-8fb3-425f-012d-8ded026e8d7c":{id:"72ad12a3-8fb3-425f-012d-8ded026e8d7c",type:"text",name:"Text",parentId:"page",childIndex:6,point:[451,400],rotation:0,text:"companies\nsigned up",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0448375929240272,font:"script",textAlign:"middle"}},"565769ca-a63a-47e9-3540-1e933937db31":{id:"565769ca-a63a-47e9-3540-1e933937db31",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:5,point:[720,184],size:[270,319.79],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"cf065500-ae12-4be8-2758-4c154ea8609c":{id:"cf065500-ae12-4be8-2758-4c154ea8609c",type:"text",name:"Text",parentId:"page",childIndex:6,point:[774,264],rotation:0,text:"92%",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:2.7834210526315784,font:"script",textAlign:"middle"}},"7348dda5-d071-4268-2c83-7c78c15134f9":{id:"7348dda5-d071-4268-2c83-7c78c15134f9",type:"text",name:"Text",parentId:"page",childIndex:7,point:[772,400],rotation:0,text:"monthly\nactive users",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0448375929240272,font:"script",textAlign:"middle"}},"1ffb62ba-9ea5-4fd2-12eb-f02f395144ed":{id:"1ffb62ba-9ea5-4fd2-12eb-f02f395144ed",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:6,point:[1048,184],size:[270,318.19],rotation:0,style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1},label:"",labelPoint:[.5,.5]},"ff1ea7c5-d930-4638-2c5b-c011b71a0c67":{id:"ff1ea7c5-d930-4638-2c5b-c011b71a0c67",type:"text",name:"Text",parentId:"page",childIndex:7,point:[1134.5,264],rotation:0,text:"76",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:2.7834210526315784,font:"script",textAlign:"middle"}},"5717d874-113c-4b0b-1cfe-029c85eb0269":{id:"5717d874-113c-4b0b-1cfe-029c85eb0269",type:"text",name:"Text",parentId:"page",childIndex:8,point:[1102,400],rotation:0,text:"weekly\nsubscribers",style:{color:"violet",size:"small",isFilled:!0,dash:"solid",scale:1.0448375929240272,font:"script",textAlign:"middle"}}},bindings:{}},assets:{},meta:{width:926,height:319.79},width:926,svg:'<svg viewBox="0 0 926 319.79" width="926" height="319.79" style="background-color: transparent;"><g class="" transform="translate(0.00, 0.00) rotate(0.00, 135.00, 159.90)"><rect x="2.1180000000000003" y="2.1180000000000003" width="267.882" height="317.672" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="267.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="2.1180000000000003" x2="267.882" y2="317.672" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="317.672" x2="2.1180000000000003" y2="317.672" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="317.672" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(60.00, 80.00) rotate(0.00, 75.00, 44.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(2.7834210526315784)" x="26.945258579937605">400</text></g><g class="tl-centered-g" transform="translate(328.00, 0.00) rotate(0.00, 135.00, 159.90)"><rect x="2.1180000000000003" y="2.1180000000000003" width="267.882" height="317.672" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="267.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="2.1180000000000003" x2="267.882" y2="317.672" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="317.672" x2="2.1180000000000003" y2="317.672" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="317.672" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(59.00, 216.00) rotate(0.00, 76.00, 34.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="72.73857728195864">companies</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="72.73857728195864">signed up</text></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(382.00, 80.00) rotate(0.00, 81.00, 44.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(2.7834210526315784)" x="29.100879266332615">92%</text></g><g class="tl-centered-g" transform="translate(656.00, 0.00) rotate(0.00, 135.00, 159.09)"><rect x="2.1180000000000003" y="2.1180000000000003" width="267.882" height="316.072" fill="#e2daf8" pointer-events="none"></rect><g pointer-events="none" stroke="#7746f1" stroke-width="4.236000000000001" stroke-linecap="round"><line x1="2.1180000000000003" y1="2.1180000000000003" x2="267.882" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="2.1180000000000003" x2="267.882" y2="316.072" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="267.882" y1="316.072" x2="2.1180000000000003" y2="316.072" stroke-dasharray="none" stroke-dashoffset="none"></line><line x1="2.1180000000000003" y1="316.072" x2="2.1180000000000003" y2="2.1180000000000003" stroke-dasharray="none" stroke-dashoffset="none"></line></g></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(380.00, 216.00) rotate(0.00, 83.00, 34.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="79.43818308424432">monthly</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="79.43818308424432">active users</text></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(742.50, 80.00) rotate(0.00, 48.50, 44.00)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(2.7834210526315784)" x="17.424600548359653">76</text></g><g text-align="center" text-anchor="middle" fill="#7746f1" transform="translate(710.00, 216.00) rotate(0.00, 81.00, 34.50)"><text y="14" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="77.52400999787697">weekly</text><text y="42" letter-spacing="-0.84" font-size="28px" font-family="Caveat Brush" text-align="center" alignment-baseline="central" transform="scale(1.0448375929240272)" x="77.52400999787697">subscribers</text></g></svg>'}}},o=n(95235),i=n(46875),a=n(87254),c=n(9850),s=n.n(c),l=n(16975),u=n(91142);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=[{key:"diagram",name:function(){return a.ag._({id:"G1q1hG"})},keywords:["sketch","drawing","shapes","diagram"],shortcut:"/diagram"},{key:"staircase",name:function(){return a.ag._({id:"Fx6aUy"})},keywords:["sequence","steps","stepper","stages","staircase","diagram"],previewImage:{src:"/_next/static/media/Staircase.742d2893.svg",height:96,width:254,blurWidth:0,blurHeight:0}},{key:"flywheel",name:function(){return a.ag._({id:"6BBMcV"})},keywords:["cycle","circle","diagram","flywheel"],previewImage:{src:"/_next/static/media/Flywheel.fd4813bb.svg",height:96,width:254,blurWidth:0,blurHeight:0}},{key:"quadrant",name:function(){return a.ag._({id:"tmk28W"})},keywords:["matrix","quadrant","diagram","2x2"],previewImage:{src:"/_next/static/media/Quadrants.61681555.svg",height:96,width:254,blurWidth:0,blurHeight:0}},{key:"venn",name:function(){return a.ag._({id:"z5TX2d"})},previewImage:{src:"/_next/static/media/Venn.7a87e038.svg",height:96,width:254,blurWidth:0,blurHeight:0},keywords:["venn","diagram"]},{key:"pyramid",name:function(){return a.ag._({id:"SkzqyM"})},keywords:["pyramid","diagram","hierarchy","priorities"],previewImage:{src:"/_next/static/media/Pyramid.683aefd6.svg",height:97,width:254,blurWidth:0,blurHeight:0}}].map(function(e){var t=r[e.key]||{type:"drawing",attrs:{}};return f(f({},e),{},{nodeName:"drawing",icon:i.K,featureFlag:"drawingBlock",execute:function(e){var n=(0,u.RA)(),r=s()(t);r.attrs.id=n,(0,u.Sc)(n,!0),e.commands.insertContent(r)},dragStartFn:function(e){var n=(0,u.RA)(),r=s()(t);r.attrs.id=n,(0,u.Sc)(n,!0),(0,l.UV)(e,r)}})})},91142:function(e,t,n){n.d(t,{RA:function(){return u},Sc:function(){return l},Us:function(){return c},ZF:function(){return s}});var r=n(37164),o=n(46358),i=n(9849),a=n(62141),c=function(e,t,n){e&&t&&e.replacePageContent(t.shapes,t.bindings,n)},s=function(e,t){e.setSetting("isSnapping",t),setTimeout(function(){(0,i.kC)(e,t?128:10)})},l=function(e,t){var n=(0,o.bh)(),r=t?{drawingId:e}:{drawingId:null};n.dispatch((0,a.h)(r))},u=function(){return(0,r.x0)(5)}},52347:function(e,t,n){n.d(t,{Hy:function(){return S},Pi:function(){return A},HU:function(){return E}});var r=n(12741),o=n(72338),i=n(27191),a=n(2784),c=n(639),s=n(54026),l=n(66902),u=n(98199),d=n(95235);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=n(46358),m=n(62141),h=n(10710),g=n(23015),v=n(52322),b=function(e){var t=e.ref,n=e.pickerInstance;(0,a.useImperativeHandle)(t,function(){var e=function(e){var t,r,o,i=null===(t=n.component)||void 0===t?void 0:null===(r=t.refs)||void 0===r?void 0:null===(o=r.searchInput)||void 0===o?void 0:o.current;if(i){var a=e.key,c=e.code;i.dispatchEvent(new KeyboardEvent("keydown",{key:a,code:c}))}return e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:function(t){var n=t.event;return!!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(n.key)&&e(n)}}})},y=(0,a.forwardRef)(function(e,t){var n=e.query,r=e.onSelect,o=(0,p.CG)(m.yx),i=(0,h.py)("edit",o),s=(0,a.useState)(null),l=s[0],u=s[1],d=(0,a.useCallback)(function(e){if(u(e),e.shadowRoot){var t=document.createElement("style");t.innerHTML="nav + div.padding-lr { display: none }",e.shadowRoot.appendChild(t)}e.addEventListener("mousedown",g.br)},[]);b({ref:t,pickerInstance:l}),(0,a.useEffect)(function(){if(l){var e,t,r,o=null===(e=l.component)||void 0===e?void 0:null===(t=e.refs)||void 0===t?void 0:null===(r=t.searchInput)||void 0===r?void 0:r.current;o&&(o.value=n,o.dispatchEvent(new Event("input",{bubbles:!0})))}},[l,n]);var f=(0,a.useCallback)(function(e){var t=(0,c.Oj)(e.id);t&&r(t)},[r]);return i?(0,v.jsx)(c.h5,{onCreate:d,perLine:9,searchPosition:"sticky",handlePick:f,shouldFocusSearch:!1,dataTargetName:"emoji-list"}):(0,v.jsx)(v.Fragment,{})}),x=n(16531),j=n(10395),w=/:([a-zA-Z0-9_+-]+):$/,O=RegExp(x.V.source+"$","g"),k=new i.H$("EmojiMenu"),C=function(e){return{id:(0,c.vb)(e[0]),native:e[0]}},P=function(e){var t=(0,c.N$)(e);return{id:e.id,native:t}},S=o.NB.create({name:"emoji",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{},native:{}}},parseHTML:function(){return[{tag:"span.emoji:not([id])",skip:!0},{tag:"span[class=emoji]"}]},addCommands:function(){return{openEmojiPicker:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return function(t){var n,r=t.commands,o=t.tr;return(n=t.editor,function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.getState(n.view.state));r.active=!0,r.key=t,r.query="",o.setMeta(e,r)})(k,":"),!e||r.insertContent(":")}}}},addInputRules:function(){return[new o.VK({find:w,handler:function(e){var t=e.range,n=e.match,r=e.commands,o=n[1],i=(0,c.Oj)(o);if(i){var a=P(i);r.insertContentAt(t,{type:"emoji",attrs:a})}}}),(0,o.x2)({find:function(e){var t,n=(0,r.Z)(e.matchAll(O));if(!n||0===n.length)return null;var o=n[0],i={index:null!==(t=o.index)&&void 0!==t?t:-1,text:o[0],match:o};return console.debug("[EmojiNode] JAMES nodeInputRule",{matches:n,result:i}),i},type:this.type,getAttributes:C})]},addPasteRules:function(){return[(0,s.S)({find:x.V,type:this.type,getAttributes:C})]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.node;return["span",(0,o.P1)(t,{class:"emoji"}),"".concat(n.attrs.native||"")]},renderHTMLforAI:function(e){return e.node.attrs.native||""},renderText:function(e){var t=e.node;return"".concat(t.attrs.native||"")}}),A=(0,u.ty)({name:"emojiShortcuts",char:":",pluginKey:k,MenuComponent:(0,a.forwardRef)(function(e,t){var n=e.query,r=e.editor;return r.isEditable?(0,v.jsx)(y,{ref:t,query:n,onSelect:function(e){var t=e.id,o=(0,c.N$)(e),i=r.state.selection;r.chain().deleteRange({from:i.from-n.length-1,to:i.to}).insertContent({type:"emoji",attrs:{id:t,native:o}}).insertContent(" ").run()}}):null}),priority:l.a.EmojiShortcuts}),E=function(e){var t=e.node,n=e.pos,r=e.tr,o=e.schema;if(!(0,c.zx)())return!1;if(!t.isText||!t.text)return!0;var i=t.marks.map(function(e){return e.toJSON()}),a=(0,j.W)(t.text,i),s=a.replaced,l=a.nodes;try{s&&r.replaceWith(r.mapping.map(n),r.mapping.map(n+t.nodeSize),l.map(function(e){return o.nodeFromJSON(e)}))}catch(e){console.error("[migratePlugin] Error migrating emoji",{err:e,pos:n,text:t.text,node:t,nodes:l})}return!0}},16531:function(e,t,n){n.d(t,{V:function(){return o}});var r=n(56230),o=n.n(r)()()},10395:function(e,t,n){n.d(t,{W:function(){return a}});var r=n(639),o=n(16531);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=function(e,t){var n,a=[],c=e.matchAll(o.V),s=0,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}(c);try{for(l.s();!(n=l.n()).done;){var u=n.value,d=u.index;if(void 0!==d){var f=d+u[0].length,p=u[0],m=(0,r.vb)(p);if(!m)continue;var h=(0,r.Oj)(m),g=e.slice(s,d);g.length>0&&a.push({type:"text",text:g,marks:t});var v={type:"emoji",attrs:{native:p,id:null==h?void 0:h.id},marks:t};s=f,a.push(v),console.debug("[migratePlugin] Replacing bad emoji",{start:d,end:f,native:p,newNode:v,textBefore:g,match:u})}}}catch(e){l.e(e)}finally{l.f()}var b=e.slice(s);return 0===s?{replaced:!1,nodes:a}:(b&&a.push({type:"text",text:b,marks:t}),{replaced:!0,nodes:a})}},99703:function(e,t,n){n.d(t,{_g:function(){return E},ei:function(){return k},yv:function(){return O}});var r=n(95235),o=n(34676),i=n(72338),a=n(27191),c=n(52780),s=n(46358),l=n(30341),u=n(32333),d=n(62141),f=n(26087),p=n(95472),m=n(59131),h=n(47592),g=n(34264),v=n(24336),b=n(33084),y=n(56261);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=new a.H$("expandableNodes"),O=function(e){return e.some(function(e){return e.spec.isExpandableNode})},k=function(e){return e instanceof m.c&&0===e.side&&C(e.node)},C=function(e){return!0===e.type.spec.expandable},P=function(e,t){if(!(null!=t&&t.from))return!1;var n=(0,p.Sh)(e,t.from),r=(0,l.v4)(n);return(null==r?void 0:r.inView)===!0},S=function(e,t,n){var r=(0,g.XE)(e.view.nodeDOM(t)),o=(0,l.v4)(r);if(!o)return!1;var i=o.bottomInView,a=o.topInView;return"top"===n?a:i},A=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.state.selection,i=o instanceof m.c&&1===o.side?o.to:o.from;if(i<=t){if(S(e,t,"top"))return null}else if(i>=n){if(S(e,t,"bottom"))return null}else{if(P(e,o))return null;var c=e.state.doc.resolve(i);if(P(e,a.Y1.findFrom(c,-1,!1))||P(e,a.Y1.findFrom(c,1,!1)))return null}var s=(0,p.TV)({editor:e,side:r?"bottom":"top",margin:200});if(s.pos){var l=a.Y1.findFrom(e.state.doc.resolve(s.pos),r?1:-1,!1);return(null==l?void 0:l.from)||null}return null},E=i.hj.create({name:"expandableNodes",extendNodeSchema:function(e){var t;return{expandable:null!==(t=(0,i.nU)((0,i.Nl)(e,"expandable",e)))&&void 0!==t&&t}},addCommands:function(){return{expandOrCollapseExpandableNode:function(e){return function(t){var n=t.state,r=t.chain,o=null!=e?e:n.selection.from,i=n.doc.nodeAt(o);if(!i||!C(i))return!1;var a=(0,s.bh)();switch(i.type.name){case"card":if(a.dispatch((0,d.Qx)({attached:!1})),null===u.co||void 0===u.co||u.co.track(u.AA.CARD_EXPANDED,{is_present_mode:!0,method:"enter_key"}),(0,h.HD)(i.attrs.id))return r().descendIntoCurrentCard(o).reHighlightExpandableNode().run();return r().spotlightCollapseCard(o).reHighlightExpandableNode().run();case"toggle":(0,y.xB)(i.attrs.id,!(0,y.fH)(i.attrs.id));var c=r();return e&&c.spotlightNextBlock(),c.reHighlightExpandableNode().run(),!0;case"image":case"video":case"embed":return a.dispatch((0,d.RW)({nodeId:i.attrs.id})),!0;case"gallery":var l=i.firstChild;if(l)return a.dispatch((0,d.RW)({nodeId:l.attrs.id})),!0;return!1;default:return!1}}},goToNextExpandableNode:function(e){return function(t){var n,r=t.editor,o=t.tr,i=t.state,a=b.M.getState(r.state),c=(0,g.Bw)(r,a.cardId);if(!c)return!1;var s=c.node.attrs.id,u=c.pos,d=c.pos+c.node.nodeSize,f=r.state.selection,p=k(f),h=f instanceof m.c,y=A(r,u,d,e),x=(null===(n=w.getState(i))||void 0===n?void 0:n.lastApplied)||+new Date;if(p&&!y&&+new Date-x>3e3)return r.commands.reHighlightExpandableNode();o.setMeta(w,{});var j=h&&(-1===f.side&&e||1===f.side&&!e)?-1:0,O=Math.min(Math.max(y||(p||!h?f.from:1===f.side?f.to+j:f.from+j),u),d-1),P=(0,v.xd)(r,s,O,C,e);if(console.debug("[ExpandableNodes] goToNextExpandableNode",{posToUse:O,overridePos:y},P),!P.pos||!P.domNode||P.cardId!==s)return o.setSelection(m.c.create(r.state.doc,u,e?-1:1)),!1;var S=(0,l.v4)(P.domNode,50);return null!=S&&S.inView?(o.setSelection(m.c.create(r.state.doc,P.pos)),(0,l.cC)("editor").scrollElementIntoView({element:P.domNode,attempts:0,offsetFromTop:null}),!0):(p&&o.setSelection(m.c.create(r.state.doc,f.from,e?-1:1)),!1)}},reHighlightExpandableNode:function(){return function(e){var t=e.tr,n=e.editor;return t.setMeta(w,{shouldAddResetClass:!0}),requestAnimationFrame(function(){n.commands.command(function(e){return e.tr.setMeta(w,{shouldAddResetClass:!1}),!0})}),!0}}}},addProseMirrorPlugins:function(){return[new a.Sy({key:w,state:{init:function(){return{lastApplied:0,shouldAddResetClass:!1}},apply:function(e,t){var n=e.getMeta(w);return n?j(j({},t),{},{lastApplied:+new Date},n):t}},props:{decorations:function(e){var t=b.M.getState(e);if(null!=t&&t.pos)return c.EH.empty;var n=w.getState(e);if((0,d.gh)((0,s.bh)().getState())!==f.q.SLIDE_VIEW)return c.EH.empty;var r=e.selection;if(!k(r)||!(r instanceof m.c))return c.EH.empty;var i=r.node;return c.EH.create(e.doc,[c.p.node(r.from,r.from+i.nodeSize,{class:(0,o.cx)("expandable-node-selected",(null==n?void 0:n.shouldAddResetClass)&&"expandable-node-reset")},{isExpandableNode:!0})])}}})]}})},92703:function(e,t,n){n.d(t,{B8:function(){return s},Yt:function(){return l},be:function(){return u},yw:function(){return c}});var r=n(81333),o=n(829),i=n.n(o),a=n(87254),c=function(){return{sm:{label:a.ag._({id:"LBkaLa"}),size:.8,flagged:!0,type:"body",shortcut:"/sm"},default:{label:a.ag._({id:"5NwZ8t"}),size:1,type:"body",shortcut:"/md"},lg:{label:a.ag._({id:"0Sz17G"}),size:1.25,flagged:!0,type:"body",shortcut:"/lg"},h4:{label:a.ag._({id:"nJeKmw"}),size:1.25,mobileSize:1.1,level:4,type:"heading",inputRegex:/^####\s$/,shortcut:"####"},h3:{label:a.ag._({id:"SFN6dN"}),size:1.5,mobileSize:1.25,level:3,type:"heading",inputRegex:/^###\s$/,shortcut:"###"},h2:{label:a.ag._({id:"El7NbA"}),size:2,mobileSize:1.5,level:2,type:"heading",inputRegex:/^##\s$/,shortcut:"##"},h1:{label:a.ag._({id:"lXKZGw"}),size:2.5,mobileSize:2,level:1,type:"heading",inputRegex:/^#\s$/,shortcut:"#"},title:{label:a.ag._({id:"MHrjPM"}),size:3,mobileSize:2.25,level:1,type:"title",shortcut:"/title"}}},s=function(){return i()(Object.entries(c()).filter(function(e){var t=(0,r.Z)(e,2);return"heading"===(t[0],t[1].type)}),function(e){var t=(0,r.Z)(e,2);return t[0],t[1].level})},l=function(){return i()(Object.entries(c()).filter(function(e){var t=(0,r.Z)(e,2);return"title"===(t[0],t[1].type)}),function(e){var t=(0,r.Z)(e,2);return t[0],t[1].level})},u=function(){return i()(Object.entries(c()).filter(function(e){var t=(0,r.Z)(e,2);return"body"===(t[0],t[1].type)}),function(e){var t=(0,r.Z)(e,2);return t[0],t[1].size})}},32371:function(e,t,n){n.d(t,{I0:function(){return i},g6:function(){return c},v0:function(){return a}});var r=n(92703),o=n(15396),i=1.6,a=function(e){var t=(0,o.hx)(e),n=t.size,r=t.mobileSize;return{fontSize:r?["".concat(r,"em"),"".concat(n,"em")]:"".concat(n,"em"),"@media print":{fontSize:"".concat(n,"em")},lineHeight:e&&(0,o.qx)(e)?1.25:i}},c={};Object.keys((0,r.yw)()).forEach(function(e){var t=a(e);c['[data-font-size="'.concat(e,'"]')]=t})},15396:function(e,t,n){n.d(t,{Aw:function(){return c},hx:function(){return i},qx:function(){return s}});var r=n(81333),o=n(92703),i=function(e){return null==e||void 0==e?(0,o.yw)().default:(0,o.yw)()[e]||(0,o.yw)().default},a=function(e){var t;return null===(t=Object.entries((0,o.yw)()).find(function(t){var n=(0,r.Z)(t,2),o=(n[0],n[1]);return"heading"===o.type&&o.level==e}))||void 0===t?void 0:t[0]},c=function(e){return"heading"===e.type.name?a(e.attrs.level):"title"===e.type.name?"title":e.attrs.fontSize},s=function(e){var t=i(e).type;return"heading"===t||"title"===t}},70039:function(e,t,n){n.d(t,{AW:function(){return p},H:function(){return f},NX:function(){return u},RV:function(){return d},t0:function(){return l}});var r=n(54073),o=n.n(r),i=n(37164),a=n(27191),c=n(46358),s=n(62141),l=function(e,t){var n=(0,c.bh)(),r=t?{noteId:e}:{noteId:null};n.dispatch((0,s.K7)(r));var o=n.getState();!t&&(0,s.tY)(o)&&n.dispatch((0,s.AK)({isEditingMedia:!1})),!t&&(0,s._I)(o)&&n.dispatch((0,s.RW)({nodeId:null}))},u=o()(l,30),d=function(){var e=(0,c.bh)().getState();return(0,s.II)(e)},f=function(){return(0,i.x0)(5)},p=function(e){return e instanceof a.qv&&"footnote"===e.node.type.name}},61686:function(e,t,n){n.d(t,{M:function(){return r}});var r=function(e){return"footnote"==e.schema.topNodeType.name}},73985:function(e,t,n){n.d(t,{X6:function(){return y},MQ:function(){return b}});var r=n(71391),o=n(13121),i=n(82956),a=n(88646),c=n(95235),s=n(87254),l=n(34676),u=n(69551),d=n(80318),f=n(4389),p=n(52322);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(e){var t=e.node.attrs,n=t.level,r=t.horizontalAlign;return(0,p.jsx)(d.lO,h(h({},e),{},{style:h({display:"flex",flexDirection:"column"},(0,f.nN)(r)),children:(0,p.jsx)(o.ms,{level:n,placeholder:s.ag._({id:"/c+dwQ"}),className:(0,l.cx)("heading",u.A8),style:{minWidth:"min(100%, 8em)"}})}))},v=[1,2,3,4],b=Math.max.apply(Math,v),y=r.X.extend({selectable:!1,addAttributes:function(){return{level:{default:1,rendered:!1}}},addNodeView:function(){return(0,o.fW)(g,{update:a.E7})},addInputRules:function(){var e=this;return this.options.levels.map(function(t){return(0,i.Wy)({find:new RegExp("^(#{1,".concat(t,"})\\s$")),type:e.type,getAttributes:{level:t}},[e.editor.state.schema.nodes.bullet,e.editor.state.schema.nodes.numbered,e.editor.state.schema.nodes.todo])})}}).configure({levels:v})},4389:function(e,t,n){n.d(t,{Ec:function(){return j},Kq:function(){return b},nN:function(){return g},yg:function(){return v}});var r=n(95235),o=n(75967),i=n(55609),a=n(23237),c=n(87254),s=n(72338),l=n(27191),u=n(95472),d=n(66902);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=["paragraph","heading","title","drawing","image","contributors","mediaPlaceholder","buttonGroup"],h=["left","right","center"],g=function(e){var t=v(e);return{textAlign:e||void 0,alignItems:t||"var(--flex-align)","--flex-align":t}},v=function(e){if(e)return({left:"flex-start",center:"center",right:"flex-end"})[e]},b=s.hj.create({name:"horizontalAlign",priority:d.a.HorizontalAlign,addOptions:function(){return{types:m,alignments:h,defaultAlignment:null}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:{horizontalAlign:{default:this.options.defaultAlignment,keepOnSplit:!0,parseHTML:function(t){return t.style.textAlign||e.options.defaultAlignment},renderHTML:function(e){return e.horizontalAlign?{style:"text-align: ".concat(e.horizontalAlign)}:{}}}}}]},addCommands:function(){return{toggleHorizontalAlign:function(e){return function(t){var n=t.tr,r=t.dispatch,o=t.state,i=t.editor;if(!r)return!0;var a=y(i,e)?null:e;return n.selection.ranges.forEach(function(e){var t=e.$from.pos,r=e.$to.pos;o.doc.nodesBetween(t,r,function(e,t){if("footnote"===e.type.name)return!1;m.includes(e.type.name)&&n.setNodeMarkup(t,void 0,p(p({},e.attrs),{},{horizontalAlign:a})).setMeta("annotationEvent",{type:"update-node-attrs",pos:t})})}),!0}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-Shift-l":function(){return e.editor.commands.toggleHorizontalAlign("left")},"Mod-Shift-e":function(){return e.editor.commands.toggleHorizontalAlign("center")},"Mod-Shift-r":function(){return e.editor.commands.toggleHorizontalAlign("right")},Backspace:function(){var t=e.editor.state.selection;if(!(t instanceof l.Bs)||!t.empty)return!1;var n=t.$from.parent;return!!m.includes(n.type.name)&&!!n.isTextblock&&!(n.nodeSize>2)&&n.attrs.horizontalAlign!=e.options.defaultAlignment&&e.editor.commands.toggleHorizontalAlign(e.options.defaultAlignment)}}}}),y=function(e,t){var n=h.filter(function(e){return e!==t});return e.isActive({horizontalAlign:t})&&!n.some(function(t){return e.isActive({horizontalAlign:t})})},x=function(e){return!(0,u.V2)(e,"horizontalAlign")},j=[{key:"alignLeft",name:function(){return c.ag._({id:"VjjKVj"})},icon:a.el,checkActive:function(e){return y(e,"left")},checkDisabled:x,apply:function(e){return e.chain().toggleHorizontalAlign("left").run()},shortcut:"Mod+Shift+L",enabledForTables:!0,alignment:"left"},{key:"alignCenter",name:function(){return c.ag._({id:"95ckMP"})},icon:i.MB,checkActive:function(e){return y(e,"center")},checkDisabled:x,apply:function(e){return e.chain().toggleHorizontalAlign("center").run()},shortcut:"Mod+Shift+E",enabledForTables:!0,alignment:"center"},{key:"alignRight",name:function(){return c.ag._({id:"vTKw81"})},icon:o.S3,checkActive:function(e){return y(e,"right")},checkDisabled:x,apply:function(e){return e.chain().toggleHorizontalAlign("right").run()},shortcut:"Mod+Shift+R",enabledForTables:!0,alignment:"right"}]},42734:function(e,t,n){n.d(t,{BF:function(){return l},SA:function(){return c},TH:function(){return g},Tl:function(){return y},_5:function(){return s},oc:function(){return v},ug:function(){return x}});var r=n(72338),o=n(95472),i=["card","document","gridLayout","gallery"],a=function(e){return e.isBlock&&!i.includes(e.type.name)&&!(e.isTextblock&&(0,o.bR)(e))},c=function(e){return"gridLayout"===e.type.name},s=function(e){return"gridCell"===e.type.name},l=function(e,t,n,r){var o=n&&u(e,n,t);if(o)return o;if(n&&!m(n,e.state.schema)||r)return null;var i=d(e,t,"right")||d(e,t,"left");return!i||n&&n.content.firstChild===i.node?null:i},u=function(e,t,n){if(!h(t,e.state.schema))return null;var i,a=null===(i=e.posAtCoords({left:n.clientX,top:n.clientY}))||void 0===i?void 0:i.inside;if(!a||-1==a)return null;var c=e.state.doc,l=c.resolve(a),u=c.nodeAt(a),d=u&&s(u)?{node:u,pos:a}:(0,r.qv)(l,s),f=(null==d?void 0:d.pos)&&(0,o.Fu)(d.pos,e);if(!d||!f)return null;var p=n.clientX>f.left+f.width/2?"right":"left";return{pos:d.pos,node:d.node,rect:f,side:p}},d=function(e,t,n){var i,c=null===(i=e.posAtCoords({left:t.clientX+("left"==n?40:-40),top:t.clientY}))||void 0===i?void 0:i.inside;if(!c||-1==c)return null;var s=e.state,l=s.doc,u=s.schema,d=l.resolve(c),m=l.nodeAt(c),h=m&&a(m)?{node:m,pos:c}:(0,r.qv)(d,a);if(!h)return null;var g=(0,o.Fu)(c,e);if(!g)return null;var v="left"==n?t.clientX-g.left:g.right-t.clientX,b=v<0;if(!(b&&v>-40||"right"==n&&v<(g.right-g.left)*.15))return null;var y=l.resolve(h.pos),x=(null==m?void 0:m.type.name)==="gridCell"&&f(y,u)||p(y,u);if(b||!x){var j=(0,r.qv)(d,function(e){return"gridCell"===e.type.name});if(j&&f(l.resolve(j.pos),u)){var w=(0,o.Fu)(j.pos,e);return w?{pos:j.pos,node:j.node,side:n,rect:w}:null}}return x?{pos:h.pos,rect:g,node:h.node,side:n}:null},f=function(e,t){return e.parent.canReplaceWith(e.index(),e.index(),t.nodes.gridCell)},p=function(e,t){return e.parent.canReplaceWith(e.index(),e.indexAfter(),t.nodes.gridLayout)},m=function(e,t){return t.nodes.gridCell.validContent(e.content)},h=function(e,t){return t.nodes.gridLayout.validContent(e.content)},g=function(e){return b(e,"gridLayout")},v=function(e){var t=b(e,"gridLayout");if(!t||!t.nodeAfter)throw Error();for(var n=t.nodeAfter,r=[],o=t.start(t.depth+1),i=0;i<n.childCount;i++){var a=n.child(i);o+=0===i?0:n.child(i-1).nodeSize,r.push({node:a,pos:o})}return r},b=function(e,t){if((null===(n=e.nodeAfter)||void 0===n?void 0:n.type.name)===t)return e;for(var n,r=e.doc,o=e.depth;o>0;o--)if(e.node(o).type.name===t)return r.resolve(e.before(o));return null},y=function(e,t){var n=v(e),r=n[-1===t?n.length-1:t];return r?e.doc.resolve(r.pos):null},x=function(e){return v(e).findIndex(function(t){return t.pos===e.pos})}},91766:function(e,t,n){n.d(t,{v:function(){return r}});var r=["tel","mailto"]},60940:function(e,t,n){n.d(t,{r:function(){return Z}});var r=n(82269),o=n(95235),i=n(70675),a=n(27191),c=n(98875),s=n(95472),l=n(9734),u=n(14115),d=n(85398),f=n(66902),p=n(39965),m=n(87819),h=n(91766),g=n(46358),v=n(62141),b=n(63419),y=n(53738),x=n(91012),j=n(94301),w=n(38717),O=n(98841),k=n(25925),C=n(94864),P=n(2784),S=n(42789),A=n(13121),E=n(34860),D=n(98551),I=n(52322);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=(0,O.E)(y.xu),N=function(e){var t=e.node,n=e.children,r=t.attrs,o=r.href,i=r.meta,a=(0,g.CG)(v.hN),c=(0,C.C7)(),s=(0,S.H)({url:o||""}),u=s.linkUrl,d=s.handleClick,f=(0,P.useCallback)(function(e){null==d||d(e),a&&e.preventDefault()},[a,d]),p=(0,E.Ux)(),m=p.popperRef,h=p.referenceRef,b=p.isHovering,y=p.onMouseOver,O=p.onMouseOut,z=p.getPopperProps;return(0,I.jsxs)(A.T5,{as:"span",children:[(0,I.jsxs)(x.x,{as:"a",className:"link",href:u,onClick:f,onMouseOver:y,onMouseOut:O,ref:h,children:[(0,l.i7)()&&(0,I.jsx)("span",{contentEditable:!1,children:""}),c?n:(0,I.jsx)(A.ms,{as:"span"}),(0,l.i7)()&&(0,I.jsx)("span",{contentEditable:!1,children:""})]}),!1===c&&b&&u&&i?(0,I.jsx)(j.h,{children:(0,I.jsx)(k.M,{children:(0,I.jsx)(M,T(T(T({position:"relative",zIndex:"popover",ref:m,onMouseOver:y,onMouseOut:O,w:"min(500px, 80vw)",className:"link-preview-hover"},z()),E.rc),{},{children:(0,I.jsxs)(w.f,{backgroundColor:"white",border:"1px solid",borderColor:"gray.200",shadow:"lg",borderRadius:"lg",_hover:{backgroundColor:"trueblue.50"},children:[(0,I.jsx)(D.fu,{node:t}),(0,I.jsx)(w.A,{href:u,target:"_blank"})]})}))})}):null]})},R=n(92771),L=["href"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=i.Z.extend({priority:f.a.Link,inclusive:!1,excludes:"underline footnoteLabel link",addAttributes:function(){return{href:{default:""},source:{},thumbnail:H({},(0,s.sw)("thumbnail")),embed:H({},(0,s.sw)("embed")),meta:H({},(0,s.sw)("meta"))}},addCommands:function(){var e;return H(H({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{convertLinkToMedia:function(e){return function(t){var n=t.chain,o=t.editor.getAttributes("link"),i=o.href,a=(0,r.Z)(o,L);if(!i||(0,R.H7)(i))return!1;if(!a.source)return n().extendMarkRange("link").insertEmbedAndFetchMetadata(i,e,!1).run(),!0;var c=p.ah[a.source],s=(null==c?void 0:c.nodeName)||"embed";return n().extendMarkRange("link").insertContent({type:s,attrs:H(H({},a),{},{sourceUrl:i,url:i,displayStyle:e})}).selectInsertedNode().run(),!0}},convertMediaToLink:function(){return function(e){var t=e.state,n=e.chain;if(!(t.selection instanceof a.qv))return!1;var r=t.selection,o=r.from,i=r.to,c=r.node;if(!(0,m.Bp)(c))return!1;var s=c.attrs,l=s.sourceUrl,u=s.meta,d=(null==u?void 0:u.title)||l||"link",f={from:o+1,to:o+1+d.length};return n().insertContentAt({from:o,to:i},[{type:"paragraph",attrs:{},content:[{type:"text",text:d}]}],{updateSelection:!0}).setTextSelection(f).setMark(Z.name,H(H({},c.attrs),{},{href:l})).run(),!0}},updateSurroundingLink:function(e){return function(t){var n=t.state,r=t.chain,o=t.editor,i=n.selection,a=i.from,c=i.to;return(0,R.m7)(e,o),r().extendMarkRange("link").updateAttributes("link",{href:e}).setMeta("preventAutolink",!0).setTextSelection({from:a,to:c}),!0}},removeSurroundingLink:function(){return function(e){var t=e.state,n=e.chain,r=t.selection,o=r.from,i=r.to;return n().extendMarkRange("link").unsetMark("link").setMeta("preventAutolink",!0).setTextSelection({from:o,to:i}).focus(),!0}}})},addKeyboardShortcuts:function(){var e=this;return{"Mod-k":function(t){var n=t.editor;return!n.state.selection.empty&&n.commands.toggleMark(e.name)}}},addProseMirrorPlugins:function(){var e,t,n=(null===(t=this.parent)||void 0===t?void 0:t.call(this))||[];return!(0,l.f_)()&&c.VH.get("linkMetadata")&&!u.cx&&n.push((0,d.r)(this,N)),n.push((e=this.editor,new a.Sy({key:new a.H$("handleCmdClickLink"),props:{handleDOMEvents:{click:function(t,n){var r,o=(0,g.bh)(),i=(0,v.hN)(o.getState()),a=null===(r=n.target)||void 0===r?void 0:r.closest("a"),c=null==a?void 0:a.href;if(!c||null!=a&&a.closest("[data-comments-wrapper]"))return!1;n.preventDefault();var l=n.ctrlKey||n.metaKey,u=(0,s.g)(c),d=(0,v.xb)(o.getState()),f=(0,s.NC)(c,d);if(i){if(!l)return!1;if(f)return(0,b.l)(e,n,u),!1}else if(!l&&f)return(0,b.l)(e,n,u),!1;return window.open(c,"_blank"),!1}}}}))),n}}).configure({HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:"link"},validate:R.DE,protocols:h.v,linkOnPaste:!1})},63419:function(e,t,n){n.d(t,{l:function(){return a}});var r=n(1368),o=n(95472),i=n(43227),a=function(e,t,n){if(n){var a=(0,o.lI)(e,100);a&&(0,r.lO)({data:{fromPos:a.pos,fromPct:a.pct},emitChange:!1}),(0,i.D)({cardId:n,method:"push",data:{fromPos:null,fromPct:null}})}}},92771:function(e,t,n){n.d(t,{DE:function(){return u},H7:function(){return p},Td:function(){return f},m7:function(){return d}});var r=n(95235),o=n(94109),i=n(28463),a=n(91766);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){return!!e.includes("://")},d=function(e,t){p(e)||(0,o.ft)(e,function(n){var r=t.state,o=r.doc,a=r.schema,c=r.tr;(0,i.Nv)(o,t.schema.marks.link).forEach(function(t){var r=t.node,o=t.pos,i=r.marks.find(function(t){return"link"===t.type.name&&t.attrs.href==e});i&&c.removeMark(o,o+r.nodeSize,i).addMark(o,o+r.nodeSize,a.marks.link.create(l(l({},i.attrs),n)))}),t.view.dispatch(c)}).catch(function(e){console.error("[Link.fetchUrlThenUpdateMarks]",e)})},f=function(e){return e.attrs.source||e.attrs.meta||e.attrs.embed},p=function(e){if(!e)return!1;var t,n=e&&e.toLowerCase(),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(a.v);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(n.startsWith(o+":"))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},16409:function(e,t,n){n.d(t,{Z:function(){return p},Q:function(){return m}});var r=n(72338);n(31128);var o=n(88892),i=n(27191),a=n(98875),c=r.NB.create({name:"math_display",group:"block math",content:"text*",atom:!0,code:!0,renderHTML:function(e){var t=e.HTMLAttributes;return["math-display",(0,r.P1)(t,{class:"math-node"}),0]},parseHTML:function(){return[{tag:"math-display"}]}}),s=n(47045),l=r.NB.create({name:"math_inline",group:"inline math",content:"text*",inline:!0,atom:!0,renderHTML:function(e){var t=e.HTMLAttributes;return["math-inline",(0,r.P1)(t,{class:"math-node"}),0]},parseHTML:function(){return[{tag:"math-inline"}]},addCommands:function(){var e=this;return{insertMathInline:function(){return function(t){var n=t.state,r=t.dispatch,o=t.view;return(0,s.$O)(e.type," ")(n,r,o)}},convertToMathInline:function(){return function(e){var t=e.state,n=e.chain,r=t.doc.textBetween(t.selection.from,t.selection.to);return n().insertContent({type:"math_inline",content:[{type:"text",text:r}]}).run(),!0}}}}}),u=/\$([^ $]+)\$[ ]$/,d=/^\${2}\s+$/,f=/^\${2}(.+)\${2}$/,p=r.hj.create({name:"math",addExtensions:function(){return[l,c]},addProseMirrorPlugins:function(){var e=this,t=a.VH.get("math")?[new i.Sy({props:{clipboardTextSerializer:function(e){return s.qk.serializeSlice(e)}}}),(0,o.Hw)({rules:[(0,s.Yx)(d,this.editor.schema.nodes.math_display),(0,s.Yx)(f,this.editor.schema.nodes.math_display),(0,s.Oi)(u,this.editor.schema.nodes.math_inline)]})]:[];return[(0,s.c1)({undo:function(){return e.editor.commands.undo()},redo:function(){return e.editor.commands.redo()}})].concat(t)}}),m=function(e){return"math_display"===e.type.name||"math_inline"===e.type.name}},47045:function(e,t,n){n.d(t,{$O:function(){return N},Yx:function(){return z},Oi:function(){return I},Ly:function(){return A},c1:function(){return v},qk:function(){return _}});var r,o=n(95235),i=n(27191),a=n(96412),c=n(13089),s=n(52780),l=n(26151),u=n(17890),d=n(60737);function f(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return function(o,a){var c=e.state,s=c.selection,l=s.to,u=s.from,d=o.selection,f=d.to,p=d.from;if(r&&f!==p)return!1;var m=t>0?f:p;if(n){var h=o.doc.nodeSize-2;if(t>0&&m<h||t<0&&m>0)return!1}if(a){var g=t>0?l:u;e.dispatch(c.tr.setSelection(i.Bs.create(c.doc,g))),e.focus()}return!0}}var p=function(){function e(t,i,c){var s=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0;(0,a.Z)(this,e),(0,o.Z)(this,"_node",void 0),(0,o.Z)(this,"_outerView",void 0),(0,o.Z)(this,"_getPos",void 0),(0,o.Z)(this,"dom",void 0),(0,o.Z)(this,"_mathRenderElt",void 0),(0,o.Z)(this,"_mathSrcElt",void 0),(0,o.Z)(this,"_innerView",void 0),(0,o.Z)(this,"cursorSide",void 0),(0,o.Z)(this,"_options",void 0),(0,o.Z)(this,"_katexOptions",void 0),(0,o.Z)(this,"_tagName",void 0),(0,o.Z)(this,"_isEditing",void 0),(0,o.Z)(this,"_onDestroy",void 0),(0,o.Z)(this,"_mathPluginKey",void 0),n.e(4620).then(n.bind(n,66929)).then(function(e){r=e.default,s.renderMath()}),this._node=t,this._outerView=i,this._getPos=c,this._onDestroy=d&&d.bind(this),this._mathPluginKey=u,this.cursorSide="start",this._isEditing=!1,this._options=l,this._katexOptions=Object.assign({globalGroup:!0,throwOnError:!1},l.katexOptions),this._tagName=l.tagName||this._node.type.name.replace("_","-"),this.dom=document.createElement(this._tagName),this.dom.classList.add("math-node"),this._mathRenderElt=document.createElement("span"),this._mathRenderElt.textContent="",this._mathRenderElt.classList.add("math-render"),this.dom.appendChild(this._mathRenderElt),this._mathSrcElt=document.createElement("span"),this._mathSrcElt.classList.add("math-src"),this.dom.appendChild(this._mathSrcElt),this.dom.addEventListener("click",function(){return s.ensureFocus()}),this.renderMath()}return(0,c.Z)(e,[{key:"destroy",value:function(){this.closeEditor(!1),this._mathRenderElt&&(this._mathRenderElt.remove(),delete this._mathRenderElt),this._mathSrcElt&&(this._mathSrcElt.remove(),delete this._mathSrcElt),this.dom.remove()}},{key:"ensureFocus",value:function(){this._innerView&&this._outerView.hasFocus()&&this._innerView.focus()}},{key:"update",value:function(e,t){if(!e.sameMarkup(this._node))return!1;if(this._node=e,this._innerView){var n=this._innerView.state,r=e.content.findDiffStart(n.doc.content);if(null!=r){var o=e.content.findDiffEnd(n.doc.content);if(o){var i=o.a,a=o.b,c=r-Math.min(i,a);c>0&&(i+=c,a+=c),this._innerView.dispatch(n.tr.replace(r,a,e.slice(r,i)).setMeta("fromOutside",!0))}}}return this._isEditing||this.renderMath(),!0}},{key:"updateCursorPos",value:function(e){var t=this._getPos(),n=this._node.nodeSize;e.selection.from<t+n&&t<e.selection.to||(this.cursorSide=t<e.selection.from?"end":"start")}},{key:"selectNode",value:function(){this._outerView.editable&&(this.dom.classList.add("ProseMirror-selectednode"),this._isEditing||this.openEditor())}},{key:"deselectNode",value:function(){this.dom.classList.remove("ProseMirror-selectednode"),this._isEditing&&this.closeEditor()}},{key:"stopEvent",value:function(e){return void 0!==this._innerView&&void 0!==e.target&&this._innerView.dom.contains(e.target)}},{key:"ignoreMutation",value:function(){return!0}},{key:"renderMath",value:function(){if(this._mathRenderElt){var e=this._node.content.content,t="";if(e.length>0&&null!==e[0].textContent&&(t=e[0].textContent.trim()),t.length<1){for(this.dom.classList.add("empty-math");this._mathRenderElt.firstChild;)this._mathRenderElt.firstChild.remove();return}if(this.dom.classList.remove("empty-math"),!r){this._mathRenderElt.textContent=t;return}try{r.render(t,this._mathRenderElt,this._katexOptions),this._mathRenderElt.classList.remove("parse-error"),this.dom.setAttribute("title","")}catch(e){if(e instanceof r.ParseError)console.error(e),this._mathRenderElt.classList.add("parse-error"),this.dom.setAttribute("title",e.toString());else throw e}}}},{key:"dispatchInner",value:function(e){if(this._innerView){var t=this._innerView.state.applyTransaction(e),n=t.state,r=t.transactions;if(this._innerView.updateState(n),!e.getMeta("fromOutside")){for(var o=this._outerView.state.tr,i=l.KS.offset(this._getPos()+1),a=0;a<r.length;a++)for(var c=r[a].steps,s=0;s<c.length;s++){var u=c[s].map(i);if(!u)throw Error("step discarded!");o.step(u)}o.docChanged&&this._outerView.dispatch(o)}}}},{key:"openEditor",value:function(){var e,t=this;this._innerView&&this.closeEditor(!1),this._innerView=new s.tk(this._mathSrcElt,{state:i.yy.create({doc:this._node,plugins:[(0,u.h)({Tab:function(e,t){return t&&t(e.tr.insertText("	")),!0},Backspace:(0,d.QF)(d.NE,function(e,n,r){return!!e.selection.empty&&!(t._node.textContent.length>0)&&(t._outerView.dispatch(t._outerView.state.tr.insertText("")),t._outerView.focus(),!0)}),"Ctrl-Backspace":function(e,n,r){return t._outerView.dispatch(t._outerView.state.tr.insertText("")),t._outerView.focus(),!0},Enter:(0,d.QF)(d.QK,f(this._outerView,1,!1)),"Ctrl-Enter":f(this._outerView,1,!1),ArrowLeft:f(this._outerView,-1,!0),ArrowRight:f(this._outerView,1,!0),ArrowUp:f(this._outerView,-1,!0),ArrowDown:f(this._outerView,1,!0),"Mod-z":this._options.undo,"Shift-Mod-z":this._options.redo})]}),dispatchTransaction:this.dispatchInner.bind(this)});var n=this._innerView.state;this._innerView.focus();var r=null===(e=this._mathPluginKey.getState(this._outerView.state))||void 0===e?void 0:e.prevCursorPos;null==r&&console.error("[prosemirror-math] Error:  Unable to fetch math plugin state from key.");var o=(null!=r?r:0)<=this._getPos()?0:this._node.nodeSize-2;this._innerView.dispatch(n.tr.setSelection(i.Bs.create(n.doc,o))),this._isEditing=!0}},{key:"closeEditor",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._innerView&&(this._innerView.destroy(),this._innerView=void 0),e&&this.renderMath(),this._isEditing=!1}}]),e}();function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var h=new i.H$("prosemirror-math");function g(e,t){return function(n,r,i){var a=h.getState(r.state);if(!a)throw Error("no math plugin!");var c=a.activeNodeViews,s=new p(n,r,i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({katexOptions:{displayMode:e,macros:a.macros}},t),h,function(){c.splice(c.indexOf(s))});return c.push(s),s}}var v=function(e){return new i.Sy({key:h,state:{init:function(e,t){return{macros:{},activeNodeViews:[],prevCursorPos:0}},apply:function(e,t,n,r){return{activeNodeViews:t.activeNodeViews,macros:t.macros,prevCursorPos:n.selection.from}}},props:{nodeViews:{math_inline:g(!1,e),math_display:g(!0,e)}}})},b=n(12741),y=n(30764);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return y.HY.from(t.text(e))}function w(e){var t,n=e.querySelector("img.mwe-math-fallback-image-inline[alt]");return null!==(t=null==n?void 0:n.getAttribute("alt"))&&void 0!==t&&t}function O(e){var t,n=e.querySelector("math[alttext]");return null!==(t=null==n?void 0:n.getAttribute("alttext"))&&void 0!==t&&t}function k(e){var t,n=e.querySelector("math annotation[encoding='application/x-tex'");return null!==(t=null==n?void 0:n.textContent)&&void 0!==t&&t}function C(e){return function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=(0,n.value)(e);if(!1!==o)return o}}catch(e){r.e(e)}finally{r.f()}return!1}(e,[w,O,k])}var P=[{tag:"span",getAttrs:function(e){return!!e.classList.contains("mwe-math-element")&&null},getContent:function(e,t){return j(C(e)||"\\text{\\color{red}(paste error)}",t)}}],S=[{tag:"dl",getAttrs:function(e){if(1!==e.childElementCount)return!1;var t=e.firstChild;return!!("DD"===t.tagName&&1===t.childElementCount&&t.firstChild.classList.contains("mwe-math-element"))&&null},getContent:function(e,t){return j(C(e)||"\\text{\\color{red}(paste error)}",t)}}];[{tag:"math-inline"}].concat((0,b.Z)(P)),[{tag:"math-display"}].concat((0,b.Z)(S));var A=function(e,t){var n=e.selection.$from,r=n.nodeBefore;if(!r)return!1;if("math_inline"==r.type.name){var o=n.index(n.depth),a=e.doc.resolve(n.posAtIndex(o-1));return t&&t(e.tr.setSelection(new i.qv(a))),!0}return r.type.name,!1},E=n(88892),D=/\$(.+)\$/;function I(e,t,n){return new E.VK(e,function(e,r,o,i){var a=e.doc.resolve(o),c=a.index(),s=e.doc.resolve(i),l=n instanceof Function?n(r):n;if(!a.parent.canReplaceWith(c,s.index(),t))return null;var u=[t.create(l,t.schema.text(r[1]))];return r[0].endsWith(" ")&&" "!==e.doc.textBetween(i,i+1)&&u.push(t.schema.text(" ")),e.tr.replaceWith(o,i,u)})}function z(e,t,n){return new E.VK(e,function(e,r,o,a){var c=e.doc.resolve(o),s=n instanceof Function?n(r):n;if(!c.node(-1).canReplaceWith(c.index(-1),c.indexAfter(-1),t))return null;var l=e.tr.delete(o,a).setBlockType(o,o,t,s);return r[1]&&l.insertText(r[1],o,o),l.setSelection(i.qv.create(l.doc,l.mapping.map(c.pos-1)))})}!function(){try{RegExp("(?<!\\\\)\\$(.+)(?<!\\\\)\\$")}catch(e){return D}}();var T=function(e){var t=e.selection,n=t.from;t.to;var r=e.selection.content().content,o=[];return r.descendants(function(e,t,r){return"text"!=e.type.name&&(!e.type.name.startsWith("math_")||(o.push({start:Math.max(n+t-1,0),end:n+t+e.nodeSize-1}),!1))}),s.EH.create(e.doc,o.map(function(e){var t=e.start,n=e.end;return s.p.node(t,n,{class:"math-select"})}))},M=new i.Sy({state:{init:function(e,t){return T(t)},apply:function(e,t){return e.selection&&e.selectionSet?T(e):t}},props:{decorations:function(e){return M.getState(e)}}});function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,r){var o=n.selection.$from,a=o.index();if(!o.parent.canReplaceWith(a,a,e))return!1;if(r){var c=e.create({},t?n.schema.text(t):null),s=n.tr.replaceSelectionWith(c);r(s=s.setSelection(i.qv.create(s.doc,o.pos)))}return!0}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=new(function(){function e(t,n){(0,a.Z)(this,e),(0,o.Z)(this,"nodes",void 0),(0,o.Z)(this,"marks",void 0),this.nodes=L(L({},null==n?void 0:n.nodes),t.nodes),this.marks=L(L({},null==n?void 0:n.marks),t.marks)}return(0,c.Z)(e,[{key:"serializeFragment",value:function(e){var t=this,n=void 0,r="",o=!0,i=e.size;return e.nodesBetween(0,i,function(e,a){var c,s=t.serializeNode(e);if(null!==s)return r+=s,!1;e.isText?(r+=(null===(c=e.text)||void 0===c?void 0:c.slice(Math.max(0,a)-a,i-a))||"",o=!1):e.isLeaf&&n?(r+=n,o=!1):!o&&e.isBlock&&(r+="\n\n",o=!0)},0),r}},{key:"serializeSlice",value:function(e){return this.serializeFragment(e.content)}},{key:"serializeNode",value:function(e){var t=this.nodes[e.type.name];return void 0!==t?t(e):null}}]),e}())({nodes:{math_inline:function(e){return"$".concat(e.textContent,"$")},math_display:function(e){return"\n\n$$\n".concat(e.textContent,"\n$$")}}})},89997:function(e,t,n){n.d(t,{f8:function(){return q},nk:function(){return $},s6:function(){return ef},cB:function(){return em}});var r=n(95235),o=n(94321),i=n(43926),a=n(55452),c=n(91012),s=n(96530),l=n(94301),u=n(55966),d=n(72338),f=n(2784),p=n(34717),m=n(8635),h=n(98875),g=n(46358),v=n(94864),b=n(63419),y=n(13121),x=n(62141),j=n(34860),w=n(13306),O=n(51823),k=n(66902),C=n(89648),P=n(88646),S=n(12741),A=n(54026),E=function(e){var t=e.filterFn,n=e.getAttributesFn;return function(e){return(0,A.S)({find:function(e){var n=(0,S.Z)(e.matchAll(O.nP));return n?n.map(function(e){var t;return{index:null!==(t=e.index)&&void 0!==t?t:-1,text:e[0],match:e}}).filter(function(e){return t((0,O.Wp)(e.text),(0,O.sY)(e.text).cardId,e)}):[]},type:e,getAttributes:function(e){var t=(0,O.Wp)(e[0]),r=(0,O.sY)(e[0]).cardId;return n({match:e,docId:t,cardId:r})}})}},D=n(82269),I=n(53738),z=n(8283),T=n(84103),M=n(420),N=n(49929),R=n(37914),L=n(52322),_=["mentionLabel","mentionIcon","mentionTargetUrl","onClick","hasError"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B={borderRadius:"md",padding:"0.05em 0.1em",display:"inline",color:"gray.800"},F=(0,f.forwardRef)(function(e,t){var n=e.mentionLabel,r=e.mentionIcon,o=e.mentionTargetUrl,i=e.onClick,a=e.hasError,s=(0,D.Z)(e,_);return(0,L.jsxs)(I.xu,Z(Z(Z({ref:t,position:"relative",as:"span","data-selection-ring":!0,className:"mention",onClick:i,cursor:i?"pointer":"default"},B),{},{color:void 0!==a&&a?"gray.600":B.color},s),{},{children:[(0,L.jsxs)(z.U,{display:"inline-flex",spacing:0,children:[r&&(0,L.jsx)(I.xu,{display:"inline-block",textAlign:"center",minWidth:4,children:(0,L.jsx)(N.G,{icon:r,fixedWidth:!0,size:"sm",style:{marginLeft:"0.1em",marginRight:"0.3em"}})}),(0,L.jsx)(c.x,{noOfLines:1,whiteSpace:"normal",wordBreak:"break-all",flex:1,lineHeight:"normal",children:n})]}),R.v.GAMMA_PUPPETEER_SERVICE&&o&&(0,L.jsx)(T.r,{href:o,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0,top:"0",left:"0"})]}))});F.displayName="MentionTag";var W=function(){return(0,L.jsx)(I.xu,Z(Z({as:"span",className:"mention"},B),{},{children:(0,L.jsx)(M.$,{size:"xs",opacity:"0.8",margin:"0 0.1em"})}))};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q="Untitled",V=function(e){var t=e.node,n=e.editor,r=t.attrs.id,d=(0,h.ye)("screenshotsEnabled"),k=(0,m.c)(r),C=(null==k?void 0:k.archived)===!1,P=null==k?void 0:k.title,S={src:d?null==k?void 0:k.previewUrl:p.Z.src,fallbackSrc:p.Z.src},A=!!(d&&(null==k?void 0:k.previewUrl)),E=(0,g.CG)(x.hN);(0,f.useEffect)(function(){n.storage[$.name][r]=P},[P,n.storage,r]);var D=(0,f.useCallback)(function(e){(0,b.l)(n,e,r)},[n,r]),I=(0,j.Ux)(),z=I.popperRef,T=I.referenceRef,M=I.isHovering,N=I.onMouseOver,R=I.onMouseOut,_=I.getPopperProps,H=(0,v.C7)(),Z=(0,f.useMemo)(function(){var e=(0,O.gq)({cardId:r,docId:null==k?void 0:k.docId});return H?(0,w.Op)({url:e}):e},[r,null==k?void 0:k.docId,H]);return(0,L.jsxs)(y.T5,{as:"span",children:[C?(0,L.jsx)(F,{"data-testid":"card-mention",onMouseOver:N,onMouseOut:R,onClick:E?void 0:D,ref:T,mentionLabel:P||q,mentionIcon:i.faRectangle,mentionTargetUrl:Z}):(0,L.jsx)(u.kH,{label:(0,L.jsx)(c.x,{children:(0,L.jsx)(a.cC,{id:"HAIPtO",components:{0:(0,L.jsx)(s.T,{fontSize:"sm",color:"blackAlpha.800"})}})}),children:(0,L.jsx)(F,{"data-testid":"card-mention",hasError:!0,mentionLabel:"Cannot find referenced card",mentionIcon:o.QQ})}),M&&(0,L.jsx)(l.h,{children:(0,L.jsx)(u.qh,G(G({shouldShow:C&&A,src:null==S?void 0:S.src,fallbackSrc:null==S?void 0:S.fallbackSrc,onClick:D,ref:z,onMouseOver:N,onMouseOut:R},_()),{},{"data-target-name":"card-mention-popup",minH:"158px"}))})]})},$=d.NB.create({name:"cardMention",addStorage:function(){return{}},addOptions:function(){return{HTMLAttributes:{},suggestion:{char:C.p}}},priority:k.a.CardMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null},docId:{default:null},mentionedById:{default:null}}},addPasteRules:function(){var e=this;return[E({filterFn:function(t,n){return t===e.editor.gammaDocId&&!!n},getAttributesFn:function(e){var t=e.docId;return{id:e.cardId,docId:t}}})(this.type)]},addCommands:function(){var e=this;return{addCardMention:function(t,n){var r=t.id,o=t.docId,i=t.mentionedById;return function(t){var a,c=t.state,s=t.chain,l=c.selection.$to.nodeAfter;return(null==l?void 0:null===(a=l.text)||void 0===a?void 0:a.startsWith(" "))&&(n.to+=1),s().focus().insertContentAt(n,[{type:e.name,attrs:{id:r,docId:o,mentionedById:i}},{type:"text",text:" "}]).run(),!0}}}},parseHTML:function(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.node.attrs,r=n.id,o=n.docId,i=this.storage[r]||q;return["a",(0,d.P1)({"data-type":this.name,href:(0,O.gq)({docId:o,cardId:r})},this.options.HTMLAttributes,t),i]},renderText:function(e){var t=e.node.attrs,n=t.id,r=t.docId,o=this.storage[n]||q,i=(0,O.gq)({docId:r,cardId:n});return"[".concat(o,"](").concat(i,")")},addNodeView:function(){return(0,y.fW)(V,{update:P.E7})}}),K=n(75085),Y="docMention",X=n(81333),J=n(53110),Q=n(47557),ee=n(98841),et=n(63840),en=n(23313),er=n(8388),eo=n(42789),ei=n(10710);function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var es="Private ".concat(K.Yc),el=(0,ee.E)(I.xu),eu=function(e){var t,n,r=e.node,o=e.editor,i=r.attrs.id,c=(0,h.ye)("screenshotsEnabled"),s=(0,ei.SE)().user,d=(0,en.$4k)(),m=(0,X.Z)(d,1)[0],g=(0,j.gF)(),v=(0,en.y5Q)({variables:{id:i},skip:!i}),b=v.data,x=v.error,w=v.loading,k=v.subscribeToMore;(0,f.useEffect)(function(){if(k)return k({document:en.dcb,variables:{id:i},updateQuery:function(e,t){var n=t.subscriptionData;return n.data&&n.data.doc?{doc:ec(ec(ec({},e.doc),n.data.doc),{},{__typename:"Doc"})}:e}})},[i,k]);var C=(null==b?void 0:b.doc)||{},P=C.title,S=C.createdTime,A=C.createdBy,E=C.editedTime,D=C.editors,I=C.docUser,z=(0,eo.H)({url:(0,O.Gn)({docId:i,docTitle:P,absolute:!0}),nonPublishedUrl:(0,O.Gn)({docId:i,docTitle:P})}),T=z.linkUrl,M=z.handleClick;(0,f.useEffect)(function(){o.storage[Y][i]=x?es:P},[P,o.storage,i,x]);var N={src:c?null==b?void 0:null===(t=b.doc)||void 0===t?void 0:null===(n=t.titleCard)||void 0===n?void 0:n.previewUrl:p.Z.src,fallbackSrc:p.Z.src},R=function(e){return function(){if(s){var t={input:{docId:i,userId:s.id,favorited:e}};m({variables:t,update:function(e,t){var n=t.data;e.writeFragment({id:"Doc:".concat(i),fragment:en.VRt,data:{docUser:null==n?void 0:n.updateDocUser}})},optimisticResponse:{updateDocUser:ec(ec({},I),{},{favorited:t.input.favorited,__typename:"DocUser"})}})}}},_=(0,j.Ux)(),H=_.popperRef,Z=_.referenceRef,B=_.isHovering,U=_.onMouseOver,G=_.onMouseOut,q=_.getPopperProps;return(0,L.jsxs)(y.T5,{as:"span",children:[w?(0,L.jsx)(W,{}):b&&b.doc?(0,L.jsx)(F,{onMouseOver:U,onMouseOut:G,onClick:M,ref:Z,mentionLabel:P||"",mentionIcon:Q.s2,mentionTargetUrl:T}):x?(0,L.jsx)(u.kH,{label:"You don't have access to the linked ".concat(K.Yc,". Try asking the owner of this ").concat(K.Yc," for access."),children:(0,L.jsx)(F,{hasError:!0,mentionLabel:es,mentionIcon:J.by})}):null,(0,L.jsx)(l.h,{children:B&&b&&b.doc&&(0,L.jsx)(el,ec(ec(ec({width:"320px","data-target-name":"doc-mention-popup",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",shadow:"lg",maxW:"80vw",zIndex:"tooltip",ref:H,onMouseOver:U,onMouseOut:G},q()),j.rc),{},{children:(0,L.jsx)(et.F7,{createdByYou:(null==A?void 0:A.id)===(null==s?void 0:s.id),title:P||"",timestampDescription:g?(0,L.jsx)(a.cC,{id:"yxz5Og",values:{0:(0,er.Dw)(E)}}):"---",NextLink:null,href:T,onClick:M,id:i,createdByName:(null==A?void 0:A.displayName)||"",createdByEmail:(null==A?void 0:A.email)||"",createdByProfileImageUrl:(null==A?void 0:A.profileImageUrl)||"",createdTime:S,thumbnailImageUrl:N,editors:D,isFavorited:!!(null!=I&&I.favorited),onFavorite:R(new Date),onUnfavorite:R(null),menuEnabled:!1,openInNewWindow:!0})}))})]})},ed="Unknown ".concat(K.Yc),ef=d.NB.create({name:Y,addStorage:function(){return{}},addOptions:function(){return{HTMLAttributes:{},suggestion:{char:C.p}}},priority:k.a.DocMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null},mentionedById:{default:null}}},addPasteRules:function(){var e=this;return[E({filterFn:function(t,n){return t!==e.editor.gammaDocId||!n},getAttributesFn:function(e){return{id:e.docId}}})(this.type)]},addCommands:function(){var e=this;return{addDocMention:function(t,n){var r=t.id,o=t.mentionedById;return function(t){var i,a=t.state,c=t.chain,s=a.selection.$to.nodeAfter;return(null==s?void 0:null===(i=s.text)||void 0===i?void 0:i.startsWith(" "))&&(n.to+=1),c().focus().insertContentAt(n,[{type:e.name,attrs:{id:r,mentionedById:o}},{type:"text",text:" "}]).run(),!0}}}},parseHTML:function(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.node,r=this.storage[n.attrs.id]||ed;return["a",(0,d.P1)({"data-type":this.name,href:(0,O.Gn)({docId:n.attrs.id,absolute:!0})},this.options.HTMLAttributes,t),r]},renderText:function(e){var t=e.node,n=this.storage[t.attrs.id]||ed,r=(0,O.Gn)({docId:t.attrs.id,absolute:!0});return"[".concat(n,"](").concat(r,")")},addNodeView:function(){return(0,y.fW)(eu,{update:P.E7})}}),ep=function(e){var t=e.node.attrs.label;return(0,L.jsx)(y.T5,{as:"span",children:(0,L.jsx)(F,{mentionLabel:"@".concat(t)})})},em=d.NB.create({name:"mention",addOptions:function(){return{HTMLAttributes:{},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:C.p}}},priority:k.a.UserMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}},profileImageUrl:{default:null,parseHTML:function(e){return e.getAttribute("data-profile-image-url")},renderHTML:function(e){return e.profileImageUrl?{"data-profile-image-url":e.profileImageUrl}:{}}},mentionedById:{default:null,parseHTML:function(e){return e.getAttribute("data-mentioned-by-id")},renderHTML:function(e){return e.mentionedById?{"data-mentioned-by-id":e.mentionedById}:{}}}}},addCommands:function(){var e=this;return{addUserMention:function(t,n){var r=t.id,o=t.label,i=t.profileImageUrl,a=t.mentionedById;return function(t){var c,s=t.state,l=t.chain,u=s.selection.$to.nodeAfter;return(null==u?void 0:null===(c=u.text)||void 0===c?void 0:c.startsWith(" "))&&(n.to+=1),l().focus().insertContentAt(n,[{type:e.name,attrs:{id:r,label:o,profileImageUrl:i,mentionedById:a}},{type:"text",text:" "}]).run(),!0}}}},parseHTML:function(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,d.P1)({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addNodeView:function(){return(0,y.fW)(ep,{update:P.E7})}})},89648:function(e,t,n){n.d(t,{p:function(){return Y},L:function(){return X}});var r=n(27191),o=n(12741),i=n(95235),a=n(82269),c=n(56623),s=n(2501),l=n(47557),u=n(43926),d=n(55452),f=n(91012),p=n(8283),m=n(12221),h=n(11919),g=n(420),v=n(49929),b=n(55966),y=n(14304),x=n.n(y),j=n(65903),w=n.n(j),O=n(2784),k=n(23313),C=n(75085),P=n(9846),S=n(46358),A=n(15087),E=n(98199),D=n(10710),I=n(23015),z=n(62141),T=n(52322),M=["result","index","selectedIndex","selectItem"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L="Type to mention a person or a ".concat(C.Yc),_=function(e){var t=e.html;return(0,T.jsx)(f.x,{paddingInlineStart:"0.2rem",wordBreak:"break-word",noOfLines:1,maxW:300,lineHeight:"1.5",dangerouslySetInnerHTML:{__html:t?x().sanitize(t):""}})},H=function(e){return e.replace(/(<em>|<\/em>)/g,"")},Z=function(e){var t=e.result,n=t.__typename;return"User"===n?(0,T.jsxs)(p.U,{children:[(0,T.jsx)(m.q,{size:"2xs",minWidth:4,m:0,name:t.displayName&&H(t.displayName),src:t.profileImageUrl}),(0,T.jsx)(_,{html:t.displayName})]}):"Card"===n?(0,T.jsxs)(p.U,{children:[(0,T.jsx)(h.k,{color:"gray.600",minWidth:4,justifyContent:"flex-end",children:(0,T.jsx)(v.G,{icon:c.nZ,transform:{size:6}})}),(0,T.jsx)(_,{html:t.title})]}):"DocResult"===n?(0,T.jsx)(A.y5,{result:t,context:"mentionsList"}):(console.warn("[MentionList] Invalid __typename for search result:",t.__typename),null)},B=(0,O.forwardRef)(function(e,t){var n=e.result,r=e.index,o=e.selectedIndex,i=e.selectItem,c=(0,a.Z)(e,M);return(0,T.jsx)(b.m9,R(R({ref:t,tabIndex:r===o?0:-1,onClick:function(){return i(r)},onMouseDown:I.br},c),{},{children:(0,T.jsx)(Z,{result:n})}),r)}),F=(0,T.jsx)(v.G,{icon:u.faRectangle}),W=(0,T.jsx)(v.G,{icon:l.s2}),U=(0,T.jsx)(v.G,{icon:s.faCircleUser}),G={Card:{title:(0,T.jsx)(d.cC,{id:"gXnPmp",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc}}),iconComponent:F},DocResult:{title:w()(C.aq),iconComponent:W},User:{title:(0,T.jsx)(d.cC,{id:"1wdjme"}),iconComponent:U}},q=function(e,t,n){return RegExp(t?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e,n?"gu":"gui")},V=(0,O.forwardRef)(function(e,t){var n=e.editor,r=e.query,i=e.command,a=(0,k.$gs)().isConnected,c=(0,S.CG)(function(e){var t;return((null===(t=(0,z.yx)(e))||void 0===t?void 0:t.collaborators)||[]).map(function(e){return e.user})}),s=!r||!n.gammaOrgId||!a,l=(0,k.OY$)({variables:{workspaceId:n.gammaOrgId,query:r},skip:s}),u=l.data,m=l.previousData,v=l.error,y=l.loading,x=(0,D.SE)().user,j=(0,O.useMemo)(function(){var e=q(r,!0,!1),t=(u?u.search:m?m.search:[]).filter(function(e){return"User"===e.__typename}),n=(u?u.search:m?m.search:[]).filter(function(e){return"DocResult"===e.__typename}),i=c.filter(function(e){return!t.find(function(t){return t.id===e.id})}).filter(function(e){var t,n;return(null===(t=e.email)||void 0===t?void 0:t.startsWith(r.toLowerCase()))||(null===(n=e.displayName)||void 0===n?void 0:n.toLowerCase().includes(r.toLowerCase()))}),a=[].concat((0,o.Z)(t),(0,o.Z)(i)).map(function(t){var n;return R(R({},t),{},{displayName:null===(n=t.displayName)||void 0===n?void 0:n.replace(e,"<em>$&</em>")})});return{searchDocs:r?(0,o.Z)(n):[],searchUsers:r?a:[]}},[u,m,r,c]),w=j.searchDocs,C=j.searchUsers,A=(0,k.WHS)({variables:{docId:n.gammaDocId},skip:s,fetchPolicy:"cache-only",nextFetchPolicy:"cache-only",returnPartialData:!0}).data,I=(0,O.useMemo)(function(){var e=q(r,!0,!1);return null!=A&&A.docCards&&r?A.docCards.map(function(t){var n=t.title||"";if(n.match(e)){var r=n.replace(e,"<em>$&</em>");return R(R({},t),{},{title:r})}return null}).filter(Boolean):[]},[A,r]),M=[].concat((0,o.Z)(C),(0,o.Z)(I),(0,o.Z)(w)),N=function(e){var t=M[e]?R({},M[e]):null;t&&("User"===t.__typename&&t.displayName&&(t.displayName=H(t.displayName)),i({item:t,user:x}))},_=(0,E.Yg)({ref:t,selectItem:N,options:M}),Z=_.selectedIndex,F=_.selectedItemEl,W=n.state.selection,U=!W.$anchor.parent.isLeaf&&W.$anchor.parent.textContent===Y;return 0===r.length&&U?(0,T.jsx)(h.k,{w:"100%",p:1,align:"flex-start",justify:"flex-start",flex:"1",mt:-9,ml:3,"data-testid":"mention-list-empty",children:(0,T.jsx)(f.x,{fontSize:"md",color:"gray.400",children:L})}):(0,T.jsx)(b.wb,{"data-testid":"mention-list",children:(0,T.jsxs)(b.Dw,{"data-target-name":"mention-list",w:"540px",maxW:"90vw",overflowY:"auto",maxH:"65vh",sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},children:[(0,T.jsx)(P.V,{isConnected:a,label:(0,T.jsx)(d.cC,{id:"KnLL/m"})}),v?(0,T.jsx)(h.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,T.jsxs)(f.x,{fontSize:"sm",color:"gray.500",children:[(0,T.jsx)(d.cC,{id:"sBH7nV"}),v&&(null==v?void 0:v.message)]})}):0===r.length?(0,T.jsxs)(h.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,"data-testid":"mention-list-empty",children:[(0,T.jsx)(f.x,{fontSize:"md",color:"gray.400",children:L})," "]}):y&&0===M.length?(0,T.jsx)(h.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,T.jsx)(g.$,{opacity:"0.8",size:"xs"})}):!y&&r.length>1&&0===M.length?(0,T.jsx)(h.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,T.jsx)(f.x,{fontSize:"sm",color:"gray.500",children:"No results for this query."})}):null,M.map(function(e,t){var n=M.findIndex(function(t){return t.__typename===e.__typename})===t&&e.__typename?G[e.__typename]:null;return(0,T.jsxs)(O.Fragment,{children:[n&&(0,T.jsxs)(p.U,{mt:4,mb:2,color:"gray.500",children:[n.iconComponent,(0,T.jsx)(b.NZ,{children:n.title})]}),(0,T.jsx)(B,{"data-testid":"mention-list-item-".concat(e.id),ref:t===Z?F:null,result:e,index:t,selectedIndex:Z,selectItem:N},t)]},e.id)})]})})}),$=n(66902),K=new r.H$("MentionGamma"),Y="@",X=(0,E.ty)({name:"GammaMention",char:Y,pluginKey:K,allowSpaces:!0,MenuComponent:V,priority:$.a.MentionSuggestionMenu,command:function(e){var t=e.editor,n=e.range,r=e.props,o=r.item,i=r.user;if("User"===o.__typename){var a=o.id,c=o.displayName,s=o.profileImageUrl,l=i.id;t.commands.addUserMention({id:a,label:c,profileImageUrl:s,mentionedById:l},n)}else if("Card"===o.__typename){var u=o.id,d=o.docId,f=i.id;t.commands.addCardMention({id:u,docId:d,mentionedById:f},n)}else if("DocResult"===o.__typename){var p=o.id,m=i.id;t.commands.addDocMention({id:p,mentionedById:m},n)}}})},92397:function(e,t,n){n.d(t,{W:function(){return s}});var r=n(27191),o=n(16296),i=n(66902),a=n(98199),c=new r.H$("SlashMenu"),s=(0,a.ty)({name:"slashMenu",char:"/",pluginKey:c,MenuComponent:o.Z,priority:i.a.SlashMenu})},31619:function(e,t,n){n.d(t,{Ne:function(){return m},js:function(){return p},ne:function(){return h}});var r=n(12741),o=n(2689),i=n.n(o),a=n(16975),c=n(28e3),s=n(53064),l=n(87254),u=n(16825),d=n(71756),f=function(){return(0,d.m)().filter(function(e){return!e.disabled})},p=f().map(function(e){var t=e.key,n=e.commandName,o=e.description,c=e.icon,l=e.keywords,d=void 0===l?[]:l,f=e.defaultContent,p={type:"smartLayout",attrs:{variantKey:t,options:e.defaultOptions},content:i()(3).map(function(){return{type:"smartLayoutCell",content:f||s.JI}})};return{key:"smartLayout-".concat(t),name:n,keywords:[].concat((0,r.Z)(d),["layout","smart"]),description:o,nodeName:"smartLayout",icon:c,execute:function(e){e.chain().focus().insertContentAndSelect(p).run()},dragStartFn:function(e){return(0,a.UV)(e,p)},dragEndFn:function(e){(0,u.X1)(e,e.state.selection.$from)}}}),m=f().map(function(e){var t=e.key,n=e.commandName,r=e.description,o=e.icon;return{key:"listToSmartLayout-".concat(t),name:n,icon:o,description:r,group:"list",apply:function(e){return e.commands.listToSmartLayout(t)},checkDisabled:function(e){return!(0,c.Ah)(e)}}}),h=[{name:function(){return l.ag._({id:"o6dKT5"})},key:"timelineVerticalTwoSided",keywords:["timeline","vertical","agenda","steps"],previewImage:{src:"/_next/static/media/TimelineVerticalTwoSided.e09967af.svg",height:151,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,twoSided:!0,hasLine:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"6HWFtt"})},key:"timelineVerticalNumbered",keywords:["timeline","vertical","agenda","steps"],previewImage:{src:"/_next/static/media/TimelineVerticalNumbered.e4851152.svg",height:111,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"vertical"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"EGQH/j"})},key:"timelineHorizontalTwoSided",keywords:["timeline","horizontal","agenda","steps"],previewImage:{src:"/_next/static/media/TimelineHorizontalTwoSided.acd4bc4a.svg",height:97,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,hasLine:!0,twoSided:!0,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur do"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}},{name:function(){return l.ag._({id:"+s+nmJ"})},key:"timelineHorizontalNumbered",keywords:["timeline","horizontal","agenda","steps"],previewImage:{src:"/_next/static/media/TimelineHorizontalNumbered.4bc4869b.svg",height:97,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"OsVXoX"})},key:"bulletsLg",keywords:["agenda","steps","bullets"],previewImage:{src:"/_next/static/media/BulletsLg.095a87c4.svg",height:97,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:16},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"XY2IHD"})},key:"bulletsSm",previewImage:{src:"/_next/static/media/BulletsSm.b752361e.svg",height:96,width:253,blurWidth:0,blurHeight:0},keywords:["agenda","steps","bullets"],content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"7xlpDo"})},key:"textBoxes3",keywords:["squares","callouts","matrix"],previewImage:{src:"/_next/static/media/TextBoxes3.f6cbbf0a.svg",height:97,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:12.5},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null}},{type:"title",attrs:{horizontalAlign:"center",level:1},content:[{type:"text",text:"2,491"}]},{type:"paragraph",attrs:{horizontalAlign:"center",fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipi"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null}},{type:"title",attrs:{horizontalAlign:"center",level:1},content:[{type:"text",text:"6,000"}]},{type:"paragraph",attrs:{horizontalAlign:"center",fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null}},{type:"title",attrs:{horizontalAlign:"center",level:1},content:[{type:"text",text:"96%"}]},{type:"paragraph",attrs:{horizontalAlign:"center",fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error "}]},{type:"paragraph",attrs:{horizontalAlign:"center",fontSize:null}}]}]}},{name:function(){return l.ag._({id:"tsUOd0"})},key:"textBoxes4",previewImage:{src:"/_next/static/media/TextBoxes4.7125fc69.svg",height:110,width:253,blurWidth:0,blurHeight:0},keywords:["squares","callouts","numbers","matrix","quadrant"],content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:16},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"+kQMBP"})},key:"imagesWithTextTeam",previewImage:{src:"/_next/static/media/ImagesWithTextTeam.af1be4d1.svg",height:97,width:253,blurWidth:0,blurHeight:0},keywords:["team","images","headshot","bio","roles"],content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:10,imageSize:1,horizontalAlign:"center",imageShape:"circle"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/c1414815be03462f8862cb80f89f720d/optimized/tesla.jpg",meta:{width:820,height:709,date_file_modified:"2023/02/07 22:20:08 GMT",aspect_ratio:1.157,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#828282",orientation:"Horizontal (normal)"},name:"tesla.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Nikola Tesla"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor"},{type:"hardBreak"},{type:"text",text:"@ Tesla Inc. "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/53ab692111294834a286002e3ecfdf2b/optimized/marie-curie.jpg",meta:{width:1200,height:1631,date_file_modified:"2023/02/07 22:20:11 GMT",aspect_ratio:.736,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#3b3b3b"},name:"marie-curie.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Marie Curie"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Physicist and Chemist"},{type:"hardBreak"},{type:"text",text:"@ Radioactivity"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e5d0250f2e054ee3a4c63a8e11f39c36/optimized/thomas-edison.webp",meta:{width:360,height:450,date_file_modified:"2023/02/07 22:20:22 GMT",aspect_ratio:.8,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#606060",orientation:"Horizontal (normal)"},name:"thomas edison.webp"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Thomas Edison"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor "},{type:"hardBreak"},{type:"text",text:"@ Light bulb "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/86aa2820df484599b26ab9bbb79737d3/optimized/einstein.jpg",meta:{width:500,height:500,date_file_modified:"2023/02/07 22:20:26 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#575757"},name:"einstein.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Albert Einstein"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Theoretical Physicist"},{type:"hardBreak"},{type:"text",text:"@ EMC2 "}]}]}]}},{name:function(){return l.ag._({id:"joUkNe"})},key:"imagesWithTextIcons",previewImage:{src:"/_next/static/media/ImagesWithTextIcons.85edfaa6.svg",height:97,width:253,blurWidth:0,blurHeight:0},keywords:["icons"],content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:10,imageSize:.2,horizontalAlign:"center"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e169d76934d642e2999d195fb50cfd88/optimized/mountain.svg",tempUrl:"https://gamma.app/api/icons/mountain.svg?provider=fa&style=light",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:46:24 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#cbcbcb"},query:"mountain",providerMeta:{name:"fa",id:"mountain"},uploadStatus:0,showPlaceholder:!1,name:"mountain.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/1f156e4486744695b40e109958afc3fb/optimized/user-astronaut.svg",tempUrl:"https://gamma.app/api/icons/user-astronaut.svg?provider=fa&style=light",meta:{height:512,width:448,svgViewBoxWidth:448,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:45:45 GMT",aspect_ratio:.875,has_clipping_path:!1,frame_count:1,average_color:"#9c9c9c"},query:"astronaut",providerMeta:{name:"fa",id:"user-astronaut"},uploadStatus:0,showPlaceholder:!1,name:"user-astronaut.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",uploadStatus:0,showPlaceholder:!1,tempUrl:"https://gamma.app/api/icons/bullseye-arrow.svg?provider=fa&style=light",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/69f7d571bf7d4af1b2aab06149d5ce4d/optimized/bullseye-arrow.svg",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:47:16 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#acacac"},query:"goal",providerMeta:{name:"fa",id:"bullseye-arrow"},name:"bullseye-arrow.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/ce830d7ed3c543d5b88ecdf6ec6c26ad/optimized/chess-king-piece.svg",tempUrl:"https://gamma.app/api/icons/chess-king-piece.svg?provider=fa&style=light",meta:{height:512,width:256,svgViewBoxWidth:256,svgViewBoxHeight:512,date_file_modified:"2023/02/07 22:21:25 GMT",aspect_ratio:.5,has_clipping_path:!1,frame_count:1,average_color:"#a1a1a1"},providerMeta:{name:"fa",id:"chess-king-piece"},query:"strategy",uploadStatus:0,showPlaceholder:!1,name:"chess-king-piece.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:function(){return l.ag._({id:"tVJ1RK"})},key:"imagesWithTextPhotos",keywords:["photos","captions"],previewImage:{src:"/_next/static/media/ImagesWithTextPhotos.a55ab106.svg",height:96,width:253,blurWidth:0,blurHeight:0},content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:15,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&w=2592&q=25",tempUrl:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&q=80&w=200",meta:{height:3872,width:2592},query:"mountain"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&w=2731&q=25",tempUrl:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&q=80&w=200",meta:{height:4096,width:2731},query:"astronaut"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&w=2832&q=25",tempUrl:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&q=80&w=200",meta:{height:2832,width:2832},query:"goal"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}}].map(function(e){var t=e.name,n=e.key,o=e.keywords,i=void 0===o?[]:o,c=e.content,s=e.previewImage,l=(0,d.P)(c.attrs.variantKey);return{key:n,name:t,keywords:[].concat((0,r.Z)(i),(0,r.Z)(l.keywords||[]),["layout","smart"]),nodeName:"smartLayout",icon:l.icon,previewImage:s,execute:function(e){e.chain().focus().insertContentAndSelect(c).run()},dragStartFn:function(e){return(0,a.UV)(e,c)},dragEndFn:function(e){(0,u.X1)(e,e.state.selection.$from)}}})},53064:function(e,t,n){n.d(t,{JI:function(){return r},NJ:function(){return o},pK:function(){return i}});var r=[{type:"heading",attrs:{level:3},content:[{type:"text",text:"Thing"}]},{type:"paragraph",content:[{type:"text",text:"Description"}]}],o=[{type:"heading",attrs:{level:4}}],i="1em"},57863:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(35211),o=n(52322),i={key:"color",Control:function(e){var t=e.value,n=e.updateValue,i=e.editor;return(0,o.jsx)(r.E,{color:t,setColor:n,editor:i,analyticsSource:"SmartLayout"})}}},16825:function(e,t,n){n.d(t,{X1:function(){return p},cQ:function(){return f},fC:function(){return d},jM:function(){return l},yU:function(){return u}});var r=n(72338),o=n(95472),i=n(17477),a=n(72438),c=n(82360),s=n(71756),l=function(e){var t=(0,s.P)(e.variantKey),n={};return t.options.forEach(function(t){var r,o=t.key,i=t.defaultValue;n[o]=null!==(r=e.options[o])&&void 0!==r?r:i}),n},u=function(e){var t,n=(0,s.P)(e.variantKey),r=l(e);return(null===(t=n.addDirection)||void 0===t?void 0:t.call(n,r))||"right"},d=function(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return null;var s=e.state.doc.resolve(r.inside),l=(0,o.Ru)(s,c.E)[0],u=(0,o.Ru)(s,c.G)[0],d=n&&(0,a.O)(n);if(!l&&!u||!d||"image"!==d.type.name)return null;var f=(0,i.tl)(t.target,e.dom,function(e){return e.hasAttribute("data-smart-layout-image-drop-target")});if(f){var p=d.attrs,m=p.src,h=p.source,g=p.query,v=p.name,b=p.uploadStatus,y=f.getBoundingClientRect();return{pos:r.inside,node:d,rect:y,image:{src:m,source:h,query:g,name:v,uploadStatus:b}}}return null},f=function(e,t,n){if(!n||!e.state.schema.nodes.smartLayout.validContent(n.content))return null;var o,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||-1==i.inside)return null;var a=e.state.doc,s=a.nodeAt(i.pos),l=a.nodeAt(i.inside);if(l&&(0,c.E)(l))o={node:l,pos:i.inside};else if(s&&(0,c.E)(s))o={node:s,pos:i.pos};else{var d=a.resolve(i.inside);o=(0,r.qv)(d,c.E)}var f=o&&e.nodeDOM(o.pos),p=null==f?void 0:f.querySelector("[data-content-reference]"),m=null==p?void 0:p.getBoundingClientRect();if(!o||!m)return null;var h=a.resolve(o.pos).parent;if(!h||!(0,c.G)(h))return null;var g="right"===u(h.attrs)?t.clientX>m.left+m.width/2?"right":"left":t.clientY>m.top+m.height/2?"bottom":"top";return{pos:o.pos,node:o.node,rect:m,side:g}},p=function(e,t){var n=(0,r.qv)(t,c.G);n&&e.commands.selectNodeAtPos(n.pos)}},71756:function(e,t,n){n.d(t,{P:function(){return e2},m:function(){return e1}});var r=n(95235),o=n(82269),i=n(44688),a=n(87254),c=n(11919),s=n(53738),l=n(9121),u=n(27302),d=n(91012),f=n(34676),p=n(2784),m=n(69551),h=n(92703),g=n(32371),v=n(16825),b=n(46358),y=n(55921),x=n(62141),j=function(e,t){var n,r=(0,b.CG)(x.Pu),o=(0,l.c)(r),i=null!==(n=null==t?void 0:t.color)&&void 0!==n?n:e.color,a=(0,p.useMemo)(function(){if(i&&!o.hasTransparentSmartLayoutBoxes)return(0,y.l)(r,void 0,void 0,i)},[r,i,o.hasTransparentSmartLayoutBoxes]);return{color:i,colorVars:a}},w=n(52322);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=(0,g.v0)("h3"),P=function(e){var t,n=e.index,r=e.theme,o=e.firstChildSize,i=e.layoutOptions,a=e.cellOptions,s=e.children,b=e.positionProps,y=e.markerProps,x=e.alignText,O=e.getPos,P=e.editor,S=(0,g.v0)(o),A=null===(t=i.numbered)||void 0===t||t,E=(0,h.yw)().h3.size,D="".concat((A?E:1)+.75,"em"),I=(0,l.c)(r),z=(0,p.useCallback)(function(){if(P.isEditable){var e=P.state.doc.resolve(O());(0,v.X1)(P,e)}},[O,P]),T=j(i,a).colorVars;return(0,w.jsxs)(c.k,k(k({my:x?"var(--block-margin)":0},b),{},{contentEditable:!1,userSelect:"none",onMouseDown:z,cursor:"default",css:T,children:[(0,w.jsx)(u.M,{sx:S,h:"".concat(S.lineHeight,"em"),children:(0,w.jsx)(u.M,k(k({fontSize:"var(--font-size)",h:D,w:D,sx:I.smartLayoutBoxSx||I.boxSx},y),{},{children:(0,w.jsx)(d.x,{sx:C,className:(0,f.cx)(m.A8),textAlign:"center",children:A?n+1:""})}))}),s]}))},S=n(53064),A=n(55743),E=n(55452),D=n(8283),I=n(94659),z=n(477),T=n(49929),M=n(55966),N=function(){return{sm:{label:a.ag._({id:"4Revpc"}),width:10},md:{label:a.ag._({id:"agPptk"}),width:15},lg:{label:a.ag._({id:"k7rCa/"}),width:20},xl:{label:a.ag._({id:"vp6Yr4"}),width:25}}},R={key:"cellSize",defaultValue:N().md.width,Control:function(e){var t=e.value,n=e.updateValue,r=Object.values(N()).find(function(e){return e.width===t});return(0,w.jsxs)(D.U,{spacing:2,mr:2,children:[(0,w.jsx)(M.kH,{placement:"top",label:(0,w.jsxs)(I.g,{spacing:0,children:[(0,w.jsx)(d.x,{color:"gray.400",children:(0,w.jsx)(E.cC,{id:"LNoaEH"})}),(0,w.jsx)(d.x,{children:null==r?void 0:r.label})]}),children:(0,w.jsx)(d.x,{fontSize:"sm",fontWeight:"600",children:(0,w.jsx)(T.G,{icon:A.bl})})}),(0,w.jsxs)(z.iR,{min:N().sm.width,max:N().xl.width,step:5,value:t,onChange:n,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,w.jsx)(z.Uj,{children:(0,w.jsx)(z.Ms,{})}),r?(0,w.jsx)(M.kH,{placement:"top",label:(0,w.jsxs)(I.g,{spacing:0,children:[(0,w.jsx)(d.x,{color:"gray.400",children:(0,w.jsx)(E.cC,{id:"LNoaEH"})}),(0,w.jsx)(d.x,{children:r.label})]}),children:(0,w.jsx)(z.gs,{background:"trueblue.500"})}):(0,w.jsx)(z.gs,{background:"trueblue.500"})]})]})},getDefaultOnParse:function(e){return e.childElementCount%2==0?N().lg.width:N().md.width}},L=n(57863),_=["children"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B={key:"bullets",commandName:function(){return a.ag._({id:"wWsafI"})},name:function(){return a.ag._({id:"RYtHky"})},icon:i.M7,options:[R,L.M],Wrapper:function(e){var t=e.children;return(0,w.jsx)(c.k,{gap:"1em",direction:"row",wrap:"wrap","data-selection-ring":!0,pos:"relative",children:t})},Cell:function(e){var t=e.children,n=(0,o.Z)(e,_),r=n.theme,i=n.layoutOptions,a=(0,l.c)(r),u="calc(".concat(i.cellSize,"em * var(--char-width-multiple))");return(0,w.jsxs)(c.k,{direction:"row",align:"flex-start",gap:S.pK,flex:"1 1 auto",w:u,"data-selection-ring":!0,"data-content-reference":!0,pos:"relative",children:[(0,w.jsx)(P,Z(Z({},n),{},{alignText:!0})),(0,w.jsx)(s.xu,{flex:"1",minW:"0",sx:a.smartLayoutContentSx,pt:"var(--block-margin)",children:t})]})},defaultContent:S.NJ,htmlTag:"bullets",keywords:["bullets","layout","list","bullet"]},F=n(30962),W=n(5766),U=n(83400),G=n(99258),q=n(88033),V=n(69943),$=n(31119),K=n(81333),Y=n(26673),X=n(45650),J=n(84690),Q=n(23015),ee=function(e){var t,n=e.value,r=e.updateValue,o=e.options,i=e.label,a=e.defaultIcon;return(0,w.jsxs)(J.Lt,{isLazy:!0,children:[(0,w.jsx)(M.kH,{placement:"top",label:i,shouldWrapChildren:!0,children:(0,w.jsx)(J.PS,{as:X.z,variant:"toolbar",onMouseDown:Q.br,rightIcon:(0,w.jsx)(T.G,{icon:Y.pt,transform:"shrink-6"}),children:(0,w.jsx)(T.G,{icon:(null===(t=o[n])||void 0===t?void 0:t.icon)||a})})}),(0,w.jsx)(J.sV,{children:Object.entries(o).map(function(e){var t=(0,K.Z)(e,2),n=t[0],o=t[1],i=o.icon,a=o.name;return o.disabled?null:(0,w.jsx)(J.hP,{icon:(0,w.jsx)(T.G,{icon:i,fixedWidth:!0}),onClick:function(){return r(n)},children:a},n)})})]})},et={square:{aspectRatio:"1 / 1"},circle:{borderRadius:"full",aspectRatio:"1 / 1"},landscape:{aspectRatio:"1.618 / 1"},portrait:{aspectRatio:"4 / 5"}},en=n(4389),er=n(60831),eo=n(94804),ei=n(43862),ea=n(43330),ec=n(31889),es=n(35231),el=n(98474),eu=n(15726),ed=n(87819);function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var em=function(e){var t=e.image,n=e.editor,r=e.getPos,o=e.imageShape,i=(0,p.useCallback)(function(){n.commands.selectNodeAtPos(r(),!1),(0,ea.TZ)()},[n,r]),a=(0,ed.zd)((null==t?void 0:t.src)||(null==t?void 0:t.tempUrl)),l=!t||t.showPlaceholder||!t.src&&!t.tempUrl,d=t||{},f=d.src,m=d.tempUrl,h=d.uploadStatus,g=d.meta,v=(0,b.CG)(x.hN),y=f&&(0,ec.SN)(f,n.isThumbnail?ec.Iv:{width:1e3,height:1e3},g),j=f&&!(0,ec.S6)(f),O=(0,ec.Ly)(y,j?f:void 0,m),k={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:a?void 0:O,backgroundPosition:(0,es.x_)(t),width:"100%",height:"100%",borderRadius:"circle"!==o||a?"var(--box-border-radius)":"full",transitionProperty:"border-radius",transitionDuration:"normal"};return(0,w.jsxs)(s.xu,{position:"relative",cursor:"default",contentEditable:!1,h:"100%",children:[v&&(0,w.jsx)(M.kH,{placement:"top",label:(0,w.jsx)(E.cC,{id:"XQFMOm"}),children:(0,w.jsx)(u.M,{position:"absolute",inset:"0",color:"white",backgroundColor:"blackAlpha.400",opacity:"0",transitionProperty:"opacity, border-radius",transitionDuration:"fast",_hover:{opacity:.8},borderRadius:k.borderRadius,cursor:"pointer",onClick:i,onMouseDown:Q.br,zIndex:"1",children:!l&&(0,w.jsx)(T.G,{icon:er.Vm,size:"2x"})})}),l?(0,w.jsx)(eu.k3,ep(ep({},k),{},{icon:er.Vm,iconSize:"1x"})):a?(0,w.jsx)(u.M,ep(ep({},k),{},{objectFit:"contain",color:"var(--icon-color)",sx:{svg:{width:"100%",height:"100%"},aspectRatio:"1 / 1"},children:(0,w.jsx)(eo.Z,{src:f||m||""})})):(0,w.jsx)(c.k,ep({"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",position:"relative"},k)),h==ei.D.Uploading&&v&&(0,w.jsx)(el.HI,{}),h==ei.D.Error&&(0,w.jsx)(el.s7,{})]})},eh=n(73008),eg={key:"horizontalAlign",defaultValue:null,Control:function(e){var t=e.value,n=e.updateValue;return(0,w.jsx)(D.U,{spacing:0,children:en.Ec.map(function(e){var r=e.name,o=e.icon,i=e.alignment;return(0,w.jsx)(eh.h,{label:r(),icon:o,onClick:function(){n(i===t?null:i)},isActive:t===i},r())})})}},ev=function(){return{icon:{label:a.ag._({id:"wwu18a"}),width:.2},sm:{label:a.ag._({id:"4Revpc"}),width:.4},md:{label:a.ag._({id:"agPptk"}),width:.6},lg:{label:a.ag._({id:"k7rCa/"}),width:.8},full:{label:a.ag._({id:"g2Tj8R"}),width:1}}},eb=["children","image","layoutOptions","cellOptions","theme","numCells"];function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ej="1.5em",ew={key:"imagesText",name:function(){return a.ag._({id:"cDxTeG"})},commandName:function(){return a.ag._({id:"Trwbp2"})},keywords:["team","caption","images","text","layout"],icon:F.dL,options:[R,{key:"imageSize",defaultValue:null,Control:function(e){var t=e.value,n=e.updateValue,r=Object.values(ev()).find(function(e){return e.width===t});return(0,w.jsxs)(D.U,{spacing:2,mr:2,children:[(0,w.jsx)(M.kH,{placement:"top",label:(0,w.jsxs)(I.g,{spacing:0,children:[(0,w.jsx)(d.x,{color:"gray.400",children:(0,w.jsx)(E.cC,{id:"8J92vb"})}),(0,w.jsx)(d.x,{children:null==r?void 0:r.label})]}),children:(0,w.jsx)(d.x,{fontSize:"sm",fontWeight:"600",children:(0,w.jsx)(T.G,{icon:er.Vm})})}),(0,w.jsxs)(z.iR,{min:ev().icon.width,max:ev().full.width,step:.2,value:null!=t?t:.5,onChange:n,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,w.jsx)(z.Uj,{children:(0,w.jsx)(z.Ms,{})}),r?(0,w.jsx)(M.kH,{placement:"top",label:(0,w.jsxs)(I.g,{spacing:0,children:[(0,w.jsx)(d.x,{color:"gray.400",children:(0,w.jsx)(E.cC,{id:"8J92vb"})}),(0,w.jsx)(d.x,{children:r.label})]}),children:(0,w.jsx)(z.gs,{background:"trueblue.500"})}):(0,w.jsx)(z.gs,{background:"trueblue.500"})]})]})}},{key:"imageShape",defaultValue:null,Control:function(e){var t=e.value,n=e.updateValue,r=e.editor;return(0,w.jsx)(ee,{value:t,updateValue:n,editor:r,options:{square:{name:a.ag._({id:"1DA6ap"}),icon:G.pL},circle:{name:a.ag._({id:"7xMmki"}),icon:$.di},landscape:{name:a.ag._({id:"XxIeKn"}),icon:V.r9},portrait:{name:a.ag._({id:"3bV9gD"}),icon:q.faRectangleVertical}},label:a.ag._({id:"JbOau/"}),defaultIcon:G.pL})}},eg],Wrapper:function(e){var t=e.children,n=e.options;return(0,w.jsx)(W.M,{minChildWidth:"min(calc(".concat(n.cellSize,"em * var(--char-width-multiple) - ").concat(ej,"), 100%)"),spacing:ej,"data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:t})},Cell:function(e){var t,n,r,i,a,u=e.children,d=e.image,p=e.layoutOptions,m=e.cellOptions,h=e.theme,g=e.numCells,v=(0,o.Z)(e,eb),b="left"==p.imagePosition,y=(0,l.c)(h),x=et[null!==(t=null!==(n=p.imageShape)&&void 0!==n?n:y.smartLayoutImageShape)&&void 0!==t?t:"square"],O=(null==d?void 0:d.source)==U.j.key,k=null!==(r=p.imageSize)&&void 0!==r?r:O?ev().sm.width:1,C=null==d?void 0:null===(i=d.meta)||void 0===i?void 0:i.has_transparency,P=null!==(a=p.horizontalAlign)&&void 0!==a?a:"center",S=(0,en.nN)(P),A=j(p,m).color,E=1===g||p.cellSize==N().xl.width,D=k<=ev().sm.width?"min(100%, ".concat(N().sm.width*k,"em)"):E?"min(100%, ".concat(N().xl.width*k,"em)"):"100%",I=O?void 0:C?ex({},x):ex(ex({},y.smartLayoutImageSx||y.imageSx),x);return(0,w.jsxs)(c.k,{borderRadius:"var(--box-border-radius)",gap:"1.25em",direction:b?"row":"column",align:"center",justify:"center",sx:S,"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",children:[(0,w.jsx)(s.xu,{"data-smart-layout-image-drop-target":"true",className:(0,f.cx)("image"),w:"".concat(100*k,"%"),maxW:D,overflow:"hidden",sx:I,css:{"--icon-color":null!=A?A:"var(--heading-color)"},children:(0,w.jsx)(em,ex({image:d},v))}),(0,w.jsx)(s.xu,{minW:b?"8em":"100%",maxW:"100%",flex:"1",sx:b?(0,en.nN)("left"):void 0,children:u})]})},defaultContent:S.NJ,addDirection:function(e){return"left"===e.imagePosition?"bottom":"right"},htmlTag:"images",defaultOptions:{horizontalAlign:"left",imageSize:1,imageShape:"landscape"}},eO=n(89234),ek=n(27440),eC=n(38843),eP=n(67925),eS=n(73716),eA=["updateAttributes","value","placeholder"];function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eI=function(e){var t=e.updateAttributes,n=e.value,r=e.placeholder,i=(0,o.Z)(e,eA),a=(0,p.useCallback)(function(e){t({label:""===e?null:e})},[t]);return(0,w.jsxs)(eC.C,eD(eD({defaultValue:n||void 0,placeholder:r,onSubmit:a},i),{},{children:[(0,w.jsx)(eP.w,{width:"100%",py:0}),(0,w.jsx)(eS.V,{width:"100%",my:-1,py:1})]}))},ez=n(42594),eT=n(46973),eM={key:"orientation",defaultValue:"vertical",Control:function(e){var t=e.value,n=e.updateValue;return(0,w.jsx)(eh.h,{label:a.ag._({id:"MRB7nI"}),onClick:function(){return n("horizontal"===t?"vertical":"horizontal")},isActive:"horizontal"===t,icon:"horizontal"===t?eT.eF:ez.r5,testId:"smart-layout-orientation-option"})}};function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eL=function(e){var t=e.layoutOptions,n=e.label,r=e.index,o=e.updateAttributes,i=e.theme,a=(0,l.c)(i),s="horizontal"===t.orientation,u=s?eR({gridRow:1,gridColumn:"span 1",align:"center",justify:"flex-start"},(0,en.nN)("center")):{gridColumn:1,gridRow:"span 1",align:"center",justify:"center",width:"6em"};return(0,w.jsx)(c.k,eR(eR({fontSize:"1.5em",fontFamily:"var(--heading-font)",fontWeight:"var(--heading-font-weight)",px:"var(--block-margin)",lineHeight:"1",contentEditable:!1,sx:a.smartLayoutBoxSx||a.boxSx},u),{},{position:"relative",children:(0,w.jsx)(eI,{value:n||"",my:"var(--block-margin)",updateAttributes:o,placeholder:"".concat(r+1),flex:s?1:void 0})}))},e_={key:"sequence",name:function(){return a.ag._({id:"ipQKNM"})},commandName:function(){return a.ag._({id:"LwYshq"})},icon:eO.ir,options:[eM],Wrapper:function(e){var t=e.children,n="horizontal"===e.options.orientation;return(0,w.jsx)(ek.r,eR(eR({},n?{templateRows:"auto auto",autoColumns:"1fr",columnGap:"1em"}:{templateColumns:"auto 1fr",autoRows:"auto",rowGap:"1em"}),{},{"data-selection-ring":!0,children:t}))},Cell:function(e){var t=e.layoutOptions,n=e.children,r=e.theme,o=(0,l.c)(r),i="horizontal"===t.orientation?eR({gridRow:2,gridColumn:"span 1",minW:0,transformOrigin:"center top"},(0,en.nN)("center")):{gridColumn:2,gridRow:"span 1",transformOrigin:"left center"};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(eL,eR({},e)),(0,w.jsx)(s.xu,eR(eR({flex:"1"},i),{},{px:S.pK,"data-selection-ring":!0,"data-content-reference":!0,sx:o.smartLayoutContentSx,children:n}))]})},defaultContent:S.NJ,addDirection:function(e){return"horizontal"===e.orientation?"right":"bottom"},isFullWidth:function(e){return"horizontal"===e.orientation},disabled:!0,keywords:["sequence","list","layout","ordered","numbered"]};function eH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eB={key:"textBoxes",name:function(){return a.ag._({id:"b7qbjN"})},commandName:function(){return a.ag._({id:"z6ri4c"})},icon:n(38315).Lc,options:[R,L.M,eg],Wrapper:function(e){var t=e.children;return(0,w.jsx)(c.k,{gap:"1em",wrap:"wrap","data-selection-ring":!0,pos:"relative",children:t})},Cell:function(e){var t=e.theme,n=e.children,r=e.layoutOptions,o=e.cellOptions,i=(0,l.c)(t),a="calc(".concat(r.cellSize,"em * var(--char-width-multiple))"),c=j(r,o).colorVars,u=r.horizontalAlign,d=(0,en.nN)(u),f=eZ(eZ(eZ({},c),d),i.smartLayoutBoxSx||i.boxSx);return(0,w.jsx)(s.xu,{flex:"1 1 auto",w:a,p:S.pK,"data-content-reference":!0,"data-selection-ring":!0,pos:"relative",sx:f,children:n})},defaultContent:S.NJ,addDirection:function(){return"right"},htmlTag:"boxes",keywords:["textbox","layout"]},eF=n(17561),eW=n(13720),eU=n(56615),eG=n(84211),eq=n(80578);function eV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eK={base:!1,md:!0},eY={base:!1,md:!0},eX=function(e){var t=(0,eW.i)(eK)||!1,n=(0,eW.i)(eY)||!1,r="horizontal"===e.orientation&&n,o=e.twoSided&&(r||t);return{isHorizontal:r,isTwoSided:o}},eJ=function(e){return e?1.5:.5},eQ=function(e){var t=e.index,n=e.layoutOptions,r=e.theme,o=eX(n),i=o.isHorizontal,a=o.isTwoSided&&t%2==1,c=n.hasLine?"inside":"none",u=(0,l.c)(r),d="none"===c?0:"inside"===c?"".concat(3.5,"em"):"100%",f=i?{height:d,width:"var(--line-thickness)",left:"50%",top:a?void 0:"50%",bottom:a?"50%":void 0,transform:"translateX(-50%)"}:{width:d,height:"var(--line-thickness)",top:"50%",transform:"translateY(-50%)",left:a?void 0:"100%",right:a?"100%":void 0};return(0,w.jsx)(P,e$(e$({},e),{},{alignText:!i,positionProps:e$(e$({},i?a?{bottom:0,transform:"translateY(50%)"}:{top:0,transform:"translateY(-50%)"}:a?{right:0,transform:"translateX(50%)"}:{left:0,transform:"translateX(-50%)"}),{},{position:"absolute"}),children:(0,w.jsx)(s.xu,e$(e$({position:"absolute",zIndex:"-1"},f),{},{sx:u.smartLayoutLineSx}))}))},e0={key:"timeline",name:function(){return a.ag._({id:"cklVjM"})},commandName:function(){return a.ag._({id:"h6mI+B"})},icon:eF.PZ,options:[eM,{key:"twoSided",defaultValue:!0,Control:function(e){var t=e.value,n=e.updateValue;return(0,w.jsx)(eh.h,{label:a.ag._({id:"ovs7iP"}),onClick:function(){return n(!t)},isActive:t,icon:eq.cp,testId:"smart-layout-two-sided-option"})}},{key:"numbered",defaultValue:!0,Control:function(e){var t=e.value,n=e.updateValue;return(0,w.jsx)(eh.h,{label:a.ag._({id:"mVQI+S"}),onClick:function(){return n(!t)},isActive:t,icon:eG.nF})}},{key:"hasLine",defaultValue:!0,Control:function(e){var t=e.value,n=e.updateValue;return(0,w.jsx)(eh.h,{label:a.ag._({id:"aPb1AT"}),onClick:function(){return n(!t)},isActive:t,icon:eU.ql})}},L.M],Wrapper:function(e){var t=e.children,n=e.options,r=e.theme,o=eX(n),i=o.isHorizontal,a=o.isTwoSided,c=eJ(n.numbered),d=i?{templateRows:"auto 0px auto",autoColumns:"1fr",justifyContent:"center",columnGap:"1em",mt:a?void 0:"".concat(c,"em")}:{templateColumns:a?"1fr 0px 1fr":"0px 0px 1fr",autoRows:"auto",justifyContent:"center",rowGap:"1em",ml:a?void 0:"".concat(c,"em")},f=(0,l.c)(r),p=j(n).colorVars,m=i?(0,w.jsx)(s.xu,{gridRow:2,"data-spotlight-dim":!0,children:(0,w.jsx)(s.xu,{position:"absolute",height:"var(--line-thickness)",width:"100%",left:"0",right:"0",sx:f.smartLayoutLineSx})}):(0,w.jsx)(u.M,{gridColumn:2,"data-spotlight-dim":!0,css:p,children:(0,w.jsx)(s.xu,{position:"absolute",width:"var(--line-thickness)",top:"0",bottom:"0",sx:f.smartLayoutLineSx})});return(0,w.jsxs)(ek.r,e$(e$({},d),{},{"data-selection-ring":!0,pos:"relative",children:[(0,w.jsx)(s.xu,e$(e$({},i?{gridColumn:"span 1",gridRow:1,minW:"0.5fr"}:{gridColumn:1,gridRow:"span 1",minH:"".concat(4,"em")}),{},{contentEditable:!1})),m,t]}))},Cell:function(e){var t=e.children,n=e.layoutOptions,r=e.index,o=e.theme,i=(0,l.c)(o),a=eX(n),u=a.isHorizontal,d=a.isTwoSided&&(r+1)%2==0,f=n.hasLine?"inside":"none",p=eJ(n.numbered),m="".concat(("inside"===f?3.5:0)+(u?"none"===f?p+1:1:2),"em"),h=u?{gridColumn:"span 2",gridRow:d?1:3,align:d?"flex-end":"flex-start",justify:"center",transformOrigin:d?"center bottom":"center top",pt:d?void 0:m,pb:d?m:void 0,px:"".concat(1,"em")}:{gridRow:"span 2",gridColumn:d?1:3,align:"flex-start",transformOrigin:d?"right center":"left center",pl:d?void 0:m,pr:d?m:void 0},g=u?e$(e$({minW:"min(100%, ".concat(8,"em)")},(0,en.nN)("center")),i.smartLayoutContentSx):e$(e$(e$({minH:"".concat(8,"em")},(0,en.nN)(d?"right":"left")),i.smartLayoutContentSx),{},{py:"".concat(1,"em")});return(0,w.jsxs)(c.k,e$(e$({minW:"0",position:"relative",transitionProperty:"border, padding, right, margin","data-selection-ring":!0,"data-content-reference":!0},h),{},{"data-test-timeline-item":r,children:[(0,w.jsx)(eQ,e$({},e)),(0,w.jsx)(s.xu,{sx:g,flex:"1",maxW:"100%",children:t})]}))},defaultContent:S.NJ,addDirection:function(e){return"horizontal"===e.orientation?"right":"bottom"},isFullWidth:function(e){return"horizontal"===e.orientation},htmlTag:"timeline",keywords:["timeline","layout","list","horizontal","vertical"]},e1=function(){return[B,eB,ew,e0,e_]},e2=function(e){return e&&e1().reduce(function(e,t){return e[t.key]=t,e},{})[e]||B}},98199:function(e,t,n){n.d(t,{ty:function(){return C},Yg:function(){return k}});var r=n(95235),o=n(20406),i=n(28526),a=n.n(i),c=n(27191),s=n(52780),l=n(72338);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=new c.H$("suggestion"),p={from:0,to:0},m=n(82269),h=n(55966),g=n(27875),v=n.n(g),b=n(2784),y=n(55079),x=n(46416),j=["char","MenuComponent","pluginKey","command","allowSpaces"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){var t=e.ref,n=e.selectItem,r=e.options,o=(0,b.useState)(0),i=o[0],a=o[1],c=(0,b.useRef)(null),s=(0,b.useRef)({selectedIndex:i,options:r,selectItem:n});return s.current={selectedIndex:i,options:r,selectItem:n},(0,b.useImperativeHandle)(t,function(){var e=function(e){var t=e.key,n=s.current;return"ArrowUp"===t?(e.preventDefault(),n.selectedIndex<=0?a(r.length-1):a(v()(n.selectedIndex-1,0,n.options.length-1))):"ArrowDown"===t?(e.preventDefault(),n.selectedIndex>=n.options.length-1?a(0):a(v()(n.selectedIndex+1,0,n.options.length-1))):("Enter"===t||"Tab"===t)&&(e.preventDefault(),n.options.length>0&&n.selectItem(i)),e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:function(t){var n=t.event;return!!["ArrowUp","ArrowDown","Enter","Tab"].includes(n.key)&&e(n)}}}),(0,b.useEffect)(function(){if(c.current){var e;null==c||null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},[i]),{selectedIndex:i,selectedItemEl:c}},C=function(e){var t=e.char,n=e.MenuComponent,r=e.pluginKey,i=e.command,u=e.allowSpaces,g=void 0!==u&&u,v=(0,m.Z)(e,j);return l.hj.create(O(O({},v),{},{addOptions:function(){return{HTMLAttributes:{},suggestion:{char:t,pluginKey:r,allowSpaces:g,startOfLine:!1,command:i,render:function(){var e=null,t=null;return{onStart:function(r){if(t&&e){e.updateProps(r),t.setProps({getReferenceClientRect:r.clientRect}),t.show();return}e=new x.M(n,{props:r,editor:r.editor});var o=r.editor.view.dom.parentElement;t=(0,y.ZP)(o,{getReferenceClientRect:r.clientRect,appendTo:function(){return document.body},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",zIndex:h.qZ.zIndices.dropdown,popperOptions:{modifiers:[{name:"preventOverflow",options:{padding:{bottom:8}}},{name:"flip",options:{fallbackPlacements:["auto-start"]}}]}})},onUpdate:function(n){var r,o;null===(r=e)||void 0===r||r.updateProps(n),null===(o=t)||void 0===o||o.setProps({getReferenceClientRect:n.clientRect})},onKeyDown:function(n){var r,o,i,a;return"Escape"===n.event.key?(null===(i=t)||void 0===i||i.destroy(),null===(a=e)||void 0===a||a.destroy(),t=null,e=null,!0):null===(r=e)||void 0===r?void 0:null===(o=r.ref)||void 0===o?void 0:o.onKeyDown(n)},onExit:function(n){var o,i;!0!==r.getState(n.editor.view.state).active&&(null===(o=t)||void 0===o||o.destroy(),null===(i=e)||void 0===i||i.destroy(),t=null,e=null)}}}}}},addProseMirrorPlugins:function(){var e,t,n,r,i,u,m,h,g,v,b,y,x,j,w,k,C,P,S,A,E,D,I,z,T,M,N;return[(r=void 0===(n=(e=O({editor:this.editor},this.options.suggestion)).pluginKey)?f:n,i=e.editor,m=void 0===(u=e.char)?"@":u,g=void 0!==(h=e.allowSpaces)&&h,b=void 0===(v=e.prefixSpace)||v,x=void 0!==(y=e.startOfLine)&&y,w=void 0===(j=e.decorationTag)?"span":j,C=void 0===(k=e.decorationClass)?"suggestion":k,S=void 0===(P=e.command)?function(){return null}:P,E=void 0===(A=e.items)?function(){return[]}:A,I=void 0===(D=e.render)?function(){return{}}:D,T=void 0===(z=e.allow)?function(){return!0}:z,M=null==I?void 0:I(),N=function(e){e.dispatch(e.state.tr.setMeta(r,{active:!1,decorationId:"",key:null,range:p,query:null,text:null,composing:!1}))},new c.Sy({key:r,view:function(){var e,n=this;return{update:(e=(0,o.Z)(a().mark(function e(r,o){var c,s,l,u,d,f,p,m,h,g,v,b,y,x,j,w;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=null===(c=n.key)||void 0===c?void 0:c.getState(o),u=null===(s=n.key)||void 0===s?void 0:s.getState(r.state),d=l.active&&u.active&&l.range.from!==u.range.from,f=!l.active&&u.active,p=l.active&&!u.active,m=!f&&!p&&l.query!==u.query,h=f||d,g=m&&!d,v=p||d,!(!h&&!g&&!v)){e.next=11;break}return e.abrupt("return");case 11:if(b=v&&!h?l:u,y=document.querySelector('[data-decoration-id="'.concat(b.decorationId,'"]')),e.t0=i,e.t1=b.range,e.t2=b.query,e.t3=b.text,!(g||h)){e.next=23;break}return e.next=20,E({editor:i,query:b.query});case 20:e.t4=e.sent,e.next=24;break;case 23:e.t4=[];case 24:e.t5=e.t4,e.t6=function(e){S({editor:i,range:b.range,props:e})},e.t7=y,e.t8=y?function(){var e,t=(null===(e=n.key)||void 0===e?void 0:e.getState(i.state)).decorationId;return document.querySelector('[data-decoration-id="'.concat(t,'"]')).getBoundingClientRect()}:null,t={editor:e.t0,range:e.t1,query:e.t2,text:e.t3,items:e.t5,command:e.t6,decorationNode:e.t7,clientRect:e.t8},v&&(null==M||null===(x=M.onExit)||void 0===x||x.call(M,t)),g&&(null==M||null===(j=M.onUpdate)||void 0===j||j.call(M,t)),h&&(null==M||null===(w=M.onStart)||void 0===w||w.call(M,t));case 32:case"end":return e.stop()}},e)})),function(t,n){return e.apply(this,arguments)}),destroy:function(){var e;t&&(null==M||null===(e=M.onExit)||void 0===e||e.call(M,t))}}},state:{init:function(){return{active:!1,decorationId:"",range:p,key:null,query:null,text:null,composing:!1}},apply:function(e,t,n,o){a=e.getMeta(r)?d({},e.getMeta(r)):d({},t);var a,c=i.isEditable,s=i.view.composing,u=e.selection,f=u.empty,h=u.from;if(a.composing=s,!a.active&&a.key!==m)return a;if(a.active&&a.key===m)return a.key=null,a;if(c&&(f||i.view.composing)){t.range&&(h<t.range.from||h>t.range.to)&&!s&&!t.composing&&(a.active=!1);var v=function(e){var t,n=e.char,r=e.allowSpaces,o=e.prefixSpace,i=e.startOfLine,a=e.$position,c=(0,l.Ov)(n),s=new RegExp("\\s".concat(c,"$")),u=i?"^":"",d=r?RegExp("".concat(u).concat(c,".*?(?=\\s").concat(c,"|$)"),"gm"):RegExp("".concat(u,"(?:^)?").concat(c,"[^\\s").concat(c,"]*"),"gm"),f=null===(t=a.nodeBefore)||void 0===t?void 0:t.text;if(!f)return null;var p=a.pos-f.length,m=Array.from(f.matchAll(d)).pop();if(!m||void 0===m.input||void 0===m.index)return null;var h=m.input.slice(Math.max(0,m.index-1),m.index),g=/^[\s\0]?$/.test(h);if(o&&!g)return null;var v=p+m.index,b=v+m[0].length;return(r&&s.test(f.slice(b-1,b+1))&&(m[0]+=" ",b+=1),v<a.pos&&b>=a.pos)?{range:{from:v,to:b},query:m[0].slice(n.length),text:m[0]}:null}({char:m,allowSpaces:g,prefixSpace:b,startOfLine:x,$position:u.$from}),y="id_".concat(Math.floor(4294967295*Math.random()));v&&T({editor:i,state:o,range:v.range})?(a.active=!0,a.decorationId=t.decorationId?t.decorationId:y,a.range=v.range,a.query=v.query,a.text=v.text):a.active=!1}else a.active=!1;return a.active||(a.decorationId=null,a.range=p,a.query=null,a.text=null),a}},props:{handleKeyDown:function(e,t){var n,o=e.state.tr,i=this.getState(e.state);if(!i)return!1;var a=i.active,c=i.range;if(!c)return!1;if(a||t.key!==m||t.metaKey){if(!a)return!1;"Escape"===t.key&&N(e)}else{var s=d({},i);s.active=!0,s.key=t.key,s.query="",e.dispatch(o.setMeta(r,s))}return(null==M?void 0:null===(n=M.onKeyDown)||void 0===n?void 0:n.call(M,{view:e,event:t,range:c}))||!1},decorations:function(e){var t=this.getState(e);if(!t)return null;var n=t.active,r=t.range,o=t.decorationId;return n&&r?s.EH.create(e.doc,[s.p.inline(r.from,r.to,{nodeName:w,class:C,"data-decoration-id":o||""})]):null}}}))]}}))}},36392:function(e,t,n){n.d(t,{FC:function(){return l},KX:function(){return u},Ox:function(){return c}});var r=n(95235),o=n(81333);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={light:{gray:{hex:"#D6D6D6",name:"Gray"},red:{hex:"#FFBDBD",name:"Red"},orange:{hex:"#F8CB96",name:"Orange"},yellow:{hex:"#FBEB8F",name:"Yellow"},green:{hex:"#C9FDCB",name:"Green"},blue:{hex:"#D1E5FD",name:"Blue"},purple:{hex:"#D5CCFB",name:"Purple"},primary:{hex:"#FFD300"},secondary:{hex:"#FF7979"},tertiary:{hex:"#A9FF8B"}},dark:{gray:{hex:"#999999",name:"Gray"},red:{hex:"#EB5252",name:"Red"},orange:{hex:"#DD8404",name:"Orange"},yellow:{hex:"#CAAD07",name:"Yellow"},green:{hex:"#50BD3D",name:"Green"},blue:{hex:"#85BAFA",name:"Blue"},purple:{hex:"#B1A0F8",name:"Purple"},primary:{hex:"#856E01"},secondary:{hex:"#952222"},tertiary:{hex:"#257D04"}}},s=function(e){return Object.entries(c[e]).reduce(function(e,t){var n=(0,o.Z)(t,2),r=n[0],i={backgroundColor:n[1].hex};return e['&[variant="'.concat(r,'"]')]=i,e},{backgroundColor:"var(--highlight-color)"})},l={borderRadius:"0.125em",px:".05em",mx:"-.05em",boxDecorationBreak:"clone"},u={default:{"mark.highlight":a(a({color:"black","--link-color":"black"},s("light")),l)},dark:{"mark.highlight":a({color:"black"},s("dark"))}}},55052:function(e,t,n){n.d(t,{E_:function(){return d},RJ:function(){return s},eR:function(){return c}});var r=n(95235),o=n(81333);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={light:{gray:{hex:"#7A7A7A",name:"Gray"},red:{hex:"#EB0000",name:"Red"},orange:{hex:"#BD6F00",name:"Orange"},yellow:{hex:"#B29500",name:"Yellow"},green:{hex:"#008545",name:"Green"},blue:{hex:"#006ED6",name:"Blue"},purple:{hex:"#7B57FF",name:"Purple"}},dark:{gray:{hex:"#AFAFAF",name:"Gray"},red:{hex:"#EF8784",name:"Red"},orange:{hex:"#F5C274",name:"Orange"},yellow:{hex:"#F5F380",name:"Yellow"},green:{hex:"#8CE29F",name:"Green"},blue:{hex:"#8DD4FB",name:"Blue"},purple:{hex:"#A08CF8",name:"Purple"}}},s=Object.keys(c.light),l=function(e,t){return Object.entries(c[e]).reduce(function(e,n){var r=(0,o.Z)(n,2),i=r[0],a={"--text-color":r[1].hex};return e[t?t(i):'&[variant="'.concat(i,'"]')]=a,e},{})},u="var(--text-color, var(--body-color))",d={default:{"span.textColor":a(a({},l("light")),{},{color:u}),".block-numbered":a(a({},l("light",function(e){return'&[data-text-color="'.concat(e,'"] li::before')})),{},{"li::before":{color:u}}),".block-bullet":a(a({},l("light",function(e){return'&[data-text-color="'.concat(e,'"] li::marker')})),{},{"li::marker":{color:u}})},dark:{"span.textColor":a(a({},l("dark")),{},{color:u}),".block-numbered":a(a({},l("dark",function(e){return'&[data-text-color="'.concat(e,'"] li::before')})),{},{"li::before":{color:u}}),".block-bullet":a(a({},l("dark",function(e){return'&[data-text-color="'.concat(e,'"] li::marker')})),{},{"li::marker":{color:u}})}}},53026:function(e,t,n){n.d(t,{D:function(){return b},Y:function(){return o}});var r,o,i=n(72338),a=n(13121),c=n(88646),s=n(95235),l=n(34676),u=n(69551),d=n(80318),f=n(67453),p=n(4389),m=n(52322);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){var t=e.node.attrs.horizontalAlign;return(0,m.jsx)(d.lO,g(g({},e),{},{style:g({display:"flex",flexDirection:"column"},(0,p.nN)(t)),children:(0,m.jsx)(a.ms,{className:(0,l.cx)("title",u.A8),placeholder:(0,f.$)(),style:{minWidth:"min(100%, 8em)"}})}))};(r=o||(o={}))[r.DocTitle=1]="DocTitle";var b=i.NB.create({name:"title",content:"inline*",group:"block",defining:!0,selectable:!1,addAttributes:function(){return{level:{default:o.DocTitle}}},addNodeView:function(){return(0,a.fW)(v,{update:c.E7})},parseHTML:function(){return[{tag:"h1[class=title]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["h1",(0,i.P1)(t,{class:"title"}),0]}})},19577:function(e,t,n){n.d(t,{C:function(){return c},w:function(){return s}});var r=n(38564),o=n(37164),i=n(27191),a=n(74203),c=function(){return(0,o.x0)(5)},s=a.I.extend({name:"UniqueToggleId"}).configure({attributeName:"id",types:["toggle"],initialValue:c,filterTransaction:function(e){var t=e.getMeta(r.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:new i.H$("UniqueToggleId")})},56261:function(e,t,n){n.d(t,{AH:function(){return s},O4:function(){return l},U6:function(){return c},fH:function(){return i},xB:function(){return a}});var r=n(46358),o=n(62141),i=function(e){var t=(0,r.bh)();return(0,o.R)(e)(t.getState())||!1},a=function(e,t){(0,r.bh)().dispatch((0,o.pD)({toggleIds:[e],isExpanded:t}))},c=function(e,t){var n=[],i=(0,r.bh)();e.state.doc.descendants(function(e){if(s(e)){var t=e.attrs.id;n.push(t)}}),i.dispatch((0,o.pD)({toggleIds:n,isExpanded:t}))},s=function(e){return"toggle"===e.type.name},l=function(e){return"toggleSummary"===e.type.name}},99638:function(e,t,n){n.d(t,{RT:function(){return k},vz:function(){return x},Sz:function(){return y},iS:function(){return j},WE:function(){return w}});var r=n(72338),o=n(27191),i=n(52780),a=n(95472),c=n(9734),s=n(39875),l=n(41261),u=n(34264),d=n(65542),f=n(29262),p=n(96412),m=n(13089),h=n(95235),g=n(39428),v=new o.H$("BlockHoverKey"),b=function(){function e(){(0,p.Z)(this,e),(0,h.Z)(this,"hoverPos",null),(0,h.Z)(this,"annotatablePos",null)}return(0,m.Z)(e,[{key:"getHoverAbsPos",value:function(e){return this.hoverPos?(0,g.XV)(e,this.hoverPos):null}},{key:"getAnnotableAbsPos",value:function(e){return this.annotatablePos?(0,g.XV)(e,this.annotatablePos):null}},{key:"apply",value:function(e,t){var n=e.getMeta(v);return n&&"setHoverPos"in n&&this.handleSetPos(t,n),this}},{key:"handleSetPos",value:function(e,t){return this.hoverPos=null===t.setHoverPos?null:(0,g.jS)(e,t.setHoverPos),this.annotatablePos=null===t.setAnnotatablePos?null:(0,g.jS)(e,t.setAnnotatablePos),this}}]),e}(),y=function(e){var t;return(null===(t=e.find(function(e){return e.spec.isTableHover}))||void 0===t?void 0:t.spec)||{}},x=function(e){var t;return(null===(t=e.find(function(e){return e.spec.isTableFocus}))||void 0===t?void 0:t.spec)||{}},j=function(e){return e.some(function(e){return e.spec.isAnnotatableHover})},w=function(e){return e.some(function(e){return e.spec.isBlockHover})},O=function(e,t){return(0,s.R1)(e,t)||(0,d.nM)(e)};function k(e){return new o.Sy({key:v,state:{init:function(){return new b},apply:function(e,t,n,r){return t.apply(e,r)}},props:{handleDOMEvents:{mousemove:function(e,t){if(!(0,c.s2)()&&t.target.closest(".".concat(l.vD))){var n=t.clientX,r=t.clientY,o=e.posAtCoords({left:n,top:r}),i=o&&e.state.doc.resolve(o.inside),a=null,s=null;if(null==i||!i.nodeAfter||(a=i.pos,(0,u.KH)(i.nodeAfter)||(0,u.pv)(i.nodeAfter)||(s=i.pos)),!s){var d=e.posAtCoords({left:n-100,top:r}),f=d&&e.state.doc.resolve(d.inside);null==f||!f.nodeAfter||(0,u.KH)(f.nodeAfter)||(0,u.pv)(f.nodeAfter)||(s=f.pos)}var p=v.getState(e.state);if(a!==p.getHoverAbsPos(e.state)||s!==p.getAnnotableAbsPos(e.state)){var m=e.state.tr;m.setMeta(v,{setHoverPos:a,setAnnotatablePos:s}),e.dispatch(m)}}}},decorations:function(e){var t,n,o,c,l=v.getState(e),u=l.getHoverAbsPos(e);if(null===u)return i.EH.empty;try{o=e.doc.resolve(u)}catch(e){return i.EH.empty}var d=[];(0,a.Ru)(o,O).forEach(function(e){var t=e.pos,n=e.node;d.push(i.p.node(t,t+n.nodeSize,{},{isBlockHover:!0}))});var p=(0,r.qv)(o,function(e){return"table"===e.type.name}),m=(null===(t=o.nodeAfter)||void 0===t?void 0:t.type.name)==="tableCell"?{pos:o.pos,node:o.nodeAfter}:(0,r.qv)(o,function(e){return"tableCell"===e.type.name});if(p&&m){var h=f.rU.get(p.node).findCell(m.pos-(p.pos+1)),g=h.left,b=h.top;d.push(i.p.node(p.pos,p.pos+p.node.nodeSize,{},{isTableHover:!0,rowHover:b,colHover:g}))}var y=e.selection.$from,x=(0,r.qv)(y,function(e){return"table"===e.type.name}),j=(null===(n=y.nodeAfter)||void 0===n?void 0:n.type.name)==="tableCell"?{pos:y.pos,node:y.nodeAfter}:(0,r.qv)(y,function(e){return"tableCell"===e.type.name});if(x&&j){var w=f.rU.get(x.node).findCell(j.pos-(x.pos+1)).left;d.push(i.p.node(x.pos,x.pos+x.node.nodeSize,{},{isTableFocus:!0,colFocus:w}))}var k=l.getAnnotableAbsPos(e);if(null!==k){try{c=e.doc.resolve(k)}catch(e){return i.EH.empty}(0,a.Ru)(c,s.R1).forEach(function(e){var t=e.pos,n=e.node;d.push(i.p.node(t,t+n.nodeSize,{},{isAnnotatableHover:!0}))})}try{return i.EH.create(e.doc,d)}catch(e){return i.EH.empty}}}})}},91446:function(e,t,n){n.d(t,{w:function(){return r}}),n(34264);var r=function(e){var t;return(null===(t=e.find(function(e){return e.spec.isBlockWidthDecoration}))||void 0===t?void 0:t.spec)||{}}},15225:function(e,t,n){n.d(t,{d:function(){return f}});var r=n(95235),o=n(25059),i=n(13121),a=n(80318),c=n(88646),s=n(52322);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){return(0,s.jsx)(a.lO,u(u({},e),{},{children:(0,s.jsx)("pre",{children:(0,s.jsx)(i.ms,{as:"code"})})}))},f=o.ZP.extend({selectable:!1,isolating:!0,addNodeView:function(){return(0,i.fW)(d,{update:c.E7})}})},66902:function(e,t,n){n.d(t,{a:function(){return r}});var r={UniqueAttribute:1e4,CardMention:1001,DocMention:1001,UserMention:1001,UndoInputRuleKeymap:1001,HorizontalAlign:1001,Collaboration:1e3,Highlight:150,FootnoteLabel:150,TextColor:150,Code:150,Link:140,SlashMenu:104,EmojiShortcuts:104,MentionSuggestionMenu:104,ReplaceCardAccent:104,List:103,Table:102,Image:102,Gallery:102,CardLayoutItem:101,MediaPlaceholder:101,Layout:101,Footnote:101,Card:101,Toggle:101,KeyMapOverride:100,GlobalDragHandle:99,CardIds:1,KeyBoardCatchall:1}},82114:function(e,t,n){n.d(t,{$7:function(){return y},$m:function(){return g},zL:function(){return v}});var r=n(95235),o=n(72338),i=n(3027),a=n(27191),c=n(28703);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>0,r=e.parent,o=e.doc,i=e.start(),a=e.after();if(r.type.spec.isolating){var l=o.resolve(n?a-1:i),u=(0,c.E)(l,n?1:-1);if(n){var d=o.resolve(u.to).node();if(d&&d.isTextblock&&0===d.content.size)return u.to+1}return n?u.to:u.from}var f=e.start(e.depth-1);return s(e.doc.resolve(f),t)}n(12691);var l=n(6057),u=n(66902),d=n(47045);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){var t=s(e,-1);return e.pos===t?l.k_:t},h=function(e,t){var n=s(t,1);return t.pos===n?e.state.doc.content.size-l.k_:n},g=o.hj.create({name:"KeyMapOverride",priority:u.a.KeyMapOverride,addOptions:function(){return{addSelectionKeyMaps:!1}},addKeyboardShortcuts:function(){var e=this,t=function(){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.handleCardAccentDelete()},function(){return t.deleteSelectionAndSelectNear(-1)},function(){return t.deleteSelection()},function(e){var t=e.view,n=e.state,r=e.dispatch;return(0,d.Ly)(n,r,t)},function(){return t.unwrapQuoteOnDelete()},function(e){var n=e.view,r=e.state,o=e.tr,i=t.joinBackward();return i&&o.setMeta("annotationEvent",{type:"join-backward",joinPos:r.selection.from,atBeginning:n.endOfTextblock("backward")}),i},function(){return t.selectNodeBackward()},function(){return t.handleLayoutDelete(!1)},function(){return t.handleSmartLayoutDelete(!1)},function(){return t.handleButtonDelete(!0)},function(){return t.deleteCardIfEmpty(!1)},function(){return t.mergeCardsOnDelete(!1)}]})},n=function(){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.handleCardAccentDelete()},function(){return t.deleteSelectionAndSelectNear()},function(){return t.deleteSelection()},function(e){var n=e.view,r=e.state,o=e.tr,i=t.joinForward();return i&&o.setMeta("annotationEvent",{type:"join-forward",joinPos:r.selection.from,atEnd:n.endOfTextblock("forward")}),i},function(){return t.selectNodeForward()},function(){return t.handleLayoutDelete(!0)},function(){return t.handleSmartLayoutDelete(!0)},function(){return t.handleButtonDelete(!0)},function(){return t.deleteCardIfEmpty(!0)},function(){return t.mergeCardsOnDelete(!0)}]})},r={};return this.options.addSelectionKeyMaps&&(r={"Mod-a":function(e){var t=e.editor,n=t.state.selection;if(n instanceof a.qv&&n.node.type.spec.isolating)return t.commands.selectAll();var r=s(t.state.selection.$from,-1),o=s(t.state.selection.$to,1);return n.from===r&&n.to===o?t.commands.selectAll():(t.commands.command(function(e){var t=e.tr;return t.setSelection(a.Bs.create(t.doc,r,o)),!0}),!0)},"Mod-ArrowUp":function(e){var t=e.editor,n=m(t.state.selection.$from);if(!n)return!1;var r=t.state.doc.resolve(n);if(i.Q.valid(r)){var o=new i.Q(r);return t.view.dispatch(t.state.tr.setSelection(o).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowUp":function(e){var t=e.editor,n=m(t.state.selection.$from);return!!n&&t.chain().setTextSelection({from:n,to:t.state.selection.to}).scrollIntoView().run()},"Mod-ArrowDown":function(e){var t=e.editor,n=h(t,t.state.selection.$to),r=t.state.doc.resolve(n);if(i.Q.valid(r)){var o=new i.Q(r);return t.view.dispatch(t.state.tr.setSelection(o).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowDown":function(e){var t=e.editor,n=h(t,t.state.selection.$to);return t.chain().setTextSelection({from:t.state.selection.from,to:n}).scrollIntoView().run()},"Shift-Mod-a":function(e){return e.editor.commands.selectAll()}}),p(p({},r),{},{Enter:function(){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(e){var n=e.view,r=e.state;return e.tr.setMeta("annotationEvent",{type:"split-block",splitPos:r.selection.from,atBeginning:n.endOfTextblock("backward")}),t.splitBlock()}]})},Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,Space:function(){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.handleSpaceToZoom()}]})}})}}),v=o.hj.create({name:"UndoInputRuleKeymap",priority:u.a.UndoInputRuleKeymap,addKeyboardShortcuts:function(){return{"Shift-Mod-a":function(e){return e.editor.commands.selectAll()},"Mod-z":function(e){return e.editor.commands.undoInputRule()},Backspace:function(e){return e.editor.commands.undoInputRule()},"Mod-Backspace":function(e){return e.editor.commands.undoInputRule()}}}}),b=n(56692),y=o.hj.create({name:"KeyBoardCatchall",priority:u.a.KeyBoardCatchall,addKeyboardShortcuts:function(){return{Tab:function(e){return e.editor.view.hasFocus()},"Shift-Tab":function(e){return e.editor.view.hasFocus()}}},addProseMirrorPlugins:function(){return[new a.Sy({key:new a.H$("KeyBoardCatchall"),props:{handleKeyDown:function(e,t){return b.F7.handleKeydown(t)}}})]}})},96726:function(e,t,n){n.d(t,{g:function(){return h}});var r=n(72338),o=n(13121),i=n(88646),a=n(95235),c=n(80318),s=n(52322);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){var t=e.node.attrs.fontSize;return(0,s.jsx)(c.lO,u(u({},e),{},{children:(0,s.jsx)(o.ms,{as:"li","data-testid":"bullet-list-item","data-font-size":t})}))},f=n(4290),p=n(74358),m=/^\s*([-*])\s$/,h=r.NB.create({name:p.W.Bullet,content:"inline*",defining:!0,group:"block",selectable:!1,allowFontSizes:"body",addNodeView:function(){return(0,o.fW)(d,{as:"ul",update:i.E7,updateWrapperEl:function(e,t){e.setAttribute("indent",t.node.attrs.indent)}})},addOptions:function(){return{HTMLAttributes:{}}},addAttributes:function(){return{indent:{default:0},fontSize:{default:null}}},addInputRules:function(){return[(0,f.Bx)({find:m,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:function(){return{"Mod-Shift-8":function(e){return e.editor.commands.setListItems({variant:p.W.Bullet})},"Mod-.":function(e){return e.editor.commands.setListItems({variant:p.W.Bullet})}}},parseHTML:function(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",(0,r.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},4290:function(e,t,n){n.d(t,{aV:function(){return y},N:function(){return b},S3:function(){return x},Bx:function(){return j}});var r=n(95235),o=n(72338),i=n(82956),a=n(34264),c=n(66902),s=n(2689),l=n.n(s),u=n(27191),d=n(52780),f=n(74358),p=l()(10),m=["blockquote","card"],h=n(28e3);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=8,y=o.hj.create({name:"list",priority:c.a.List,addProseMirrorPlugins:function(){return[(this.editor,new u.Sy({key:new u.H$("ListPlugin"),props:{decorations:function(e){var t=e.doc,n=[],r=new Map,o=function(e,t){var n;return(null===(n=r.get(e))||void 0===n?void 0:n[t])||1},i=function(e,t,n){var o=r.get(e);try{o[t]=n}catch(e){console.error("(caught) [ListPlugin] setCounter error",e)}},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r.get(e)||{};p.filter(function(e){return e>=t}).forEach(function(e){n[e]=1}),r.set(e,n)},c=0;return t.descendants(function(e,t,s){if((0,f.y)(e)&&e.firstChild){var l,u=e.firstChild.marks.find(function(e){return"textColor"===e.type.name});null!=u&&u.attrs.variant&&n.push(d.p.node(t,t+e.nodeSize,{"data-text-color":u.attrs.variant})),null!=u&&u.attrs.hex&&n.push(d.p.node(t,t+e.nodeSize,{style:"--text-color: ".concat(u.attrs.hex)}))}if(s&&(l=c,"numbered"===e.type.name||(0,f.y)(e)&&e.attrs.indent>l||e.isAtom||m.includes(e.type.name)||a(s),"numbered"===e.type.name)){r.get(s)||a(s);var p=e.attrs.indent;c=p;var h=o(s,p);i(s,p,h+1),a(s,p+1),n.push(d.p.node(t,t+e.nodeSize,{},{listNumber:h}))}}),0==n.length?d.EH.empty:d.EH.create(t,n)}}}))]},addCommands:function(){return{listToCards:function(){return function(e){var t=e.chain,n=e.state,r=n.selection,i=n.doc,c=r.from,s=r.to,l=(0,o.b5)(i,{from:c,to:s},f.y),u=(0,o.Kk)(a.KH)(r);if(!l.length||!u)return!1;var d=u.pos+u.node.nodeSize,p=(0,h.OH)(l),m=(0,h.GV)(p);return t().insertContentAt(d,m).scrollIntoView().run(),!0}},listToSmartLayout:function(e){return function(t){var n=t.chain,r=t.state,i=r.selection,a=r.doc,c=i.from,s=i.to,l=i.$from,u=i.$to,d=l.blockRange(u),p=(0,o.b5)(a,{from:c,to:s},f.y);if(!p.length||!d)return!1;var m=(0,h.OH)(p),g=(0,h.Pl)(m,e);return n().insertContentAt({from:d.start,to:d.end},g).selectInsertedNode().scrollIntoView().run(),!0}},indent:function(e){return function(t){var n=t.tr,r=t.dispatch,o=t.state;if(!r)return!0;var i=!1;return n.selection.ranges.forEach(function(t){var r=t.$from.pos,a=t.$to.pos;o.doc.nodesBetween(r,a,function(t,r){var o=t.attrs.indent;Object.values(f.W).includes(t.type.name)&&o+e>=0&&o+e<=b&&(n.setNodeMarkup(r,void 0,v(v({},t.attrs),{},{indent:o+e})),i=!0)})}),i}},setListItems:function(e){var t=e.variant;return function(e){var n=e.tr,r=e.dispatch,o=e.state;return!r||(n.selection.ranges.forEach(function(e){var r=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(r,i,function(e,r){Object.values(f.W).includes(e.type.name)?n.setNodeMarkup(r,o.schema.nodes[t],e.attrs):e.isTextblock&&n.setNodeMarkup(r,o.schema.nodes[t],v(v({},e.attrs),{},{indent:0}))})}),!0)}},toggleListItems:function(e){var t=e.variant;return function(e){var n=e.commands;return x(e.editor,t)?n.setNode("paragraph"):n.setListItems({variant:t})}}}},addKeyboardShortcuts:function(){return{Enter:function(e){for(var t,n,r=e.editor,o=0,i=Object.values(f.W);o<i.length;o++){var a=i[o];if(r.isActive(a)){n=r.getAttributes(a),t=a;break}}if(void 0===t)return!1;var c=r.state.selection,s=c.from,l=c.$from;return!!c.empty&&(0==l.parent.content.size?n.indent>0?r.commands.indent(-1):r.commands.setNode("paragraph",n):0===l.parentOffset?(n.checked&&(n.checked=!1),r.chain().insertContentAt(s-1,{type:t,attrs:n}).selectInsertedNode().run()):l.parentOffset===l.parent.content.size&&(n.checked&&(n.checked=!1),r.chain().insertContentAt(s+1,{type:t,attrs:n}).selectInsertedNode().run()))},Backspace:function(e){for(var t,n,r=e.editor,o=0,i=Object.values(f.W);o<i.length;o++){var a=i[o];if(r.isActive(a)){n=r.getAttributes(a),t=a;break}}if(void 0===t)return!1;var c=r.state.selection,s=c.$from;return!!c.empty&&0==s.parentOffset&&r.commands.setNode("paragraph",n)},Tab:function(e){return e.editor.commands.indent(1)},"Shift-Tab":function(e){return e.editor.commands.indent(-1)},"Mod-]":function(e){return e.editor.commands.indent(1)},"Mod-[":function(e){return e.editor.commands.indent(-1)}}}}),x=function(e,t){var n=Object.values(f.W).filter(function(e){return e!==t});return e.isActive(t)&&!n.some(function(t){return e.isActive(t)})},j=function(e,t){return(0,i.Wy)(e,[t.nodes.heading,t.nodes.title])}},66490:function(e,t,n){n.d(t,{k:function(){return g}});var r=n(72338),o=n(13121),i=n(88646),a=n(4290),c=n(74358),s=n(95235),l=n(80318),u=n(52322);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=[function(e){return e.toString()},function(e){return String.fromCharCode(96+e)},function(e){return(function(e){for(var t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},n="",r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],a=Math.floor(e/t[i]);e-=a*t[i],n+=i.repeat(a)}return n})(e).toLowerCase()}],m=function(e){var t,n=e.decorations,r=e.node.attrs,i=r.indent,a=r.fontSize,c=null===(t=n.find(function(e){return e.spec.listNumber}))||void 0===t?void 0:t.spec.listNumber,s=(p[i%p.length]||p[0])(c);return(0,u.jsx)(l.lO,f(f({},e),{},{children:(0,u.jsx)(o.ms,{as:"li","data-list-counter":s,"data-font-size":a})}))},h=/^(\d+)\.\s$/,g=r.NB.create({name:c.W.Numbered,content:"inline*",defining:!0,group:"block",selectable:!1,allowFontSizes:"body",addOptions:function(){return{HTMLAttributes:{}}},addNodeView:function(){return(0,o.fW)(m,{as:"ol",update:i.E7,updateWrapperEl:function(e,t){e.setAttribute("indent",t.node.attrs.indent)}})},addAttributes:function(){return{indent:{default:0},fontSize:{default:null}}},addInputRules:function(){return[(0,a.Bx)({find:h,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:function(){return{"Mod-/":function(e){return e.editor.commands.setListItems({variant:c.W.Numbered})},"Mod-Shift-7":function(e){return e.editor.commands.setListItems({variant:c.W.Numbered})}}},parseHTML:function(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",(0,r.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},28e3:function(e,t,n){n.d(t,{Ah:function(){return p},GV:function(){return d},OH:function(){return l},Pl:function(){return f}});var r=n(12741),o=n(54004),i=n.n(o),a=n(74358),c=n(95472),s=n(73985),l=function e(t){for(var n=[],r=0;r<t.length;r++)!function(o){var i=t[o],a=i.node.attrs.indent,c=u(t,o,function(e){return e.node.attrs.indent>a}),s=e(c);n.push({node:i.node,pos:i.pos,children:s}),o+=c.length,r=o}(r);return n},u=function(e,t,n){for(var r=[],o=t+1;o<e.length;o++){var i=e[o];if(n(i))r.push(i);else break}return r},d=function e(t){return t.map(function(t){var n=e(t.children);return{type:"card",content:[{type:"heading",attrs:{level:Math.min(t.node.attrs.indent+1,s.MQ)},content:[{type:"text",text:t.node.textContent}]}].concat((0,r.Z)(n))}})},f=function(e,t){return{type:"smartLayout",attrs:{variantKey:t},content:e.map(function(e){var t=[{type:"heading",attrs:{level:4},content:i()(e.node.content.toJSON())}];return t.push.apply(t,(0,r.Z)(e.children.map(function(e){var t=i()(e.node.toJSON());return t.attrs.indent-=1,t}))),{type:"smartLayoutCell",content:t}})}},p=function(e){return(0,c.pm)(e,a.y)}},98551:function(e,t,n){n.d(t,{cx:function(){return eE},Yn:function(){return K},fu:function(){return ey},CG:function(){return ex},XX:function(){return ej},v0:function(){return G}});var r=n(95235),o=n(72338),i=n(28139),a=n(94109),c=n(29469),s=n(13121),l=n(95472),u=n(21350),d=n(88646),f=n(39965),p=n(75361),m=n(87819),h=n(53738),g=n(11919),v=n(34676),b=n(98841),y=n(37914),x=n(46358),j=n(59910),w=n(24224),O=n(62141),k=n(31246),C=n(11723),P=n(20046),S=n(26236),A=n(82269),E=n(34638),D=n(2784),I=n(34455),z=n(23015),T=n(94911),M=n(73168),N=n(90382),R=n(55452),L=n(87254),_=n(27777),H=n(76648),Z=n(67887),B=n(49929),F=n(55966),W=n(52322),U=function(e){var t=e.frameRef,n=e.node,r=e.isStealth,o=void 0!==r&&r,i=e.isDark,a=(0,m.iJ)(n.attrs);return(0,W.jsxs)(g.k,{direction:"row",background:i?"gray.800":"gray.50",align:"center",borderBottom:"1px solid",borderColor:i?"gray.600":"gray.200",w:"100%",p:1,zIndex:2,position:o?"absolute":"relative",transitionProperty:"common",transitionDuration:"normal",opacity:o?0:1,_hover:{opacity:1},children:[(0,W.jsx)(_.I,{size:"xs",value:a,border:"0",noOfLines:1,color:i?"gray.200":"gray.600",pointerEvents:"none",readOnly:!0}),(0,W.jsxs)(H.h,{size:"xs",spacing:1,variant:"ghost",colorScheme:"gray",ml:2,children:[(0,W.jsx)(F.kH,{label:(0,W.jsx)(R.cC,{id:"HpK/8d"}),placement:"top",children:(0,W.jsx)(Z.h,{isRound:!0,"aria-label":L.ag._({id:"HpK/8d"}),icon:(0,W.jsx)(B.G,{icon:N.XS}),onClick:function(){if(t.current){var e=t.current.src;t.current.src="about:blank",setTimeout(function(){t.current&&(t.current.src=e)},50)}}})}),(0,W.jsx)(F.kH,{label:(0,W.jsx)(R.cC,{id:"Alx2/L"}),placement:"top",children:(0,W.jsx)(Z.h,{isRound:!0,"aria-label":L.ag._({id:"Alx2/L"}),icon:(0,W.jsx)(B.G,{icon:M.gJ}),onClick:function(){window.open(a,"_blank")}})})]})]})},G=function(e){return e&&i.zX[e]?i.zX[e]:i.Hw},q=["isZoomed","useStealthNav"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=function(e){var t=e.isZoomed,n=e.useStealthNav,r=(0,A.Z)(e,q),o=r.node,i=(0,D.useRef)(null),a="dark"===(0,E.If)().colorMode,c=(0,w.TZ)(),s=o.attrs,l=s.url,u=s.proxy,d=s.source,f=s.embed,p=G(d);if(p.preferHtml&&(null==f?void 0:f.html))return(0,W.jsx)(T.$,{html:f.html,w:t?"100%":void 0,onClick:t?z.UW:void 0});var m=p.rewriteEmbedUrl&&l?p.rewriteEmbedUrl(l):l,h=u?"".concat(y.v.EMBED_PROXY_URL,"?alt_url=").concat(m):m||"about:blank";return(0,W.jsxs)(g.k,{direction:"column",h:"100%",w:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",borderRadius:t?"lg":"var(--box-border-radius)",border:"1px solid",borderColor:a?"gray.600":"gray.200",overflow:"hidden",position:"relative","data-selection-ring":"inside","data-selection-background":!0,className:(0,v.cx)("embed-viewer"),onClick:t?z.UW:void 0,children:[(0,W.jsx)(U,$($({},r),{},{frameRef:i,isDark:a,isStealth:n})),!t&&(0,W.jsx)(S.Y$,$($({},r),{},{frameRef:i})),(0,W.jsx)(I.A,{initialUrl:h,frameRef:i,iframeOptions:p.iframeOptions,css:{aspectRatio:c?"1 / 1.618":"1.618 / 1"},flex:"1"})]})},Y=n(84103),X=n(8283),J=n(91012),Q=n(14115),ee=n(31889),et=n(46398),en=n(95369),er=n(42966),eo=n(94659),ei=n(36895),ea=["icon"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var el=function(e){var t,n=e.node,r=e.disableOpenButton,o=n.attrs,i=o.meta,a=o.source,c=(0,m.iJ)(n.attrs),s=G(a),l="embed.custom"===a||"video.custom"===a,u=(null==i?void 0:i.icon)||(null===(t=s.image)||void 0===t?void 0:t.src),d=(null==i?void 0:i.site)||(l?(0,et.Gr)(c):s.label());return(0,W.jsxs)(eo.g,{spacing:"0.25em",align:"flex-start",color:"black",w:"100%",fontSize:"0.9em",children:[(0,W.jsxs)(X.U,{align:"center",spacing:"0.25em",w:"100%",color:"var(--body-color-muted)",children:[(0,W.jsx)(eu,{icon:u}),(0,W.jsx)(J.x,{noOfLines:1,flex:1,"data-testid":"site-name",fontSize:"0.9em",children:d}),s.downloadable&&c&&(0,W.jsx)(F.kH,{label:(0,W.jsx)(R.cC,{id:"mzI/c+"}),placement:"top",children:(0,W.jsx)(Z.h,{"aria-label":L.ag._({id:"mzI/c+"}),icon:(0,W.jsx)(B.G,{icon:er.q7}),onClick:function(){var e=document.createElement("a");e.href=c,e.target="_blank",e.download=(null==i?void 0:i.title)||"file.pdf",e.dispatchEvent(new MouseEvent("click"))},variant:"unstyled",sx:j.un,fontSize:"0.7em",zIndex:2,onMouseDown:z.br})}),!(void 0!==r&&r)&&c&&(0,W.jsx)(F.kH,{label:(0,W.jsx)(R.cC,{id:"Alx2/L"}),placement:"top",children:(0,W.jsx)(Z.h,{"aria-label":L.ag._({id:"Alx2/L"}),icon:(0,W.jsx)(B.G,{icon:M.gJ}),onClick:function(){window.open(c,"_blank")},variant:"unstyled",zIndex:2,fontSize:"0.7em",onMouseDown:z.br,sx:j.un})})]}),(0,W.jsx)(J.x,{fontWeight:"bold",noOfLines:1,maxW:"90%","data-testid":"title",color:"var(--body-color)",children:null==i?void 0:i.title}),(null==i?void 0:i.description)&&(0,W.jsx)(J.x,{noOfLines:[2,3],whiteSpace:"normal",maxW:"100%",color:"var(--body-color-muted)",children:i.description})]})},eu=function(e){var t=e.icon,n=(0,A.Z)(e,ea);return t?(0,W.jsx)(ei.E,es({src:t,h:"1.5em",borderRadius:"sm"},n)):(0,W.jsx)(J.x,es(es({as:"span"},n),{},{children:(0,W.jsx)(B.G,{icon:en.m6})}))},ed=n(20387),ef=n(59637),ep=n(19034),em=n.n(ep),eh=n(43862),eg=n(15726),ev=function(e){var t,n,r,o,i,a=e.node.attrs,c=a.thumbnail,s=a.meta,l=a.source,u=(null==c?void 0:c.src)||(null==c?void 0:c.tempUrl);return null!=c&&c.showPlaceholder?(0,W.jsx)(eg.k3,{hasUploadError:c.uploadStatus===eh.D.Error,isLoading:c.uploadStatus===eh.D.Uploading,width:"100%",borderRadius:"none",icon:"embed.pdf"===l?ef.gS:en.m6}):u?(0,W.jsxs)(g.k,{flex:1,color:"white",position:"relative",children:[(0,W.jsx)(h.xu,{flex:1,overflow:"hidden",bgColor:"white",children:(0,W.jsx)(ei.E,{src:u,position:"absolute",objectFit:"cover",width:"100%",height:"100%"})}),(null==c?void 0:c.uploadStatus)===eh.D.Uploading&&(0,W.jsx)(eg.HI,{}),(null==s?void 0:s.duration)&&(0,W.jsxs)(X.U,{fontSize:"0.75em",backgroundColor:"blackAlpha.700",color:"white",position:"absolute",right:0,bottom:0,py:1,px:2,"data-thumbnail-hidden":!0,children:[(0,W.jsx)(B.G,{icon:ed.zc}),(0,W.jsx)(J.x,{children:(t=s.duration,r=(n=em().duration(t,"seconds")).hours().toString().padStart(2,"0"),o=n.minutes().toString().padStart(2,"0"),i=n.seconds().toString().padStart(2,"0"),n>=em().duration(1,"hour")?r+":"+o+":"+i:o+":"+i)})]})]}):null},eb=function(e){return e&&(!e.height||e.height>=50)&&(!e.width||e.width>=50)},ey=function(e){var t=e.node,n=t.attrs,r=n.thumbnail,o=n.sourceUrl;return(0,W.jsxs)(g.k,{overflow:"hidden",direction:"row",align:"stretch",wrap:"wrap",contentEditable:!1,transitionProperty:"common",transitionDuration:"normal",position:"relative",borderRadius:"inherit","data-selection-ring":"inside","data-selection-background":!0,fontFamily:"Inter, sans-serif","data-drag-handle":!0,h:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",children:[r&&eb(r)&&(0,W.jsx)(g.k,{flex:1,minH:"10em",minW:"min(10em, 100%)",maxW:"100%",maxH:"var(--media-maxH)",children:(0,W.jsx)(ev,{node:t})}),(0,W.jsx)(g.k,{flex:1.618,w:"15em",maxW:"100%",p:"1em",position:"relative",children:(0,W.jsx)(el,{node:t})}),Q.cx&&o&&(0,W.jsx)(Y.r,{href:o,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},ex=function(e){var t,n=e.node,r=n.attrs,o=r.thumbnail,i=r.meta,a=r.sourceUrl,c=G(r.source);return(0,W.jsxs)(g.k,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},maxW:"100%",maxH:"var(--media-maxH)",h:"100%",align:"stretch",boxSizing:"content-box",overflow:"hidden","data-selection-ring":"inside",position:"relative",children:[o&&eb(o)?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ev,{node:n}),(0,W.jsxs)(X.U,{backgroundColor:"whiteAlpha.700",backdropFilter:"blur(8px)",py:1,px:2,position:"absolute",bottom:"0",fontSize:"0.75em","data-thumbnail-hidden":!0,children:[(0,W.jsx)(eu,{icon:(null==i?void 0:i.icon)||(null===(t=c.image)||void 0===t?void 0:t.src)}),a&&(0,W.jsx)(J.x,{color:"black",noOfLines:1,children:(null==i?void 0:i.title)||(null==i?void 0:i.site)||(0,et.Gr)(a)})]})]}):(0,W.jsx)(g.k,{align:"flex-start",flex:"1",p:4,children:(0,W.jsx)(el,{node:n,disableOpenButton:!0})}),y.v.GAMMA_PUPPETEER_SERVICE&&a&&(0,W.jsx)(Y.r,{href:a,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},ej=function(e){var t,n=e.node.attrs,r=n.meta,o=n.source,i=n.thumbnail,a=G(o),c=(null==i?void 0:i.src)||(null==i?void 0:i.tempUrl),s=c&&(0,ee.SN)(c,ee.Iv);return(0,W.jsx)(g.k,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},bg:"var(--body-color-muted)",align:"center",justify:"center",fontSize:"7.5em",bgImage:(0,ee.Ly)(s),backgroundSize:"cover",children:(0,W.jsx)(eu,{icon:(null==r?void 0:r.icon)||(null===(t=a.image)||void 0===t?void 0:t.src)})})};function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ek=(0,b.E)(h.xu),eC=(0,b.E)(g.k),eP=function(e){var t=e.node,n=e.editor,r=e.decorations,o=t.attrs,i=o.source,a=o.embed,c=o.displayStyle,s=o.id,l=o.sourceUrl,u=G(i),d=(0,S.d8)(s),f=d.isZoomed,p=d.enterZoom,m=d.exitZoom,g=u.preferHtml&&(null==a?void 0:a.html),b=(0,P.Ah)(e),A=!y.v.GAMMA_PUPPETEER_SERVICE&&(g||"inline"===c)&&!b,E=(0,C.Od)(r)||!n.view.hasFocus(),D=(0,x.CG)(O.hN),I=(0,w.TZ)(),z=!b&&!n.isThumbnail;return(0,W.jsxs)(k.l,eO(eO({},e),{},{children:[(0,W.jsxs)(ek,{layoutDependency:f,layoutId:n.isThumbnail?void 0:(0,S.sB)(s),transition:S.yq,h:"100%",className:(0,v.cx)("embed-preview",!g&&!(u.inlineInteractive&&A)&&j.wY),"data-export-as-image":!0,"data-export-link":l,position:"relative",children:[A&&n.isThumbnail?(0,W.jsx)(ej,eO({},e)):b?(0,W.jsx)(ex,eO({},e)):A?(0,W.jsx)(K,eO(eO({},e),{},{useStealthNav:!0})):(0,W.jsx)(ey,eO({},e)),u.inlineInteractive&&!I&&A?(0,W.jsx)(h.xu,{position:"absolute",inset:0,zIndex:1,pointerEvents:D&&!E&&"inline"===c?"auto":"none",cursor:"default"}):(0,W.jsx)(S.cp,{enterZoom:p})]}),z&&(0,W.jsx)(S.aF,{isZoomed:f,exitZoom:m,editor:n,children:(0,W.jsx)(eC,{layoutDependency:f,layoutId:(0,S.sB)(s),transition:S.yq,h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,W.jsx)(K,eO(eO({},e),{},{isZoomed:!0}))})})]}))};function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eE=o.NB.create({name:"embed",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:function(){return(0,s.fW)(eP,{update:d.E7})},addAttributes:function(){return{id:(0,c.b)(p.G),url:{},source:{default:i.Hw.key},thumbnail:eA({},(0,l.sw)("thumbnail")),embed:eA({},(0,l.sw)("embed")),meta:eA({},(0,l.sw)("meta")),proxy:{},sourceUrl:{},displayStyle:{default:"preview"},fullWidthBlock:{default:!1}}},parseHTML:function(){return[{tag:"div[class=embed]"},{tag:"iframe[bookmark]",getAttrs:(0,u.xF)(this.storage)}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.node;return["div",(0,o.P1)(t,{class:"embed"}),["a",{href:(0,m.iJ)(n),target:"_blank"},(0,m.k7)(n)]]},addStorage:u.gk,renderHTMLforAI:function(e){var t=e.node;return["iframe",{bookmark:(0,u.ml)(this.storage,t)}]},addCommands:function(){return{replaceEmbedsById:function(e,t){return function(n){var r=n.editor,i=n.chain,a=(0,o.N2)(r.state.doc,function(t){return"embed"===t.type.name&&t.attrs.id===e}),c=i();return a.forEach(function(e){var n=e.pos,r=e.node;c.insertContentAt({from:n,to:n+r.nodeSize},t,{updateSelection:!1})}),c.run(),!0}},updateEmbedsById:function(e,t){return function(n){var r=n.editor,i=n.chain,a=(0,o.N2)(r.state.doc,function(t){return("embed"===t.type.name||"video"===t.type.name)&&t.attrs.id===e}),c=i();return a.forEach(function(e){var n=e.pos;c.updateAttributesAtPos(n,{thumbnail:t.thumbnail})}),c.run(),!0}},insertEmbedAndFetchMetadata:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preview",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){var o=r.commands,i=r.editor,c=(0,p.G)();o.insertContent({type:"embed",attrs:{id:c,url:e,sourceUrl:e,displayStyle:t,meta:{title:"Loading..."}}},{updateSelection:!1});var s=!1;return(0,a.ft)(e,function(e){if(s){i.commands.updateEmbedsById(c,e);return}var n=f.ah[e.source];i.commands.replaceEmbedsById(c,{type:(null==n?void 0:n.nodeName)||"embed",attrs:eA(eA({},e),{},{id:c}),displayStyle:(null!=t?t:"video"===n.nodeName)?"inline":"preview"}),s=!0}).catch(function(t){console.warn("(caught) insertEmbedAndFetchMetadata error fetching url",t,e),n&&i.commands.replaceEmbedsById(c,e)}),!0}}}}})},83551:function(e,t,n){n.d(t,{r:function(){return X}});var r=n(72338),o=n(51231),i=n(13121),a=n(66902),c=n(88646),s=n(12741),l=n(13089),u=n(96412),d=n(27191),f=n(52780),p=n(39875),m=n(87819),h=n(45959),g=n(20046),v="gallery-prevent-flex",b=(0,l.Z)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,u.Z)(this,e),this.dragging=t}),y=new d.H$("galleryPlugin"),x=n(95235),j=n(49626),w=n(5590),O=n(55452),k=n(87254),C=n(11919),P=n(94659),S=n(91012),A=n(45650),E=n(67887),D=n(49929),I=n(55966),z=n(98841),T=n(2784),M=n(46358),N=n(24224),R=n(36393),L=n(43330),_=n(62141),H=n(80318),Z=n(15723),B=n(98551),F=n(7427),W=n(17425),U=n(26236),G=n(30822),q=n(52322);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,x.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=(0,z.E)(C.k),Y=function(e){var t,n=e.node,r=e.editor,o=e.getPos,a=(0,N.TZ)(),c=(0,h.Dz)(e),s=0===c.length,l=s?G.vf:a?G.iC:n.attrs.thumbHeight||G.vf,u=(0,U.RM)(c.map(function(e){return e.attrs.id})),d=u.isZoomed,f=u.isZoomComplete,p=u.exitZoom,m=u.zoomedId,g=u.setZoomedId,b=(0,M.CG)(_.hN),y=(0,T.useRef)(null),z=(0,R.Z)(y,function(e){return(0,h.nF)(r.view,e)}),V=(0,T.useCallback)(function(e){try{e.stopPropagation(),e.preventDefault();var t,n=o(),i=r.state.doc.nodeAt(n);if(!i)return;var a=null===(t=i.lastChild)||void 0===t?void 0:t.attrs.source,c=n+(null==i?void 0:i.nodeSize)-1;r.chain().insertContentAt(c,{type:"mediaPlaceholder",attrs:{source:a||"image.custom"}}).run(),setTimeout(function(){r.commands.setNodeSelection(c),(0,L.TZ)()})}catch(e){console.error("(caught) [GalleryView] addImage",e)}},[o,r]),Y=(0,T.useCallback)(function(e){var t;r.isEditable&&null!==(t=e.target.closest(".gallery, .block"))&&void 0!==t&&t.classList.contains("gallery")&&r.commands.selectNodeAtPos(o())},[r,o]);return(0,q.jsxs)(H.lO,$($({},e),{},{children:[(0,q.jsxs)(C.k,$($({className:"gallery",cursor:"default",onClick:Y,ref:y,align:"center",direction:"column",position:"relative","data-selection-ring":!0,"data-selection-background":!0},s?z:{}),{},{css:{"--media-maxH":"".concat(l,"em"),"--media-maxW":"100%"},sx:{"[data-node-view-content-inner=gallery]":{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center","@media print":{justifyContent:"center"},gap:"".concat(G.Nj,"em"),".block":(t={h:"".concat(l,"em"),flex:"1 1 auto","@media print":{flex:"unset !important"}},(0,x.Z)(t,"&.".concat(v),{flex:"0 0 auto"}),(0,x.Z)(t,"my",0),(0,x.Z)(t,"transitionProperty","filter"),(0,x.Z)(t,"transitionDuration","normal"),(0,x.Z)(t,"_hover",{filter:"brightness(0.9)"}),(0,x.Z)(t,"[data-node-view-wrapper]",{h:"100%"}),t),_after:c.length<3?{flex:"10 10 auto",backgroundColor:"gray.100",width:"1px",content:'""'}:void 0}},children:[s?(0,q.jsxs)(P.g,{spacing:3,h:"".concat(l,"em"),justify:"center",contentEditable:!1,color:"gray.400",className:"gallery-placeholder","data-testid":"gallery-placeholder",userSelect:"none",children:[(0,q.jsx)(D.G,{size:"2x",icon:w.l9}),b?(0,q.jsx)(S.x,{fontSize:"sm",textAlign:"center",children:(0,q.jsx)(O.cC,{id:"3MggZ2",components:{0:(0,q.jsx)(A.z,{size:"xs",onClick:V,mr:1})}})}):null]}):(0,q.jsx)(i.ms,{}),b&&!s&&(0,q.jsx)(C.k,{position:"absolute",bottom:"0",h:"".concat(l,"em"),align:"center",w:6,right:-3,className:"add-image",opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",children:(0,q.jsx)(I.kH,{label:(0,q.jsx)(O.cC,{id:"P5MuiB"}),placement:"top",children:(0,q.jsx)(E.h,{icon:(0,q.jsx)(D.G,{icon:j.r8}),"aria-label":k.ag._({id:"P5MuiB"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:V})})}),(0,q.jsx)(Z.A,$($({},e),{},{label:k.ag._({id:"wnA/4R"})}))]})),(0,q.jsx)(U.EW,{isZoomed:d,exitZoom:p,zoomedId:m,setZoomedId:g,editor:r,children:c.filter(function(e){return e.attrs.id}).map(function(e){var t=e.attrs.id,n=e.type.name,o={layoutId:(0,U.sB)(t),transition:f&&d?{duration:0}:U.yq,layoutDependency:d};return{id:t,thumbnail:"image"===n?(0,q.jsx)(F.Ri,{imageAttrs:e.attrs,objectFit:"cover"}):(0,q.jsx)(B.CG,{node:e}),full:(0,q.jsx)(C.k,{justify:"center",align:"center",h:"100%",w:"100%",children:"image"===n?(0,q.jsx)(F.Ri,{isZoomed:!0,imageAttrs:e.attrs,motionProps:o}):"video"===n?(0,q.jsx)(K,$($({},o),{},{width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,q.jsx)(W.Y7,{isZoomed:!0,node:e,decorations:[],editor:r})})):(0,q.jsx)(K,$($({},o),{},{h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,q.jsx)(B.Yn,{isZoomed:!0,node:e,decorations:[],editor:r})}))})}})})]}))},X=r.NB.create({name:"gallery",group:"cardBlock layoutBlock",content:"media*",isolating:!0,draggable:!0,selectable:!0,priority:a.a.Gallery,containerHandle:!0,expandable:!0,addNodeView:function(){return(0,i.fW)(Y,{update:c.E7,ignoreMutation:o.j})},addAttributes:function(){return{thumbHeight:{},fullWidthBlock:{default:!1}}},addProseMirrorPlugins:function(){var e;return[(e=this.editor,new d.Sy({key:y,state:{init:function(){return new b},apply:function(e,t){return t}},props:{handleDOMEvents:{drop:function(e){var t,n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,r=y.getState(e.state);if(!r)return!1;r.dragging=n}},decorations:function(e){var t=e.doc,n=[];return t.descendants(function(e,t,r){if((0,g.N5)(e))n.push(f.p.node(t,t+e.nodeSize,{},{children:e.content}));else if((0,g.N5)(r)){var o,i="image"===e.type.name&&(null===(o=e.attrs.resize)||void 0===o?void 0:o.clipType)==="circle";n.push(f.p.node(t,t+e.nodeSize,{class:i?v:""},{inGallery:!0}))}}),f.EH.create(t,n)},handlePaste:function(e,t,n){var r=e.state,o=r.selection,i=r.schema;if(!(o instanceof d.qv&&(0,g.N5)(o.node)))return!1;if((0,h.cg)(i,n,t)){var a=e.state.tr.setSelection(d.Bs.create(e.state.doc,o.to-1));e.dispatch(a)}return!1},handleDrop:function(t,n,r){var o,i=y.getState(t.state),a=null==i?void 0:i.dragging;i&&(i.dragging=null);try{if(!(o=(0,h.yT)(t,n,r,!1)))return!1}catch(e){return console.error("(caught) [GalleryPlugin] handleDrop checkGalleryDropTarget error:",e),!1}try{var c=!t.state.selection.empty,l=r.content.toJSON(),u=o,d=u.pos,f=u.side,v=u.node;if(v&&(0,g.N5)(v)){var b="left"===f?d:d+1;e.chain().insertContentAt({from:b,to:b},l,{updateSelection:!1}).command(function(t){var n=t.tr;if(c&&n.deleteSelection(),a){var r=e.state.tr;r.deleteSelection(),n.setMeta("annotationEvent",{type:"drop",dragging:a,droppedBlockPos:r.mapping.map(b)})}return!0}).focusMapped(b).run()}else if(v&&(0,m.fP)(v)){var x="left"===f?[].concat((0,s.Z)(l),[v.toJSON()]):[v.toJSON()].concat((0,s.Z)(l));e.chain().insertContentAt({from:d,to:d+v.nodeSize},{type:"gallery",content:x},{updateSelection:!1}).command(function(n){var r=n.tr;if(c&&r.deleteSelection(),a){var o=(0,p.mS)({side:f,view:t,tr:r,dragging:a,dropPos:d,dropNode:v});requestAnimationFrame(function(){var t,n;null===(t=(n=e.commands).moveAnnotations)||void 0===t||t.call(n,o)})}return!0}).run()}}catch(e){console.error("(caught) [GalleryPlugin] handleDrop error:",e)}return!0}}}))]},parseHTML:function(){return[{tag:"div[class=gallery]"},{tag:"gallery"}]},renderHTMLforAI:function(e){return["gallery",{thumbHeight:e.node.attrs.thumbHeight},0]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,r.P1)(t,{class:"gallery"}),0]}})},30822:function(e,t,n){n.d(t,{Nj:function(){return r},iC:function(){return i},vf:function(){return o}});var r=.8,o=12,i=8},20046:function(e,t,n){n.d(t,{Ah:function(){return r.Ah},N5:function(){return r.N5},rR:function(){return r.rR},u5:function(){return r.u5}});var r=n(45959);n(83551)},45959:function(e,t,n){n.d(t,{Ah:function(){return v},Dz:function(){return b},N5:function(){return m},cg:function(){return O},nF:function(){return w},rR:function(){return y},u5:function(){return g},yT:function(){return x}});var r=n(12741),o=n(72338),i=n(30764),a=n(2875),c=n(18408),s=n(95472),l=n(39875),u=n(34264),d=n(60363),f=n(10063),p=n(87819),m=function(e){return"gallery"===e.type.name},h=function(e){return(0,o.qv)(e,m)},g=function(e){return!!h(e)},v=function(e){return e.decorations.some(function(e){return e.spec.inGallery})},b=function(e){var t,n=null===(t=e.decorations.find(function(e){return e.spec.children}))||void 0===t?void 0:t.spec.children;return n?(0,s.Jn)(n):[]},y=function(e){var t=(0,l.bg)(e.$from);t&&!(0,u.KH)(t.node)?a.pw.emit(a.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:t.pos,text:(0,c.ho)(e.node)}):a.pw.emit(a.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:e.from,text:(0,c.ho)(e.node)})},x=function(e,t,n,r){if(n&&!j(n,e.state.schema))return null;var o,i,a=e.posAtCoords({left:t.clientX,top:t.clientY});if(!a)return null;var c=e.state.doc,l=a.pos,u=c.resolve(l),d=h(u);if(d&&d.node.childCount>0)l=a.pos,(o=(0,s.Fu)(l,e))||l!=d.pos+d.node.nodeSize-1||(l-=1,o=(0,s.Fu)(l,e)),i=d.node;else{l=a.inside;try{i=c.resolve(l).nodeAfter}catch(e){return null}if(!i||!(0,p.fP)(i)||i==(null==n?void 0:n.content.firstChild)||r)return null;var f=u.parent;if(f&&!k(e.state.schema,f))return null;o=(0,s.Fu)(l,e)}if(!o)return null;var m=t.clientX-o.left,g=o.right-t.clientX,v=m>g?"right":"left";return("left"==v?m<0:g<0)&&!d?null:{pos:l,side:v,rect:o,node:i}},j=function(e,t){return e.content.size>0&&t.nodes.gallery.validContent(e.content)},w=function(e,t){var n,o=null===(n=e.dragging)||void 0===n?void 0:n.slice;if(!o){var i=(0,r.Z)(t.dataTransfer.items);return i.length>0&&i.every(function(e){return e.type.startsWith("image/")})}return j(o,e.state.schema)},O=function(e,t,n){var r=(0,f.bC)(n,t);return(0,d.i1)(t)||j(t,e)||r&&r.length>0},k=function(e,t){var n=e.nodes[t.type.name];return!!n&&n.validContent(i.HY.fromJSON(e,[{type:"gallery",content:[]}]))}},94911:function(e,t,n){n.d(t,{$:function(){return l}});var r=n(95235),o=n(82269),i=n(53738),a=n(52322),c=["html"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l=function(e){var t=e.html,n=(0,o.Z)(e,c);return(0,a.jsx)(i.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"relative",role:"group",className:"embed-viewer","data-selection-ring":!0,"data-selection-background":!0,borderRadius:"var(--box-border-radius)",contentEditable:!1,dangerouslySetInnerHTML:{__html:t}},n))}},96091:function(e,t,n){n.d(t,{C3:function(){return E},CC:function(){return A},bn:function(){return P}});var r=n(95235),o=n(81333),i=n(16019),a=n(87202),c=n(2784),s=n(42418),l=n(56692),u=n(46358),d=n(29270),f=n(10143),p=n(7427),m=n(52322);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=["0%","0%","0%","0%"],b="clippable-control-wrapper",y=function(e,t,n){return e/Math.sqrt((t*t+n*n)/2)*100},x=function(e,t,n){return Math.sqrt((t*t+n*n)/2)*(e/100)},j=function(e,t,n){if("circle"===e){var r=Math.min(t,n)/2;return["".concat(y(r,t,n),"%"),"at","50%","50%"]}return v},w=function(e,t,n){return"circle"===e?1:"inset"===e?t/n:null},O=function(e,t){if("inset"===t){var n=(0,o.Z)(e[0],2),r=n[0],i=n[1],a=(0,o.Z)(e[4],2);return(a[0]-r)/(a[1]-i)}return 1},k=function(e,t,n,r){var i=(0,o.Z)(e,4),a=i[0],c=i[1],s=i[2],l=i[3];if("inset"===t){var u=parseFloat(a),f=parseFloat(c),p=parseFloat(s),m=parseFloat(l),h=d.lt/n*100,g=d.lt/r*100;if(100-m-f<h){var v=100-m-h;v>=0?e[1]="".concat(v,"%"):(e[1]="0%",e[3]="".concat(100-h,"%"))}if(100-u-p<g){var b=100-u-g;b>=0?e[2]="".concat(b,"%"):(e[2]="0%",e[0]="".concat(100-g,"%"))}}else if("circle"===t){var j=Math.max(x(parseFloat(a),n,r),d.lt);e[0]="".concat(y(j,n,r),"%")}},C=function(e){var t=e.clipType,n=e.clipStyles,r=e.w,i=e.h,a=(0,o.Z)(n,4),c=a[0],s=a[1],l=a[2],u=a[3];if("inset"===t){var d=parseFloat(c),f=parseFloat(s),p=parseFloat(l),m=parseFloat(u),h=m/(f+m)*100,g=d/(d+p)*100,v=isNaN(h)?50:h,b=isNaN(g)?50:g,y=100-m-f,j=100-d-p;return{mask:"\n        linear-gradient(#000 0 0) ".concat(v,"% ").concat(b,"% / ").concat(y,"% ").concat(j,"%,\n        linear-gradient(rgba(0,0,0,0.4) 0 0)"),width:y,height:j,top:d,right:f,bottom:p,left:m}}if("circle"===t){var w=parseFloat(c),O=parseFloat(l),k=parseFloat(u),C=x(w,r,i),P=i*(k/100)-C,S=r*(O/100)-C,A=2*C/r*100,E=2*C/i*100,D=P/i*100,I=S/r*100;return{mask:"radial-gradient(".concat(A,"% ").concat(E,"% at ").concat(O,"% ").concat(k,"%, black 50%, rgba(0, 0, 0, 0.4) 50%) no-repeat"),width:A,height:E,top:Math.max(D,0),left:Math.max(I,0),bottom:0,right:0}}return{mask:"",width:0,height:0,top:0,left:0,bottom:0,right:0}},P=function(e,t,n,r){if(!e||!e.clipType||!r)return{clipType:"inset",scaleCrop:1,scaleX:1,scaleY:1,aspectRatio:r||void 0,referenceXOffset:1,referenceYOffset:1,clipPathCSSString:"",translateX:0,translateY:0};var o=e.clipPath||j(e.clipType,t,n),i=e.clipType,a=C({w:t,h:n,clipType:i,clipStyles:o}),c=a.width,s=a.height,l=a.top,u=a.left,d=a.right,f=a.bottom,p=100/c,m=100/s,h=(null==e?void 0:e.clipAspectRatio)||1,g=(null==e?void 0:e.clipAspectRatio)||r;return{scaleCrop:r/h<1?Math.min(m,p):Math.max(m,p),aspectRatio:g,scaleX:p,scaleY:m,translateX:u,translateY:l,referenceXOffset:t*(100/(100-u+d)-1),referenceYOffset:n*(100/(100-l+f)-1),clipPathCSSString:"".concat(i,"(").concat(o.join(" "),")"),clipType:i}},S=(0,s.mz)([s.Rn]),A=(0,r.Z)({},".".concat(b),{zIndex:2,".moveable-control":{zIndex:2,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal"},"&.data-clip-type-inset":{".moveable-control":{zIndex:2,bg:"0 none !important",borderRadius:"0px",width:"".concat(16,"px"),height:"".concat(16,"px"),border:"6px solid var(--chakra-colors-trueblue-300)",'&[data-clip-index="0"]':{borderRight:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(2,"px"),cursor:"nw-resize"},'&[data-clip-index="1"]':{borderRight:"0",borderBottom:"0",borderLeft:"0",marginTop:"-".concat(2,"px"),cursor:"n-resize"},'&[data-clip-index="2"]':{borderLeft:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(14,"px"),cursor:"ne-resize"},'&[data-clip-index="3"]':{borderBottom:"0",borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),cursor:"e-resize"},'&[data-clip-index="4"]':{borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),marginTop:"-".concat(14,"px"),cursor:"se-resize"},'&[data-clip-index="5"]':{borderTop:"0",borderLeft:"0",borderRight:"0",marginTop:"-".concat(14,"px"),cursor:"s-resize"},'&[data-clip-index="6"]':{borderTop:"0",borderRight:"0",marginTop:"-".concat(14,"px"),marginLeft:"-".concat(2,"px"),cursor:"sw-resize"},'&[data-clip-index="7"]':{borderTop:"0",borderBottom:"0",borderRight:"0",marginLeft:"-".concat(2,"px"),cursor:"w-resize"}}},"&.data-clip-type-circle":{".moveable-control":{bg:"trueblue.300"}},".moveable-clip-ellipse":{borderWidth:"2px",borderColor:"var(--chakra-colors-trueblue-300) !important"},".moveable-line":{display:"none"}}),E=function(e){var t=e.clipPath,n=e.clipAspectRatio,r=e.updateResizeAttrs,o=e.imageWrapperRef,s=e.refreshDeps,d=e.currentWidth,h=e.currentHeight,v=e.onFinishCrop,y=(0,u.TL)(),x=(0,u.CG)(p.Ig),P=(0,c.useRef)(null),A=(0,c.useState)({clipPath:t||j(x,d,h),clipAspectRatio:n||w(x,d,h)}),E=A[0],D=A[1],I=(0,c.useCallback)(function(e){if(d&&h&&o.current){var t=C({w:d,h:h,clipType:x,clipStyles:e}).mask;o.current.style["-webkit-mask"]=t,o.current.style["-webkit-mask-repeat"]="no-repeat"}},[o,x,d,h]),z=JSON.stringify(E.clipPath);(0,c.useEffect)(function(){I(E.clipPath)},[I,z,E.clipPath]),(0,i.r)(function(){D(function(e){return g(g({},e),{},{clipPath:j(x,d,h),clipAspectRatio:w(x,d,h)})})},[x]),(0,c.useEffect)(function(){var e;null===(e=P.current)||void 0===e||e.updateTarget()},[s]);var T=(0,c.useCallback)(function(){var e=g({clipType:x},E);e.clipAspectRatio&&e.clipPath&&r(e)},[r,E,x]),M=(0,c.useRef)({fn:T,confirmOnUnmount:!0});M.current.fn=T,(0,c.useEffect)(function(){return f.T.on("endClip",function(e){var t=e.confirm;M.current.confirmOnUnmount=t,v&&v()})},[y,v]),(0,c.useEffect)(function(){return function(){M.current.confirmOnUnmount&&M.current.fn()}},[]),(0,c.useEffect)(function(){return l.F7.on("keydown","CLIPPABLE",function(e){return!!(0,a.ZP)("mod+x")(e)&&(e.preventDefault(),!0)})},[]);var N="".concat(x,"(").concat((E.clipPath||j(x,d,h)).join(" "),")");return(0,m.jsx)(S,{ref:function(e){P.current=e},className:"".concat(b," data-clip-type-").concat(x),target:o.current,renderDirections:["ne","nw","se","sw"],origin:!1,draggable:!1,clippable:!0,clipTargetBounds:!0,clipRelative:!0,clipArea:!0,defaultClipPath:x,customClipPath:N,dragWithClip:!0,keepRatio:!0,onClip:function(e){var t=e.clipStyles;k(t,e.clipType,d,h),I(t)},onClipEnd:function(e){var t=e.lastEvent;if(null!=t&&t.clipStyles){var n=t.clipStyles;k(n,t.clipType,d,h),D({clipPath:n,clipAspectRatio:O(t.poses,x)})}}})}},50803:function(e,t,n){n.d(t,{E:function(){return f}});var r=n(95235),o=n(72338),i=n(24424),a=n(13121),c=n(66902),s=n(88646),l=n(51900);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=i.ZP.extend({selectable:!0,draggable:!0,group:"block media",priority:c.a.Image,addOptions:function(){var e;return d(d({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{placeholders:{}})},addNodeView:function(){return(0,a.fW)(l.Y,{update:s.E7})},parseHTML:function(){return[{tag:"img[src], img[tempUrl]"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["img",(0,o.P1)(t,{class:"gamma-simple-image"})]},addAttributes:function(){return{src:{},tempUrl:{},uploadStatus:{},source:{},showPlaceholder:{}}}})},51900:function(e,t,n){n.d(t,{Y:function(){return f}});var r=n(95235),o=n(53738),i=n(84103),a=n(36895),c=n(43862),s=n(13121),l=n(98474),u=n(52322);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var f=function(e){var t=e.node.attrs,n=t.src,f=t.tempUrl,p=t.uploadStatus,m=t.showPlaceholder;return t.id,(0,u.jsxs)(s.T5,{as:"div",children:[m&&(0,u.jsx)(l.gH,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)),!m&&(n||f)&&(0,u.jsxs)(o.xu,{position:"relative",w:"100%",children:[(0,u.jsx)(i.r,{className:"image-link",href:n||f||"",target:"_blank",children:(0,u.jsx)(a.E,{src:n||f||""})}),p==c.D.Uploading&&(0,u.jsx)(l.HI,{}),p==c.D.Error&&(0,u.jsx)(l.s7,{})]})]})};f.displayName="simple-image-view"},26274:function(e,t,n){n.d(t,{k:function(){return a}});var r=n(2784),o=n(46358),i=n(7427),a=function(e){var t=(0,o.TL)(),n=(0,r.useCallback)(function(e){var n=e.clipType;n&&t((0,i.Nf)({clipType:n}))},[t]),a=(0,r.useCallback)(function(n){var r=n.id;i.TB.emit("endClip",{id:r,confirm:!1}),t((0,i.uR)()),e.commands.resetImageClip()},[t,e]),c=(0,r.useCallback)(function(e){var n=e.id;i.TB.emit("endClip",{id:n,confirm:!1}),t((0,i.uR)())},[t]),s=(0,r.useCallback)(function(e){var n=e.id;i.TB.emit("endClip",{id:n,confirm:!0}),t((0,i.uR)())},[t]);return{cancelCrop:c,startCrop:(0,r.useCallback)(function(e){var n=e.id,r=e.clipType;t((0,i.iq)({id:n,clipType:r})),i.TB.emit("startCrop",{id:n})},[t]),confirmCrop:s,resetCrop:a,setCropClipType:n}}},10143:function(e,t,n){n.d(t,{T:function(){return r}});var r=new(n(98555)).v},7427:function(e,t,n){n.d(t,{Ri:function(){return J},OT:function(){return ev},Ee:function(){return eb},uR:function(){return Q.uR},TB:function(){return g.T},Ig:function(){return Q.Ig},v_:function(){return Q.v_},Nf:function(){return Q.Nf},iq:function(){return Q.iq}});var r=n(95235),o=n(24424),i=n(27191),a=n(26657),c=n(73805),s=n(46358),l=n(29469),u=n(13121),d=n(95472),f=n(21350),p=n(66902),m=n(88646),h=n(75361),g=n(10143),v=n(98875),b=n(62141),y=n(16019),x=n(11919),j=n(53738),w=n(36895),O=n(2784),k=n(43862),C=n(9121),P=n(24224),S=n(14115),A=n(34860),E=n(45075),D=n(80318),I=n(91446),z=n(30726),T=n(61686),M=n(4389),N=n(11723),R=n(20046),L=n(98474),_=n(34367),H=n(87819),Z=n(26236),B=n(96091),F=n(82269),W=n(98841),U=n(94864),G=n(31889),q=n(15726),V=n(52322),$=["imageAttrs","isCroppingThisImage","motionProps","isZoomed","objectFit","containerWidth","intrinsicAspectRatio","isThumbnail"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=(0,W.E)(j.xu),J=(0,O.forwardRef)(function(e,t){var n=e.imageAttrs,r=n.src,o=n.tempUrl,i=n.resize,a=n.meta,c=e.isCroppingThisImage,l=void 0!==c&&c,u=e.motionProps,d=void 0===u?{}:u,f=e.isZoomed,p=void 0!==f&&f,m=e.objectFit,h=void 0===m?"contain":m,g=e.containerWidth,v=e.intrinsicAspectRatio,y=e.isThumbnail,x=(0,F.Z)(e,$),j=(0,U.C7)(),O=(0,b.P7)((0,s.qr)().getState()),k=(null==a?void 0:a.frame_count)&&a.frame_count>1,C=p||!r||k?r:(0,G.SN)(r,y?{height:400}:{width:2e3},a),P=(0,B.bn)(i,g||(null==a?void 0:a.width)||1,g&&v?g/v:(null==a?void 0:a.height)||1,v||(a?a.width/a.height:1))||{},S=P.scaleCrop,A=P.scaleY,E=P.clipPathCSSString,D=P.translateX,I=P.translateY,z=P.aspectRatio,T=P.referenceXOffset,M=P.referenceYOffset,N=!l&&!!(null==i?void 0:i.clipPath),R=l?"":"scale(".concat(S,") translate(-").concat(D,"%, -").concat(I,"%)"),L=(0,H.zd)(r||o);return(0,V.jsx)(X,Y(Y({css:{aspectRatio:"".concat(N?z:"")},className:"image","data-content-reference":"".concat(T,",").concat(M),maxH:"var(--media-maxH)",maxW:"var(--media-maxW)",overflow:"hidden",w:p?void 0:"100%",h:"cover"==h?"100%":void 0,sx:{"@media print":{height:"unset"}}},O?d:{}),{},{children:(0,V.jsx)(w.E,Y(Y({alt:"",objectFit:h,maxH:"calc(var(--media-maxH) * ".concat(A||1,")"),minH:"cover"==h?"calc(var(--media-maxH) / ".concat(S||1,")"):void 0,transformOrigin:"left top",clipPath:l?"":E,ignoreFallback:p||j,transform:R,src:C||o||"",fallbackSrc:o||"",ref:t,w:L?"100%":void 0},r||o?{}:q.W6),x))}))});J.displayName="CroppedImage";var Q=n(88117);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en=function(e){var t=e.node,n=e.editor,r=e.updateAttributes,o=e.selected,i=e.decorations,a=(0,O.useRef)(null),c=(0,O.useRef)(null),l=(0,O.useState)(null),u=l[0],d=l[1],f=(0,z.t)(i).isDark,p=(0,N.Od)(i),m=(0,T.M)(n),h=(0,A.lz)(),g=(0,O.useState)(),v=g[0],F=g[1],W=(0,O.useState)(0),U=W[0],G=W[1],q=(0,O.useState)(0),$=q[0],K=q[1],Y=(0,s.CG)(Q.kv),X=(0,P.TZ)(),ee=(0,s.TL)(),en=(0,R.Ah)(e),er=(0,I.w)(i).isFullWidth,eo=t.attrs,ei=eo.src,ea=eo.tempUrl,ec=eo.uploadStatus,es=eo.meta,el=eo.showPlaceholder,eu=eo.horizontalAlign,ed=eo.resize,ef=eo.id,ep=o&&Y,em=(0,O.useCallback)(function(){var e,t,n=null===(e=a.current)||void 0===e?void 0:e.getBoundingClientRect(),r=null===(t=c.current)||void 0===t?void 0:t.getBoundingClientRect();if(n&&r){var o=r.width/r.height;G(n.width),K(n.width/o),d(o)}},[]),eh=(0,_.ow)(n),eg=eh.ref,ev=eh.isResizing,eb=eh.setIsResizing,ey=eh.resizeableSx,ex=eh.isAnimating,ej=eh.onLayoutAnimationStart,ew=eh.onLayoutAnimationComplete,eO=(0,O.useCallback)(function(e,n){r(et(et({},t.attrs),{},{fullWidthBlock:void 0===n?t.attrs.fullWidthBlock:n,resize:et(et({},t.attrs.resize),e)}))},[t.attrs,r]);(0,O.useEffect)(function(){h||em()},[em,ep,v,h]),(0,A.vm)(function(){if(!o){var e,t;ee((0,Q.uR)()),eb(!1),null===(e=(t=n.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!1)}},[n,ee,em,o,eb],[o]),(0,y.r)(function(){var e,t;null===(e=(t=n.commands).refreshBubbleMenu)||void 0===e||e.call(t)},[n,Y,v]);var ek=eg.current&&!!U&&p&&!en&&!m,eC=(null==ed?void 0:ed.width)||(null==es?void 0:es.width),eP=(0,H.zd)(ei||ea),eS=!Y&&!ev&&!en&&!S.cx,eA=(0,Z.d8)(ef),eE=eA.isZoomed,eD=eA.enterZoom,eI=eA.exitZoom,ez=(0,M.nN)(er?"center":eu),eT=(0,s.CG)(b.Pu),eM=(0,C.c)(eT);return(0,V.jsxs)(D.lO,et(et({},e),{},{as:"div",style:{height:en?"100%":void 0},children:[el&&(0,V.jsx)(L.gH,et({},e)),!el&&(ei||ea)&&(0,V.jsxs)(x.k,{"data-testid":"image-node-wrapper",ref:a,h:"100%",w:"100%",direction:"column",className:E.d,sx:ey,css:ez,children:[ek&&ep&&(0,V.jsx)(B.C3,{imageWrapperRef:eg,updateResizeAttrs:eO,refreshDeps:[h,ex],currentWidth:U,currentHeight:$,clipPath:null==ed?void 0:ed.clipPath,clipAspectRatio:null==ed?void 0:ed.clipAspectRatio,onFinishCrop:function(){}}),ek&&!Y&&o&&!er&&(0,V.jsx)(_.R4,{imageWrapperRef:eg,setIsResizing:eb,updateResizeAttrs:eO,refreshDeps:[t.attrs,v,ex,h]}),(0,V.jsxs)(j.xu,{ref:eg,css:{mask:ep?"":"none !important"},sx:null!=es&&es.has_transparency?void 0:o&&ek?et(et({},eM.imageSx),{},{borderRadius:"0px"}):eM.imageSx,"data-drag-handle":!0,"data-image-node-element":!0,"data-selection-ring":"inside","data-selection-background":!0,"data-node-image-testid":ef,w:er||en?"100%":eC?"calc(".concat(eC," * var(--font-size) / 16)"):"fit-content",maxW:"100%",position:"relative",overflow:"hidden",children:[!S.cx&&(0,V.jsx)(Z.cp,{enterZoom:eD,as:w.E,src:X?void 0:ei,loading:"lazy"}),(0,V.jsx)(J,{containerWidth:U,intrinsicAspectRatio:u||void 0,isCroppingThisImage:ep,imageAttrs:t.attrs,onLoad:function(){F(ei||ea||"")},ref:c,width:en?"auto":eC||ev||er||eP?"100%":null==es?void 0:es.width,minW:en?"100%":void 0,motionProps:{layoutDependency:eE,layoutId:(0,Z.sB)(ef),transition:Z.yq,onLayoutAnimationStart:ej,onLayoutAnimationComplete:ew},objectFit:en?"cover":"contain"}),eS&&(0,V.jsx)(Z.aF,{isZoomed:eE,exitZoom:eI,editor:n,children:(0,V.jsx)(J,{imageAttrs:t.attrs,backgroundColor:f?"black":"white",w:eP?"80vw":void 0,motionProps:{layoutDependency:eE,layoutId:(0,Z.sB)(ef),transition:Z.yq},isZoomed:!0})}),ec==k.D.Uploading&&(0,V.jsx)(L.HI,{}),ec==k.D.Error&&(0,V.jsx)(L.s7,{})]})]})]}))},er=n(53865),eo=n(48745),ei=n(29270),ea=n(26274),ec=n(36953),es=["theme"];function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=function(e){var t=e.theme,n=(0,F.Z)(e,es),r=(0,s.TL)(),o=n.node,i=n.editor,a=n.updateAttributes,c=n.selected,l=n.decorations,u=o.attrs,d=u.src,f=u.tempUrl,p=u.uploadStatus,m=u.meta,h=u.showPlaceholder,v=u.horizontalAlign,y=u.resize,S=u.id,z=(null==y?void 0:y.width)||(null==m?void 0:m.width),W=(0,H.zd)(d||f),U=(0,I.w)(l).isFullWidth,G=(0,M.nN)(U?"center":v),q=(0,P.TZ)(),$=(0,R.Ah)(n),K=(0,N.Od)(l),Y=(0,s.CG)(b.hN),X=(0,T.M)(i),ee=(0,eo.$D)(l).isCardDark,et=null!=ee?ee:(0,er.wj)(t),en=p===k.D.Uploading,el=(0,Z.d8)(S),ed=el.isZoomed,ef=el.enterZoom,ep=el.exitZoom,em=(0,ec.A)(),eh=em.width,eg=em.height,ev=em.aspectRatio,eb=em.containerWrapperRef,ey=em.imageRef,ex=em.setSize;(0,O.useEffect)(function(){return g.T.on("startCrop",function(e){S===e.id&&(ex(),requestAnimationFrame(function(){var e,t;null===(e=(t=i.commands).refreshBubbleMenu)||void 0===e||e.call(t)}))})},[S,ex,i]);var ej=(0,_.ow)(i),ew=ej.ref,eO=ej.isResizing,ek=ej.setIsResizing,eC=ej.resizeableSx,eP=ej.isAnimating,eS=ej.onLayoutAnimationStart,eA=ej.onLayoutAnimationComplete,eE=ew.current&&K&&!$&&!X,eD=ew.current&&!$&&!X,eI=(0,C.c)(t),ez=(0,O.useCallback)(function(e,t){a(eu(eu({},o.attrs),{},{fullWidthBlock:void 0===t?o.attrs.fullWidthBlock:t,resize:eu(eu({},o.attrs.resize),e)}))},[o.attrs,a]),eT=(0,A.lz)(),eM=(0,s.CG)((0,Q.v_)(S)),eN=(0,ea.k)(i).confirmCrop;(0,A.vm)(function(){eM&&!c&&eN({id:S})},[i,r,c,eM,S,eN],[c]);var eR=!eM&&!eO&&!$&&!i.isThumbnail,eL=!i.isThumbnail,e_=(0,O.useCallback)(function(){eM||eO||ef()},[ef,eM,eO]),eH=(0,O.useCallback)(function(){if(c){var e,t;null===(e=(t=i.commands).refreshBubbleMenu)||void 0===e||e.call(t)}},[c,i]),eZ=(0,s.CG)(b.P7)?{layoutDependency:ed,layoutId:(0,Z.sB)(S),transition:Z.yq,onLayoutAnimationStart:eS,onLayoutAnimationComplete:eA}:void 0;return(0,V.jsxs)(D.lO,eu(eu({},n),{},{as:"div",style:{height:$?"100%":void 0},children:[h&&(0,V.jsx)(L.gH,eu({},n)),!h&&(d||f)&&(0,V.jsxs)(x.k,{"data-testid":"image-node-wrapper",ref:eb,h:"100%",w:"100%",direction:"column",className:E.d,sx:eC,css:G,children:[eD&&eM&&(0,V.jsx)(B.C3,{imageWrapperRef:ew,updateResizeAttrs:ez,refreshDeps:[eT,eP],currentWidth:eh,currentHeight:eg,clipPath:null==y?void 0:y.clipPath,clipAspectRatio:null==y?void 0:y.clipAspectRatio,onFinishCrop:function(){requestAnimationFrame(function(){var e,t;null===(e=(t=i.commands).refreshBubbleMenu)||void 0===e||e.call(t)})}}),eE&&!eM&&c&&!U&&(0,V.jsx)(_.R4,{imageWrapperRef:ew,setIsResizing:ek,updateResizeAttrs:ez,refreshDeps:[o.attrs,eP,eT]}),(0,V.jsxs)(j.xu,{ref:ew,css:{mask:eM?"":"none !important","--media-maxH":!en||eO||null!=y&&y.width||$?void 0:"".concat(100*ei.m4,"vh")},sx:null!=m&&m.has_transparency?void 0:c&&eE?eu(eu({},eI.imageSx),{},{borderRadius:"0px"}):eI.imageSx,"data-drag-handle":!0,"data-image-node-element":!0,"data-selection-ring":"inside","data-selection-background":!0,"data-node-image-testid":S,w:U||$?"100%":z?"calc(".concat(z," * var(--font-size) / 16)"):"fit-content",maxW:"100%",position:"relative",overflow:"hidden",children:[eL&&(0,V.jsx)(Z.cp,{enterZoom:e_,as:w.E,src:q?void 0:d,loading:"lazy"}),(0,V.jsx)(J,{containerWidth:eh,intrinsicAspectRatio:ev||void 0,isCroppingThisImage:eM,imageAttrs:o.attrs,onLoad:eH,ref:ey,width:$?"auto":z||eO||U||W?"100%":null==m?void 0:m.width,minW:$?"100%":void 0,motionProps:eZ,objectFit:$?"cover":"contain",isThumbnail:$||i.isThumbnail}),eR&&(0,V.jsx)(Z.aF,{isZoomed:ed,exitZoom:ep,editor:i,children:(0,V.jsx)(J,{imageAttrs:o.attrs,backgroundColor:et?"black":"white",w:W?"80vw":void 0,motionProps:{layoutDependency:ed,layoutId:(0,Z.sB)(S),transition:Z.yq},isZoomed:!0})}),en&&Y&&(0,V.jsx)(L.HI,{}),p==k.D.Error&&(0,V.jsx)(L.s7,{})]})]})]}))};function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var em=function(e){var t=(0,s.CG)(b.Pu),n=(0,v.ye)("imageView2");return t?n?(0,V.jsx)(ed,ep(ep({},e),{},{theme:t})):(0,V.jsx)(en,ep({},e)):null};function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ev={clipType:null,clipPath:null,clipAspectRatio:null,width:null},eb=o.ZP.extend({selectable:!0,draggable:!0,group:"block media",priority:p.a.Image,expandable:!0,addOptions:function(){var e;return eg(eg({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{placeholders:{}})},addStorage:f.gk,addNodeView:function(){return(0,u.fW)(em,{update:m.E7})},parseHTML:function(){return[{tag:"img[src], img[tempUrl]"},{tag:"img[bookmark]",getAttrs:(0,f.xF)(this.storage)},{tag:"img[".concat(a.L,"]"),getAttrs:function(e){try{var t=e.getAttribute(a.L);return JSON.parse(t||"")}catch(t){return console.error("[Image] Error parsing ".concat(a.L," attrs"),e,t),!1}}}]},renderHTMLforAI:function(e){var t=e.node;return["img",{bookmark:(0,f.ml)(this.storage,t),alt:(0,c.K)(t.attrs)}]},addAttributes:function(){return{id:(0,l.b)(h.G),savedMediaId:{},src:{},tempUrl:{},uploadStatus:{},meta:eg({},(0,d.sw)("meta")),providerMeta:eg({},(0,d.sw)("providerMeta")),aiParams:eg({},(0,d.sw)("aiParams")),name:{},query:{},source:{},showPlaceholder:{},fullWidthBlock:{default:!1},resize:eg(eg({},(0,d.sw)("resize")),{},{default:ev})}},addKeyboardShortcuts:function(){return{Enter:function(e){var t=e.editor.state.selection;if(t instanceof i.qv&&t.node.type.name===o.ZP.name){var n=(0,Q.kv)((0,s.bh)().getState()),r=t.node.attrs.id;if(n)return g.T.emit("endClip",{id:r,confirm:!0}),!0}return!1}}},addCommands:function(){var e=this.name,t=function(t){var n=t.selection;return n instanceof i.qv&&n.node.type.name===e?n.node:void 0};return{resetImageClip:function(){return function(n){var r=n.chain,o=n.state,i=t(o);if(!i)return console.warn("[resetImageClip] Selected node is not an image: ",o.selection),!0;var a=ev.clipPath,c=ev.clipType,s=ev.clipAspectRatio;return r().updateAttributes(e,{resize:eg(eg({},i.attrs.resize),{},{clipPath:a,clipType:c,clipAspectRatio:s})}).run()}},resetImageScale:function(){return function(n){var r=n.chain,o=n.state,i=t(o);return i?r().updateAttributes(e,{resize:eg(eg({},i.attrs.resize),{},{width:null,isAuto:null})}).run():(console.warn("[resetImageClip] Selected node is not an image: ",o.selection),!0)}}}}});n(50803),n(51900)},95141:function(e,t,n){n.d(t,{c:function(){return a}});var r=n(81333),o=n(17508),i=n(43330),a=Object.entries(n(39965).ah).filter(function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return n.nodeName&&!n.disabled}).map(function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return{key:n,name:a.label,nodeName:a.nodeName||"mediaPlaceholder",execute:function(e){return e.commands.insertMediaBlock(a.key)},dragStartFn:function(e){(0,o.U)(e,{type:"mediaPlaceholder",attrs:{source:a.key}})},dragEndFn:function(){(0,i.TZ)()},description:a.description,icon:a.icon,image:a.image,testId:a.key,keywords:a.keywords,featureFlag:a.featureFlag,priority:a.priority,categories:a.categories,checkDisabled:a.checkDisabled,badge:a.badge}})},39965:function(e,t,n){n.d(t,{dz:function(){return O},ah:function(){return k},mC:function(){return w},X8:function(){return C}});var r=n(95235),o=n(67714),i=n(29113),a=n(87254),c=n(28139),s=n(53865),l=n(55452),u=n(94659),d=n(72360),f=n(48322),p=n(18751),m=n(46358),h=n(53634),g=n(62141),v=n(52322),b=n(71199),y=n(76451);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="default",O={Default:[{label:function(){return a.ag._({id:"EdQY6l"})},availableOffline:!0,key:w,backgroundType:y.E.NONE,Panel:function(){return(0,v.jsx)(v.Fragment,{})}}],Image:[j(j({},c.in),{},{nodeName:"image",backgroundType:y.E.IMAGE,priority:10}),j(j({},c.ud),{},{nodeName:"image",backgroundType:y.E.IMAGE}),j(j({},c.QT),{},{nodeName:"image",backgroundType:y.E.IMAGE}),j(j({},c.jt),{},{nodeName:"image",disabled:!0,backgroundType:y.E.IMAGE}),j(j({},c.NX),{},{nodeName:"image",backgroundType:y.E.IMAGE}),j(j({},c.hq),{},{nodeName:"image",backgroundType:y.E.IMAGE}),j(j({},c.$5),{},{nodeName:"image",backgroundType:y.E.IMAGE}),j(j({},c.jS),{},{nodeName:"image"}),j(j({},c.bD),{},{nodeName:"image",disabled:!0,backgroundType:y.E.IMAGE}),{label:function(){return a.ag._({id:"COXEr5"})},key:s.cx,availableOffline:!0,icon:i.l9,Panel:function(e){var t=e.currentAttributes,n=e.updateAttributes,r=(0,m.CG)(g.Pu),o=r.config.accentBackgrounds;return(0,v.jsxs)(u.g,{align:"stretch",children:[o&&(0,v.jsx)(h.U,{currentAttributes:t,accentImages:o,isDark:(0,s.wj)(r),handleItemClick:n}),(0,v.jsxs)(d.b,{status:"info",children:[(0,v.jsx)(f.z,{}),(0,v.jsx)(p.X,{children:(0,v.jsx)(l.cC,{id:"zOCB9A"})})]})]})},backgroundType:y.E.IMAGE,keywords:["accent image"]}],Video:[j(j({},c.wj),{},{nodeName:"video"}),j(j({},c.Vy),{},{nodeName:"video"}),j(j({},c.qz),{},{nodeName:"video"}),j(j({},c.oC),{},{nodeName:"video"}),j(j({},c.BM),{},{nodeName:"video"}),j(j({},c.zs),{},{nodeName:"video"}),j(j({},c.p7),{},{nodeName:"video"})],Embed:[j(j({},c.Hw),{},{nodeName:"embed",priority:10}),j(j({},c.bO),{},{nodeName:"embed"}),j(j({},c.BR),{},{nodeName:"embed"}),j(j({},c.DN),{},{nodeName:"embed"}),j(j({},c.iL),{},{nodeName:"embed"}),j(j({},c.Bo),{},{nodeName:"embed"}),j(j({},c.LE),{},{nodeName:"embed"}),j(j({},c.QR),{},{nodeName:"embed"}),j(j({},c.Ds),{},{nodeName:"embed"}),j(j({},c.FH),{},{nodeName:"embed"}),j(j({},c.F6),{},{nodeName:"embed"}),j(j({},c.w4),{},{nodeName:"embed"}),j(j({},c.BF),{},{nodeName:"embed"}),j(j({},c.DU),{},{nodeName:"embed"}),j(j({},c.TQ),{},{nodeName:"embed"})],Color:[{label:function(){return a.ag._({id:"iFeLoB"})},key:"color.solid",availableOffline:!0,icon:o.q2,Panel:b.c,backgroundType:y.E.COLOR,keywords:["solid color"]},j(j({},c.eK),{},{availableOffline:!0,backgroundType:y.E.GRADIENT})]},k=Object.fromEntries(Object.values(O).flat().map(function(e){return[e.key,e]})),C={Default:function(){return a.ag._({id:"ovBPCi"})},Image:function(){return a.ag._({id:"hG89Ed"})},Video:function(){return a.ag._({id:"vSJd18"})},Embed:function(){return a.ag._({id:"KKBlUU"})},Color:function(){return a.ag._({id:"jZlrte"})}}},98474:function(e,t,n){n.d(t,{om:function(){return k},gH:function(){return O},s7:function(){return b.s7},HI:function(){return b.HI}});var r=n(72338),o=n(55388),i=n(27191),a=n(43330),c=n(66902),s=n(87819),l=n(95235),u=n(52792),d=n(95369),f=n(11919),p=n(43862),m=n(31246),h=n(91446),g=n(4389),v=n(20046),b=n(15726),y=n(52322);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(e){return(0,y.jsx)(m.l,j(j({},e),{},{as:"div",children:(0,y.jsx)(O,j({},e))}))},O=function(e){var t=e.node,n=e.decorations,r=t.attrs,o=r.source,i=r.horizontalAlign,a=r.uploadStatus,c=(0,h.w)(n).isFullWidth,s=null!=o&&o.includes("embed.")?d.m6:u.zx,l=(0,v.Ah)(e);return(0,y.jsx)(f.k,{w:"100%",h:"100%",direction:"column",sx:(0,g.nN)(i),children:(0,y.jsx)(b.k3,{hasUploadError:a===p.D.Error,isLoading:a===p.D.Uploading,"data-content-reference":!0,icon:s,width:c||l?"100%":"18em",maxW:"100%",h:l?"100%":"10em",maxH:"100%","data-drag-handle":!0,"data-selection-ring":!0,"data-selection-background":!0,borderRadius:"var(--box-border-radius)"})})},k=r.NB.create({name:"mediaPlaceholder",group:"block media",atom:!0,selectable:!0,draggable:!0,priority:c.a.MediaPlaceholder,addNodeView:function(){return(0,o.fW)(w)},addAttributes:function(){return{source:{},fullWidthBlock:{default:!1}}},addKeyboardShortcuts:function(){return{Enter:function(e){var t=e.editor.state.selection;return!!(t instanceof i.qv&&(0,s.fP)(t.node))&&((0,a.TZ)(),!0)}}},addCommands:function(){return{insertMediaBlock:function(e){return function(t){return t.commands.insertContentAndSelect({type:"mediaPlaceholder",attrs:{source:e}}),requestAnimationFrame(function(){(0,a.TZ)()}),!0}}}},parseHTML:function(){return[{tag:"div[class=media-placeholder]"},{tag:"img[placeholder=true]",priority:60}]},renderHTML:function(e){var t=e.HTMLAttributes;return["div",(0,r.P1)(t,{class:"media-placeholder"})]}})},34367:function(e,t,n){n.d(t,{R4:function(){return v},Wv:function(){return g},ow:function(){return h}});var r=n(95235),o=n(16019),i=n(12436),a=n.n(i),c=n(2784),s=n(42418),l=n(29270),u=n(34860),d=n(73010),f=n(52322),p="resizeable-control-wrapper",m=(0,s.mz)([s.ez]);function h(e){var t=(0,c.useState)(!1),n=t[0],r=t[1],i=(0,u.lz)(),a=(0,c.useRef)(null),s=(0,d.Br)(a),l=(0,c.useState)(!1),f=l[0],p=l[1],m=(0,c.useCallback)(function(){var t,n;null===(t=(n=e.commands).forceHideBubbleMenu)||void 0===t||t.call(n,!0),r(!0)},[e]),h=(0,c.useCallback)(function(){var t,n;null===(t=(n=e.commands).forceHideBubbleMenu)||void 0===t||t.call(n,!1),r(!1)},[e]);return(0,o.r)(function(){var t,n;null===(t=(n=e.commands).forceHideBubbleMenu)||void 0===t||t.call(n,f||s)},[e,f,s]),{ref:a,isResizing:f,setIsResizing:p,isAnimating:n,resizeableSx:{".moveable-control":{display:i||s||n?"none":""}},onLayoutAnimationStart:m,onLayoutAnimationComplete:h}}var g=(0,r.Z)({},".".concat(p),{zIndex:11,".moveable-control":{bg:"white",border:"2px solid var(--chakra-colors-trueblue-300)",w:"".concat(8,"px"),h:"".concat(8,"px"),opacity:1,zIndex:10,borderRadius:0,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal","&.moveable-ne, &.moveable-sw":{cursor:"nesw-resize"},"&.moveable-nw, &.moveable-se":{cursor:"nwse-resize"},"&.moveable-se, &.moveable-ne, &.moveable-e":{marginLeft:"-".concat(5,"px")},"&.moveable-sw, &.moveable-nw, &.moveable-w":{marginLeft:"-".concat(3,"px")},"&.moveable-ne, &.moveable-nw, &.moveable-n":{marginTop:"-".concat(3,"px")},"&.moveable-se, &.moveable-sw, &.moveable-s":{marginTop:"-".concat(5,"px")},"&.moveable-e, &.moveable-w":{cursor:"ew-resize",marginTop:"-".concat(4,"px")},"&.moveable-n, &.moveable-s":{cursor:"ns-resize",marginLeft:"-".concat(4,"px")}},".moveable-line":{display:"none"}}),v=function(e){var t=e.imageWrapperRef,n=e.setIsResizing,r=e.updateResizeAttrs,o=e.refreshDeps,i=(0,c.useRef)(null);return(0,c.useEffect)(function(){requestAnimationFrame(function(){var e,t;null===(e=i.current)||void 0===e||e.updateRect(),null===(t=i.current)||void 0===t||t.updateTarget()})},[o]),(0,c.useEffect)(function(){var e=function(){var e;null===(e=i.current)||void 0===e||e.updateTarget()},t=a()(e,250);return document.addEventListener("drop",e),window.addEventListener("resize",t),function(){document.removeEventListener("drop",e),window.removeEventListener("resize",t)}},[]),(0,f.jsx)(m,{ref:function(e){i.current=e},className:p,target:t.current,renderDirections:["se","nw","sw","ne","n","s","e","w"],keepRatio:!0,draggable:!1,resizable:!0,origin:!1,onResizeStart:function(){n(!0)},onResize:function(e){var t=e.target,n=e.width;t.style.width="".concat(Math.max(n,l.lt*Math.max(t.clientWidth/t.clientHeight,1)),"px")},onResizeEnd:function(e){var t=e.target;r({width:t.clientWidth/(parseFloat(getComputedStyle(t).fontSize)/l.SV),isAuto:!1}),n(!1),t.style.width=""}})}},75361:function(e,t,n){n.d(t,{G:function(){return s},z:function(){return l}});var r=n(38564),o=n(37164),i=n(27191),a=n(74203),c=new i.H$("UniqueMediaId"),s=function(){return(0,o.x0)(5)},l=a.I.extend({name:"UniqueMediaId"}).configure({attributeName:"id",types:["image","embed","video"],initialValue:s,filterTransaction:function(e){var t=e.getMeta(r.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:c})},17425:function(e,t,n){n.d(t,{nk:function(){return B},Y7:function(){return T}});var r=n(95235),o=n(72338),i=n(29469),a=n(13121),c=n(95472),s=n(21350),l=n(88646),u=n(75361),d=n(87819),f=n(53738),p=n(11919),m=n(34676),h=n(98841),g=n(37914),v=n(59910),b=n(31246),y=n(98551),x=n(20046),j=n(26236),w=n(82269),O=n(2784),k=n(34455),C=n(23015),P=n(94911),S=n(28139),A=n(52322),E=["isZoomed"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=16/9,T=function(e){var t=e.isZoomed,n=(0,w.Z)(e,E),r=n.node,o=r.attrs,i=o.embed,a=o.source,c=o.sourceUrl,s=a&&S.zX[a]?S.zX[a]:S.wj,l=(0,O.useRef)(null),u=s.preferHtml&&(null==i?void 0:i.html),d=(null==i?void 0:i.height)&&!(null!=i&&i.width),p=null!=i&&i.height&&null!=i&&i.width?i.width/i.height:(null==i?void 0:i.aspectRatio)||z,h=t?{width:"min(var(--media-maxW), calc(var(--media-maxH) * ".concat(p,"))"),height:d?i.height:"min(var(--media-maxH), calc(var(--media-maxW) / ".concat(p,"))")}:u?void 0:d?{height:i.height}:{height:0,pb:"".concat(100/p,"%")},g=(null==i?void 0:i.url)||r.attrs.embedUrl||c,v=s&&s.rewriteEmbedUrl&&g?s.rewriteEmbedUrl(g):g;return(0,A.jsxs)(f.xu,I(I({position:"relative","data-drag-handle":!0},h),{},{onClick:t?C.UW:void 0,children:[!t&&(0,A.jsx)(j.Y$,I(I({},n),{},{frameRef:l})),u?(0,A.jsx)(P.$,{html:i.html,w:t?"100%":void 0,onClick:t?C.UW:void 0}):(0,A.jsx)(k.A,{initialUrl:v,backgroundColor:"none",borderRadius:"var(--box-border-radius)",overflow:"hidden","data-selection-ring":"inside","data-selection-background":!0,className:(0,m.cx)("video-player"),iframeOptions:I({preventScroll:!0},s.iframeOptions),position:"absolute",inset:0,frameRef:l})]}))};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=(0,h.E)(f.xu),L=(0,h.E)(p.k),_=function(e){var t=e.node,n=e.editor,r=t.attrs,o=r.displayStyle,i=r.id,a=r.sourceUrl,c=(0,j.d8)(i),s=c.isZoomed,l=c.enterZoom,u=c.exitZoom,d=(0,x.Ah)(e),f=!g.v.GAMMA_PUPPETEER_SERVICE&&"inline"===o,p=!d&&!n.isThumbnail;return(0,A.jsxs)(b.l,N(N({},e),{},{as:"div",children:[(0,A.jsx)(R,{layoutDependency:s,layoutId:n.isThumbnail?void 0:(0,j.sB)(i),transition:j.yq,h:"100%",className:(0,m.cx)("embed-preview",!f&&v.wY),"data-export-as-image":!0,"data-export-link":a,position:"relative",children:n.isThumbnail?(0,A.jsx)(y.XX,N({},e)):d?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.cp,{enterZoom:l}),(0,A.jsx)(y.CG,N({},e))]}):f?(0,A.jsx)(T,N({},e)):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.cp,{enterZoom:l}),(0,A.jsx)(y.fu,N({},e))]})}),p&&(0,A.jsx)(j.aF,{isZoomed:s,exitZoom:u,editor:n,children:(0,A.jsx)(L,{layoutDependency:s,layoutId:(0,j.sB)(i),transition:j.yq,width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,A.jsx)(T,N(N({},e),{},{isZoomed:!0}))})})]}))};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=o.NB.create({name:"video",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:function(){return(0,a.fW)(_,{update:l.E7})},addAttributes:function(){return{id:(0,i.b)(u.G),embedUrl:{},source:{},thumbnail:Z({},(0,c.sw)("thumbnail")),embed:Z({},(0,c.sw)("embed")),meta:Z({},(0,c.sw)("meta")),sourceUrl:{},displayStyle:{default:"inline"},fullWidthBlock:{default:!1}}},parseHTML:function(){return[{tag:"div[class=video]"},{tag:"video[bookmark]",getAttrs:(0,s.xF)(this.storage)}]},addStorage:function(){return{bookmarks:{}}},renderHTMLforAI:function(e){var t=e.node;return["video",{bookmark:(0,s.ml)(this.storage,t)}]},renderHTML:function(e){var t=e.HTMLAttributes,n=e.node;return["div",(0,o.P1)(t,{class:"video"}),["a",{href:(0,d.iJ)(n),target:"_blank"},(0,d.k7)(n)]]}})},26236:function(e,t,n){n.d(t,{Y$:function(){return W},cp:function(){return F},yq:function(){return v},EW:function(){return z},aF:function(){return E},sB:function(){return q},RM:function(){return G},d8:function(){return U}});var r=n(56974),o=n.n(r),i=n(12982),a=n.n(i),c=n(11919),s=n(8283),l=n(53738),u=n(98841),d=n(25925),f=n(2784),p=n(56692),m=n(14115),h=n(23015),g=n(9734),v={type:"spring",duration:.5,bounce:0},b=(0,g.s2)()?"0.75rem":"2.5rem",y=n(87254),x=n(82642),j=n(94301),w=n(67887),O=n(87202),k=n(43997),C=n(99336),P=n(34860),S=n(52322),A=(0,u.E)(l.xu),E=function(e){var t=e.children,n=e.isZoomed,r=e.exitZoom,o=e.editor,i=(0,k.I0)();(0,f.useEffect)(function(){return p.F7.on("keydown","ZOOMABLE_OVERLAY",function(e){return n&&["ArrowDown","ArrowUp"].includes(e.key)?(e.preventDefault(),!0):!!((0,O.P6)("Esc")(e)||(0,O.P6)("Enter")(e))&&!!n&&(r(),e.preventDefault(),!0)})},[r,n]),(0,f.useEffect)(function(){i((0,C.VN)({id:"zoomableOverlay",isOpen:n}))},[i,n]);var a=(0,f.useRef)(null);return(0,P.vm)(function(){if(o.isEditable){if(n){var e;null===(e=a.current)||void 0===e||e.focus()}else o.commands.focus()}},[o,n],[n],!1),(0,S.jsx)(j.h,{children:n&&(0,S.jsxs)(l.xu,{position:"fixed",inset:0,padding:b,zIndex:"modal",userSelect:"none",onClick:r,onMouseDown:h.br,"data-in-editor-focus":!0,"data-testid":"zoomable-overlay",children:[(0,S.jsx)(A,{position:"absolute",inset:0,initial:{opacity:0},animate:{opacity:.8},transition:v,backgroundColor:"black"},"shade"),(0,S.jsx)(l.xu,{position:"absolute",right:2,top:2,zIndex:"docked",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,S.jsx)(w.h,{"aria-label":y.ag._({id:"8qZ5De"}),colorScheme:"gray",size:"md",onClick:r,onMouseDown:h.br,icon:(0,S.jsx)(x.T,{}),className:"exit-button",ref:a})}),(0,S.jsx)(c.k,{position:"relative",zIndex:"1",h:"100%",w:"100%",align:"center",justify:"center",direction:"column",css:{"--overlay-maxH":"calc(100vh - 2 * ".concat(b,")"),"--overlay-maxW":"calc(100vw - 2 * ".concat(b,")"),"--media-maxH":"var(--overlay-maxH)","--media-maxW":"var(--overlay-maxW)"},children:t})]})})},D=(0,u.E)(c.k),I="80px",z=function(e){var t=e.children,n=e.zoomedId,r=e.setZoomedId,i=e.isZoomed,u=e.exitZoom,g=e.editor,y=a()(t,function(e){return e.id===n}),x=t[y],j=(0,f.useRef)(null);return((0,f.useEffect)(function(){if(i&&!(t.length<2))return p.F7.on("keydown","ZOOMABLE_OVERLAY",function(e){switch(e.key){case"ArrowLeft":return r((t[y-1]||o()(t)).id),!0;case"ArrowRight":return r((t[y+1]||t[0]).id),!0;default:return!1}})},[u,i,r,t,y]),(0,f.useEffect)(function(){var e;j.current&&(null===(e=j.current.querySelector('[data-thumb-id="'.concat(n,'"]')))||void 0===e||e.scrollIntoView({inline:"center",behavior:"smooth"}))},[n]),m.cx)?null:(0,S.jsxs)(E,{isZoomed:i,exitZoom:u,editor:g,children:[(0,S.jsx)(c.k,{flex:1,w:"100%",justify:"center",align:"center","data-testid":"zoomable-carousel-expanded",children:(0,S.jsx)(d.M,{children:x&&(0,S.jsx)(D,{css:{"--media-maxH":"calc(var(--overlay-maxH) - ".concat(I," - ").concat(b,")")},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},position:"absolute",transition:v,w:"100%",h:"100%",children:x.full},x.id)})}),(0,S.jsx)(c.k,{overflowX:"auto",mt:b,sx:{"::-webkit-scrollbar":{display:"none"}},children:(0,S.jsx)(s.U,{spacing:4,onClick:h.UW,"data-testid":"zoomable-carousel-thumbnails",ref:j,children:t.map(function(e){var t=e.id===n;return(0,S.jsx)(l.xu,{border:t?"2px solid white":"2px solid transparent",boxSizing:"content-box",borderRadius:"md",overflow:"hidden",onClick:function(){return r(e.id)},transitionProperty:"border",transitionDuration:"normal",h:I,css:{"--media-maxH":I,"--media-maxW":"200px",flexShrink:0},"data-thumb-id":e.id,cursor:"pointer",backgroundColor:"gray.100",children:e.thumbnail},e.id)})})})]})},T=n(95235),M=n(82269),N=n(37914),R=n(46358),L=n(95472),_=n(62141),H=n(11723),Z=["enterZoom"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var F=function(e){var t=e.enterZoom,n=(0,M.Z)(e,Z),r=(0,R.CG)(_.hN),o=!r;return N.v.GAMMA_PUPPETEER_SERVICE?null:(0,S.jsx)(l.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,T.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({inset:0,w:"100%",h:"100%",position:"absolute",zIndex:1,cursor:o?"zoom-in":"default",onDoubleClick:r?t:void 0,onClick:o?t:void 0,"data-drag-handle":!0,"data-testid":"zoom-click-capture",opacity:0},n))},W=function(e){var t=e.decorations,n=e.node,r=e.editor,o=(0,H.Od)(t)||!(0,L.KB)(r),i=(0,R.CG)(_.hN),a=n.attrs.displayStyle;return(0,S.jsx)(l.xu,{position:"absolute",inset:0,zIndex:1,pointerEvents:i&&!o&&"inline"===a?"auto":"none",cursor:"default"})},U=function(e){var t=(0,k.I0)(),n=(0,R.CG)(function(t){return(0,_._I)(t)===e}),r=(0,f.useCallback)(function(n){t((0,_.RW)({nodeId:n?e:null}))},[t,e]),o=(0,f.useCallback)(function(){return r(!0)},[r]),i=(0,f.useCallback)(function(){return r(!1)},[r]);return{isZoomed:n,setIsZoomed:r,enterZoom:o,exitZoom:i}},G=function(e){var t=(0,k.I0)(),n=(0,R.CG)(function(t){var n=(0,_._I)(t);return n&&e.includes(n)?n:null}),r=!!n,o=(0,f.useCallback)(function(e){t((0,_.RW)({nodeId:e}))},[t]),i=(0,f.useCallback)(function(){return o(null)},[o]),a=(0,f.useState)(r),c=a[0],s=a[1];return(0,f.useEffect)(function(){var e;return r?e=window.setTimeout(function(){s(!0)},1e3*v.duration):s(!1),function(){return clearTimeout(e)}},[r]),{isZoomed:r,isZoomComplete:c,zoomedId:n,setZoomedId:o,exitZoom:i}},q=function(e){return"media-zoom-".concat(e)}},45075:function(e,t,n){n.d(t,{d:function(){return s},l:function(){return l}});var r=n(95235),o=n(96091),i=n(34367);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s="gamma-moveable-wrapper",l=c(c({},o.CC),i.Wv)},23687:function(e,t,n){n.d(t,{U:function(){return c}});var r=n(72338),o=n(27191),i=n(60636),a=n(28703),c=r.hj.create({name:"focusHelpers",addCommands:function(){return{focusDelayed:function(){return function(e){var t=e.editor;return requestAnimationFrame(function(){return t.commands.focus()}),!0}},insertContentAndSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var r=n.chain,o=n.state.selection,i=o.from;return 0===o.$from.parentOffset?r().insertContentAt({from:i-1,to:i},e,{updateSelection:!1}).selectInsertedNode(t).run():r().insertContent(e,{updateSelection:!1}).selectInsertedNode(t).run()}},focusMapped:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return function(r){var o=r.tr,a=r.view,c=o.mapping.map(e,n)+t;try{var s=(0,i.t)(o.doc.resolve(c));s&&o.setSelection(s),a.focus()}catch(e){console.error("[focusMapped] error selecting pos",c,e)}return!0}},selectInsertedNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var n=t.tr,r=t.view,o=(0,i.G)(n);if(!o)return!1;var a=(0,i.t)(o,e);return!!a&&(n.setSelection(a),r.focus(),!0)}},selectNodeAtPos:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=n.state,i=n.tr,a=n.view;try{i.setSelection(o.qv.create(r.doc,e)),t&&i.scrollIntoView(),a.focus()}catch(t){console.warn("[selectNodeAtPos] Error selecting node",e,t)}return!0}},selectInsideNodeAtPos:function(e){return function(t){var n=t.tr,r=t.state.doc.resolve(e),o=(0,i.t)(r);return!!o&&(n.setSelection(o),!0)}},deleteSelectionAndSelectNear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var n=t.tr,r=t.state.selection;if(r.empty)return!1;n.deleteSelection().scrollIntoView();var o=(0,a.E)(n.doc.resolve(r.from),e);return o&&n.setSelection(o),!0}}}}})},11723:function(e,t,n){n.d(t,{EL:function(){return f},Jn:function(){return p},Od:function(){return d}});var r=n(72338),o=n(27191),i=n(52780),a=n(95472),c=n(20046),s=n(29262),l=n(20205),u=n(47191),d=function(e){return e.some(function(e){return e.spec.focusedNode})},f=function(e){return e.some(function(e){return e.spec.isSelectingNode})},p=r.hj.create({name:"focusedNodes",addProseMirrorPlugins:function(){var e=this.editor;return[new o.Sy({props:{decorations:function(t){if(e.isEditable&&(0,a.KB)(e)&&(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="IFRAME"){var n,r=t.selection,d=[];return t.doc.nodesBetween(r.from,r.to,function(e,t,n){if(e.isLeaf||["paragraph","table","tableRow","tableCell","gridLayout","gridCell","heading","title","card","cardLayoutItem","cardAccentLayoutItem","button","buttonGroup","gallery","blockquote","calloutBox","smartLayout","smartLayoutCell","toggle"].includes(e.type.name)){var a=r instanceof l.hA&&"tableRow"===e.type.name&&r.getTableNode()===n&&r.isRowSelection()&&!r.isColSelection(),f=r instanceof l.hA&&(0,u.CU)(e)&&r.getTableNode()===e&&r.isSelectingAllCells(),p={focusedNode:!0,isSelected:r.from<=t,isFocusedInside:r.from>t||r.to<t+e.nodeSize,isSelectingNode:r instanceof o.qv&&r.node===e||a||f,isSelectingAround:(e.isAtom||["gallery","card"].includes(e.type.name))&&r.from<=t&&r.to>=t+e.nodeSize&&!(r instanceof o.qv)},m=[p.focusedNode?"is-focused":"",p.isSelected?"is-selected":"",p.isFocusedInside?"is-focused-inside":"",p.isSelectingNode?"is-selecting-node":"",p.isSelectingAround?"is-selecting-around":""].join(" ");d.push(i.p.node(t,t+e.nodeSize,{class:m},p))}if((0,c.N5)(e)&&r.from<=t&&r.from<=t)return!1;if("table"===e.type.name&&r instanceof l.hA&&r.isColSelection()&&!r.isSelectingAllCells()){var h=r.$anchorCell.pos,g=s.rU.get(e).findCell(h-(t+1)).left;d.push(i.p.node(t,t+e.nodeSize,{},{isColumnSelected:!0,colNumber:g}))}}),i.EH.create(t.doc,d)}}}})]}})},93897:function(e,t,n){n.d(t,{v:function(){return r}});var r=function(e){return e.some(function(e){return e.spec.isFocusedInside})}},24336:function(e,t,n){n.d(t,{$1:function(){return I},Jg:function(){return O},m8:function(){return D},xd:function(){return M}});var r=n(95235),o=n(72338),i=n(98875),a=n(92527),c=n(46358),s=n(30341),l=n(62141),u=n(12691),d=n(59131),f=n(43227),p=n(17477),m=n(95472),h=n(41261),g=n(47592),v=n(34264),b=n(56261),y=n(33084);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(){return i.VH.get("presentModeFlat")},O=function(e,t){var n=t.pos?e.state.doc.nodeAt(t.pos):null;return n&&E(n,t.cardId)},k=function(e){var t=e.tr,n=e.editor,r=e.spotlight,o=e.bias,i=e.method;if(t.setMeta(y.M,r),y.M.getState(n.state).cardId!==r.cardId&&r.cardId){(0,f.D)({cardId:r.cardId,method:void 0===i?"replace":i,emitChange:!1});var a=(0,v.Bw)(n,r.cardId);a&&t.setSelection(d.c.create(t.doc,a.pos,void 0===o?0:o))}n.commands.user({spotlight:r})},C=function(e,t){if(t){var n=document.querySelector("".concat(e," ").concat((0,h.U8)(t)));n&&(null==n||n.classList.add("cardWiggle"),setTimeout(function(){null==n||n.classList.remove("cardWiggle")},750))}},P=function(e,t){var n=O(e,t),r=n&&t.cardId&&t.pos&&M(e,t.cardId,t.pos,function(e){return E(e,t.cardId)},!0).cardId!==t.cardId;return{isSpotlightingBlock:n,isSpotlightingFirstBlock:r}},S=function(e){switch(e.type.name){case"card":return!(0,g.HD)(e);case"toggle":return(0,b.fH)(e.attrs.id);default:return!1}},A=function(e){switch(e.type.name){case"card":return(0,g.Nn)(e.attrs.id,!0),!0;case"toggle":return(0,b.xB)(e.attrs.id,!1),!0;default:return!1}},E=function(e,t){switch(e.type.name){case"paragraph":case"heading":case"title":case"math_display":case"codeBlock":return e.textContent.trim().length>0||e.content.content.some(function(e){return"text"!==e.type.name});case"bullet":case"numbered":case"todo":case"embed":case"video":case"image":case"gallery":case"drawing":case"contributors":case"tableOfContents":case"toggleSummary":case"table":case"buttonGroup":case"gridCell":case"smartLayoutCell":return!0;case"toggle":return!(0,b.fH)(e.attrs.id);case"card":var n=(0,l.X9)((0,c.bh)().getState()).parents[e.attrs.id].slice(-1)[0];if(w())return!0===(0,g.HD)(e)&&!1===(0,g.HD)(n);return n===t;default:return!1}},D=function(e){switch(e.type.name){case"toggle":return(0,b.fH)(e.attrs.id);case"card":return!(0,g.HD)(e);case"footnote":case"gallery":case"gridCell":case"smartLayoutCell":case"table":return!1;default:return!0}},I=o.hj.create({name:"spotlight",addOptions:function(){return{scrollerSelector:"body"}},addCommands:function(){var e=this;return{syncSpotlightAndScroll:function(e){var t=e.spotlight,n=e.scroll,r=e.scrollOffset,o=e.isFollowing,i=void 0!==o&&o;return function(e){var o=e.editor,c=e.view,s=e.tr,l=t.pos,d=t.cardId,f=y.M.getState(o.state).cardId!==d;if(l){var p=c.state.doc.nodeAt(l),m=c.nodeDOM(l);if(p&&m instanceof HTMLElement){console.debug("[Spotlight.syncSpotlight] Scrolling to specific card at pos: ".concat(l),m);var g=(0,u.KH)(p)&&p.attrs.id===d;setTimeout(function(){return requestAnimationFrame(function(){g?_({}):L({element:m})})},f?h.id:0)}}else if(null!=n&&n.pos){var v=n.pos,b=n.pct;setTimeout(function(){return requestAnimationFrame(function(){o.commands.scrollToPositionInCard(v,b||void 0,r)})},f?h.id:0)}return(0,a.p7)({following:i}),(0,a.Pp)({cardId:d}),k({editor:o,tr:s,spotlight:{pos:l,cardId:d}}),!0}},spotlightCardById:function(e){return function(t){var n=t.editor,r=t.view;t.tr;var o=y.M.getState(n.state),i=(0,v.Bw)(n,e);if(!i)return!0;var a=n.state.doc.resolve(i.pos),c=a.depth>1&&w(),s=c?(0,h.AQ)(n,i.pos):i;if(s){var l=o.cardId!==e;if(c){(0,g.Nn)(e,!1),(0,h.pE)({pos:a.pos,editor:n});var u=r.nodeDOM(i.pos);u instanceof HTMLElement&&setTimeout(function(){return requestAnimationFrame(function(){L({element:u,behavior:"smooth"})})},l?h.id:0)}return n.commands.syncSpotlightAndScroll({spotlight:{pos:null,cardId:s.node.attrs.id}})}return!0}},spotlightCurrentCard:function(){return function(t){var n,r=t.editor,o=t.tr,i=function(){console.warn("[Spotlight.spotlightCurrentCard] Couldnt find a card to spotlight, so using first card.");var e=r.view.state.doc.nodeAt(1);return e&&(0,u.KH)(e)?k({editor:r,tr:o,spotlight:{pos:null,cardId:e.attrs.id}}):console.error("[Spotlight.spotlightCurrentCard] nodeAt(1) is unexpectedly not a card. Cannot spotlight"),!0};if(!document.querySelector(e.options.scrollerSelector))return i();var a=r.state.selection.from,c=a&&r.view.coordsAtPos(a);if(c&&c.top<window.innerHeight&&c.bottom>0)console.debug("%c [Spotlight.spotlightCurrentCard] Using cursor pos","background-color: deeppink",{posToUse:n=a});else{var s=(0,m.Je)(r,e.options.scrollerSelector,R+10).pos;console.debug("%c [Spotlight.spotlightCurrentCard] Using top center pos","background-color: deeppink",{posToUse:n=null==s?void 0:s.pos})}(!n||n<2)&&console.warn("%c [Spotlight.spotlightCurrentCard] Using fallback pos","background-color: deeppink",{posToUse:n=2});var l=w()?(0,h.AQ)(r,n):(0,h.J9)(r,n,!1);return l&&l.pos?(w()&&(0,h.pE)({editor:r,pos:n}),k({editor:r,tr:o,spotlight:{pos:null,cardId:l.node.attrs.id}}),!0):i()}},ascendUpToParentCard:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return function(n){var r=n.editor,i=n.view,c=n.tr,s=y.M.getState(r.state),l=s.pos;if(!l){var d=(0,m.Je)(r,e.options.scrollerSelector,window.innerHeight/2).pos;l=null==d?void 0:d.pos}if(!l)return!1;var f=r.view.state.doc.nodeAt(l),p=(0,h.J9)(r,l,!1);if(w())return!!p&&!!t&&(C(e.options.scrollerSelector,s.cardId),!0);if(!p)return!1;var g=(0,o.qv)(r.state.doc.resolve(p.pos),u.KH);if(!g)return p&&t&&C(e.options.scrollerSelector,p.node.attrs.id),!1;var v=i.nodeDOM(p.pos);if(!v)return console.warn("[Spotlight.ascendUpToParentCard] Cant find dom node",{domNode:v,presentingCard:p,parentOfPresentingCard:g,node:f,lastSpotlight:s}),!1;var b=g.node.attrs.id;return P(r,s).isSpotlightingBlock?r.commands.spotlightNextBlock(!1,{pos:g.pos,cardId:b}):((0,a.Pp)({cardId:b}),k({editor:r,tr:c,spotlight:{pos:null,cardId:b}}),N(L,h.nY)({element:v}),!0)}},descendIntoCurrentCard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return function(n){var r=n.editor,o=n.tr,i=y.M.getState(r.state),a=e||i.pos;if(w())return r.commands.spotlightExpandCard(a);if(!a)return!0;var c=r.view.state.doc.nodeAt(a);if(!(c&&(0,u.KH)(c)&&c.attrs.id!==i.cardId))return!0;var s=c.attrs.id,l=P(r,i).isSpotlightingBlock;return(console.debug("[Spotlight.descendIntoCurrentCard]",{node:c,isSpotlightingBlock:l}),l)?r.commands.spotlightNextBlock(!1,{pos:a,cardId:s}):(k({editor:r,tr:o,spotlight:{pos:null,cardId:s},method:t}),setTimeout(function(){requestAnimationFrame(function(){_({})})},h.id),!0)}},spotlightCollapseCard:function(e){return function(t){var n=t.editor,r=t.tr;if(!w())return n.commands.ascendUpToParentCard();var o=n.view.state.doc.nodeAt(e);if(!o||!(0,u.KH)(o))return console.warn("[Spotlight.spotlightCollapseCard] pos does not resolve to a card node. This is a noop",e),!0;var i=y.M.getState(n.state),a=o.attrs.id;return(0,g.Nn)(a,!0),k({editor:n,tr:r,spotlight:i}),(0,s.cC)("editor").scrollElementIntoView({element:n.view.nodeDOM(e),attempts:0,offsetFromTop:null}),!0}},spotlightCollapseNearestExpandableNode:function(e){return function(t){var n=t.editor,r=t.tr,i=y.M.getState(n.state),a=e||n.state.selection.from,c={pos:a,node:n.view.state.doc.nodeAt(a)};if(!c.node||!S(c.node)){var l=(0,o.qv)(n.state.doc.resolve(a),S);c.node=(null==l?void 0:l.node)||null,c.pos=(null==l?void 0:l.pos)||0}var u=c.pos&&(0,h.AQ)(n,c.pos);if(!c.node||!c.pos||!u||u.node.attrs.id===c.node.attrs.id)return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] pos does not resolve to a valid collapsible node. This is a noop",c.pos),!1;if(!(u.pos<=c.pos&&u.pos+u.node.nodeSize>=c.pos))return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] posToUse is outside of the presenting card. This is a noop",c.pos),!1;console.log("[Spotlight.spotlightCollapseNearestExpandableNode]",{result:c});var f=A(c.node);return f&&((0,s.cC)("editor").scrollElementIntoView({element:n.view.nodeDOM(c.pos),attempts:0,offsetFromTop:null}),c.pos===n.state.selection.from?n.commands.reHighlightExpandableNode():r.setSelection(d.c.create(n.state.doc,c.pos)),O(n,i)&&k({editor:n,tr:r,spotlight:{pos:c.pos,cardId:u.node.attrs.id}})),f}},spotlightExpandCard:function(e){return function(t){var n=t.editor,r=y.M.getState(n.state),o=e&&n.view.state.doc.nodeAt(e);if(!o||!(0,u.KH)(o))return console.warn("[Spotlight.spotlightExpandCard] pos does not resolve to a card node. This is a noop",e),!0;var i=o.attrs.id,a=P(n,r).isSpotlightingBlock;return(0,g.Nn)(i,!1),console.debug("[Spotlight.spotlightExpandCard]",{node:o,isSpotlightingBlock:a}),setTimeout(function(){a?n.commands.spotlightNextBlock(!1,{pos:e,cardId:i},"smooth"):n.commands.scrollToPositionInCard(e,0,50)},h.nY),!0}},spotlightNextExpandedCard:function(t){return function(n){var r=n.editor,o=n.commands,i=y.M.getState(r.state);if(!i.pos||!i.cardId)return!0;var a=(0,h.AQ)(r,i.pos),c=(0,v._O)(r,i.pos);if(!a||!c)return!0;var s={node:null,pos:null,cardId:null},l=i.pos;return(r.state.doc.descendants(function(e,n,o){if(!t&&s.pos)return!1;var i=!(0,g.HD)(e);if(!((0,u.KH)(e)&&i&&(t?n<l:n>l)))return i;var a=e!==c.node||!t;return a||(a=!P(r,{pos:l,cardId:e.attrs.id}).isSpotlightingFirstBlock),a&&(s.node=e,s.pos=n,s.cardId=e.attrs.id),i}),s.pos&&s.cardId)?o.spotlightNextBlock(!1,{pos:s.pos,cardId:s.cardId}):(C(e.options.scrollerSelector,a.node.attrs.id),!0)}},spotlightNextCard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return function(n){var r=n.editor,i=n.commands,c=n.tr,s=y.M.getState(r.state),l=s.pos,d=P(r,s),f=d.isSpotlightingBlock,p=d.isSpotlightingFirstBlock;if(f&&w())return i.spotlightNextExpandedCard(e);if(!l){var m=(0,v.Bw)(r,s.cardId);l=null==m?void 0:m.pos}if(!l)return console.warn("[Spotlight.spotlightNextCard] Could not find posToUse",{lastSpotlight:s}),!1;var g=r.view.state.doc.nodeAt(l),b=!!(g&&e&&f&&!p&&g.attrs.id!==s.cardId),x=g&&s.cardId&&g.attrs.id===s.cardId?{node:g,pos:l}:(0,o.qv)(r.state.doc.resolve(l),u.KH),j=b?x:null!=x&&x.pos?z(r,x.pos,e):null;if(j&&null!==j.pos){console.debug("[Spotlight.spotlightNextCard] Found next card:",{next:j,posToUse:l,isSpotlightingBlock:f});var O=j.node.attrs.id,C=j.pos;if(f)return r.commands.spotlightNextBlock(!1,{pos:C,cardId:O});(0,a.Pp)({cardId:O}),k({editor:r,tr:c,bias:e?1:-1,spotlight:{pos:null,cardId:O}});var S=s.cardId!==O,A="top"==t?_:H;null!==t&&setTimeout(function(){A({sync:!0,behavior:"auto"})},S?h.id:0)}else console.debug("[Spotlight.spotlightNextCard] No next node. Will attempt to ascendUp",{lastSpotlight:s,posToUse:l,node:g}),r.commands.ascendUpToParentCard();return!0}},spotlightNextBlock:function(t,n,r){return function(o){var i=o.editor,c=o.tr,s=y.M.getState(i.state);if(!s.cardId)return!0;var l=i.state.selection,u=l instanceof d.c,f=u&&(-1===l.side&&t||1===l.side&&!t)?-1:0,p=u?t?l.to+f:l.from+f:void 0,m=(null==n?void 0:n.cardId)||s.cardId,g=(null==n?void 0:n.pos)||s.pos||p,v=g?M(i,m,g,E,t):T(i,s.cardId,e.options.scrollerSelector,t),b=v.pos,x=v.cardId,j=v.domNode;if(null!==b&&j instanceof HTMLElement){var O,C=w()?null===(O=(0,h.AQ)(i,b))||void 0===O?void 0:O.node.attrs.id:x;if(!C)return!0;(0,a.Pp)({cardId:C}),console.debug("%c [Spotlight.spotlightNextBlock]","background-color: deeppink",{prevCardId:s.cardId,cardId:C,pos:b}),setTimeout(function(){L({element:j,behavior:r})},s.cardId===C?0:h.id),k({editor:i,tr:c,bias:t?1:-1,spotlight:{pos:b,cardId:C}})}else i.commands.ascendUpToParentCard();return!0}},turnOffSpotlight:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var n=t.editor,r=t.tr,o=y.M.getState(n.state);return k({editor:n,tr:r,spotlight:{pos:null,cardId:e?null:o.cardId}}),!0}},scrollToPositionInCard:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(r){var o=r.editor,i=(0,p.N_)((0,m.fW)(o,e)),a=null==i?void 0:i.getBoundingClientRect();if(!i||!a)return!0;var c=(t||0)*a.height;return console.debug("%c [Spotlight.scrollToPositionInCard]","background-color: deeppink",JSON.stringify({pos:e,offset:n-c}),i),(0,p.wO)({element:i,color:"deeppink",requiredCookie:"spotlightScrollDebug=true"}),L({element:i,offset:n-c}),!0}},scrollToNodeWithPin:function(e,t){return function(){return console.debug("%c [Spotlight.scrollToNodeWithPin] WITH NODE","background-color: deeppink",{scrollToNode:e}),N(L,h.nY,0)({element:e,offset:t}),!0}}}},addProseMirrorPlugins:function(){return[(0,y.O)(function(e,t){return E(e,t)})]}}),z=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.view.state.doc.nodeAt(t),a=i&&(0,u.KH)(i)?{node:i,pos:t}:(0,o.qv)(e.state.doc.resolve(t),u.KH);if(a){var c=e.state.doc.resolve(r?a.pos:a.pos+(null===(n=a.node)||void 0===n?void 0:n.nodeSize)),s=r?c.nodeBefore:c.nodeAfter;if(s){var l=r?c.pos-s.nodeSize:c.pos;if((0,u.KH)(s))return console.debug("[Spotlight.findNextDirectSiblingCard]",{nextNode:s,nextPos:l}),{node:s,pos:l}}}},T=function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={node:null,pos:null,cardId:null,domNode:null},a=(null===(r=(0,m.Je)(e,n,R+10).pos)||void 0===r?void 0:r.inside)||null,c=a?e.state.doc.nodeAt(a):null;if(!a||!c)return i;if(c.attrs.id===t)return M(e,t,a,function(e){return E(e,t)},o);var s=e.state.doc.resolve(a),l=(0,v._O)(e,s.before());if(!l)return i;var u=s.before(l.depth+2),d=e.state.doc.nodeAt(u);if(d&&E(d,t)){var f=e.state.doc.resolve(u);return i.pos=f.pos,i.node=d,i.cardId=null==l?void 0:l.node.attrs.id,i.domNode=e.view.nodeDOM(i.pos),i}return M(e,t,u,function(e){return E(e,t)},o)},M=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={node:null,pos:null,cardId:null,domNode:null},c=e.state.doc.resolve(n),s=e.view.state.doc.nodeAt(n),l=(0,o.qv)(c,function(e){return(0,u.KH)(e)&&e.attrs.id===t}),d=s&&(0,u.KH)(s)&&(null==s?void 0:s.attrs.id)===t?{node:s,pos:n}:l;if(!d)return console.debug("[Spotlight.findNextNode] - No card found:",{cardId:t,from:n,node:s}),a;var f=function(e,t){var o=e.attrs.id;e.descendants(function(c,s){var l=t+s+1,u=r(c,o)&&(i?l<n:l>n);return(!!i||!a.node)&&(u&&(a.node=c,a.pos=l,a.cardId=e.attrs.id),D(c))})};f(d.node,d.pos);for(var p=d.pos;null===a.pos;){var m=z(e,p,i);if(m)f(m.node,m.pos),p=m.pos;else break}return null!==a.pos&&(a.domNode=e.view.nodeDOM(a.pos)),console.debug("[Spotlight.findNextNode]",{result:a}),a},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(r){var o,i=j(j({},r),{},{sync:!0,behavior:"auto"});e(i);var a=!1;Promise.race([new Promise(function(e){return setTimeout(function(){return e(!1)},n+t+300)}),new Promise(function(e){o=function(){return e(!0)},r.element.addEventListener("transitionend",o)})]).then(function(e){console.debug("[scrollTo withDurationPin] transitionend race result",e),a=!0}).finally(function(){r.element.removeEventListener("transitionend",o)});var c=+new Date;setTimeout(function r(){return requestAnimationFrame(function(){e(i),(+new Date-c<t+n||!a)&&r()})},n)}},R=150,L=function(e){var t=e.element,n=e.sync,r=e.behavior,o=e.offset,i=void 0===o?R:o;if(!(0,p.cd)(t)){var a=t.querySelector("[data-content-reference]");if(!a||!(0,p.cd)(a))return;t=a}var c=(0,s.cC)("editor"),l=(0,p.LY)(t,c.scrollSelector);c.scrollTo({top:l-i,sync:void 0!==n&&n,behavior:void 0===r?"smooth":r})},_=function(e){var t=e.sync,n=e.behavior;(0,s.cC)("editor").scrollTo({top:0,behavior:void 0===n?"smooth":n,sync:void 0!==t&&t})},H=function(e){var t=e.sync,n=e.behavior,r=(0,s.cC)("editor"),o=r.scroller;o&&r.scrollTo({top:o.scrollHeight,behavior:void 0===n?"smooth":n,sync:void 0!==t&&t})}},89814:function(e,t,n){n.d(t,{g:function(){return l},j:function(){return u}});var r=n(18149),o=n.n(r),i=n(2784),a=n(46358),c=n(62141),s=n(24336),l=function(e){var t=(0,a.CG)(c.k8,function(){return o().apply(void 0,arguments)});return(0,i.useMemo)(function(){return{enabled:!!(e&&t&&(0,s.Jg)(e,t)),pos:null==t?void 0:t.pos}},[e,t])},u=function(e){var t=(0,a.CG)(c.ks),n=(0,a.CG)(c.Vt,function(){return o().apply(void 0,arguments)});(0,i.useEffect)(function(){if(e&&t&&n){console.debug("[useScrollAndSpotlightSync] collaboratorBeingFollowed spotlight or scroll changed",JSON.stringify(n,null,2));var r=n.spotlight,o=n.scroll;e.commands.syncSpotlightAndScroll({spotlight:r,scroll:o,scrollOffset:100,isFollowing:!0})}},[e,t,n])}},91718:function(e,t,n){n.d(t,{$1:function(){return r.$1},jB:function(){return o.j}});var r=n(24336),o=n(89814)},33084:function(e,t,n){n.d(t,{M:function(){return d},O:function(){return p}});var r=n(95235),o=n(38564),i=n(27191),a=n(52780),c=n(12691),s=n(24336);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=new i.H$("spotlight"),f=function(e,t,n){if(null===t.pos)return a.EH.create(e.doc,[]);var r=[],o=e.doc.nodeAt(t.pos);return o&&(0,c.KH)(o)&&!n(o,t.cardId)?r.push(a.p.node(t.pos,t.pos+o.nodeSize,{class:"presenting-card"})):o&&n(o,t.cardId)&&r.push(a.p.node(t.pos,t.pos+o.nodeSize,{class:"spotlight-block"})),e.doc.descendants(function(e,o){return n(e,t.cardId)&&r.push(a.p.node(o,o+e.nodeSize,{class:"spotlightable"})),(0,s.m8)(e)||(0,c.KH)(e)}),a.EH.create(e.doc,r)},p=function(e){return new i.Sy({key:d,state:{init:function(t,n){var r={pos:null,cardId:""};return u(u({},r),{},{decorations:f(n,r,e)})},apply:function(t,n,r,i){var a=o.Gt.getState(i),c=t.getMeta(d),s=a&&a.isChangeOrigin;if(c||s){var l=c||n;return u(u({},l),{},{decorations:f(i,l,e)})}var p=n.decorations.map(t.mapping,t.doc);return u(u({},n),{},{decorations:p})}},props:{attributes:function(t){var n=d.getState(t);if(!n||null===n.pos)return{class:""};var r=t.doc.nodeAt(n.pos);return r&&e(r,n.cardId)?{class:"spotlight-active"}:{class:""}},decorations:function(e){var t=d.getState(e);return t?t.decorations:null}}})}},20205:function(e,t,n){n.d(t,{FK:function(){return v},fI:function(){return g},hA:function(){return m}});var r=n(96412),o=n(13089),i=n(90129),a=n(29017),c=n(48200),s=n(30764),l=n(27191),u=n(52780),d=n(35997),f=n(49450),p=n(16035),m=function(e){(0,i.Z)(u,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(u);if(t){var r=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;(0,r.Z)(this,u),(t=n.call(this,e,o)).$anchorCell=e,t.$headCell=o;var i=e.node(-1),a=f.r.get(i),c=e.start(-1),s=a.rectBetween(e.pos-c,o.pos-c),d=e.node(0),p=a.cellsInRect(s).filter(function(e){return e!=o.pos-c});p.unshift(o.pos-c);var m=p.map(function(e){var t=i.nodeAt(e),n=e+c+1;return new l.xm(d.resolve(n),d.resolve(n+t.content.size))});return(t=n.call(this,m[0].$from,m[0].$to,m)).$anchorCell=e,t.$headCell=o,t.$anchorCell=e,t.$headCell=o,t}return(0,o.Z)(u,[{key:"map",value:function(e,t){var n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if((0,p.Fn)(n)&&(0,p.Fn)(r)&&(0,p.yL)(n,r)){var o=this.$anchorCell.node(-1)!=n.node(-1);return o&&this.isRowSelection()?u.rowSelection(n,r):o&&this.isColSelection()?u.colSelection(n,r):new u(n,r)}return l.Bs.between(n,r)}},{key:"content",value:function(){for(var e=this.$anchorCell.node(-1),t=f.r.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var c=[],l=a*t.width+r.left,u=r.left;u<r.right;u++,l++){var d=t.map[l];if(!o[d]){o[d]=!0;var m=t.findCell(d),h=e.nodeAt(d),g=r.left-m.left,v=m.right-r.right;if(g>0||v>0){var b=h.attrs;g>0&&(b=(0,p.H6)(b,0,g)),v>0&&(b=(0,p.H6)(b,b.colspan-v,v)),h=m.left<r.left?h.type.createAndFill(b):h.type.create(b,h.content)}if(m.top<r.top||m.bottom>r.bottom){var y=(0,p.fi)(h.attrs,"rowspan",Math.min(m.bottom,r.bottom)-Math.max(m.top,r.top));h=m.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}c.push(h)}}i.push(e.child(a).copy(s.HY.from(c)))}var x=this.isColSelection()&&this.isRowSelection()?e:i;return new s.p2(s.HY.from(x),1,1)}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.p2.empty,n=e.steps.length,r=this.ranges;if(0===t.size){if(this.isSelectingAllCells()){(0,d.Lh)(this,e);return}if(this.isRowSelection()){(0,d.A_)(this,e);return}if(this.isColSelection()){(0,d.oU)(this,e);return}}for(var o=0;o<r.length;o++){var i=r[o],a=i.$from,c=i.$to,u=e.mapping.slice(n);e.replace(u.map(a.pos),u.map(c.pos),o?s.p2.empty:t)}var f=l.Y1.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);f&&e.setSelection(f)}},{key:"replaceWith",value:function(e,t){this.replace(e,new s.p2(s.HY.from(t),0,0))}},{key:"getTableNode",value:function(){return this.$anchorCell.node(-1)}},{key:"isSelectingAllCells",value:function(){return f.r.get(this.$anchorCell.node(-1)).map.length===this.ranges.length}},{key:"everyCell",value:function(e){var t=!0;return this.forEachCell(function(n,r){e(n,r)||(t=!1)}),t}},{key:"forEachCell",value:function(e){for(var t=this.$anchorCell.node(-1),n=f.r.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}},{key:"isColSelection",value:function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}},{key:"isRowSelection",value:function(){var e=f.r.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);return!(Math.min(n,r)>0)&&Math.max(n+this.$anchorCell.nodeAfter.attrs.colspan,r+this.$headCell.nodeAfter.attrs.colspan)==e.width}},{key:"eq",value:function(e){return e instanceof u&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}},{key:"toJSON",value:function(){return{type:"CellSelection2",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}},{key:"getBookmark",value:function(){return new h(this.$anchorCell.pos,this.$headCell.pos)}}],[{key:"colSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=f.r.get(e.node(-1)),r=e.start(-1),o=n.findCell(e.pos-r),i=n.findCell(t.pos-r),a=e.node(0);return o.top<=i.top?(o.top>0&&(e=a.resolve(r+n.map[o.left])),i.bottom<n.height&&(t=a.resolve(r+n.map[n.width*(n.height-1)+i.right-1]))):(i.top>0&&(t=a.resolve(r+n.map[i.left])),o.bottom<n.height&&(e=a.resolve(r+n.map[n.width*(n.height-1)+o.right-1]))),new u(e,t)}},{key:"rowSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=f.r.get(e.node(-1)),r=e.start(-1),o=n.findCell(e.pos-r),i=n.findCell(t.pos-r),a=e.node(0);return o.left<=i.left?(o.left>0&&(e=a.resolve(r+n.map[o.top*n.width])),i.right<n.width&&(t=a.resolve(r+n.map[n.width*(i.top+1)-1]))):(i.left>0&&(t=a.resolve(r+n.map[i.top*n.width])),o.right<n.width&&(e=a.resolve(r+n.map[n.width*(o.top+1)-1]))),new u(e,t)}},{key:"fromJSON",value:function(e,t){return new u(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new u(e.resolve(t),e.resolve(n))}}]),u}(l.Y1);if(!m.prototype.jsonID)try{l.Y1.jsonID("CellSelection2",m)}catch(e){}var h=function(){function e(t,n){(0,r.Z)(this,e),this.anchor=t,this.head=n,this.anchor=t,this.head=n}return(0,o.Z)(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&(0,p.yL)(t,n)?new m(t,n):l.Y1.near(n,1)}}]),e}();function g(e){if(!(e.selection instanceof m))return null;var t=[];return e.selection.forEachCell(function(e,n){t.push(u.p.node(n,n+e.nodeSize,{class:"selectedCell"}))}),u.EH.create(e.doc,t)}function v(e,t,n){var r,o,i=(t||e).selection,a=(t||e).doc;if(i instanceof l.qv&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=m.create(a,i.from);else if("row"==o){var c=a.resolve(i.from+1);r=m.rowSelection(c,c)}else if(!n){var s=f.r.get(i.node),u=i.from+1,d=u+s.map[s.width*s.height-1];r=m.create(a,u+1,d)}}else i instanceof l.Bs&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;a>=0&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(i)?r=l.Bs.create(a,i.from):i instanceof l.Bs&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var c=o.depth;c>0;c--){var s=o.node(c);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){n=s;break}}return t!==n&&0===o.parentOffset}(i)&&(r=l.Bs.create(a,i.$from.start(),i.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}},70743:function(e,t,n){n.d(t,{CO:function(){return h},GI:function(){return p},RS:function(){return a},Ux:function(){return m},Z7:function(){return g}});var r=n(12741),o=n(68015),i=n.n(o),a=function(e){for(var t=i()(100/e,2),n=[],r=0;r<e;r++)n.push(t);return n},c=function(e,t,n,r){return r?l(e,t,n):s(e,t)},s=function(e,t){for(var n=0,r=[],o=t+1;o<e.length;o++)n+=e[o],r.push(o);for(var i=[],a=0;a<e.length;a++){if(!r.includes(a)){i.push(0);continue}var c=e[a];i.push(c/n)}return i},l=function(e,t,n){for(var r=0,o=[],i=t+1;i<e.length;i++){var a=e[i];a>n&&(r+=a,o.push(i))}for(var c=[],s=0;s<e.length;s++){if(!o.includes(s)){c.push(0);continue}var l=e[s];c.push(l/r)}return c},u=function(e){for(var t=e.reduce(function(e,t){return e+t},0),n=[],r=0;r<e.length;r++)n.push(e[r]/t);return n},d=function(e,t,n){for(var r=0,o=[],i=0;i<e.length;i++)if(i!==t){var a=e[i];a>n&&(r+=a,o.push(i))}for(var c=[],s=0;s<e.length;s++){if(s===t){c.push(0);continue}var l=e[s];if(l<=n){c.push(0);continue}c.push(l/r)}return c},f=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=0,i=0;i<e.length;i++){var a=t*n[i];a<0&&(a=Math.max(r-e[i],a)),o+=a,e[i]+=a}return o},p=function(e,t,n,o){for(var i=(0,r.Z)(e),a=e[t],s=a-o,l=e.reduce(function(e,n,r){return r<t?e+n:r>t?e+o:e},0),u=n>0?Math.min(n,100-l-a):Math.max(-s,n),d=c(i,t,o,u>0),p=Math.abs(u),m=u>0,h=0;p>.001;){var g=Math.min(p,1);m&&(g*=-1);var b=f(i,g,d,o);if(i[t]-=b,p-=Math.abs(b),d=c(i,t,o,u>0),++h>1e3)break}return v(i,o),i},m=function(e,t,n){return h(e,e.length,t,n).length!==e.length},h=function(e,t,n,o){var i=n,a=(0,r.Z)(e);a.splice(t,0,0);for(var c=d(a,t,o),s=!1;i>.001;){if(c.every(function(e){return 0===e})){s=!0;break}var l=f(a,-Math.min(i,1),c,o);a[t]-=l,c=d(a,t,o),i-=Math.abs(l)}return s?e:(v(a,o),a)},g=function(e,t){var n=0,o=t.sort(function(e,t){return t-e}),i=(0,r.Z)(e);o.forEach(function(t){n+=e[t],i.splice(t,1)});for(var a=u(i);n>.001;){var c=f(i,Math.min(n,1),a);a=u(i),n-=Math.abs(c)}return v(i,0),i},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=0;e.forEach(function(t,n){var o=Math.round(100*t);e[n]=o,r+=o});for(var o=100*n-r,i=Math.abs(o),a=0;i>0;){var c=o<0?-1:1,s=a%e.length;if(void 0!==t&&c<0&&e[s]<=100*t){a++;continue}e[s]+=c,a++,i--}for(var l=0;l<e.length;l++)e[l]=e[l]/100}},35997:function(e,t,n){n.d(t,{A_:function(){return j},Cr:function(){return k},Fw:function(){return T},II:function(){return D},JX:function(){return O},Lh:function(){return z},Wf:function(){return g},_W:function(){return M},dl:function(){return x},lm:function(){return A},mh:function(){return N},nA:function(){return I},oU:function(){return v},sr:function(){return E},wb:function(){return C},z2:function(){return y},zN:function(){return h}});var r=n(12741),o=n(95235),i=n(30764),a=n(27191),c=n(28703),s=n(20205),l=n(70743),u=n(66176),d=n(49450),f=n(16035);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e){var t=(0,f.Le)(e),n=t.node(-1),r=t.start(-1),o=d.r.get(n);return m(m({},e instanceof s.hA?o.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r):o.findCell(t.pos-r)),{},{map:o,table:n,tableStart:r})}function g(e,t){var n=t.tableStart,o=t.col,i=t.table,a=t.colMinPercent,c=t.newColSize,s=void 0===c?20:c,p=d.r.get(i),m=o>0?-1:0;(0,f.a2)(p,i,o+m)&&(m=0==o||o==p.width?null:0);for(var h=0;h<p.height;h++){var g=h*p.width+o;if(o>0&&o<p.width&&p.map[g-1]==p.map[g]){var v=p.map[g],b=i.nodeAt(v);e.setNodeMarkup(e.mapping.map(n+v),void 0,(0,f.hl)(b.attrs,o-p.colCount(v))),h+=b.attrs.rowspan-1}else{var y=null==m?(0,u.F)(i.type.schema).cell:i.nodeAt(p.map[g+m]).type,x=p.positionAt(h,o,i);e.insert(e.mapping.map(n+x),y.createAndFill())}}var j=i.attrs.colWidths,w=(0,l.CO)(j,o,s,a);return j.length===w.length?(e.setMeta("preventDispatch",!0),!1):(e.setNodeMarkup(n-1,void 0,{colWidths:(0,r.Z)(w)}),!0)}function v(e,t,n){if(!(0,f.Lw)(e))return!1;var r=h(e);if(0==r.left&&r.right==r.map.width)return!1;for(var o=[],i=r.right-1;!function(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,a=e.mapping.maps.length,c=0;c<r.height;){var s=c*r.width+n,l=r.map[s],u=i.nodeAt(l);if(n>0&&r.map[s-1]==l||n<r.width-1&&r.map[s+1]==l)e.setNodeMarkup(e.mapping.slice(a).map(o+l),void 0,(0,f.H6)(u.attrs,n-r.colCount(l)));else{var d=e.mapping.slice(a).map(o+l);e.delete(d,d+u.nodeSize)}c+=u.attrs.rowspan}}(t,r,i),o.push(i),i!=r.left;i--)r.table=r.tableStart?t.doc.nodeAt(r.tableStart-1):t.doc,r.map=d.r.get(r.table);var c=(0,l.Z7)(r.table.attrs.colWidths,o);if(t.setNodeMarkup(r.tableStart-1,void 0,{colWidths:c}),r.right===r.map.width){var s=r.tableStart+r.map.positionAt(0,r.left-1,r.table),u=t.doc.resolve(s),p=a.Y1.near(u);t.setSelection(p)}return n&&n(t),!0}function b(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,a=o,c=0;c<n;c++)a+=i.child(c).nodeSize;var s=[],l=n>0?-1:0;(function(e,t,n){for(var r=(0,u.F)(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0})(r,i,n+l)&&(l=0==n||n==r.height?null:0);for(var d=0,p=r.width*n;d<r.width;d++,p++)if(n>0&&n<r.height&&r.map[p]==r.map[p-r.width]){var m=r.map[p],h=i.nodeAt(m).attrs;e.setNodeMarkup(o+m,void 0,(0,f.fi)(h,"rowspan",h.rowspan+1)),d+=h.colspan-1}else{var g=null==l?(0,u.F)(i.type.schema).cell:i.nodeAt(r.map[p+l*r.width]).type;s.push(g.createAndFill())}return e.insert(a,(0,u.F)(i.type.schema).row.create(null,s)),e}function y(e,t){if(!(0,f.Lw)(e.selection))return!1;if(t){var n=h(e.selection);t(b(e.tr,n,n.top))}return!0}function x(e,t){if(!(0,f.Lw)(e.selection))return!1;if(t){var n=h(e.selection);t(b(e.tr,n,n.bottom))}return!0}function j(e,t,n){if(!(0,f.Lw)(e))return!1;var r=h(e);if(0==r.top&&r.bottom==r.map.height)return!1;for(var o=r.bottom-1;!function(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,c=0;c<n;c++)a+=o.child(c).nodeSize;var s=a+o.child(n).nodeSize,l=e.mapping.maps.length;e.delete(a+i,s+i);for(var u=0,d=n*r.width;u<r.width;u++,d++){var p=r.map[d];if(n>0&&p==r.map[d-r.width]){var m=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(l).map(p+i),void 0,(0,f.fi)(m,"rowspan",m.rowspan-1)),u+=m.colspan-1}else if(n<r.width&&p==r.map[d+r.width]){var h=o.nodeAt(p),g=h.type.create((0,f.fi)(h.attrs,"rowspan",h.attrs.rowspan-1),h.content),v=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(l).map(i+v),g),u+=h.attrs.colspan-1}}}(t,r,o),o!=r.top;o--)r.table=r.tableStart?t.doc.nodeAt(r.tableStart-1):t.doc,r.map=d.r.get(r.table);if(r.bottom===r.map.height){var i=r.tableStart+r.map.positionAt(r.top-1,0,r.table),c=t.doc.resolve(i),s=a.Y1.near(c);t.setSelection(s)}return n&&n(t),!0}function w(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function O(e,t){var n=e.selection;if(!(n instanceof s.hA)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=h(e.selection),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,c=(t.bottom-1)*n+t.left,s=i+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&o[a]==o[a-1]||t.right<n&&o[s]==o[s+1])return!0;a+=n,s+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[c]==o[c+n])return!0;i++,c++}return!1}(o,r))return!1;if(t){for(var a,c,l=e.tr,u={},d=i.HY.empty,p=r.top;p<r.bottom;p++)for(var m=r.left;m<r.right;m++){var g=o.map[p*o.width+m],v=r.table.nodeAt(g);if(!u[g]){if(u[g]=!0,null==a)a=g,c=v;else{w(v)||(d=d.append(v.content));var b=l.mapping.map(g+r.tableStart);l.delete(b,b+v.nodeSize)}}}if(l.setNodeMarkup(a+r.tableStart,void 0,(0,f.fi)((0,f.hl)(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),"rowspan",r.bottom-r.top)),d.size){var y=a+1+c.content.size,x=w(c)?a+1:y;l.replaceWith(x+r.tableStart,y+r.tableStart,d)}l.setSelection(new s.hA(l.doc.resolve(a+r.tableStart))),t(l)}return!0}function k(e,t){var n,r=(0,u.F)(e.schema);return(n=function(e){return r[e.node.type.spec.tableRole]},function(e,t){var r=e.selection;if(r instanceof s.hA){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(!(o=(0,f.Dq)(r.$from)))return!1;i=(0,f.m9)(r.$from).pos}if(1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(t){var o,i,a,c=o.attrs,l=[],u=c.colwidth;c.rowspan>1&&(c=(0,f.fi)(c,"rowspan",1)),c.colspan>1&&(c=(0,f.fi)(c,"colspan",1));for(var d=h(e.selection),p=e.tr,m=0;m<d.right-d.left;m++)l.push(u?(0,f.fi)(c,"colwidth",u&&u[m]?[u[m]]:null):c);for(var g=d.top;g<d.bottom;g++){var v=d.map.positionAt(g,d.left,d.table);g==d.top&&(v+=o.nodeSize);for(var b=d.left,y=0;b<d.right;b++,y++)(b!=d.left||g!=d.top)&&p.insert(a=p.mapping.map(v+d.tableStart,1),n({node:o,row:g,col:b}).createAndFill(l[y]))}p.setNodeMarkup(i,n({node:o,row:d.top,col:d.left}),l[0]),r instanceof s.hA&&p.setSelection(new s.hA(p.doc.resolve(r.$anchorCell.pos),a&&p.doc.resolve(a))),t(p)}return!0})(e,t)}function C(e,t){return function(n,r){if(!(0,f.Lw)(n.selection))return!1;var o,i=(0,f.Le)(n.selection);if((null===(o=i.nodeAfter)||void 0===o?void 0:o.attrs[e])===t)return!1;if(r){var a=n.tr;n.selection instanceof s.hA?n.selection.forEachCell(function(n,r){n.attrs[e]!==t&&a.setNodeMarkup(r,void 0,(0,f.fi)(n.attrs,e,t))}):a.setNodeMarkup(i.pos,void 0,(0,f.fi)(i.nodeAfter.attrs,e,t)),r(a)}return!0}}function P(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function S(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t,n){if(!(0,f.Lw)(t.selection))return!1;if(n){for(var r=(0,u.F)(t.schema),o=h(t.selection),i=t.tr,a=o.map.cellsInRect("column"==e?new d.U(o.left,0,o.right,o.map.height):"row"==e?new d.U(0,o.top,o.map.width,o.bottom):o),c=a.map(function(e){return o.table.nodeAt(e)}),s=0;s<a.length;s++)c[s].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[s],r.cell,c[s].attrs);if(0==i.steps.length)for(var l=0;l<a.length;l++)i.setNodeMarkup(o.tableStart+a[l],r.header_cell,c[l].attrs);n(i)}return!0}:function(t,n){if(!(0,f.Lw)(t.selection))return!1;if(n){var r=(0,u.F)(t.schema),o=h(t.selection),i=t.tr,a=P("row",o,r),c=P("column",o,r),s=("column"===e?a:"row"===e&&c)?1:0,l="column"==e?new d.U(0,s,1,o.map.height):"row"==e?new d.U(s,0,o.map.width,1):o,p="column"==e?c?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach(function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,p,n.attrs)}),n(i)}return!0}}var A=S("row",{useDeprecatedLogic:!0}),E=S("column",{useDeprecatedLogic:!0}),D=S("cell",{useDeprecatedLogic:!0});function I(e){return function(t,n){if(!(0,f.Lw)(t.selection))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var a=e.node(-1),c=e.indexAfter(-1),s=e.after();c<a.childCount;c++){var l=a.child(c);if(l.childCount)return s+1;s+=l.nodeSize}}}((0,f.Le)(t.selection),e);if(null==r)return!1;if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(a.Bs.between(o,(0,f.SZ)(o))).scrollIntoView())}return!0}}function z(e,t,n){for(var r=e.$anchor,o=r.depth;o>0;o--)if("table"==r.node(o).type.spec.tableRole){t.delete(r.before(o),r.after(o)).scrollIntoView();var i=(0,c.a)(t);return i&&t.setSelection(i),n&&n(t),!0}return!1}var T=function(e,t,n){return e instanceof s.hA&&!!(e.isSelectingAllCells()&&e.everyCell(w))&&z(e,t,n)},M=function(e,t,n){return!!(e instanceof s.hA&&e.isRowSelection())&&!!e.everyCell(w)&&j(e,t,n)},N=function(e,t,n){return!!(e instanceof s.hA&&e.isColSelection())&&!!e.everyCell(w)&&v(e,t,n)}},29262:function(e,t,n){n.d(t,{Xc:function(){return o.hA},rU:function(){return a.r},Wf:function(){return V.Wf},dl:function(){return V.dl},z2:function(){return V.z2},VH:function(){return Z},mh:function(){return V.mh},oU:function(){return V.oU},A_:function(){return V.A_},_W:function(){return V._W},Lh:function(){return V.Lh},Fw:function(){return V.Fw},tp:function(){return l},nA:function(){return V.nA},Lw:function(){return c.Lw},JX:function(){return V.JX},zN:function(){return V.zN},wb:function(){return V.wb},Cr:function(){return V.Cr},G3:function(){return $},II:function(){return V.II},sr:function(){return V.sr},lm:function(){return V.lm}});var r=n(27191),o=n(20205),i=n(66176),a=n(49450),c=n(16035),s=new r.H$("fix-tables");function l(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o,l,u=a.r.get(t);if(!u.problems)return r;r||(r=e.tr);for(var d=[],f=0;f<u.height;f++)d.push(0);for(var p=0;p<u.problems.length;p++){var m=u.problems[p];if("collision"==m.type){for(var h=t.nodeAt(m.pos),g=0;g<h.attrs.rowspan;g++)d[m.row+g]+=m.n;r.setNodeMarkup(r.mapping.map(n+1+m.pos),void 0,(0,c.H6)(h.attrs,h.attrs.colspan-m.n,m.n))}else if("missing"==m.type)d[m.row]+=m.n;else if("overlong_rowspan"==m.type){var v=t.nodeAt(m.pos);r.setNodeMarkup(r.mapping.map(n+1+m.pos),void 0,(0,c.fi)(v.attrs,"rowspan",v.attrs.rowspan-m.n))}else if("colwidth mismatch"==m.type){var b=t.nodeAt(m.pos);r.setNodeMarkup(r.mapping.map(n+1+m.pos),void 0,(0,c.fi)(b.attrs,"colwidth",m.colwidth))}}for(var y=0;y<d.length;y++)d[y]&&(null==o&&(o=y),l=y);for(var x=0,j=n+1;x<u.height;x++){var w=t.child(x),O=j+w.nodeSize,k=d[x];if(k>0){var C="cell";w.firstChild&&(C=w.firstChild.type.spec.tableRole);for(var P=[],S=0;S<k;S++)P.push((0,i.F)(e.schema)[C].createAndFill());var A=(0==x||o==x-1)&&l==x?j+1:O-1;r.insert(r.mapping.map(A),P)}j=O}return r.setMeta(s,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,a=n.childCount;e:for(var c=0,s=0;c<a;c++){for(var l=n.child(c),u=s,d=Math.min(i,c+3);u<d;u++)if(t.child(u)==l){s=u+1,r+=l.nodeSize;continue e}o(l,r),s<i&&t.child(s).sameMarkup(l)?e(t.child(s),l,r+1,o):l.nodesBetween(0,l.content.size,o,r+1),r+=l.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}var u=n(17890),d=n(30764),f=n(26151);function p(e,t){var n=e.createAndFill();return new f.wx(n).replace(0,n.content.size,t).doc}function m(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var l=!1,u=o;u<i;u++){var d=a*t.width+u,f=t.map[d];if(t.map[d-t.width]==f){l=!0;var p=n.nodeAt(f),m=t.findCell(f),h=m.top,g=m.left;e.setNodeMarkup(e.mapping.slice(s).map(f+r),void 0,(0,c.fi)(p.attrs,"rowspan",a-h)),e.insert(e.mapping.slice(s).map(t.positionAt(a,g,n)),p.type.createAndFill((0,c.fi)(p.attrs,"rowspan",h+p.attrs.rowspan-a))),u+=p.attrs.colspan-1}}return l}function h(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var l=!1,u=o;u<i;u++){var d=u*t.width+a,f=t.map[d];if(t.map[d-1]==f){l=!0;var p=n.nodeAt(f),m=t.colCount(f),h=e.mapping.slice(s).map(f+r);e.setNodeMarkup(h,void 0,(0,c.H6)(p.attrs,a-m,p.attrs.colspan-(a-m))),e.insert(h+p.nodeSize,p.type.createAndFill((0,c.H6)(p.attrs,0,a-m))),u+=p.attrs.rowspan-1}}return l}function g(e,t,n,r,c){var s=n?e.doc.nodeAt(n-1):e.doc,l=a.r.get(s),u=r.top,f=r.left,p=f+c.width,g=u+c.height,v=e.tr,b=0;function y(){s=n?v.doc.nodeAt(n-1):v.doc,l=a.r.get(s),b=v.mapping.maps.length}(function(e,t,n,r,o,a,c){var s,l,u=e.doc.type.schema,f=(0,i.F)(u);if(o>t.width)for(var p=0,m=0;p<t.height;p++){var h=n.child(p);m+=h.nodeSize;for(var g=[],v=null==h.lastChild||h.lastChild.type==f.cell?s||(s=f.cell.createAndFill()):l||(l=f.header_cell.createAndFill()),b=t.width;b<o;b++)g.push(v);e.insert(e.mapping.slice(c).map(m-1+r),g)}if(a>t.height){for(var y=[],x=0,j=(t.height-1)*t.width;x<Math.max(t.width,o);x++){var w=!(x>=t.width)&&n.nodeAt(t.map[j+x]).type==f.header_cell;y.push(w?l||(l=f.header_cell.createAndFill()):s||(s=f.cell.createAndFill()))}for(var O=f.row.create(null,d.HY.from(y)),k=[],C=t.height;C<a;C++)k.push(O);e.insert(e.mapping.slice(c).map(r+n.nodeSize-2),k)}return!!(s||l)})(v,l,s,n,p,g,0)&&y(),m(v,l,s,n,f,p,u,b)&&y(),m(v,l,s,n,f,p,g,b)&&y(),h(v,l,s,n,u,g,f,b)&&y(),h(v,l,s,n,u,g,p,b)&&y();for(var x=u;x<g;x++){var j=l.positionAt(x,f,s),w=l.positionAt(x,p,s);v.replace(v.mapping.slice(b).map(j+n),v.mapping.slice(b).map(w+n),new d.p2(c.rows[x-u],0,0))}y(),v.setSelection(new o.hA(v.doc.resolve(n+l.positionAt(u,f,s)),v.doc.resolve(n+l.positionAt(g-1,p-1,s)))),t(v)}var v=(0,u.$)({ArrowLeft:y("horiz",-1),ArrowRight:y("horiz",1),ArrowUp:y("vert",-1),ArrowDown:y("vert",1),"Shift-ArrowLeft":x("horiz",-1),"Shift-ArrowRight":x("horiz",1),"Shift-ArrowUp":x("vert",-1),"Shift-ArrowDown":x("vert",1),Backspace:j,"Mod-Backspace":j,Delete:j,"Mod-Delete":j});function b(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function y(e,t){return function(n,i,a){var s=n.selection;if(s instanceof o.hA)return b(n,i,r.Y1.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var l=k(a,e,t);if(null==l)return!1;if("horiz"==e)return b(n,i,r.Y1.near(n.doc.resolve(s.head+t),t));var u,d=n.doc.resolve(l),f=(0,c.li)(d,e,t);return u=f?r.Y1.near(f,1):t<0?r.Y1.near(n.doc.resolve(d.before(-1)),-1):r.Y1.near(n.doc.resolve(d.after(-1)),1),b(n,i,u)}}function x(e,t){return function(n,r,i){var a=n.selection;if(!(a instanceof o.hA)){var s=k(i,e,t);if(null==s)return!1;a=new o.hA(n.doc.resolve(s))}var l=(0,c.li)(a.$headCell,e,t);return!!l&&b(n,r,new o.hA(a.$anchorCell,l))}}function j(e,t){var n=e.selection;if(!(n instanceof o.hA))return!1;if(t){var r=e.tr,a=(0,i.F)(e.schema).cell.createAndFill().content;n.forEachCell(function(e,t){e.content.eq(a)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new d.p2(a,0,0))}),r.docChanged&&t(r)}return!0}function w(e,t,n){if(!(0,c.Lw)(e.state.selection))return!1;var r=function(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,a=o.type.spec.tableRole,c=o.type.schema,s=[];if("row"==a)for(var l=0;l<t.childCount;l++){var u=t.child(l).content,f=l?0:Math.max(0,n-1),m=l<t.childCount-1?0:Math.max(0,r-1);(f||m)&&(u=p((0,i.F)(c).row,new d.p2(u,f,m)).content),s.push(u)}else{if("cell"!=a&&"header_cell"!=a)return null;s.push(n||r?p((0,i.F)(c).row,new d.p2(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],a=o.childCount-1;a>=0;a--)for(var c=o.child(a).attrs,s=c.rowspan,l=c.colspan,u=r;u<r+s;u++)n[u]=(n[u]||0)+l;for(var f=0,p=0;p<n.length;p++)f=Math.max(f,n[p]);for(var m=0;m<n.length;m++)if(m>=t.length&&t.push(d.HY.empty),n[m]<f){for(var h=(0,i.F)(e).cell.createAndFill(),g=[],v=n[m];v<f;v++)g.push(h);t[m]=t[m].append(d.HY.from(g))}return{height:t.length,width:f,rows:t}}(c,s)}(n),s=e.state.selection;if(s instanceof o.hA){r||(r={width:1,height:1,rows:[d.HY.from(p((0,i.F)(e.state.schema).cell,n))]});var l=s.$anchorCell.node(-1),u=s.$anchorCell.start(-1),f=a.r.get(l).rectBetween(s.$anchorCell.pos-u,s.$headCell.pos-u);return r=function(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],l=0;l<i.length;l++){for(var u=i[l],f=[],p=a[l]||0,m=0;p<t;m++){var h=u.child(m%u.childCount);p+h.attrs.colspan>t&&(h=h.type.create((0,c.H6)(h.attrs,h.attrs.colspan,p+h.attrs.colspan-t),h.content)),f.push(h),p+=h.attrs.colspan;for(var g=1;g<h.attrs.rowspan;g++)a[l+g]=(a[l+g]||0)+h.attrs.colspan}s.push(d.HY.from(f))}i=s,r=t}if(o!=n){for(var v=[],b=0,y=0;b<n;b++,y++){for(var x=[],j=i[y%o],w=0;w<j.childCount;w++){var O=j.child(w);b+O.attrs.rowspan>n&&(O=O.type.create((0,c.fi)(O.attrs,"rowspan",Math.max(1,n-O.attrs.rowspan)),O.content)),x.push(O)}v.push(d.HY.from(x))}i=v,o=n}return{width:r,height:o,rows:i}}(r,f.right-f.left,f.bottom-f.top),g(e.state,e.dispatch,u,f,r),!0}if(!r)return!1;var m=(0,c.Le)(e.state.selection),h=m.start(-1);return g(e.state,e.dispatch,h,a.r.get(m.node(-1)).findCell(m.pos-h),r),!0}function O(e,t){if(t.ctrlKey||t.metaKey)return!1;var n,r,i=C(e,t.target);if(t.shiftKey&&e.state.selection instanceof o.hA)a(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&null!=(r=(0,c.m9)(e.state.selection.$anchor))&&(null===(n=P(e,t))||void 0===n?void 0:n.pos)!=r.pos)a(r,t),t.preventDefault();else if(!i)return!1;function a(t,n){var r=P(e,n),i=null==c.Kv.getState(e.state);if(!r||!(0,c.yL)(t,r)){if(!i)return!1;r=t}var a=new o.hA(t,r);if(i||!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);i&&s.setMeta(c.Kv,t.pos),e.dispatch(s)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",l),null!=c.Kv.getState(e.state)&&e.dispatch(e.state.tr.setMeta(c.Kv,-1))}function l(n){var r,o=c.Kv.getState(e.state);if(null!=o)r=e.state.doc.resolve(o);else if(C(e,n.target)!=i&&!(r=P(e,t)))return s();r&&a(r,n)}return e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",l),!1}function k(e,t,n){if(!(e.state.selection instanceof r.Bs))return null;for(var o=e.state.selection.$head,i=o.depth-1;i>=0;i--){var a=o.node(i);if((n<0?o.index(i):o.indexAfter(i))!=(n<0?0:a.childCount))break;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var c=o.before(i),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?c:null}}return null}function C(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function P(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?(0,c.m9)(e.state.doc.resolve(n.pos)):null}var S=n(12741),A=n(68015),E=n.n(A),D=n(52780),I=n(73010),z=n(96412),T=n(13089),M=n(38564),N=n(36069),R=n(39428),L=new r.H$("tableColumnResizing"),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,z.Z)(this,e),this.activeHandle=t,this.dragging=n}return(0,T.Z)(e,[{key:"getActiveHandleAbs",value:function(e){return null===this.activeHandle?null:(0,R.XV)(e,this.activeHandle)}},{key:"reset",value:function(){return this.activeHandle=null,this.dragging=null,this}},{key:"setHandle",value:function(e,t){if(null===t.setHandle)return this.activeHandle=null,this;var n=M.Gt.getState(e);if(!n)return this;var r=n.type,o=n.binding;return this.activeHandle=(0,N.JR)(t.setHandle,r,o.mapping),this}},{key:"setDragging",value:function(e){return this.dragging=e.setDragging,this}},{key:"apply",value:function(e,t){var n=e.getMeta(L);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}}]),e}(),H=n(70743);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handleWidth,n=void 0===t?5:t,o=e.colMinPercent,i=void 0===o?10:o,c=e.lastColumnResizable,s=void 0===c||c;return new r.Sy({key:L,state:{init:function(){return new _},apply:function(e,t,n,r){return t.apply(e,r)}},props:{attributes:function(e){return null!==L.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""}},handleDOMEvents:{mousemove:function(e,t){return function(e,t,n,r){if(e.editable){var o=L.getState(e.state);if(!o.dragging){var i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=null;if(i){var c=i.getBoundingClientRect(),s=c.left,l=c.right;t.clientX-s<=n?a=B(e,t,"left"):l-t.clientX<=n&&(a=B(e,t,"right"))}a===o.getActiveHandleAbs(e.state)||!r&&null!==a&&U(e.state.doc.resolve(a))||F(e,a)}}}(e,t,n,s),!1},mouseleave:function(e){var t;return null===(t=L.getState(e.state)).getActiveHandleAbs(e.state)||t.dragging||F(e,null),!1},mousedown:function(e,t){return function(e,t,n){if(e.editable){var o=L.getState(e.state),i=o.getActiveHandleAbs(e.state);if(null===i||o.dragging)return 0;var a=e.state.doc.resolve(i),c=a.node(-1),s=a.start(-1),l=(0,S.Z)(c.attrs.colWidths),u=W(a),d=function(e,t){for(var n=e.domAtPos(t),r=e.domAtPos(t).node;"TABLE"!=r.nodeName;)r=r.parentNode;return n.node.childNodes[n.offset].scrollWidth}(e,i),f=G(e,a),p=q(e,a),m=e.state.doc.resolve(i+2);e.state.selection.from>s&&e.state.selection.from<s+c.nodeSize||e.dispatch(e.state.tr.setSelection(r.Y1.findFrom(m,1)));var h={setDragging:{startX:t.clientX,startWidth:d,colWidths:l,tableWidth:p,colIndex:u}};e.dispatch(e.state.tr.setMeta(L,h));var g=null;return window.addEventListener("mouseup",v),window.addEventListener("mousemove",b),t.preventDefault()}function v(t){window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",b);var n=L.getState(e.state);if(n.dragging){if(null===g){e.dispatch(e.state.tr.setMeta(L,{setDragging:null}));return}if(n.dragging)try{var r=n.getActiveHandleAbs(e.state);(function(e,t,n){var r=e.state.doc.resolve(t).before(-1),o=e.state.tr;e.dispatch(o.setNodeMarkup(r,void 0,{colWidths:(0,S.Z)(n)}).setMeta("annotationEvent",{type:"update-node-attrs",pos:r}))})(e,r,g),e.dispatch(e.state.tr.setMeta(L,{setDragging:null}))}catch(t){e.dispatch(e.state.tr.setMeta(L,{reset:!0}))}g=null}}function b(t){if(!t.which)return v(t);var r=L.getState(e.state),o=r.getActiveHandleAbs(e.state);if(r.dragging&&null!==o){var i,a,c,s=r.dragging,l=s.colIndex,u=s.colWidths,d=(a=(i=r.dragging).tableWidth,c=t.clientX-i.startX,E()(100*c/a,2));(function(e,t,n){var r=e.state.doc.resolve(t),o=G(e,r).querySelectorAll("colgroup > col.col-width-control");n.forEach(function(e,t){o.item(t).style.width="".concat(e,"%")})})(e,o,g=(0,H.GI)(u,l,d,n)),(0,I.CI)(f)}}}(e,t,i),!1}},decorations:function(e){var t=L.getState(e).getActiveHandleAbs(e);if(null!==t)return function(e,t){var n=[];try{for(var r=e.doc.resolve(t),o=r.node(-1),i=a.r.get(o),c=r.start(-1),s=i.colCount(r.pos-c)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=s+l*i.width-1;if((s==i.width||i.map[u]!=i.map[u+1])&&(0==l||i.map[u-1]!=i.map[u-1-i.width])){var d=i.map[u],f=c+d+o.nodeAt(d).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(D.p.widget(f,p))}}return D.EH.create(e.doc,n)}catch(e){return console.error("(caught) columnResizing error: ".concat(e.message)),D.EH.empty}}(e,t)},nodeViews:{}}})}function B(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return null;var o=r.inside,i=(0,c.m9)(e.state.doc.resolve(o+1));if(!i)return null;if("right"===n)return i.pos;var s=a.r.get(i.node(-1)),l=i.start(-1),u=s.map.indexOf(i.pos-l);return u%s.width==0?null:l+s.map[u-1]}function F(e,t){e.dispatch(e.state.tr.setMeta(L,{setHandle:t}))}var W=function(e){var t=e.node(-1),n=a.r.get(t),r=e.start(-1);return n.colCount(e.pos-r)},U=function(e){var t=e.node(-1),n=a.r.get(t);return W(e)===n.width-1},G=function(e,t){for(var n=e.domAtPos(t.start(-1)).node;"TABLE"!=n.nodeName;)n=n.parentNode;return n},q=function(e,t){return G(e,t).scrollWidth},V=n(35997);function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowTableNodeSelection,n=void 0!==t&&t;return new r.Sy({key:c.Kv,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(c.Kv);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:o.fI,handleDOMEvents:{mousedown:O},createSelectionBetween:function(e){return null!=c.Kv.getState(e.state)?e.state.selection:null},handleKeyDown:v,handlePaste:w},appendTransaction:function(e,t,r){return(0,o.FK)(r,l(r,t),n)}})}},66176:function(e,t,n){n.d(t,{F:function(){return r}});function r(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}},49450:function(e,t,n){n.d(t,{U:function(){return d},r:function(){return f}});var r,o,i=n(13089),a=n(96412),c=n(95235);if("undefined"!=typeof WeakMap){var s=new WeakMap;r=function(e){return s.get(e)},o=function(e,t){return s.set(e,t),t}}else{var l=[],u=0;r=function(e){for(var t=0;t<l.length;t+=2)if(l[t]==e)return l[t+1]},o=function(e,t){return 10==u&&(u=0),l[u++]=e,l[u++]=t}}var d=(0,i.Z)(function e(t,n,r,o){(0,a.Z)(this,e),(0,c.Z)(this,"left",void 0),(0,c.Z)(this,"top",void 0),(0,c.Z)(this,"right",void 0),(0,c.Z)(this,"bottom",void 0),this.left=t,this.top=n,this.right=r,this.bottom=o}),f=function(){function e(t,n,r,o){(0,a.Z)(this,e),(0,c.Z)(this,"width",void 0),(0,c.Z)(this,"height",void 0),(0,c.Z)(this,"map",void 0),(0,c.Z)(this,"problems",void 0),this.width=t,this.height=n,this.map=r,this.problems=o}return(0,i.Z)(e,[{key:"findCell",value:function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,c=1;i<this.width&&this.map[t+c]==n;c++)i++;for(var s=1;a<this.height&&this.map[t+this.width*s]==n;s++)a++;return new d(r,o,i,a)}}throw RangeError("No cell with offset "+e+" found")}},{key:"firstRowCells",value:function(){return this.map.slice(0,this.width)}},{key:"firstColCells",value:function(){var e=this;return this.map.filter(function(t,n){return n%e.width==0})}},{key:"colCount",value:function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError("No cell with offset "+e+" found")}},{key:"nextCell",value:function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,c=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:c==this.height)?null:this.map[o+this.width*(n<0?a-1:c)]}},{key:"rectBetween",value:function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,c=this.findCell(t),s=c.left,l=c.right,u=c.top,f=c.bottom;return new d(Math.min(r,s),Math.min(i,u),Math.max(o,l),Math.max(a,f))}},{key:"cellsInRect",value:function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t}},{key:"positionAt",value:function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,c=(e+1)*this.width;a<c&&this.map[a]<o;)a++;return a==c?i-1:this.map[a]}o=i}}}],[{key:"get",value:function(e){return r(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var c=e.child(a),s=0;s<c.childCount;s++){var l=c.child(s);a+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var d=o.child(u);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],c=0,s=t*n;c<s;c++)r[c]=0;for(var l=0,u=0;l<n;l++){var d=e.child(l);u++;for(var p=0;;p++){for(;o<r.length&&0!=r[o];)o++;if(p==d.childCount)break;for(var m=d.child(p),h=m.attrs,g=h.colspan,v=h.rowspan,b=h.colwidth,y=0;y<v;y++){if(y+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var x=o+y*t,j=0;j<g;j++){0==r[x+j]?r[x+j]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:g-j});var w=b&&b[j];if(w){var O=(x+j)%t*2,k=a[O];null==k||k!=w&&1==a[O+1]?(a[O]=w,a[O+1]=1):k==w&&a[O+1]++}}}o+=g,u+=m.nodeSize}for(var C=(l+1)*t,P=0;o<C;)0==r[o++]&&P++;P&&(i||(i=[])).push({type:"missing",row:l,n:P}),u++}for(var S=new f(t,n,r,i),A=!1,E=0;!A&&E<a.length;E+=2)null!=a[E]&&a[E+1]<n&&(A=!0);return A&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var a=n.nodeAt(i),c=null,s=0;s<a.attrs.colspan;s++){var l=t[2*((r+s)%e.width)];null==l||a.attrs.colwidth&&a.attrs.colwidth[s]==l||((c||(c=function(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}(a.attrs)))[s]=l)}c&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:c})}}}(S,a,e),S}(e))}}]),e}()},16035:function(e,t,n){n.d(t,{Dq:function(){return l},Fn:function(){return f},H6:function(){return v},Kv:function(){return c},Le:function(){return d},Lw:function(){return u},SZ:function(){return p},a2:function(){return y},fi:function(){return g},hl:function(){return b},li:function(){return h},m9:function(){return s},yL:function(){return m}});var r=n(27191),o=n(20205),i=n(66176),a=n(49450),c=new r.H$("selectingCells");function s(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function l(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function u(e){for(var t=e.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function d(e){return e instanceof o.hA?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e instanceof r.qv&&"cell"==e.node.type.spec.tableRole?e.$anchor:s(e.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(e.$head)}function f(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function p(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function m(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function h(e,t,n){var r=e.start(-1),o=a.r.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function g(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=g(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(e){return e>0})||(r.colwidth=null)),r}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=g(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function y(e,t,n){for(var r=(0,i.F)(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}},47191:function(e,t,n){n.d(t,{BF:function(){return o},CU:function(){return r}});var r=function(e){return"table"===e.type.name},o=function(e){return"tableCell"===e.type.name}},88646:function(e,t,n){n.d(t,{E7:function(){return a},I1:function(){return i},I_:function(){return c}});var r=n(98875);n(47592);var o=function(e,t){var n=e.filter(function(e){return Object.keys(e.spec).length>0}),r=t.filter(function(e){return Object.keys(e.spec).length>0}),o=n.map(function(e){return JSON.stringify(e.spec)}),i=r.map(function(e){return JSON.stringify(e.spec)});return{removed:o.filter(function(e){return!i.includes(e)}),added:i.filter(function(e){return!o.includes(e)})}},i=function(e,t){var n=e.filter(function(e){return Object.keys(e.spec).length>0}),r=t.filter(function(e){return Object.keys(e.spec).length>0});return n.length!==r.length||JSON.stringify(n.map(function(e){return e.spec}))!==JSON.stringify(r.map(function(e){return e.spec}))},a=function(e){var t=e.newNode,n=e.oldNode,a=e.updateProps,c=e.oldDecorations,s=e.newDecorations;if(JSON.stringify(t.attrs)!==JSON.stringify(n.attrs))return a(),!0;if(i(c,s)){if(r.VH.get("debugLogging")){var l=o(c,s);console.debug("============== decos ================"),console.debug("decos changed",t.type.name),l.removed.length>0&&console.debug("%c  decos removed: ".concat(l.removed.join(" ")," "),"color: red"),l.added.length>0&&console.debug("%c  decos added:   ".concat(l.added.join(" ")," "),"color: green")}a()}return!0},c=function(e){var t=e.newNode,n=e.oldNode,r=e.updateProps;return t.content.childCount!==n.content.childCount?(r(),!0):a(e)}},24224:function(e,t,n){n.d(t,{Br:function(){return C},F1:function(){return O},LM:function(){return k},TZ:function(){return w},Yk:function(){return S},dh:function(){return A},f3:function(){return P},p2:function(){return E},vE:function(){return D}});var r=n(9850),o=n.n(r),i=n(3027),a=n(27191),c=n(2784);n(56692);var s=n(67701),l=n(44595),u=n(46358),d=n(10710),f=n(9734),p=n(17477),m=n(6057),h=n(90399),g=n(34264),v=n(74993),b=n(21529),y=n(62141),x=n(95472),j=n(33295);function w(){var e=(0,s.My)().previewModeEnabled,t=(0,u.CG)(l.ws);return e?t:(0,f.s2)()}var O=function(e){var t=(0,c.useState)(0),n=t[0],r=t[1];return(0,c.useEffect)(function(){var t=function(){r(function(t){return!e.state.selection.empty||e.isActive("link")||e.isActive("button")?t+1:0})};return e.on("update",t),e.on("selectionUpdate",t),function(){e.off("update",t),e.off("selectionUpdate",t)}},[e]),n},k=function(e){var t=(0,c.useState)(!!e&&(0,x.KB)(e)),n=t[0],r=t[1];return(0,c.useEffect)(function(){if(e){var t=function(){return r((0,x.KB)(e))};return e.on("blur",t).on("focus",t),function(){e.off("blur",t).off("focus",t)}}},[e]),n},C=function(e){var t=(0,d.we)();return(0,u.CG)(function(n){var r=(0,y.yx)(n);return!!r&&t.can(e,r)})},P=function(e,t){var n=(0,b.A)(e);(0,c.useEffect)(function(){if(e&&t){var r=function(e){e.defaultPrevented||n(e)};return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}},[e,n,t])},S=function(e){(0,c.useEffect)(function(){if(e){var t=function(t){t.defaultPrevented||!e.isEditable||!e.isFocused||!(e.state.selection instanceof a.qv)||!t.target||e.view.dom.contains(t.target)||e.view.dispatchEvent(t)};return document.addEventListener("copy",t),document.addEventListener("cut",t),document.addEventListener("paste",t),function(){document.removeEventListener("copy",t),document.removeEventListener("cut",t),document.removeEventListener("paste",t)}}},[e])},A="tiptap-ignore-paste",E=function(e){(0,c.useEffect)(function(){if(e){var t=function(t){var n,r,i,a,c=!!(null!==(n=document.activeElement)&&void 0!==n&&n.closest("[data-".concat(A,"]")));if(!(t.defaultPrevented||e.isFocused||!e.isEditable||!t.target||c||e.view.dom.contains(t.target))){var s=null===(r=t.clipboardData)||void 0===r?void 0:r.getData("text/html");if(s){var l=(0,v.T)(s,e.schema).content,u=(((null===(i=l.firstChild)||void 0===i?void 0:i.type.name)==="document"?null===(a=l.firstChild)||void 0===a?void 0:a.content.content:l.content)||[]).filter(function(e){return(0,g.KH)(e)});if(u.length){var d=e.state.doc.content.size-1,f=u.map(function(e){return(0,j.h)(o()(e.toJSON()))}).map(function(e){return(0,h.Zs)(e)});e.chain().insertContentAt(d,f).selectInsertedNode().scrollIntoView().setMeta("uiEvent","paste").run(),t.preventDefault()}}}};return document.addEventListener("paste",t),function(){document.removeEventListener("paste",t)}}},[e])},D=function(e){(0,c.useEffect)(function(){if(e){var t=function(t){var n=t.target;if(!(!n.closest(".".concat(m.ar))||n.closest(".drag-handle"))){var r=e.view.posAtDOM(t.target,0);if(e.state.selection.from!==r){var o=e.view.posAtCoords({left:t.clientX,top:t.clientY});if(o){var a=e.state.doc.nodeAt(o.inside);if(a&&a.type.spec.isolating&&!1!==a.type.spec.allowGapCursor){var c=e.view.domAtPos(o.inside),s=c.node,l=c.offset,u=s.childNodes[l];if(!(!u||!u.classList.contains("react-renderer")||(0,p.tl)(t.target,u,function(e){return e.hasAttribute("data-node-view-content-inner")})))try{var d=e.state.doc.resolve(o.pos);if(!i.Q.valid(d))return!1;var f=new i.Q(d);e.view.dispatch(e.state.tr.setSelection(f)),t.stopPropagation(),t.preventDefault()}catch(e){console.error("[useFixReactNodeViewGapCursors] Error creating GapCursor",e)}}}}}};return e.view.dom.addEventListener("click",t),function(){return e.view.dom.removeEventListener("click",t)}}},[e])}},40618:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(45133),o=n(10476),i=n(39057),a=function(e){var t=e.editorId,n=e.children,a=(0,r.g)(),c=(0,o.H)(),s=t||c;return(0,i.K)(s)&&a?n:null}},10476:function(e,t,n){n.d(t,{H:function(){return a},O:function(){return i}});var r=n(2784),o=(0,r.createContext)(void 0),i=o.Provider,a=function(){return(0,r.useContext)(o)}},39057:function(e,t,n){n.d(t,{K:function(){return f},O:function(){return d}});var r=n(96412),o=n(13089),i=n(95235),a=n(30733),c=n.n(a),s=n(2784),l=function(){function e(){(0,r.Z)(this,e),(0,i.Z)(this,"renderedMap",{main:!1}),(0,i.Z)(this,"listeners",{})}return(0,o.Z)(e,[{key:"subscribe",value:function(e,t){var n=this;return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),function(){try{if(!n.listeners[e])return;var r=n.listeners[e].indexOf(t);r>-1&&n.listeners[e].splice(r,1)}catch(e){}}}},{key:"isRendered",value:function(e){return this.renderedMap[e]}},{key:"onRendered",value:function(e){var t;this.renderedMap[e]=!0,null===(t=this.listeners[e])||void 0===t||t.forEach(function(e){return e()})}},{key:"onEditorUnload",value:function(e){this.renderedMap[e]=!1,this.listeners[e]=[]}}]),e}(),u=c()(function(){return new l}),d=function(e){return{setEditorRendered:(0,s.useCallback)(function(){e&&u().onRendered(e)},[e]),onEditorUnload:(0,s.useCallback)(function(){e&&u().onEditorUnload(e)},[e])}},f=function(e){var t,n=(0,s.useState)(void 0===e||null===(t=u().isRendered(e))||void 0===t||t),r=n[0],o=n[1];return(0,s.useEffect)(function(){if(e)return u().subscribe(e,function(){o(!0)})},[e]),r}},36738:function(e,t,n){n.d(t,{Ge:function(){return t9},yE:function(){return C.y},fb:function(){return ne.f},R$:function(){return t7.R$},VK:function(){return t7.VK},yg:function(){return C.e},vL:function(){return t7.vL}});var r,o,i,a=n(52780);a.tk.prototype.updateState=function(e){this.docView&&this.updateStateInner(e,this.state.plugins!=e.plugins)};var c=n(81333),s=n(76133),l=n(53738),u=n(27302),d=n(71354),f=n(420),p=n(91012),m=n(79522),h=n(44058),g=n(64652),v=n(2784),b=n(91760),y=n(69180),x=n(37914),j=n(23313),w=n(91354),O=n(8699),k=n(10710),C=n(4707),P=n(72338),S=n(27191),A=n(46988),E=n(46358),D=n(60636),I=n(34264);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(){var e=document.createElement("span");e.classList.add("collaboration-cursor__caret","streaming-cursor"),e.setAttribute("style","border-color: var(--chakra-colors-trueblue-100)");var t=document.createElement("div");return t.classList.add("collaboration-cursor__label","streaming-cursor__label"),t.setAttribute("style","background-color: var(--chakra-colors-trueblue-100); color: var(--chakra-colors-trueblue-400)"),e.insertBefore(t,null),e},M=P.hj.create({name:"aiGeneration",addOptions:function(){return{provider:null}},addStorage:function(){return{generationEnabled:!1}},onCreate:function(){var e=this.options.provider;e&&e.awareness&&e.awareness.on("change",function(){var t,n=!1,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(e.awareness.getStates());try{for(r.s();!(t=r.n()).done;){var o=(0,c.Z)(t.value,2),i=o[0];o[1].isStreaming&&i!==e.awareness.clientID&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}var a=(0,E.bh)();(0,A.nl)(a.getState())!==n&&a.dispatch((0,A.R4)(n))})},addCommands:function(){var e=this;return{setAIGenerationRunning:function(t){return function(){var n;return e.storage.generationEnabled=t,null===(n=e.options.provider)||void 0===n||n.awareness.setLocalStateField("isStreaming",t),!0}}}},addProseMirrorPlugins:function(){var e=this.storage;return[new S.Sy({key:new S.H$("aiGeneration"),props:{decorations:function(t){if(!e.generationEnabled)return a.EH.empty;var n=[],r=t.doc.content.size-2,o=(0,P.qv)(t.doc.resolve(r),I.KH),i=o?(0,D.t)(t.doc.resolve(o.pos),-1):null;return i&&o&&(n.push(a.p.widget(i.from,T,{key:"sal",side:10})),n.push(a.p.node(o.pos,o.pos+o.node.nodeSize,{class:"ai-generate-streaming-card"}))),a.EH.create(t.doc,n)}}})]}}),N=n(47507),R=P.hj.create({name:"aiModifications",onCreate:function(){var e=this;this.options.document.on("afterAllTransactions",function(t){var n=N.i.getState(e.editor.view.state);n&&n.flushMoveInstructionQueue(e.editor.view.state)})},addProseMirrorPlugins:function(){return[new S.Sy({key:N.i,state:{init:function(){return new N.Y},apply:function(e,t,n,r){return t.apply(e,r)}}})]},addCommands:function(){return{setInteractionRange:function(e,t){return function(n){return n.tr.setMeta("aiModificationAction",{type:"setInteractionRange",rangeId:e,range:t}),!0}}}}}),L=n(44713),_=n(34676),H=n(95472),Z=P.hj.create({name:"salExtension",addStorage:function(){return{salPanelOpen:!1}},addProseMirrorPlugins:function(){var e,t;return[(e=this.editor,t=this.storage,new S.Sy({props:{attributes:function(){return t.salPanelOpen?{class:"sal-active"}:{class:""}},decorations:function(n){var r=n.doc,o=n.selection;if(t.salPanelOpen){var i=o.from,c=o.to,s=[];return(0,H.Ru)(o.$from,I.KH).forEach(function(e,t){s.push(a.p.node(e.pos,e.pos+e.node.nodeSize,{class:(0,_.cx)(0==t?"sal-active-card":"sal-active-card-parent")}))}),(0,H.KB)(e)||(o instanceof S.Bs?s.push(a.p.inline(i,c,{class:(0,_.cx)("sal-selection-text")})):o instanceof S.qv&&s.push(a.p.node(i,c,{class:(0,_.cx)("sal-selection-node")}))),a.EH.create(r,s)}}}}))]},addCommands:function(){var e=this;return{setSalOpen:function(t){return function(n){return n.state,n.dispatch,e.storage.salPanelOpen=t,!0}}}}}),B=n(95235),F=n(38564),W=n(54073),U=n.n(W),G=n(26151),q=n(98875),V=n(96412),$=n(13089),K=n(41701),Y=n(90129),X=n(29017),J=n(48200),Q=n(71657);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}i=Symbol.iterator;var et=function(e){(0,Y.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,J.Z)(r);if(t){var o=(0,J.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,X.Z)(this,e)});function r(e){(0,V.Z)(this,r),t=n.call(this),(0,B.Z)((0,K.Z)(t),"yarray",void 0),t.yarray=e,t.doc=e.doc,t.map=new Map;var t,o=e.toArray();return t.doc.transact(function(n){for(var r=o.length-1;r>=0;r--){var i=o[r];t.map.has(i.key)?e.delete(r):t.map.set(i.key,i)}}),e.observe(function(n){var r=new Map,o=Array.from(n.changes.added);n.changes.deleted.forEach(function(e){e.content.getContent().forEach(function(e){t.map.get(e.key)===e&&(t.map.delete(e.key),r.set(e.key,{action:"delete",oldValue:e.val}))})});var i=new Map;o.map(function(e){return e.content.getContent()}).flat().forEach(function(e){i.set(e.key,e)});var a=new Set,c=e.toArray();t.doc.transact(function(n){for(var o=c.length-1;o>=0&&(i.size>0||a.size>0);o--){var s=c[o];if(a.has(s.key))a.delete(s.key),e.delete(o,1);else if(i.get(s.key)===s){var l=t.map.get(s.key);if(l)a.add(s.key),r.set(s.key,{action:"update",oldValue:l.val,newValue:s.val});else{var u=r.get(s.key);u&&"delete"===u.action?r.set(s.key,{action:"update",newValue:s.val,oldValue:u.oldValue}):r.set(s.key,{action:"add",newValue:s.val})}i.delete(s.key),t.map.set(s.key,s)}else i.has(s.key)&&(a.add(s.key),i.delete(s.key))}}),r.size>0&&t.emit("change",[r])}),t}return(0,$.Z)(r,[{key:i,value:function(){return this.yarray[Symbol.iterator]()}},{key:"values",value:function(){var e=this.yarray.length,t=-1;return(0,B.Z)({},Symbol.iterator,function(){return{next:function(){return++t===e?{value:void 0,done:!0}:{value:this.yarray.get(t),done:!1}}}})}},{key:"forEach",value:function(e){return this.yarray.forEach(e)}},{key:"set",value:function(e,t){var n=this;return this.doc.transact(function(r){n.map.has(e)&&n.delete(e),n.yarray.push([{key:e,val:t}])}),t}},{key:"delete",value:function(e){var t,n=0,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.yarray);try{for(r.s();!(t=r.n()).done;){if(t.value.key===e){this.yarray.delete(n);break}n++}}catch(e){r.e(e)}finally{r.f()}}},{key:"get",value:function(e){var t=this.map.get(e);return t&&t.val}},{key:"has",value:function(e){return this.map.has(e)}}]),r}(Q.y);function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var er=function(e){(0,Y.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,J.Z)(r);if(t){var o=(0,J.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,X.Z)(this,e)});function r(){var e;(0,V.Z)(this,r);for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];return e=n.call.apply(n,[this].concat(o)),(0,B.Z)((0,K.Z)(e),"name","AnnotationsYKeyValue"),e}return(0,$.Z)(r,[{key:"createKeyValue",value:function(e,t){var n=e.getArray(t);return new et(n)}},{key:"getRestoreMap",value:function(e){return e.getMap("annotationsAbsolute")}},{key:"run",value:function(e){var t,n=this.createKeyValue(e,"annotationsAbsoluteKV"),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.getRestoreMap(e).entries());try{for(r.s();!(t=r.n()).done;){var o=(0,c.Z)(t.value,2),i=o[0],a=o[1];n.set(i,a)}}catch(e){r.e(e)}finally{r.f()}}}]),r}(function(){function e(){(0,V.Z)(this,e),(0,B.Z)(this,"name",void 0)}return(0,$.Z)(e,[{key:"run",value:function(e){}}]),e}());function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ei=function(){function e(t){var n=this;(0,V.Z)(this,e),(0,B.Z)(this,"document",void 0),(0,B.Z)(this,"migrations",[new er]),(0,B.Z)(this,"annotations",void 0),(0,B.Z)(this,"annotationsAbsolute",void 0),this.document=t,this.document.transact(function(){n.runMigrations()}),this.annotations=this.document.getMap("annotations"),this.annotationsAbsolute=new et(this.document.getArray("annotationsAbsoluteKV"))}return(0,$.Z)(e,[{key:"runMigrations",value:function(){var e,t=this.getMigrationsMap(),n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.migrations);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!this.hasRunMigration(r.name))try{r.run(this.document),t.set(r.name,!0)}catch(e){}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getMigrationsMap",value:function(){return this.document.getMap(e.ANNOTATION_MIGRATIONS_KEY)}},{key:"hasRunMigration",value:function(e){return this.getMigrationsMap().get(e)||!1}}]),e}();(0,B.Z)(ei,"ANNOTATION_MIGRATIONS_KEY","annotationMigrations");var ea=function(){function e(t){(0,V.Z)(this,e),(0,B.Z)(this,"decoration",void 0),this.decoration=t}return(0,$.Z)(e,[{key:"id",get:function(){return this.decoration.type.spec.id}},{key:"from",get:function(){return this.decoration.from}},{key:"data",get:function(){return this.decoration.type.spec.data}},{key:"HTMLAttributes",get:function(){return this.decoration.type.attrs}},{key:"toString",value:function(){return JSON.stringify({id:this.id,data:this.data,from:this.from,HTMLAttributes:this.HTMLAttributes})}}]),e}(),ec=n(10221),es=n(12741),el=n(84636),eu=n.n(el),ed=n(35838),ef=n.n(ed),ep=n(9850),em=n.n(ep),eh=n(36069),eg=n(39428),ev=n(39875);function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ex(e){for(var t=[],n=e.length-1;n>=0;n--){var r=e[n];t.push(ey(ey({},r),{},{prev:r.next,next:r.prev}))}return t}var ej=function(){function e(t){(0,V.Z)(this,e),this.map=t,(0,B.Z)(this,"undoQueue",[])}return(0,$.Z)(e,[{key:"flushUndoQueue",value:function(){var e=this.undoQueue;return this.undoQueue=[],e}},{key:"set",value:function(e,t){var n=this.map.get(e);return this.undoQueue.unshift({type:"set",key:e,next:n,prev:t}),this.map.set(e,t)}},{key:"delete",value:function(e){var t=this.map.get(e);return void 0===t||this.undoQueue.unshift({type:"set",key:e,next:t,prev:void 0}),this.map.delete(e)}}]),e}();function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ek(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eC(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function eC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eP=function(){function e(t){(0,V.Z)(this,e),this.options=t,(0,B.Z)(this,"decorations",a.EH.empty),(0,B.Z)(this,"annotations",[]),(0,B.Z)(this,"map",void 0),(0,B.Z)(this,"restoreMap",void 0),(0,B.Z)(this,"refreshDecorations",!1),(0,B.Z)(this,"hasChanges",!1),(0,B.Z)(this,"undoableMap",void 0),(0,B.Z)(this,"filmstripCutData",null),(0,B.Z)(this,"cutData",null),(0,B.Z)(this,"moveInstructionMap",{}),this.map=t.map,this.restoreMap=t.restoreMap,this.undoableMap=new ej(this.map)}return(0,$.Z)(e,[{key:"persistRestoreMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={deletion:0,relToAbs:0,setting:0,total:0},o=performance.now();(n||this.hasChanges)&&(this.transactYDoc(function(){var n,o=performance.now(),i=ek(t.restoreMap);try{for(i.s();!(n=i.n()).done;){var a=n.value.key;t.restoreMap.delete(a)}}catch(e){i.e(e)}finally{i.f()}r.deletion=performance.now()-o,t.map.forEach(function(n){var o=n.id,i=n.pos,a=n.data;try{var c=performance.now(),s=t.relToAbs(e,i);r.relToAbs+=performance.now()-c;var l=performance.now();t.restoreMap.set(o,{id:o,data:a,absPos:s}),r.setting+=performance.now()-l}catch(e){console.error("[Annotations] persistRestoreMap error: ",e.message)}})}),r.total=performance.now()-o,this.log("[Annotations] persistRestoreMap in ".concat(r.total,"ms"),{values:this.restoreMap.yarray.toArray(),performance:r}),this.hasChanges=!1)}},{key:"flushMoveInstructionQueue",value:function(){var e=this.moveInstructionMap;return this.moveInstructionMap={},Object.values(e)}},{key:"clearCutData",value:function(){this.cutData=null,this.filmstripCutData=null}},{key:"getAnnotationsBetween",value:function(e,t,n){var r,o=[],i=ek(this.map.values());try{for(i.s();!(r=i.n()).done;){var a=r.value;try{var c=this.relToAbs(e,a.pos);if(null===c)continue;t<=c&&c<n&&o.push({id:a.id,data:a.data,pos:c,relativePos:a.pos})}catch(e){console.warn("[Annotations] getAnnotationsBetween error: ",e.message)}}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"apply",value:function(e,t){if(F.Gt.getState(t).isChangeOrigin){try{this.createDecorations(t)}catch(e){console.warn("[Annotations] handle remote change, not create decorations: ".concat(e.message))}return this}var n=e.getMeta(ec.Z);if(n){switch(n.type){case"addAnnotation":this.addAnnotation(n,t);break;case"restoreAnnotations":this.restoreAnnotations(n);break;case"clearAnnotations":this.clearAnnotations();break;case"deleteAnnotation":this.deleteAnnotation(n.id);break;case"refreshAnnotationDecorations":try{this.createDecorations(t)}catch(e){console.warn("could not create decorations: ".concat(e.message))}break;case"moveAnnotations":this.moveAnnotations(t,n.toMove)}return this.hasChanges=!0,this}switch(e.getMeta("uiEvent")){case"cut":this.handleCutTransaction(t,e);break;case"paste":this.handlePasteTransaction(t,e)}var r=e.getMeta("annotationEvent");switch(null==r?void 0:r.type){case"split-card":this.handleSplitCard(t,e,r);break;case"split-block":this.handleSplitBlock(t,e,r);break;case"join-forward":this.handleJoinForward(t,e,r);break;case"join-backward":this.handleJoinBackward(t,e,r);break;case"update-node-attrs":this.handleUpdateNodeAttrs(t,e,r);break;case"rearrange-cards":this.handleRearrangeCards(t,e,r);break;case"move":this.handleMove(t,e,r);break;case"merge-cards":this.handleMergeCards(t,e,r);break;case"drop":this.handleDropAnnotations(t,e,r);break;case"unwrap-node":this.handleUnwrapNode(t,e,r);break;case"wrap-nodes":this.handleWrapNodes(t,e,r);break;case"filmstrip-cut":this.handleFilmstripCut(t,e,r);break;case"filmstrip-paste":this.handleFilmstripPaste(t,e,r);break;default:e.getMeta("appendedTransaction")||(this.handleReplaceTransaction(t,e),this.handleReplaceAroundTransaction(t,e))}return e.docChanged&&(this.hasChanges=!0),this.handleLocalChange(e)}},{key:"restore",value:function(e,t){var n=this;t.forEach(function(t){var r=t.next,o=t.key;void 0===r?n.map.delete(o):n.map.set(o,eO(eO({},r),{},{pos:n.refreshRelativePos(e,r.pos)}))}),this.persistRestoreMap(e,!0)}},{key:"handleUnwrapNode",value:function(e,t,n){var r=this,o=n.pos,i=t.before.resolve(o),a=i.start(i.depth+1),c=t.before.resolve(a).end(),s=this.getAnnotationsBetween(e,a,c).map(function(t){var n=t.id,i=t.relativePos,c=r.relToAbs(e,i);return null===c?null:{id:n,newPos:o+(c-a)}}).filter(function(e){return!!e});this.log("%c[Annotations] unwrap node","color: green",{tr:t,pos:o,start:a,end:c,toMove:s}),s.length>0&&this.enqueueMoveInstructions(s)}},{key:"handleWrapNodes",value:function(e,t,n){var r=n.start,o=n.end,i=n.level,a=this.getAnnotationsBetween(e,r,o).map(function(e){return{id:e.id,newPos:e.pos+i}}).filter(function(e){return!!e});this.log("%c[Annotations] wrap nodes","color: green",{tr:t,start:r,end:o,toMove:a}),a.length>0&&this.enqueueMoveInstructions(a)}},{key:"handleMergeCards",value:function(e,t,n){var r=n.insertPos,o=n.contentPos,i=t.before.nodeAt(o);if(!i){console.error("[AnnotationState] trying to merge cards, but cannot resolve content wrapper");return}var a=this.getAnnotationsBetween(e,o,o+i.nodeSize).map(function(e){return{id:e.id,newPos:r+(e.pos-o-1)}});this.log("%c[Annotations] merge cards","color: green",{transaction:t,insertPos:r,contentPos:o,toMove:a}),a.length>0&&this.enqueueMoveInstructions(a)}},{key:"handleRearrangeCards",value:function(e,t,n){var r=this,o=n.rearrangedCardPositions,i=n.insertPos,a=o.flatMap(function(n){var o=n.newPos,i=n.oldPos,a=t.before.resolve(i);return r.getAnnotationsBetween(e,i,i+a.nodeAfter.nodeSize).map(function(e){return{id:e.id,newPos:o+(e.pos-i)}})}),c=[],s=(0,I.Y0)(t.before);if(s){var l=o[0].oldPos,u=Math.min(l,i),d=Math.max(l,i);c=s.flatMap(function(n){var i=n.node,a=n.pos;if(!(a>=u&&a<=d&&!o.find(function(e){return e.id===i.attrs.id})))return[];var c=t.before.resolve(a),s=a+c.nodeAfter.nodeSize;return r.getAnnotationsBetween(e,a,s).map(function(e){var n=e.id,r=e.pos;return{id:n,newPos:t.mapping.map(r)}})})}this.log("%c[Annotations] rearrange cards","color: green",{transaction:t,rearrangedCardPositions:o,annotationsInRearrangedCards:a,jumpedAnnotations:c});var f=[].concat((0,es.Z)(a),(0,es.Z)(c));f.length>0&&this.enqueueMoveInstructions(f)}},{key:"handleMove",value:function(e,t,n){var r=n.insertPos,o=n.insertPosRaw,i=n.pos,a=n.end,c=this.getAnnotationsBetween(e,i,a).map(function(e){return{id:e.id,newPos:r+(e.pos-i)}}),s=this.getAnnotationsBetween(e,Math.min(o,a),Math.max(o,i)).map(function(e){var n=e.id,r=e.pos;return{id:n,newPos:t.mapping.map(r)}});this.log("%c[Annotations] move","color: green",{transaction:t,insertPos:r,insertPosRaw:o,pos:i,end:a,annotationsInCard:c,jumpedAnnotations:s});var l=[].concat((0,es.Z)(c),(0,es.Z)(s));l.length>0&&this.enqueueMoveInstructions(l)}},{key:"handleUpdateNodeAttrs",value:function(e,t,n){var r=n.pos,o=t.doc.nodeAt(r);if(o){var i=this.getAnnotationsBetween(e,r,r+o.nodeSize).map(function(e){return{id:e.id,newPos:e.pos}});this.log("%c[Annotations] update node attrs","color: green",{transaction:t,pos:r,toMove:i}),i.length>0&&this.enqueueMoveInstructions(i)}}},{key:"handleJoinBackward",value:function(e,t,n){var r=this,o=n.atBeginning,i=n.joinPos;if(o){var a=t.before.resolve(i),c=t.before.resolve(a.before()),s=c.nodeBefore,l=c.nodeAfter;if(s&&l){var u=c.pos+l.nodeSize,d=c.pos-s.nodeSize,f=e.selection.from;this.log("%c[Annotations] join backward","color: green",{transaction:t,prevBlock:s,nextBlock:l,nextBlockPos:c.pos,nextBlockEnd:u,prevBlockPos:d,joinPoint:f});var p=this.getAnnotationsBetween(e,c.pos,u);if(0===p.length){this.enqueueRefreshDecorations();return}0===l.content.size?(p.forEach(function(e){var t=e.id;return r.undoableMap.delete(t)}),requestAnimationFrame(function(){r.writeUndoStack(e)})):this.enqueueMoveInstructions(p.map(function(e){var t=e.id,n=Math.max(e.pos-c.pos-1,0);return{id:t,newPos:(0===s.content.size?d:f)+n}}))}}}},{key:"handleJoinForward",value:function(e,t,n){var r=this,o=n.atEnd,i=n.joinPos;if(o){var a=t.before.resolve(i),c=(0,H.nv)(a,function(e){return e.isBlock})[0],s=c.pos,l=c.node,u=t.before.resolve(a.after()),d=u.nodeAfter;if(d){var f=u.pos+d.nodeSize;this.log("%c[Annotations] join forward","color: green",{sel:e.selection,prevBlock:l,transaction:t,deleteAnnotations:!!d.isAtom,joinPos:a.pos,prevBlockPos:s,nextBlockPos:u.pos,nextBlock:d});var p=this.getAnnotationsBetween(e,s,s+l.nodeSize),m=this.getAnnotationsBetween(e,u.pos,f);if(0===m.length&&0===p.length){this.enqueueRefreshDecorations();return}var h=function(t){t.forEach(function(e){var t=e.id;return r.undoableMap.delete(t)}),requestAnimationFrame(function(){r.writeUndoStack(e)})};d.isAtom&&l.content.size>0?h(m):0===l.content.size?h(p):this.enqueueMoveInstructions(m.map(function(e){var t=e.id,n=Math.max(e.pos-u.pos-1,0);return{id:t,newPos:(0===l.content.size?s:i)+n}}))}}}},{key:"handleSplitBlock",value:function(e,t,n){var r=n.splitPos;if(n.atBeginning){this.enqueueRefreshDecorations();return}var o=t.before.resolve(r),i=(0,H.nv)(o,function(e){return e.isBlock})[0],a=i.pos,c=i.node,s=e.selection.$from,l=(0,H.nv)(s,function(e){return e.isBlock})[0],u=this.getAnnotationsBetween(e,r,a+c.nodeSize).map(function(e){var t=e.id,n=e.pos-r;return{id:t,newPos:l.pos+(0===n?n:n+1)}});u.length>0?this.enqueueMoveInstructions(u):this.enqueueRefreshDecorations(),this.log("%c[Annotations] split block","color: green",{sel:e.selection,transaction:t,splitPos:r,toMove:u,$before:o})}},{key:"handleSplitCard",value:function(e,t,n){var r=n.splitPos,o=t.before.resolve(r),i=(0,H.nv)(o,I.KH)[0];if(i){var a=i.pos,c=i.pos+i.node.nodeSize,s=this.getAnnotationsBetween(e,a,c).map(function(e){var n=e.id,o=e.pos;return{id:n,newPos:o===r?t.mapping.map(o+1)-1:t.mapping.map(o)}});this.log("%c[Annotations] split card","color: green",{transaction:t,splitPos:r,parentEnd:c,toMove:s}),this.enqueueMoveInstructions(s)}}},{key:"handlePasteTransaction",value:function(e,t){if(this.cutData||this.filmstripCutData){var n=t.steps.find(function(e){return"replace"===e.jsonID});if(n){var r=n.from,o=n.to,i=n.slice.openStart,a=e.doc.resolve(n.from),c=o===r?r:r+1,s=null==a.nodeBefore&&a.parent.isBlock,l=!i||s;if(this.log("%c[Annotations] paste transaction","color: green",{transaction:t,insertPos:r,resolved:a,isPasteBeginning:s,pasteType:this.cutData?"cut":"filmstrip-cut"}),this.cutData){var u=this.cutData;this.cutData=null;var d=u.toMove.map(function(e){var t=e.id,n=e.offset;return{id:t,newPos:c+(l?n:Math.max(0,n))}});d&&d.length>0&&(this.log("[Annotations] paste from cut final move",d),this.enqueueMoveInstructions(d))}else if(this.filmstripCutData){var f=this.filmstripCutData;this.filmstripCutData=null;for(var p=c-1;p<e.doc.nodeSize;){var m=e.doc.nodeAt(p);if(m&&(0,I.KH)(m))break;p++}var h=this.getMoveInstructionsForFilmstripPaste(t,f,p);h&&h.length>0&&(this.log("[Annotations] paste from filmstrip cut final move",h),this.enqueueMoveInstructions(h))}}}}},{key:"getMoveInstructionsForFilmstripPaste",value:function(e,t,n){if(t){var r=(0,P.N2)(e.doc,I.KH);if(r){var o=e.doc.resolve(n).depth,i=r.filter(function(t){var n=t.pos;return e.doc.resolve(n).depth===o}),a=i.findIndex(function(e){return e.pos===n});if(-1!==a){var c=i.slice(a);return t.flatMap(function(e){var t=e.cardIndex;return e.annotations.map(function(e){var n=e.id,r=e.offset,o=c[t];if(o)return{id:n,newPos:o.pos+r}}).filter(function(e){return!!e})})}}}}},{key:"handleFilmstripPaste",value:function(e,t,n){if(this.cutData||this.filmstripCutData){var r=n.insertPos;if(this.cutData){var o=this.cutData;this.cutData=null;var i=o.toMove.map(function(e){return{id:e.id,newPos:r+e.offset}});i&&i.length>0&&(this.log("[Annotations] filmstripPaste from cut final move",{tr:t,cutData:o,moveInstructions:i}),this.enqueueMoveInstructions(i))}else if(this.filmstripCutData){var a=this.filmstripCutData;this.filmstripCutData=null;var c=this.getMoveInstructionsForFilmstripPaste(t,a,r);c&&c.length>0&&(this.log("%c[Annotations] filmstripPaste from filmstrip cut final move","color: green",{tr:t,filmstripCutData:a,moveInstructions:c}),this.enqueueMoveInstructions(c))}}}},{key:"handleFilmstripCut",value:function(e,t,n){var r=this;this.cutData=null,this.filmstripCutData=n.deleted.map(function(n){var o=n.cardIndex,i=n.pos,a=t.before.resolve(i),c=i+a.nodeAfter.nodeSize;return{cardIndex:o,annotations:r.getAnnotationsBetween(e,i,c).map(function(e){return{id:e.id,offset:e.pos-i}})}}),this.log("%c[Annotations] filmstripCut","color: green",{tr:t,filmstripCutData:this.filmstripCutData})}},{key:"handleCutTransaction",value:function(e,t){var n=this,r=t.steps.find(function(e){return"replace"===e.jsonID});if(r){this.filmstripCutData=null;var o=r.from,i=r.to,a=e.doc.resolve(o),c=null==a.nodeAfter&&null==a.nodeBefore&&a.parent.isBlock,s=this.getAnnotationsBetween(e,o-(c?1:0),i),l=s.map(function(t){var r=n.relToAbs(e,t.relativePos);return{id:t.id,offset:r-o}});this.cutData={slice:r.slice,toMove:l},this.log("%c[Annotations] cut transaction","color:green",{isWholeBlock:c,resolved:a,transaction:t,annotations:s,moveData:l})}}},{key:"handlePrependContentToBlock",value:function(e,t){var n=this,r=t.steps.find(function(e){return"replace"===e.jsonID});if(r){var o=r.from,i=t.before.resolve(o);if(i.nodeAfter){var a=this.getAnnotationsBetween(e,o,o+i.nodeAfter.nodeSize).map(function(r){var i=r.id,a=r.relativePos,c=n.relToAbs(e,a);return{id:i,newPos:c===o?t.mapping.map(c+1)-1:t.mapping.map(c)}});a.length>0&&(this.log("%c[Annotations] replace transaction - prepend content","color:green",{tr:t,annotationsToMove:a}),this.enqueueMoveInstructions(a))}}}},{key:"handleReplaceTransaction",value:function(e,t){var n=this,r=t.steps.find(function(e){return"replace"===e.jsonID});if(r){var o=r.from,i=r.to,a=t.before.resolve(o),c=t.before.resolve(i),s=a.parent!==c.parent,l=0==r.slice.content.size,u=0===a.parentOffset&&i>=o+a.parent.nodeSize-2,d=u&&l;if(0===c.parentOffset&&c.depth===a.depth+1&&c.pos-a.pos==1)return this.handlePrependContentToBlock(e,t);var f=!1;if(s){var p,m=d?[]:this.getAnnotationsBetween(e,o-a.parentOffset-1,o).map(function(t){var r=t.id,o=t.relativePos;return{id:r,newPos:n.relToAbs(e,o)}}),h=this.getAnnotationsBetween(e,i,i+(null===(p=c.nodeAfter)||void 0===p?void 0:p.nodeSize)+1).map(function(r){var o=r.id,i=r.relativePos;return{id:o,newPos:t.mapping.map(n.relToAbs(e,i))}}),g=[].concat((0,es.Z)(m),(0,es.Z)(h));this.log("[Annotations] multiline to move",g),g.length>0&&(f=!0,this.enqueueMoveInstructions(g))}var v=this.getAnnotationsBetween(e,o-(d||s&&0===a.parentOffset?1:0),i);v.length>0&&(f=!0,this.log("[Annotations] to delete",v),v.forEach(function(e){n.undoableMap.delete(e.id)})),f&&(this.log("%c[Annotations] replace transaction","color:green",{tr:t,annotationsToDelete:v,isWholeBlock:d,isMultiline:s,replacingEntireFromBlock:u,replacingWithNothing:l}),requestAnimationFrame(function(){n.writeUndoStack(e)}))}}},{key:"handleReplaceAroundTransaction",value:function(e,t){var n=this,r=ef()(t.steps.filter(function(e){return"replaceAround"===e.jsonID}),function(t){var r=t.from,o=t.to;return n.getAnnotationsBetween(e,r,o)}),o=eu()(r,function(e){return e.id}).map(function(e){var n=e.id,r=e.pos;return{id:n,newPos:t.mapping.map(r)}});return o.length>0&&this.log("%c[Annotations] replaceAround transaction","color:green",{tr:t,moveInsturctions:o}),0!==o.length&&(this.enqueueMoveInstructions(o),!0)}},{key:"clearAnnotations",value:function(){var e=this;this.transactYDoc(function(){e.map.forEach(function(t,n){e.map.delete(n)})})}},{key:"restoreAnnotations",value:function(e){this.log("%c[Annotations] restoreAnnotations","color: green",e);var t=e.toRestore;this.clearAnnotations(),this.enqueueMoveInstructions(t.filter(function(e){return null!=e.absPos}).map(function(e){var t=e.absPos;return{id:e.id,newPos:t}}))}},{key:"addAnnotation",value:function(e,t){this.log("%c[Annotations] addAnnotation","color: green",e);var n=e.pos,r=e.id,o=e.data,i=this.absToRel(t,n);this.map.set(r,{id:r,pos:i,data:o})}},{key:"deleteAnnotation",value:function(e){this.log("%c[Annotations] deleteAnnotation","color: green",e),this.map.delete(e)}},{key:"moveAnnotations",value:function(e,t){var n=this,r=this.map;this.log("%c[Annotations] moveAnnotations","color: green",t),this.transactYDoc(function(){t.forEach(function(t){var o=t.id,i=t.newPos,a=r.get(o)||{id:o};n.undoableMap.set(o,eO(eO({},a),{},{pos:n.absToRel(e,i)}))})}),this.writeUndoStack(e)}},{key:"writeUndoStack",value:function(e){var t=F.Gk.getState(e).undoManager;if(0!==t.undoStack.length){var n=this.undoableMap.flushUndoQueue();if(0!==n.length){var r=t.undoStack[t.undoStack.length-1],o="annotations",i=r.meta.get(o)||[];i.length>0&&this.log("[Annotations] existing undo stack",{existing:i,toWrite:n,stack:t.undoStack});var a=[].concat((0,es.Z)(n),(0,es.Z)(i));r.meta.set(o,a),this.log("[Annotations] writing to undo stack",a)}}}},{key:"createDecorations",value:function(e){var t=this.options.map;this.refreshDecorations=!1;var n=[],r=[];t.forEach(function(t,o){var i=(0,eg.XV)(e,t.pos);if(null!=i){var c=e.doc.nodeAt(i);c&&(null!=c&&c.isInline?n.push(a.p.inline(i,i+1,{class:"debug-comment-cursor"})):n.push(a.p.node(i,i+c.nodeSize,{class:"debug-comment-block"}))),r.push({id:o,data:t.data,relativePos:t.pos,pos:i})}}),e.doc.descendants(function(e,t,o){return!!(!(t>0)||(0,ev.ZM)(o)||(0,ev.ZM)(e))&&(r.filter(function(n){return n.pos>=t&&n.pos<t+e.nodeSize}).forEach(function(r){var o=r.id,i=r.data;n.push(a.p.node(t,t+e.nodeSize,{},{isAnnotation:!0,id:o,data:i}))}),!0)}),this.decorations=a.EH.create(e.doc,n),this.annotations=r}},{key:"handleDropAnnotations",value:function(e,t,n){var r=n.dragging,o=r.origNodePos,i=r.inBlock,a=r.inCard,c=n.droppedBlockPos,s=[];i.forEach(function(e){var t=c+(e.pos-o);s.push({id:e.id,newPos:t})}),this.getAnnotationsBetween(e,c,c+1).filter(function(e){return!s.find(function(t){return t.id===e.id})}).forEach(function(e){s.push({id:e.id,newPos:t.mapping.map(e.pos)})}),a.filter(function(e){return!s.find(function(t){return t.id===e.id})}).forEach(function(e){var n=t.mapping.map(e.pos);s.push({newPos:n,id:e.id})}),this.log("%c[Annotations] handleDropAnnotations","color: green",{action:n,tr:t,toMove:s}),s.length>0&&this.enqueueMoveInstructions(s)}},{key:"handleLocalChange",value:function(e){var t=this,n=(0,es.Z)(this.decorations.find(void 0,void 0,function(e){return e.isAnnotation&&t.moveInstructionMap[e.id]})),r=this.decorations.remove(em()(n)).map(e.mapping,e.doc).add(e.doc,n);return this.decorations=r,this}},{key:"absToRel",value:function(e,t){var n=(0,eg.jS)(e,t);if(!n)throw Error("Y.State non initialized");return n}},{key:"relToAbs",value:function(e,t){return(0,eg.XV)(e,t)}},{key:"refreshRelativePos",value:function(e,t){var n=F.Gt.getState(e),r=n.doc,o=n.type,i=n.binding,a=(0,eh.SF)(r,o,t,i.mapping);return(0,eh.JR)(a,o,i.mapping)}},{key:"enqueueMoveInstructions",value:function(e){var t=this;e.forEach(function(e){t.moveInstructionMap[e.id]&&console.error("[AnnotationState] trying to enqueue two move instructions for annotation with targetId=".concat(e.id)),t.moveInstructionMap[e.id]=e})}},{key:"enqueueRefreshDecorations",value:function(){this.refreshDecorations=!0}},{key:"transactYDoc",value:function(e){this.options.document.transact(e)}},{key:"log",value:function(){var e,t;q.VH.get("debugComments")?(e=console).log.apply(e,arguments):(t=console).debug.apply(t,arguments)}}]),e}(),eS=function(e){var t=U()(function(e){ec.Z.getState(e.state).persistRestoreMap(e.state)},500);return new S.Sy({key:ec.Z,state:{init:function(){return new eP(e)},apply:function(e,t,n,r){return t.apply(e,r)}},view:function(){return{update:function(e){t(e)}}},props:{transformPasted:function(t){var n,r=this.getState(e.editor.state),o=null===(n=t.content.firstChild)||void 0===n?void 0:n.attrs.docId;return o&&o!==e.editor.gammaDocId&&r.clearCutData(),t},handleDOMEvents:{copy:function(e){return this.getState(e.state).clearCutData(),!1}},decorations:function(t){var n=this.getState(t),r=n.decorations,o=n.annotations;return e.onUpdate&&e.onUpdate(r.find().map(function(e){return new ea(e)}),o),r}}})};function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eD=P.hj.create({name:"annotation",onCreate:function(){var e=this,t=function(){var e,t;q.VH.get("debugComments")?(e=console).log.apply(e,arguments):(t=console).debug.apply(t,arguments)};this.options.document.on("afterAllTransactions",function(n){var r=ec.Z.getState(e.editor.view.state),o=r.flushMoveInstructionQueue();o.length>0?(t("%c[Annotations] afterAllTransactions handling queued moves","color:pink",o),e.editor.commands.moveAnnotations(o)):r.refreshDecorations&&(t("%c[Annotations] afterAllTransactions refreshDecorations","color:pink"),e.editor.commands.refreshDecorations())});var n=ec.Z.getState(this.editor.state);window.gammaAnnotations=n;var r=F.Gk.getState(this.editor.state).undoManager;setTimeout(function(){r.on("stack-item-popped",function(t){var o=t.stackItem.meta.get("annotations");if(!o){n.persistRestoreMap(e.editor.state,!0);return}var i=r.undoStack,a=r.redoStack;"undo"===t.type&&a.length>0?a[a.length-1].meta.set("annotations",ex(o)):"redo"===t.type&&i.length>0&&i[i.length-1].meta.set("annotations",ex(o)),n.restore(e.editor.state,o)})},0),n.map.observe(U()(function(){t("[Annotations] map observe -> resfreshDecorations"),e.editor.commands.refreshDecorations()})),this.editor.commands.refreshDecorations()},addCommands:function(){return{restoreAnnotations:function(e){return function(t){var n=t.dispatch,r=t.tr;return n&&(r.setMeta(ec.Z,{type:"restoreAnnotations",toRestore:Object.values(e)}),n(r)),!0}},updateAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o,i=n.tr,a=n.state,c=n.dispatch,s=null,l=null,u=(r="string"==typeof e?e:e.name,(o=a.schema).nodes[r]?"node":o.marks[r]?"mark":null);return!!u&&("node"===u&&(s=(0,P.jo)(e,a.schema)),"mark"===u&&(l=(0,P.TP)(e,a.schema)),c&&i.selection.ranges.forEach(function(e){var n=e.$from.pos,r=e.$to.pos;a.doc.nodesBetween(n,r,function(e,o){s&&s===e.type&&i.setNodeMarkup(o,void 0,eE(eE({},e.attrs),t)).setMeta("annotationEvent",{type:"update-node-attrs",pos:o}),l&&e.marks.length&&e.marks.forEach(function(a){if(l===a.type){var c=Math.max(o,n),s=Math.min(o+e.nodeSize,r);i.addMark(c,s,l.create(eE(eE({},a.attrs),t)))}})})}),!0)}},wrapWithAnnotations:function(e,t){return function(n){var r=n.state,o=n.tr,i=n.dispatch,a=r.schema.nodes[e],c=r.selection,s=c.$from,l=c.$to,u=s.blockRange(l),d=u&&(0,G.nd)(u,a,t);if(!d||!u)return!1;var f=u.start,p=u.end;return!i||(o.wrap(u,d).setMeta("annotationEvent",{type:"wrap-nodes",start:f,end:p,level:1}).scrollIntoView(),!0)}},moveAnnotations:function(e){return function(t){var n=t.dispatch,r=t.tr;return n&&(r.setMeta(ec.Z,{type:"moveAnnotations",toMove:e}),n(r)),!0}},clearAnnotations:function(){return function(e){var t=e.dispatch,n=e.tr;return t&&(n.setMeta(ec.Z,{type:"clearAnnotations"}),t(n)),!0}},refreshDecorations:function(){return function(e){var t=e.dispatch,n=e.tr;return t&&(n.setMeta(ec.Z,{type:"refreshAnnotationDecorations"}),t(n)),!0}},addAnnotation:function(e){var t=e.pos,n=e.id,r=e.data;return function(e){var o=e.dispatch,i=e.state;return o&&i.tr.setMeta(ec.Z,{type:"addAnnotation",id:n,data:r,pos:t}),!0}},deleteAnnotation:function(e){return function(t){var n=t.dispatch,r=t.state;return n&&r.tr.setMeta(ec.Z,{type:"deleteAnnotation",id:e}),!0}}}},addProseMirrorPlugins:function(){var e=this.options,t=e.document,n=e.onUpdate,r=new ei(t);return[eS({document:t,editor:this.editor,map:r.annotations,restoreMap:r.annotationsAbsolute,onUpdate:n})]}}),eI=n(52527),ez=P.hj.create({name:"draftComments",addCommands:function(){return{removeDraftComments:function(e){return function(t){var n=t.dispatch,r=t.tr;if(n){var o={type:"removeDraftComment",comments:Array.isArray(e)?e:[e]};r.setMeta(eI.N,o),n(r)}return!0}},createDraftComment:function(e){return function(t){var n=t.dispatch,r=t.tr;return n&&(r.setMeta(eI.N,{type:"createDraftComment",comment:e}),n(r)),!0}}}},addProseMirrorPlugins:function(){return[(0,eI.O)()]}}),eT=n(9734),eM=new S.H$("mobileAnnotationPluginKey"),eN=function(){function e(){(0,V.Z)(this,e),(0,B.Z)(this,"pos",null),(0,B.Z)(this,"timeout",void 0)}return(0,$.Z)(e,[{key:"apply",value:function(e,t){var n=e.getMeta(eM);return n&&"setPos"in n&&(this.pos=n.setPos),this}}]),e}(),eR=P.hj.create({name:"mobileAnnotation",addCommands:function(){return{setMobileAddBlockComment:function(e){return function(t){var n=t.dispatch,r=t.tr,o=t.view;if(!n)return!1;if(null===e)return r.setMeta(eM,{setPos:null}),n(r),!0;var i=e.clientX,a=e.clientY,c=o.posAtCoords({left:i,top:a});if(null===c)return!0;var s=(0,ev.f$)(c.inside,o);if(!s)return!1;var l=o.coordsAtPos(s.pos),u=i-l.left,d=a-l.top;return r.setMeta(eM,{setPos:{pos:s.pos,end:s.end,offsetX:u,offsetY:d}}),n(r),!0}}}},addProseMirrorPlugins:function(){var e;return[(e=this.editor,new S.Sy({key:eM,state:{init:function(){return new eN},apply:function(e,t,n,r){return t.apply(e,r)}},props:{handleDOMEvents:{click:function(t,n){if(!(0,eT.s2)())return!1;if(!n.target.closest("[data-comments-wrapper]")){var r=eM.getState(t.state);r.pos||(r.timeout?(clearTimeout(r.timeout),r.timeout=null,e.commands.setMobileAddBlockComment(n)):r.timeout=setTimeout(function(){r.timeout=null},300))}}},decorations:function(e){var t=eM.getState(e).pos;if(null===t)return a.EH.empty;var n=a.p.node(t.pos,t.end,{},{isMobileAnnotation:!0,type:"show-buttons",offsetX:t.offsetX,offsetY:t.offsetY});return a.EH.create(e.doc,[n])}}}))]}}),eL=n(99638),e_=P.hj.create({name:"BlockHover",addProseMirrorPlugins:function(){return[(0,eL.RT)(this.editor)]}}),eH=n(41962),eZ=n(56143),eB=n(47684),eF=n(66902),eW=P.hj.create({name:"collaboration",priority:eF.a.Collaboration,addOptions:function(){return{document:null,field:"default",fragment:null}},onCreate:function(){this.editor.extensionManager.extensions.find(function(e){return"history"===e.name})&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands:function(){return{undo:function(){return function(e){var t=e.tr,n=e.state,r=e.dispatch;return t.setMeta("preventDispatch",!0),0!==F.Gk.getState(n).undoManager.undoStack.length&&(!r||(0,eZ.Yw)(n)||!0)}},redo:function(){return function(e){var t=e.tr,n=e.state,r=e.dispatch;return t.setMeta("preventDispatch",!0),0!==F.Gk.getState(n).undoManager.redoStack.length&&(!r||(0,eZ.KX)(n)||!0)}}}},addKeyboardShortcuts:function(){var e=this;return{"Mod-z":function(){return e.editor.commands.undo()},"Mod-y":function(){return e.editor.commands.redo()},"Shift-Mod-z":function(){return e.editor.commands.redo()}}},addProseMirrorPlugins:function(){var e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[(0,eB.Z)(e),(0,eZ.v0)(),new S.Sy({appendTransaction:function(e,t,n){if(e.some(function(e){return!1==e.getMeta("addToHistory")})){var r=n.tr;return r.setMeta("addToHistory",!1),r}return null}})]}}),eU=n(67702),eG=n(98537),eq=n.n(eG),eV=n(98621),e$=n.n(eV);function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var eY=function(){return null},eX=function(e){return Array.from(e.entries()).map(function(e){var t=(0,c.Z)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({clientId:t[0]},t[1].user)})},eJ=P.hj.create({name:"collaborationCursor",addOptions:function(){return{provider:null,user:{name:null,color:null},render:function(e){var t=document.createElement("span");if(!e.isReady)return t;t.classList.add("collaboration-cursor__caret"),t.setAttribute("style","border-color: ".concat(e.color));var n=document.createElement("div");n.classList.add("collaboration-cursor__label"),n.setAttribute("style","background-color: ".concat(e.color,"; color: ").concat(e$()(e.color).isDark()?"white":"black"));var r=e.name.split(" ")[0];return n.insertBefore(document.createTextNode(r),null),t.insertBefore(n,null),t},onUpdate:eY}},addStorage:function(){return{users:[]}},addCommands:function(){var e=this;return{user:function(t){return function(){return e.options.user=eq()({},e.options.user,t),e.options.provider.awareness.setLocalStateField("user",e.options.user),!0}}}},addProseMirrorPlugins:function(){var e=this;return[(0,eU.JL)((e.options.provider.awareness.setLocalStateField("user",e.options.user),e.storage.users=eX(e.options.provider.awareness.states),e.options.provider.awareness.on("update",function(){e.storage.users=eX(e.options.provider.awareness.states)}),e.options.provider.awareness),{cursorBuilder:this.options.render})]}}),eQ=n(17945),e0=P.hj.create({name:"globalDragHandle",priority:eF.a.GlobalDragHandle,addOptions:function(){return{scrollerSelector:"body"}},addStorage:function(){return{enabled:!0}},addProseMirrorPlugins:function(){return[(0,eQ.f)({editor:this.editor,storage:this.storage,scrollerSelector:this.options.scrollerSelector})]},extendNodeSchema:function(e){var t;return{containerHandle:null!==(t=(0,P.nU)((0,P.Nl)(e,"containerHandle",e)))&&void 0!==t&&t}}}),e1=n(52347),e2=n(99703),e3=n(38815),e4=P.hj.create({name:"filmstrip",onCreate:function(){var e=F.Gk.getState(this.editor.state).undoManager;e.on("stack-item-popped",function(t){var n=e.undoStack,r=e.redoStack,o=t.stackItem.meta.get("filmstripState");if(o){var i=(0,e3.sy)((0,E.bh)().getState());"undo"===t.type&&r.length>0?r[r.length-1].meta.set("filmstripState",i):"redo"===t.type&&n.length>0&&n[n.length-1].meta.set("filmstripState",i),(0,E.bh)().dispatch((0,e3.tE)(o))}})}}),e5=n(82114),e8=n(92470),e6=n(89648),e9=n(41261),e7=P.hj.create({name:"scrollMargin",addProseMirrorPlugins:function(){return[new S.Sy({props:{scrollMargin:e9.Sf,scrollThreshold:e9.Sf}})]}}),te=n(11723),tt=n(92397),tn=n(91718),tr=n(95173),to=n(94301),ti=n(11919),ta=n(4036),tc=n(65903),ts=n.n(tc),tl=n(59131),tu=n(52322),td=function(e){var t=e.editor,n=(0,v.useState)(null),r=n[0],o=n[1];(0,v.useEffect)(function(){if(t){var e=function(){o(t.state.selection)};return e(),t.on("selectionUpdate",e),function(){t.off("selectionUpdate",e)}}},[t]);var i=r instanceof S.qv,a=r instanceof tl.c,c=ts()((null==r?void 0:r.toJSON().type)||"none"),s=ts()(i&&(null==r?void 0:r.node.type.name)||""),l=a?void 0:i?"blue":"green";return(0,tu.jsx)(to.h,{children:(0,tu.jsx)(ti.k,{className:"selection-debugger",position:"absolute",top:"50px",left:"10px",zIndex:"999999",children:(0,tu.jsxs)(d.K,{direction:"column",children:[(0,tu.jsxs)(ta.C,{colorScheme:l,children:[c,s&&(0,tu.jsxs)("i",{children:[" (",s,")"]})]}),r&&(0,tu.jsxs)(ta.C,{colorScheme:"gray",children:["f:",r.from," - t:",r.to,a&&" | side:".concat(r.side)]})]})})})},tf=n(37164),tp=n(43997),tm=n(71672),th=n(49392),tg=n(62141),tv=(0,tf.kP)("1234567890",10),tb=function(){var e=tm.Q.getItem(th.H.sessionId);if(e)return e;var t="".concat(+new Date,"__").concat(tv());return tm.Q.setItem(th.H.sessionId,t),t},ty=function(e,t){var n=(0,k.SE)(),r=n.user,o=n.isUserLoading,i=n.anonymousUser,a=n.color,c=(0,v.useRef)(!1),s=(0,tp.I0)(),l=(0,v.useMemo)(function(){return tb()},[]),u=(0,v.useMemo)(function(){return{id:(null==r?void 0:r.id)||i.id,color:a.value,sessionId:l,idleSince:null,name:(null==r?void 0:r.displayName)||i.displayName||"",profileImageUrl:(null==r?void 0:r.profileImageUrl)||"",isReady:!o,spotlight:{pos:null,cardId:null}}},[r,a,o,i,l]);(0,v.useEffect)(function(){if(e&&!e.isDestroyed&&t){e.commands.user(u),!c.current&&u.isReady&&(e.chain().blur().focusDelayed().run(),c.current=!0),s((0,tg.MU)({sessionId:u.sessionId}));var n=function(e,n){e.added,e.updated,e.removed,requestIdleCallback(function(){var e=eX(t.awareness.states);s((0,tg.Tx)({collaborators:e}))},{timeout:500})};t.awareness.on("change",n);var r=U()(n,tg.Jp);return t.awareness.on("update",r),function(){t.awareness.off("change",n),t.awareness.off("update",r)}}},[u,e,t,s]),(0,v.useEffect)(function(){if(e){var t=U()(function(t){e.commands.user(t)},10);return(0,E.tC)(tg.gL,t)}},[e])},tx=n(68015),tj=n.n(tx),tw=function(e){var t=(0,v.useState)([]),n=t[0],r=t[1];return{logMessages:n,logPerfMessage:(0,v.useCallback)(function(t){if(e){var n=performance.now(),o={msg:t,timestamp:n};r(function(e){return 0===e.length?[].concat((0,es.Z)(e),[o]):e.find(function(e){return e.msg===t})||e[e.length-1].msg===t?e:(o.duration=tj()(n-e[e.length-1].timestamp,2),[].concat((0,es.Z)(e),[o]))})}},[e]),dumpLog:(0,v.useCallback)(function(){e&&r(function(e){try{console.table(e)}catch(e){}return[]})},[e])}},tO=n(21755),tk=n(81617),tC="custom",tP="updates",tS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=tk.ay(e.db,[tP]),r=(0,c.Z)(n,1)[0];return tk.go(r,tk.sc(e._dbref,!1)).then(function(n){t(r),y.ay(e.doc,function(){n.forEach(function(t){return y.NG(e.doc,t)})},e,!1)}).then(function(){return tk.S_(r).then(function(t){e._dbref=t+1})}).then(function(){return tk.QX(r).then(function(t){e._dbsize=t})}).then(function(){return r})},tA=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return tS(e).then(function(n){(t||e._dbsize>=500)&&tk.yP(n,y.D$(e.doc)).then(function(){return tk.IV(n,tk.UE(e._dbref,!0))}).then(function(){return tk.QX(n).then(function(t){e._dbsize=t})})})},tE=function(e){(0,Y.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,J.Z)(r);if(t){var o=(0,J.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,X.Z)(this,e)});function r(e,t){var o;return(0,V.Z)(this,r),(o=n.call(this)).doc=t,o.name=e,o._dbref=0,o._dbsize=0,o._destroyed=!1,o.db=null,o.synced=!1,o._db=tk.X3(e,function(e){return tk._w(e,[["updates",{autoIncrement:!0}],["custom"]])}),o.whenSynced=o._db.then(function(e){return o.db=e,tS((0,K.Z)(o),function(e){return tk.yP(e,y.D$(t))}).then(function(){return o._destroyed||(o.emit("synced",[(0,K.Z)(o)]),o.synced=!0),(0,K.Z)(o)})}),o._storeTimeout=1e3,o._storeTimeoutId=null,o._storeUpdate=function(e,t){if(o.db&&t!==(0,K.Z)(o)){var n=tk.ay(o.db,[tP]),r=(0,c.Z)(n,1)[0];tk.yP(r,e),++o._dbsize>=500&&(null!==o._storeTimeoutId&&clearTimeout(o._storeTimeoutId),o._storeTimeoutId=setTimeout(function(){tA((0,K.Z)(o),!1),o._storeTimeoutId=null},o._storeTimeout))}},t.on("update",o._storeUpdate),o.destroy=o.destroy.bind((0,K.Z)(o)),t.on("destroy",o.destroy),o}return(0,$.Z)(r,[{key:"destroy",value:function(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(function(e){e.close()})}},{key:"clearData",value:function(){var e=this;return this.destroy().then(function(){tk.Lj(e.name)})}},{key:"get",value:function(e){return this._db.then(function(t){var n=tk.ay(t,[tC],"readonly"),r=(0,c.Z)(n,1)[0];return tk.U2(r,e)})}},{key:"set",value:function(e,t){return this._db.then(function(n){var r=tk.ay(n,[tC]),o=(0,c.Z)(r,1)[0];return tk.gz(o,t,e)})}},{key:"del",value:function(e){return this._db.then(function(t){var n=tk.ay(t,[tC]),r=(0,c.Z)(n,1)[0];return tk.IV(r,e)})}}]),r}(Q.y),tD=function(e,t,n){var r=new tE(e,t),o=U()(function(){var e=t.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION");r.set("lastUpdated",new Date().toISOString()),r.set("schemaVersion",e||"")},1e3);return t.on("update",o),r.on("synced",function(){null==n||n()}),r},tI=n(56574),tz=n(93665),tT=n(55452),tM=n(40110),tN=n(55479),tR=n(49929),tL=n(8388),t_=n(32333),tH=n(24224),tZ=n(20406),tB=n(28526),tF=n.n(tB);n(18149);var tW=(r=(0,tZ.Z)(tF().mark(function e(t,n,r,o){var i,a,c,s,l;return tF().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(i=r||{}).id,c=i.length,e.next=4,fetch("".concat(x.v.MULTIPLAYER_WS_URL.replace("wss","https"),"/").concat(t,"/verify/").concat(n),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:a,length:c,clientCount:null==o?void 0:o.clientCount,totalCount:null==o?void 0:o.totalCount})});case 4:return s=e.sent,e.next=7,s.json();case 7:return l=e.sent,e.abrupt("return",l);case 11:e.prev=11,e.t0=e.catch(0);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(e,t,n,o){return r.apply(this,arguments)}),tU=function(e){var t=e.document.store.clients.get(e.document.clientID);if(t&&t.length)return t[t.length-1]},tG=(o=(0,tZ.Z)(tF().mark(function e(t,n,r){var o,i,a,c,s,l,u;return tF().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=tU(n),i={clientCount:n.document.store.clients.size,totalCount:(0,es.Z)(n.document.store.clients.values()).reduce(function(e,t){return e+t.reduce(function(e,t){return e+t.length},0)},0)},e.next=4,tW(t.gammaDocId,n.document.clientID,o,i);case 4:if(a=e.sent){e.next=8;break}return console.warn("[compareClocks] Failed to fetch remote clock"),e.abrupt("return",!1);case 8:return e.prev=8,(s=((null==o?void 0:o.id.clock)||0)+((null==o?void 0:o.length)||0)-(((null==a?void 0:null===(c=a.lastKnownItem.id)||void 0===c?void 0:c.clock)||0)+((null==a?void 0:a.lastKnownItem.length)||0)))>0&&console.warn("[compareClocks] Clock drift detected",{diffLastItem:s}),l=i.clientCount-(a.itemSummary.clientCount||0),u=i.totalCount-(a.itemSummary.totalCount||0),l>0&&console.warn("[compareClocks] clientCount drift detected",{diffClientCount:l}),u>0&&console.warn("[compareClocks] totalCount drift detected",{diffTotalCount:u}),e.abrupt("return",0===l&&u<=r&&s<=r);case 20:e.prev=20,e.t0=e.catch(8),console.warn("[compareClocks] Failed to fetch remote clock");case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,null,[[8,20]])})),function(e,t,n){return o.apply(this,arguments)}),tq=function(e){var t=e.editor,n=e.yProvider,r=e.enabled,o=e.pollingInterval,i=(0,v.useState)(Date.now()),a=i[0],c=i[1],s=(0,v.useState)(0),l=s[0],u=s[1],d=(0,v.useState)(0),f=d[0],p=d[1],m=(0,q.ye)("dataSyncClockDriftTolerance");return(0,v.useEffect)(function(){if(t&&n&&r){var e,i,a=!0,s=(e=(0,tZ.Z)(tF().mark(function e(){var r;return tF().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gammaDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tG(t,n,m);case 4:(r=e.sent)?c(Date.now()):console.warn("[useDataPersistenceSync_2] Clocks out of sync for doc",t.gammaDocId),requestIdleCallback(function(){u(function(e){return r?0:e+1}),p(function(e){return 0}),a&&(i=window.setTimeout(s,o))});case 7:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return s(),function(){clearTimeout(i),a=!1}}},[t,n,r,o,m]),{errorCountClock:l,errorCountPMState:f,yDocLastSynced:a}},tV=/^[\t\n -\}]$/,t$=function(e){var t=e.editor,n=e.pollingInterval,r=(0,v.useRef)(Date.now()),o=(0,v.useRef)(Date.now()),i=(0,v.useState)(0),a=i[0],c=i[1];return(0,v.useEffect)(function(){if(t){var e=function(e){!e.metaKey&&e.key.match(tV)&&(r.current=Date.now())},i=function(e){e.transaction.docChanged&&(r.current=Date.now(),o.current=Date.now())};t.on("update",i),t.view.dom.addEventListener("keydown",e,!0);var a=setInterval(function(){o.current-r.current>500?(console.error("[useDataPersistenceSync_0] Delay to capture changes has exceeded threshold"),c(function(e){return e+1})):c(0)},n);return function(){clearInterval(a),t.off("update",i),t.view.dom.removeEventListener("keydown",e,!0)}}},[t,n]),a};function tK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tK(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tX="data-sync-error-toast",tJ=(0,tu.jsx)(tR.G,{icon:tz.xH,size:"2x"}),tQ=(0,tu.jsx)(tR.G,{icon:tI.ik,size:"2x"}),t0=function(e){var t=e.type,n=e.yDocLastSynced;return function(){return(0,tu.jsx)(ti.k,{direction:"column",p:4,color:"white",bg:"warn"===t?"yellow.500":"red.500",borderRadius:"md",children:(0,tu.jsxs)(ti.k,{alignItems:"center",children:["warn"===t?tJ:tQ,(0,tu.jsxs)(l.xu,{ml:3,children:[(0,tu.jsx)(p.x,{lineHeight:6,fontSize:"sm",fontWeight:"bold",children:"warn"===t?(0,tu.jsx)(tT.cC,{id:"IkN23t"}):(0,tu.jsx)(tT.cC,{id:"kXEHsK"})}),n&&(0,tu.jsx)(p.x,{lineHeight:6,fontSize:"sm",children:(0,tu.jsx)(tT.cC,{id:"VxWwaW",values:{0:(0,tL.Dw)(new Date(n).toISOString())}})}),"error"===t&&(0,tu.jsxs)(tu.Fragment,{children:[(0,tu.jsx)(tM.i,{pt:2}),(0,tu.jsx)(p.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,tu.jsx)(tT.cC,{id:"Pw5K5r"})})]})]})]})})}},t1=function(e){var t=e.editor,n=e.yProvider,r=e.enabled,o=(0,E.CG)(tg.Tf),i=(0,tH.Br)("comment"),a=(0,E.CG)(tg.q7),c=(0,v.useState)(2e4),s=c[0],l=c[1],u=(0,t_.z$)(),d=(0,tN.p)(),f=(0,k.SE)().user,p=(0,v.useRef)(),m=(0,q.ye)("dataSyncErrorThreshold"),h=t$({editor:t,pollingInterval:s}),g=tq({editor:t,yProvider:n,enabled:r&&i,pollingInterval:s}),b=g.errorCountPMState,y=g.errorCountClock,x=g.yDocLastSynced,j={docSavedTime:a,yDocLastSynced:x,errorCountKeyboard:h,errorCountPMState:b,errorCountClock:y,clientID:null==n?void 0:n.document.clientID,userId:null==f?void 0:f.id},w=(0,v.useRef)(j);w.current=j;var O=y+b;(0,v.useEffect)(function(){l(0===O?2e4:4e3)},[O]);var C=r&&-1!==m&&O>m,P=r&&-1!==m&&O/m>2;return(0,v.useEffect)(function(){if(!C||o){if(d.isActive(tX)){d.close(tX);var e=p.current?+new Date-+p.current:void 0;null==u||u.trackDocEvent(t_.xW.DATA_SYNC_RECOVER,tY(tY({},w.current),{},{duration:e})),p.current=void 0}return}var n=t0({type:P?"error":"warn",yDocLastSynced:x});d.isActive(tX)?d.update(tX,{render:n}):(null==u||u.trackDocEvent(t_.xW.DATA_SYNC_ERROR,w.current),p.current=new Date,d({render:n,duration:null,id:tX})),P&&console.error("[useDataPersistenceSync] ERROR_THRESHOLD_EXCEEDED. docId:",null==t?void 0:t.gammaDocId)},[t,d,u,P,C,a,x,o]),P},t2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=(0,v.useRef)(0),r=(0,v.useRef)(0),o=(0,v.useState)(!1),i=o[0],a=o[1],c=(0,v.useState)(0),s=c[0],l=c[1],u=(0,v.useState)(document.hidden),d=u[0],f=u[1],p=(0,v.useRef)(function(){if(n.current++,n.current>=t&&(console.warn("[useRateLimiter] Limit hit! (".concat(t," per ").concat(e/1e3,"s)")),i||(a(!0),l(function(e){return e+1}))),!r.current){var o=e/t;r.current=b.Zi(function(){n.current>0?n.current--:(a(!1),b.cv(r.current),r.current=0)},o)}});return(0,v.useEffect)(function(){var e=function(){f(document.hidden),p.current()};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}},[]),[p.current,i,s,d]},t3=n(94659),t4=n(45650),t5=function(){return(0,tu.jsxs)(t3.g,{align:"flex-end",borderRadius:"base",shadow:"lg",p:3,bg:"gray.100",spacing:4,maxW:"300px",direction:"row",children:[(0,tu.jsxs)(l.xu,{children:[(0,tu.jsx)(p.x,{fontSize:"md",fontWeight:"bold",children:(0,tu.jsx)(tT.cC,{id:"oSUMyx"})}),(0,tu.jsxs)(p.x,{fontSize:"sm",children:[(0,tu.jsx)(tT.cC,{id:"CDva2g"})," ",(0,tu.jsx)("em",{children:(0,tu.jsx)(tT.cC,{id:"/vuJlA"})})," ","\uD83D\uDE0E"]})]}),(0,tu.jsx)(l.xu,{children:(0,tu.jsx)(t4.z,{size:"sm",onClick:function(){window.location.reload()},children:(0,tu.jsx)(tT.cC,{id:"HpK/8d"})})})]})},t8=function(e){var t=(0,tN.p)(),n=(0,v.useState)(!1),r=n[0],o=n[1];return(0,v.useEffect)(function(){if(e){var t=function(){var t=e.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION"),n=!!(t&&t>tr.bI);o(n),console[n?"warn":"debug"]("[SchemaVerifier] onUpdate",{requiredVersion:t,MY_VERSION:tr.bI,outdated:n})};return e.on("update",t),function(){e.off("update",t)}}},[e]),(0,v.useEffect)(function(){r&&!t.isActive("schema_outdated")&&t({id:"schema_outdated",duration:null,status:"warning",isClosable:!1,position:"bottom-left",render:t5})},[r,t]),r},t6=function(){return{SCHEMA_VERSION:String(tr.bI),SHARE_TOKEN:x.v.SHARE_TOKEN}},t9=(0,v.memo)(function(e){var t=e.doc,n=e.docId,r=e.onCreate,o=e.readOnly,i=void 0!==o&&o,a=e.scrollingParentSelector,P=e.hideForPreview,S=(0,O.bf)(),A=S.timeOnCreate,E=S.timeOnSetupProvider,D=S.timeOnDownloadDoc,I=(0,v.useState)("connecting"),z=I[0],T=I[1],N=(0,v.useState)(!1),_=N[0],H=N[1],B=(0,v.useRef)(!1);B.current=_;var F=(0,v.useState)(!1),W=F[0],U=F[1],G=(0,v.useState)(!1),q=G[0],V=G[1],$=(0,v.useRef)([]),K=(0,v.useState)(),Y=K[0],X=K[1],J=(0,v.useState)(),Q=J[0],ee=J[1],et=(0,v.useState)(),en=et[0],er=et[1],eo=(0,v.useState)(),ei=eo[0],ea=eo[1],ec=t8(Q);ty(Y,en),(0,tn.jB)(Y);var es=t2(),el=(0,c.Z)(es,4),eu=el[0],ed=el[1],ef=el[2],ep=el[3],em=t&&t.organization&&t.organization.id,eh=(0,j.$gs)(),eg=eh.isConnected,ev=eh.setHocuspocusConnected,eb=t1({editor:Y,yProvider:en,enabled:eg&&!ep&&!i}),ey=(0,w.y)("debugLogging"),ex=(0,w.y)("debugCardViewed"),ej=(0,w.y)("offline"),ew=tw(ey),eO=ew.logMessages,ek=ew.logPerfMessage,eC=ew.dumpLog;(0,v.useEffect)(function(){ej&&en&&!ei&&ea(tD(n,en.document,function(){"number"==typeof en.document.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION")&&(H(!0),U(!0))}))},[ej,en,n,ei]),(0,k.$K)((0,v.useCallback)(function(){en&&(en.disconnect(),en.configuration.parameters=t6(),setTimeout(function(){return en.connect()},500))},[en])),(0,tO.n)(Y),(0,v.useEffect)(function(){ev(B.current||"connected"===z||ep)},[ev,z,ep]),(0,s.z)(function(){return ev(null)},[]),(0,v.useEffect)(function(){en&&B.current&&"connected"===z&&(console.debug("[CollaborativeEditor] Force syncing on reconnect."),en.forceSync())},[en,z]),(0,v.useEffect)(function(){if(en){var e,t=ef>10;if(ed){console.warn("[CollaborativeEditor] Attempted to re-connect while rate limited (".concat(ef," of ").concat(10,").")),en.disconnect();return}if(t){console.error("[CollaborativeEditor - RECONNECT_RATE_LIMIT] Max rate limit violations reached (".concat(10,"). Will reload.")),setTimeout(function(){window.location.reload()},500);return}if(_)return ep?(console.debug("[CollaborativeEditor] Backgrounded, will wait ".concat(12e4,"s before disconnect")),e=b.iK(function(){console.debug("[CollaborativeEditor] Disconnecting after grace period"),en.disconnect()},12e4)):(console.debug("[CollaborativeEditor] Foregrounded, so re-connecting"),en.connect()),function(){e&&b.gr(e)}}},[en,_,ep,ed,ef]),(0,v.useEffect)(function(){Y&&!Y.isDestroyed&&em&&Y.commands.setOrgId(em)},[Y,em]),(0,v.useEffect)(function(){console.debug("[CollaborativeEditor] Creating yProvider for doc",n);var e=new y.QW({});ee(e),e.on("update",function(t){e.getMap("GammaPersistenceMeta").get("READY")&&(ek("Document data downloaded"),V(!0))}),ek("Setting up hocuspocus"),E();var t=new h.Ui({url:x.v.MULTIPLAYER_WS_URL,name:n,document:e,forceSyncInterval:15e3,parameters:t6(),onStatus:function(e){var t=e.status;console.debug("[CollaborativeEditor][onStatus]",{status:t}),T(t),"connected"===t?(ek("Hocuspocus connected"),H(!0)):"connecting"===t&&(ek("Hocuspocus connecting"),eu())},onSynced:function(){console.debug("[CollaborativeEditor] Provider synced"),U(!0)},onDisconnect:function(e){var t=e.event;console.debug("[CollaborativeEditor][onDisconnect]",{event:t}),t.code===m.NI.code&&console.error('[CollaborativeEditor] Provider disconnected with "Unauthorized.code", which is unexpected.',t)}});return er(t),x.v.DEBUG_ENABLED&&(window.gammaEditorProvider=t),$.current=[e5.zL,e7,tn.$1.configure({scrollerSelector:a}),eW.configure({document:e}),M.configure({provider:t}),eJ.configure({provider:t}),eD.configure({document:e}),eR,e_,ez.configure(),eH.NM,tt.W,R.configure({document:e}),Z,e6.L,e1.Pi,e8.R,e2._g,te.Jn,g.ZT.configure({openDoubleQuote:!1,closeDoubleQuote:!1,openSingleQuote:!1,closeSingleQuote:!1}),e0.configure({scrollerSelector:a}),L.F,e4],function(){console.warn("[CollaborativeEditor] Destroying yProvider for doc ",n),t.disconnect(),t.destroy(),delete window.gammaEditorProvider,er(void 0),U(!1),H(!1),V(!1),setTimeout(function(){if(t&&t.awareness)try{t.awareness.destroy()}catch(e){console.warn("[CollaborativeEditor] Error destroying awareness provider.")}})}},[n,ek,eu,a,E]);var eP=!!(_&&W&&q);(0,v.useEffect)(function(){eP&&(ek("Is ready for TipTap"),D())},[eP,D,ek]);var eS=!ej&&(!eg||eb);return(0,tu.jsxs)(l.xu,{display:void 0!==P&&P?"none":"block",w:"100%","data-testid":"collaborative-editor-wrapper",children:[eP&&ex&&(0,tu.jsx)(td,{editor:Y}),!Y&&(0,tu.jsx)(l.xu,{flexDirection:"column",flex:"1",w:"100%",h:"var(--100vh)",bg:"gray.100",zIndex:"overlay","data-testid":"collaborative-editor-skeleton",mt:1,inset:0,children:(0,tu.jsx)(u.M,{h:"100%",children:(0,tu.jsxs)(d.K,{align:"center",children:[(0,tu.jsx)(f.$,{}),eO.map(function(e,t){var n=e.msg;return(0,tu.jsx)(p.x,{children:n},t)})]})})}),eP&&(0,tu.jsx)(C.y,{extensions:$.current,doc:t,docId:n,editorId:"main",onCreate:function(e){var t=e.editor;setTimeout(function(){X(t),r&&r(t),requestAnimationFrame(function(){ek("Editor rendered"),A(),eC()})},10)},readOnly:ec||i||eS,shouldSupportComments:!0,shouldSupportMenus:!0,scrollingParentSelector:a})]})}),t7=n(86297),ne=n(87880)},74203:function(e,t,n){n.d(t,{I:function(){return m},q:function(){return p}});var r=n(95235),o=n(72338),i=n(30764),a=n(27191),c=n(66902),s=n(26151),l=n(6979),u=n(21842);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=new a.H$("UniqueAttribute"),m=o.hj.create({name:"UniqueAttribute",priority:c.a.UniqueAttribute,addOptions:function(){return{attributeName:"",pluginKey:new a.H$(this.name),types:[],initialValue:function(){},filterTransaction:null}},addGlobalAttributes:function(){var e=this;return[{types:this.options.types,attributes:(0,r.Z)({},this.options.attributeName,{default:null,parseHTML:function(t){return e.options.parseHTML?e.options.parseHTML(t):t.getAttribute("data-".concat(e.options.attributeName))},renderHTML:function(t){return e.options.renderHTML?e.options.renderHTML(t):t[e.options.attributeName]?(0,r.Z)({},"data-".concat(e.options.attributeName),t[e.options.attributeName]):{}}})}]},onCreate:function(){var e=this.editor,t=e.view,n=e.state,i=n.tr,a=n.doc,c=this.options,s=c.types,l=c.attributeName,u=c.initialValue,d=c.callback,p=(0,o.N2)(a,function(e){return s.includes(e.type.name)&&null===e.attrs[l]}).map(function(e){var t=e.node,n=e.pos,o=u();return i.setNodeMarkup(n,void 0,f(f({},t.attrs),{},(0,r.Z)({},l,o))),{node:t,val:o,pos:n}});0!==p.length&&(t.dispatch(i),d&&d(this.editor,p,i.doc))},addProseMirrorPlugins:function(){var e=this,t=!1;return[new a.Sy({key:this.options.pluginKey,appendTransaction:function(t,n,i){var a,c,d=t.some(function(e){return e.docChanged})&&!n.doc.eq(i.doc),m=e.options.filterTransaction&&t.some(function(t){var n,r;return!(null!==(n=(r=e.options).filterTransaction)&&void 0!==n&&n.call(r,t))});if(d&&!m){var h=i.tr,g=e.options,v=g.types,b=g.attributeName,y=g.initialValue,x=g.callback,j=(a=n.doc,c=new s.wx(a),t.forEach(function(e){e.steps.forEach(function(e){c.step(e)})}),c),w=j.mapping,O=(0,u.Z)(j),k=[],C=t.some(function(e){return!0===e.getMeta(p)});if(O.forEach(function(t){var n,a,c={from:t.newStart,to:t.newEnd},s=(0,o.b5)(i.doc,c,function(e){return v.includes(e.type.name)}),u=(a=(n=s.map(function(e){return e.node.attrs[b]}).filter(function(e){return null!==e})).filter(function(e,t){return n.indexOf(e)!==t}),(0,l.Z)(a));s.forEach(function(t){var n,o=t.node,i=t.pos,a=null===(n=h.doc.nodeAt(i))||void 0===n?void 0:n.attrs[b];if(!a){var c=y();h.setNodeMarkup(i,void 0,f(f({},o.attrs),{},(0,r.Z)({},b,c))),k.push({node:o,val:c,pos:i});return}var s=w.invert().mapResult(i).deleted,l=s&&u.includes(a),d=s&&C;if(l||d){var c=y();h.setNodeMarkup(i,void 0,f(f({},o.attrs),{},(0,r.Z)({},b,c))),k.push({node:o,val:c,pos:i}),console.debug("%c [UniqueAttribute][".concat(e.options.types,"] Replaced ").concat(o.attrs[b]," with new val: ").concat(c),"background-color: deeppink",{override:d,newNode:l})}})}),x&&x(e.editor,k,h.doc),h.steps.length)return h}},props:{handleDOMEvents:{drop:function(e,n){var r,o;return((null===(r=e.dragging)||void 0===r?void 0:r.move)!==!0||(null===(o=n.dataTransfer)||void 0===o?void 0:o.effectAllowed)==="copy")&&(t=!0),!1},paste:function(){return t=!0,!1}},transformPasted:function(n){if(!t)return n;var o,a=e.options,c=a.types,s=a.attributeName,l=e.options.transformPasted?e.options.transformPasted(n,e.options,null==e?void 0:null===(o=e.editor)||void 0===o?void 0:o.gammaDocId):new i.p2(function e(t){var n=[];return t.forEach(function(t){if(t.isText){n.push(t);return}if(!c.includes(t.type.name)){n.push(t.copy(e(t.content)));return}var o=t.type.create(f(f({},t.attrs),{},(0,r.Z)({},s,null)),e(t.content),t.marks);n.push(o)}),i.HY.from(n)}(n.content),n.openStart,n.openEnd);return t=!1,l}}})]}})},29469:function(e,t,n){n.d(t,{b:function(){return r}});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return{default:null,parseHTML:function(n){var r=n.getAttribute("data-".concat(t));if(r)return r;var o=e();return console.debug("[configureIdAttribute] generating id in parseHTML",o),o}}}},21842:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(6979);function o(e){var t,n=e.mapping,o=e.steps,i=[];return n.maps.forEach(function(e,t){if(e.ranges.length)e.forEach(function(e,r){var o=n.slice(t).map(e,-1),a=n.slice(t).map(r),c=n.invert().map(o,-1),s=n.invert().map(a);i.push({oldStart:c,oldEnd:s,newStart:o,newEnd:a})});else{var r=o[t];if(void 0===r.from||void 0===r.to)return;i.push({oldStart:r.from,oldEnd:r.to,newStart:r.from,newEnd:r.to})}}),1===(t=(0,r.Z)(i)).length?t:t.filter(function(e,n){return!t.filter(function(e,t){return t!==n}).some(function(t){return e.oldStart>=t.oldStart&&e.oldEnd<=t.oldEnd&&e.newStart>=t.newStart&&e.newEnd<=t.newEnd})})}},6979:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter(function(e){var r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}},28463:function(e,t,n){n.d(t,{B0:function(){return a},Nv:function(){return i},Tr:function(){return c}});var r=n(72338),o=n(27191),i=function(e,t){return(0,r.N2)(e,function(e){return!!t.isInSet(e.marks)})},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var r=o.Y1.findFrom(n.doc.resolve(e),t,!0);return r?n.setSelection(r):n}},c=function(e){return function(t){return(0,r.Kk)(function(t){return s(e,t)})(t)}},s=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e}},11139:function(e,t,n){n.d(t,{M:function(){return u}});var r=n(13089),o=n(96412),i=n(41701),a=n(90129),c=n(29017),s=n(48200),l=n(95235),u=function(e){(0,a.Z)(u,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(u);if(t){var r=(0,s.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function u(){var e;(0,o.Z)(this,u);for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,l.Z)((0,i.Z)(e),"contentComponent",null),e}return(0,r.Z)(u)}(n(72338).ML)},41290:function(e,t,n){n.d(t,{k:function(){return j}});var r=n(82269),o=n(12741),i=n(96412),a=n(13089),c=n(41701),s=n(90129),l=n(29017),u=n(48200),d=n(95235),f=n(81333),p=n(2784),m=n(28316),h=n(52322),g=["editor"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=e.renderers;return(0,h.jsx)(h.Fragment,{children:Object.entries(t).map(function(e){var t=(0,f.Z)(e,2),n=t[0],r=t[1];return m.createPortal(r.reactElement,r.element,n)})})},x=function(e){(0,s.Z)(f,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(f);if(t){var r=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function f(e){var t;return(0,i.Z)(this,f),t=n.call(this,e),(0,d.Z)((0,c.Z)(t),"editorContentRef",void 0),(0,d.Z)((0,c.Z)(t),"initialized",void 0),t.editorContentRef=p.createRef(),t.initialized=!1,t.state={renderers:{}},t}return(0,a.Z)(f,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"init",value:function(){var e=this.props.editor;if(e&&e.options.element){if(e.contentComponent)return;var t=this.editorContentRef.current;t.append.apply(t,(0,o.Z)(e.options.element.childNodes)),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}},{key:"maybeFlushSync",value:function(e){this.initialized?(0,m.flushSync)(e):e()}},{key:"setRenderer",value:function(e,t){var n=this;this.maybeFlushSync(function(){n.setState(function(n){return{renderers:b(b({},n.renderers),{},(0,d.Z)({},e,t))}})})}},{key:"removeRenderer",value:function(e){var t=this;this.maybeFlushSync(function(){t.setState(function(t){var n=b({},t.renderers);return delete n[e],{renderers:n}})})}},{key:"componentWillUnmount",value:function(){var e=this.props.editor;if(e&&(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,e.options.element.firstChild)){var t=document.createElement("div");t.append.apply(t,(0,o.Z)(e.options.element.childNodes)),e.setOptions({element:t})}}},{key:"render",value:function(){var e=this.props,t=(e.editor,(0,r.Z)(e,g));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",b({ref:this.editorContentRef},t)),(0,h.jsx)(y,{renderers:this.state.renderers})]})}}]),f}(p.Component),j=p.memo(x)},63944:function(e,t,n){n.d(t,{T:function(){return l}});var r=n(95235),o=n(2784),i=n(1301),a=n(52322);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l=o.forwardRef(function(e,t){var n=(0,i.a)().onDragStart,r=e.as||"div";return(0,a.jsx)(r,s(s({},e),{},{ref:t,"data-node-view-wrapper":"",onDragStart:n,style:s({whiteSpace:"normal"},e.style)}))})},42643:function(e,t,n){n.d(t,{A:function(){return y},f:function(){return x}});var r=n(12741),o=n(95235),i=n(96412),a=n(13089),c=n(90129),s=n(29017),l=n(48200),u=n(72338),d=n(30764);n(2784);var f=n(9734),p=n(39875),m=n(46416),h=n(1301),g=n(52322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){(0,c.Z)(o,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(o);if(t){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,s.Z)(this,e)});function o(){return(0,i.Z)(this,o),n.apply(this,arguments)}return(0,a.Z)(o,[{key:"updateAttributes",value:function(e){var t=this;this.editor.commands.command(function(n){var r=n.tr,o=t.getPos();if(void 0!==o){var i={type:"move",insertPos:o,insertPosRaw:o,pos:o,end:o+t.node.content.size+1};return r.setNodeMarkup(o,void 0,b(b({},t.node.attrs),e)).setMeta("annotationEvent",i),!0}})}},{key:"mount",value:function(){var e,t=this,n={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:function(){return t.getPos()},updateAttributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.updateAttributes(e)},deleteNode:function(){return t.deleteNode()}};this.component.displayName||(this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1));var r=function(e){var n=t.component,r=t.onDragStart.bind(t);return(0,g.jsx)(h.j.Provider,{value:{onDragStart:r,nodeViewContentRef:function(e){e&&t.contentDOMElement&&e.firstChild!==t.contentDOMElement&&e.appendChild(t.contentDOMElement)},node:t.node,editor:t.editor,getPos:t.getPos},children:(0,g.jsx)(n,b({},e))})};r.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline||this.node instanceof d.vc?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.contentDOMElement.setAttribute("data-node-view-content-inner",this.node.type.name));var o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);var i=this.options.className,a=void 0===i?"":i;this.renderer=new m.M(r,{editor:this.editor,props:n,as:o,className:"node-".concat(this.node.type.name," ").concat(a).trim(),updateWrapperEl:this.options.updateWrapperEl})}},{key:"dom",get:function(){var e;if(this.renderer.element.firstElementChild&&!(null!==(e=this.renderer.element.firstElementChild)&&void 0!==e&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}},{key:"contentDOM",get:function(){return this.node.isLeaf?null:this.contentDOMElement}},{key:"update",value:function(e,t){var n=this,r=function(e){n.renderer.updateProps(e)};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){var o=this.node,i=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:o,oldDecorations:i,newNode:e,newDecorations:t,updateProps:function(){return r({node:e,decorations:t})}})}return e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,r({node:e,decorations:t}),!0)}},{key:"selectNode",value:function(){this.renderer.updateProps({selected:!0})}},{key:"deselectNode",value:function(){this.renderer.updateProps({selected:!1})}},{key:"destroy",value:function(){this.renderer.destroy(),this.contentDOMElement=null}},{key:"ignoreMutation",value:function(e){return!this.dom||!this.contentDOM||"function"==typeof this.options.ignoreMutation&&this.options.ignoreMutation({mutation:e})||this.defaultIgnoreMutation(e)}},{key:"defaultIgnoreMutation",value:function(e){return!!(this.node.isLeaf||this.node.isAtom||"selection"===e.type&&e.target.closest("[data-comments-wrapper]"))||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(0,f.Tt)()&&this.editor.isFocused&&[].concat((0,r.Z)(Array.from(e.addedNodes)),(0,r.Z)(Array.from(e.removedNodes))).every(function(e){return e.isContentEditable}))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}},{key:"onDragStart",value:function(e){var t,n=this,r=e.target,o=r.querySelector("[data-drag-handle]");if(!o&&r.hasAttribute("data-drag-handle")&&(o=r),!this.dom||!o)return e.preventDefault(),!1;try{var i=this.editor.view.posAtDOM(o);if(!i||-1==i)return;var a=this.editor.state.doc.nodeAt(i),c=this.editor.state.selection;if(!c.empty&&i>c.from&&i<c.to&&this.editor.commands.setNodeSelection(i),!a)return;var s=(0,p.lG)({from:i,to:i+a.nodeSize,editor:this.editor,pos:i});s&&requestAnimationFrame(function(){var e;null!==(e=n.editor.view.dragging)&&void 0!==e&&e.annotations||null==n.editor.view.dragging||"object"!=typeof n.editor.view.dragging||(n.editor.view.dragging.annotations=s)})}catch(e){console.warn("(caught) [ReactNodeViewRenderer] onDragStart error moving annotations",e)}var l=0,u=0;document.querySelectorAll("[data-nodeview-drag-preview]").forEach(function(e){return e.parentNode.removeChild(e)});var d=o.cloneNode(!0);document.body.appendChild(d),d.dataset.nodeviewDragPreview=!0,d.style.maxWidth="250px",d.style.width=getComputedStyle(o).width;var f=function(){var e;return null===(e=d.parentElement)||void 0===e?void 0:e.removeChild(d)};if(document.addEventListener("dragend",f,{once:!0}),document.addEventListener("drop",f,{once:!0}),document.addEventListener("mouseup",f,{once:!0}),this.dom!==o){var m,h,g,v,b=null!==(m=e.offsetX)&&void 0!==m?m:null===(h=e.nativeEvent)||void 0===h?void 0:h.offsetX,y=null!==(g=e.offsetY)&&void 0!==g?g:null===(v=e.nativeEvent)||void 0===v?void 0:v.offsetY;l=b,u=y}null===(t=e.dataTransfer)||void 0===t||t.setDragImage(d,l,u)}}]),o}(u.DK);function x(e,t){return function(n){return n.editor.contentComponent?new y(e,n,t):{}}}},46416:function(e,t,n){n.d(t,{M:function(){return u}});var r=n(12741),o=n(96412),i=n(13089),a=n(95235);n(2784);var c=n(52322);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(){function e(t,n){var i,c=n.editor,s=n.props,l=n.as,u=void 0===l?"div":l,d=n.className,f=void 0===d?"":d,p=n.updateWrapperEl;(0,o.Z)(this,e),(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"editor",void 0),(0,a.Z)(this,"component",void 0),(0,a.Z)(this,"element",void 0),(0,a.Z)(this,"props",void 0),(0,a.Z)(this,"reactElement",void 0),(0,a.Z)(this,"ref",null),(0,a.Z)(this,"updateWrapperEl",void 0),this.id=Math.floor(4294967295*Math.random()).toString(),this.component=t,this.editor=c,this.props=void 0===s?{}:s,this.updateWrapperEl=p,this.element=document.createElement(u),this.element.classList.add("react-renderer"),f&&(i=this.element.classList).add.apply(i,(0,r.Z)(f.split(" "))),this.render()}return(0,i.Z)(e,[{key:"render",value:function(){var e,t,n,r=this,o=this.component,i=this.props;("function"==typeof o&&o.prototype&&o.prototype.isReactComponent||"object"==typeof o&&(null===(e=o.$$typeof)||void 0===e?void 0:e.toString())==="Symbol(react.forward_ref)")&&(i.ref=function(e){r.ref=e}),this.reactElement=(0,c.jsx)(o,l({},i)),this.updateWrapperEl&&this.updateWrapperEl(this.element,i),null===(t=this.editor)||void 0===t||null===(n=t.contentComponent)||void 0===n||n.setRenderer(this.id,this)}},{key:"updateProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props=l(l({},this.props),e),this.render()}},{key:"destroy",value:function(){var e,t;null===(e=this.editor)||void 0===e||null===(t=e.contentComponent)||void 0===t||t.removeRenderer(this.id)}}]),e}()},85398:function(e,t,n){n.d(t,{r:function(){return a}});var r=n(95235),o=n(27191),i=n(42643),a=function(e,t){return new o.Sy({key:new o.H$("".concat(e.name,"_markview")),props:{nodeViews:(0,r.Z)({},e.name,function(n,r,o,a){return(0,i.f)(t,{as:"span"})({editor:e.editor,node:n,getPos:o,decorations:a,extension:{name:e.name,type:e.type.name,options:e.options,storage:e.storage},HTMLAttributes:{}})})}})}},13121:function(e,t,n){n.d(t,{kg:function(){return r.k},ms:function(){return f},T5:function(){return m.T},Al:function(){return o.A},fW:function(){return o.f},jE:function(){return h.j}}),n(11139);var r=n(41290),o=n(42643),i=n(95235);n(2784);var a=n(94864),c=n(16587),s=n(1301),l=n(52322);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e){return(0,a.C7)()?(0,l.jsx)(c.m,d({},e)):(0,l.jsx)(p,d({},e))},p=function(e){var t=e.as||"div",n=(0,s.a)().nodeViewContentRef;return(0,l.jsx)(t,d(d({},e),{},{ref:n,"data-node-view-content":"",style:d({whiteSpace:"pre-wrap"},e.style)}))};p.displayName="NodeViewContentCore";var m=n(63944),h=n(27226)},27226:function(e,t,n){n.d(t,{j:function(){return i}});var r=n(2784),o=n(11139),i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.useMemo)(function(){return new o.M(t)},[]),i=(e=(0,r.useState)(0)[1],function(){return e(function(e){return e+1})});return(0,r.useEffect)(function(){var e=!0;return n.on("transaction",function(){requestAnimationFrame(function(){requestAnimationFrame(function(){e&&i()})})}),function(){n.destroy(),e=!1}},[n]),n}},1301:function(e,t,n){n.d(t,{a:function(){return i},j:function(){return o}});var r=n(2784),o=(0,r.createContext)({onDragStart:void 0}),i=function(){return(0,r.useContext)(o)}},95173:function(e,t,n){n.d(t,{bI:function(){return o}}),n(36738);var r=new URLSearchParams(window.location.search),o=(r.get("SCHEMA_VERSION")?Number(r.get("SCHEMA_VERSION")):null)||82},95646:function(e,t,n){n.d(t,{U:function(){return r}});var r={'&[contenteditable="true"]':{"&:focus-within":{".ProseMirror-gapcursor":{display:"block",height:"1.5em",position:"relative","&:after":{width:"0px",height:"100%",borderTop:"0px",borderLeft:"1px solid black"}},".grid-cell":{".ProseMirror-gapcursor:first-child":{marginTop:"1em"},".ProseMirror-gapcursor:last-child":{marginBottom:"1em"}},".block-table td":{".ProseMirror-gapcursor:first-child":{marginTop:".75em"},".ProseMirror-gapcursor:last-child":{marginBottom:".75em"}},".is-dark":{".ProseMirror-gapcursor:after":{borderLeftColor:"white"}}}},".collaboration-cursor__caret":{position:"relative",marginLeft:"-1px",marginRight:"-1px",borderLeft:"1px solid #0d0d0d",borderRight:"1px solid #0d0d0d",wordBreak:"normal",pointerEvents:"none",textIndent:0},".collaboration-cursor__label":{position:"absolute",top:"-1.4em",left:"-1px",fontSize:"12px",fontStyle:"normal",fontFamily:"'Inter', sans-serif",fontWeight:"600",lineHeight:"normal",letterSpacing:"normal",textTransform:"none",userSelect:"none",color:"#0d0d0d",padding:"0.1rem 0.3rem",borderRadius:"3px 3px 3px 0",whiteSpace:"nowrap",zIndex:1,pointerEvents:"auto",spellCheck:"false",_hover:{opacity:.1}},'&[contenteditable="false"]':{".ProseMirror-gapcursor":{display:"none"},".collaboration-cursor__caret:not(.streaming-cursor)":{display:"none"}}}},24363:function(e,t,n){n.d(t,{I:function(){return A}});var r,o,i=n(95235),a=n(28165),c=n(44713),s="transparent",l=(0,a.keyframes)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),u=(0,a.keyframes)({"0%":{opacity:.5,color:"var(--chakra-colors-trueblue-500)"},"100%":{opacity:1,color:"inherit"}}),d={".autocomplete-loading":{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:"2px",borderBottomColor:s,borderLeftColor:s,animation:"".concat(l," ").concat("0.45s"," linear infinite"),width:"var(--spinner-size)",height:"var(--spinner-size)","--spinner-size":"1em",marginLeft:"0.25em",color:"var(--chakra-colors-trueblue-500)"},".autocomplete-inserted":{animation:"".concat(u," ").concat(c.X,"ms ease-out")}},f=n(9734),p=n(36392);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="%23553bff"><path d="M224 48a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm181.2 80.4C379 53.6 307.8 0 224 0S69 53.6 42.8 128.4C27.6 130.9 16 144.1 16 160v64c0 15.9 11.6 29.1 26.8 31.6 9.7 27.6 25.5 52.4 45.8 72.6C35.6 359.1 0 416.5 0 482.3 0 498.7 13.3 512 29.7 512h388.6c16.4 0 29.7-13.3 29.7-29.7 0-65.8-35.6-123.2-88.6-154.1 20.3-20.2 36.2-45 45.8-72.6 15.2-2.5 26.8-15.7 26.8-31.6v-64c0-15.9-11.6-29.1-26.8-31.6zm-85.5 230.1c44.5 18 77.1 59.3 82.6 108.7H336V448c0-17.7-14.3-32-32-32H144c-17.7 0-32 14.3-32 32v19.2H45.6c5.6-49.5 38.1-90.7 82.6-108.7 28.3 16.2 60.9 25.5 95.8 25.5s67.5-9.3 95.7-25.5zM160 128c-26.5 0-48 21.5-48 48v16c0 53 43 96 96 96h32c53 0 96-43 96-96v-16c0-26.5-21.5-48-48-48H160zm39.3 45.5 6 21.2 21.2 6c3.3.9 5.5 3.9 5.5 7.3s-2.2 6.4-5.5 7.3l-21.2 6-6 21.2c-.9 3.3-3.9 5.5-7.3 5.5s-6.4-2.2-7.3-5.5l-6-21.2-21.2-6c-3.3-.9-5.5-3.9-5.5-7.3s2.2-6.4 5.5-7.3l21.2-6 6-21.2c.9-3.3 3.9-5.5 7.3-5.5s6.4 2.2 7.3 5.5zM176 448c8.8 0 16 7.2 16 16v48h-32v-48c0-8.8 7.2-16 16-16zm80 16a16 16 0 1 1 32 0 16 16 0 1 1-32 0z"/></svg>\')',backgroundRepeat:"no-repeat",backgroundSize:"11px",backgroundPosition:"8px center",fontSize:"13px",fontWeight:"bold",color:"var(--chakra-colors-trueblue-400)",position:"absolute",zIndex:1,top:"0px",left:"0px",backgroundColor:"var(--chakra-colors-trueblue-100)",padding:"4px 12px",paddingLeft:"24px",borderTopRightRadius:"4px",borderBottomRightRadius:"4px",pointerEvents:"none"},v={".block-card":{transitionProperty:"opacity",transitionDuration:"normal"},".ai-generate-streaming-card":{"&.node-card":{pointerEvents:(0,f.s2)()?void 0:"none !important"},"&.node-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"}},".streaming-cursor__label":{_after:h(h({},g),{},{content:"var(--ai-generating-label)"})}},"&.sal-active":{".block-card:not(.sal-active-card, .sal-active-card-parent)":{opacity:.5},".sal-active-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"},_after:h(h({},g),{},{content:"var(--ai-editing-label)",left:"50%",transform:"translate(-50%,0px)"})},".sal-active-card-parent":{".block:not(.sal-active-card)":{opacity:.5},".sal-active-card":{".block":{opacity:1}}},".sal-selection-text":h({backgroundColor:"rgba(100, 100, 100, 0.25)"},p.FC)}},b=n(95646);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j="scale(1.05)",w={transitionDuration:"slow",transitionTimingFunction:"ease-out"},O=".comments-wrapper, .block-comments-circle",k="> :is(".concat(O,")"),C="> :not(".concat(O,"), [data-spotlight-parent] > *");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A={".ProseMirror":S(S(S(S({"&.spotlight-active":{"[data-spotlight-dim]":{opacity:.2},".spotlightable":{"&.react-renderer > [data-node-view-wrapper]":(r={},(0,i.Z)(r,C,x(x({transitionProperty:"filter, transform"},w),{},{filter:"opacity(".concat(.2,")")})),(0,i.Z)(r,k,x(x({transitionProperty:"opacity"},w),{},{filter:"opacity(".concat(.2,")"),"&[data-is-popup-open=true]":{filter:"none"},_hover:{filter:"none"}})),r),"&:not(.react-renderer)":x(x({transitionProperty:"filter, transform"},w),{},{filter:"opacity(".concat(.2,")")})},".spotlightable.spotlight-block, .spotlight-block .spotlightable":{"&.react-renderer > [data-node-view-wrapper]":(o={},(0,i.Z)(o,C,{filter:"none",transform:"".concat(j," !important")}),(0,i.Z)(o,k,{filter:"none"}),o),"&:not(.react-renderer)":{filter:"none",transform:"".concat(j," !important")}}}},v),b.U),d),{},{".card-present-mode":{"&--doc":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentCollapsed":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentPrev":{transform:"translateY(-100%)",position:"fixed",zIndex:2},"&--presentCurrent":{transform:"translateY(0)",position:"fixed",zIndex:3},"&--presentNext":{transform:"translateY(100%)",position:"fixed",zIndex:2},"&--presentParent":{transform:"translateY(0)",position:"fixed",zIndex:2}},".document-content.is-doc-mode":{".card-wrapper":{"&:hover":{".card-divider":{opacity:1},".manage-card-controls":{opacity:1}}}},".document-content":{".card-wrapper":{"&:hover":{".card-footer-reactions":{opacity:1},".card-collapsed":{".card-footer-reactions":{display:"none"}}}}}}),".is-selecting-node, .sal-selection-node, .sal-selection-card":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="inside"]':{_before:{zIndex:10,outlineOffset:"-2px"}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}},".react-renderer [data-selection-ring]":{_before:{content:"none"}}},".is-selecting-around":{"[data-selection-background]":{_after:{content:'""',position:"absolute",inset:0,backgroundColor:"var(--chakra-ring-color)",borderRadius:"inherit",opacity:.75}},".react-renderer:not(.is-selecting-around) [data-selection-ring]":{_after:{content:"none"}}},".ProseMirror-dropcursor":{transitionProperty:"inset",transitionDuration:"fast",borderRadius:"md",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",outline:"1px solid",outlineColor:"whiteAlpha.800",pointerEvents:"none",backdropFilter:"blur(4px)","&::after":{backgroundColor:"gray.700",color:"whiteAlpha.900",px:"8px",py:"2px",borderRadius:"sm",fontWeight:"medium",shadow:"md",fontSize:"sm",w:"max-content",pointerEvents:"none",display:"none"},'&[data-type="column"]::after':{content:'"Drop to add column"',position:"absolute",top:"-2em",display:"block"}}}},22884:function(e,t,n){n.d(t,{Ky:function(){return d},dE:function(){return f},fY:function(){return u}});var r,o=n(95235),i=n(12741),a=n(4290),c=(0,i.Z)(Array(a.N+1).keys()),s="1.6em",l=["disc","circle","square"],u=function(e){return{listStyle:l[e%l.length],paddingLeft:"0.4em",marginLeft:"calc(".concat(e+1," * ").concat(s," - 0.4em)")}},d=".block-bullet, .block-numbered, .block-todo",f=(r={},(0,o.Z)(r,d,{margin:"0",marginBottom:"0.4em",textAlign:"left","&:first-of-type":{marginTop:"var(--block-margin)"}}),(0,o.Z)(r,"ol.block-numbered",{listStyle:"none"}),(0,o.Z)(r,".block-todo",{listStyle:"none","label.chakra-checkbox":{pointerEvents:"none",".chakra-checkbox__control":{pointerEvents:"auto",width:"1em",height:"1em",top:"0.3em",position:"relative",borderRadius:"var(--box-border-radius)",borderColor:"var(--link-color)",borderWidth:"0.125em","&[data-checked]":{backgroundColor:"var(--link-color)",color:"var(--body-color-inverted)"},svg:{fontSize:"0.5em"}}}}),(0,o.Z)(r,".block-bullet, .block-todo",{li:{position:"relative"}}),r);c.forEach(function(e){f['ol.block-numbered[indent="'.concat(e,'"]')]={"li[data-node-view-content]":{marginLeft:"calc(".concat(e+1," * ").concat(s,")"),position:"relative",_before:{position:"absolute",left:"-".concat(s),content:'attr(data-list-counter) "."'}}}}),c.forEach(function(e){f['ul.block-bullet[indent="'.concat(e,'"]')]={"li[data-node-view-content]":u(e)},f['ul.block-todo[indent="'.concat(e,'"]')]={"li.todo":{marginLeft:"calc(".concat(e+1," * ").concat(s,")"),listStyle:"none"},".chakra-checkbox__control":{left:"-".concat(s)}}})},18408:function(e,t,n){n.d(t,{ho:function(){return a},iJ:function(){return c}});var r=n(72338),o=n(4707),i=new Set(["bullet","numbered","todo","title","heading","paragraph","image","blockquote","embed","video"]),a=function(e,t){if(i.has(e.type.name)){var n={type:"card",content:[e.toJSON()]},a=(0,o.e)().map(function(e){return null!=t&&t.includes(e.name)?e instanceof r.vc?e.extend({renderHTML:function(){return["span",0]}}):e.extend({renderHTML:function(){return""}}):e});return(0,r.ar)(n||{},a)}return""},c=function(e,t){if(i.has(e.type.name)){var n={type:"card",content:[e.toJSON()]},a=(0,o.e)().map(function(e){return null!=t&&t.includes(e.name)?(r.vc,e.extend({renderText:function(){return""}})):e});return(0,r._4)(n||{},a)}return""}},51231:function(e,t,n){n.d(t,{j:function(){return r}});var r=function(e){var t,n=e.mutation;return!!("attributes"===n.type&&(null===(t=n.attributeName)||void 0===t?void 0:t.startsWith("data-")))}},82956:function(e,t,n){n.d(t,{A0:function(){return p},Wy:function(){return d},ok:function(){return f}});var r=n(81333),o=n(95235),i=n(72338),a=n(27191),c=n(32333),s=n(28463);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e,t){var n=new i.VK({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,a=n.doc.resolve(r.from),c=(0,i.nU)(e.getAttributes,void 0,o)||{},s=u(u({},a.parent.attrs),c);a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e.type)&&n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}});return new i.VK({find:e.find,handler:function(r){var o=r.state,i=r.range,l=new a.Bs(o.doc.resolve(i.from),o.doc.resolve(i.to));if((0,s.Tr)(t)(l))return null;var u=n.handler(r);return null!==u&&c.co.track(c.AA.NODE_INSERTED,{method:c.fe.INPUT_RULE,node_name:e.type.name}),u}})};function f(e){return new i.VK({find:e.find,handler:function(t){var n=t.state,r=t.range,o=t.match,a=(0,i.nU)(e.getAttributes,void 0,o)||{},c=n.tr,s=r.from,l=r.to,u=n.doc.resolve(s).before();c.replaceWith(u,l,e.type.create(a))}})}function p(e){return new i.VK({find:e.find,handler:function(t){var n=t.state,o=t.range,a=n.doc.resolve(o.from),c=(0,i.nU)(e.getAttributes,void 0,a.parent);if(c){var s=n.tr.delete(o.from,o.to);Object.entries(c).forEach(function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];s.setNodeAttribute(o.from-1,n,i)})}}})}},54026:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(72338);function o(e){if(!e.type.isInline)throw Error("[nodePasteRule] This paste rule was only designed to consider inline nodes.");return new r.hD({find:e.find,handler:function(t){var n=t.state,o=t.range,i=t.match,a=n.tr,c=o.from,s=o.to,l=(0,r.nU)(e.getAttributes,void 0,i)||{};a.replaceWith(c,s,e.type.create(l))}})}},39428:function(e,t,n){n.d(t,{G8:function(){return s},XV:function(){return a},bb:function(){return c},jS:function(){return i}});var r=n(38564),o=n(36069),i=function(e,t){var n=r.Gt.getState(e);if(!n)return null;var i=n.type,a=n.binding;return n.binding?(0,o.JR)(t,i,a.mapping):null},a=function(e,t){var n=r.Gt.getState(e);if(!n)return null;var i=n.doc,a=n.type,c=n.binding;return n.binding?(0,o.SF)(i,a,t,c.mapping):null},c=function(e,t){return{from:i(e,t.from),to:i(e,t.to)}},s=function(e,t){if(!t.from||!t.to)return null;var n=a(e,t.from),r=a(e,t.to);return null==n||null==r?null:{from:n,to:r}}},59131:function(e,t,n){n.d(t,{c:function(){return m}});var r=n(96412),o=n(13089),i=n(41701),a=n(90129),c=n(29017),s=n(48200),l=n(95235),u=n(30764),d=n(27191),f=n(60636),p=n(28703),m=function(e){(0,a.Z)(m,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(m);if(t){var r=(0,s.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,r.Z)(this,m);var a=e.nodeAfter,c=e.node(0).resolve(e.pos+a.nodeSize);return t=n.call(this,e,c),(0,l.Z)((0,i.Z)(t),"side",void 0),(0,l.Z)((0,i.Z)(t),"node",void 0),t.node=a,t.side=o,t}return(0,o.Z)(m,[{key:"map",value:function(e,t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos,i=e.resolve(o);return r?(0,p.E)(i)||d.Y1.near(i):new m(i,this.side)}},{key:"content",value:function(){return new u.p2(u.HY.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof m&&e.anchor===this.anchor&&e.side===this.side}},{key:"toJSON",value:function(){return{type:"presentation",anchor:this.anchor,side:this.side}}},{key:"createSelectionNear",value:function(){var e=this.side<1?1:-1;return(0,f.t)(this.$from,e)||d.Y1.near(this.$from)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for PresentationSelection.fromJSON");return new m(e.resolve(t.anchor))}},{key:"create",value:function(e,t,n){return new m(e.resolve(t),n)}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),m}(d.Y1);if(m.prototype.visible=!1,!m.prototype.jsonID)try{d.Y1.jsonID("presentation",m)}catch(e){}},28703:function(e,t,n){n.d(t,{E:function(){return u},a:function(){return d}});var r=n(3027),o=n(27191),i=n(26151),a=function(e,t,n){return t&&o.qv.isSelectable(t)?o.qv.create(e,n):null},c=function(e,t,n){return t&&t.inlineContent?o.Bs.create(e,n):null};function s(e,t,n){return e&&n?n:e&&t?t:!e&&t?t:!e&&n?n:null}function l(e,t){var n=e.doc,i=e.pos,l=e.parent,u=e.nodeAfter,d=e.nodeBefore;if(l.inlineContent)return o.Bs.create(n,i);var f=t>0,p=s(f,c(n,d,i-1),c(n,u,i+1));if(p)return p;if(r.Q.valid(e))return new r.Q(e);if(l.type.spec.isolating){var m=s(f,a(n,d,i-((null==d?void 0:d.nodeSize)||0)),a(n,u,i));if(m)return m;if(0===l.childCount&&o.qv.isSelectable(l))return o.qv.create(n,e.before())}return null}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=l(e,t);if(n)return n;for(var r=e.depth-1;r>=0&&!e.node(r+1).type.spec.isolating;r--){var o=t<0?e.before(r+1):e.after(r+1),i=l(e.doc.resolve(o),t);if(i)return i}return null}var d=function(e,t){var n,r=e.steps.length-1,o=e.steps[r];return o instanceof i.Pu||o instanceof i.FC?(e.mapping.maps[r].forEach(function(e,t,r,o){null==n&&(n=o)}),null==n)?null:u(e.doc.resolve(n),t):null}},33295:function(e,t,n){n.d(t,{h:function(){return f},q:function(){return p}});var r=n(95235),o=n(36069),i=n(72338),a=n(49431),c=n(69180),s=n(4707);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e){"card"===e.type&&e.attrs&&delete e.attrs.id},f=function(e){return d(e),Object.assign({},e,{content:function e(t){var n;return null===(n=t.content)||void 0===n?void 0:n.map(function(t){if(!t.content)return t;var n=u(u({},t),{},{attrs:u({},t.attrs)});return d(n),n.content=e(n),n})}(e)})},p=function(e){var t=(0,s.e)(),n=(0,i.J1)(t),r=(0,o.uH)(n,e,"default"),l=(0,c.D$)(r);return(0,a.kZ)(l)}},55372:function(e,t,n){n.d(t,{ZP:function(){return c}});var r=n(28165),o=n(52322),i=function(e){var t=e.files;return(0,o.jsx)(o.Fragment,{children:t.map(function(e){return(0,o.jsx)("link",{rel:"preload",href:e,as:"font",crossOrigin:""},e)})})},a=["/fonts/EudoxusSans-Bold.woff","/fonts/EudoxusSans-Bold.woff2","/fonts/EudoxusSans-Regular.woff","/fonts/EudoxusSans-Regular.woff2","/fonts/EudoxusSans-Light.woff","/fonts/EudoxusSans-Light.woff2","/fonts/EudoxusSans-ExtraBold.woff","/fonts/EudoxusSans-ExtraBold.woff2","/fonts/EudoxusSans-ExtraLight.woff","/fonts/EudoxusSans-ExtraLight.woff2","/fonts/EudoxusSans-Medium.woff","/fonts/EudoxusSans-Medium.woff2"],c=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Global,{styles:"@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-Bold.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-Bold.woff') format('woff');\n  font-weight: bold;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-Regular.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-Regular.woff') format('woff');\n  font-weight: normal;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-Light.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-Light.woff') format('woff');\n  font-weight: 300;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-ExtraBold.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-ExtraBold.woff') format('woff');\n  font-weight: 800;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-ExtraLight.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-ExtraLight.woff') format('woff');\n  font-weight: 200;\n  font-style: normal;\n  font-display: block;\n}\n@font-face {\n  font-family: 'Eudoxus Sans';\n  src: url('/fonts/EudoxusSans-Medium.woff2') format('woff2'),\n    url('/fonts/EudoxusSans-Medium.woff') format('woff');\n  font-weight: 500;\n  font-style: normal;\n  font-display: block;\n}\n"}),(0,o.jsx)(i,{files:a})]})}},81234:function(e,t,n){n.d(t,{T:function(){return r}});var r=new(n(98555)).v},61701:function(e,t,n){n.d(t,{Hn:function(){return $},dU:function(){return V}});var r,o,i,a,c,s,l,u,d,f,p,m,h,g,v,b,y,x,j,w,O,k,C,P,S,A,E,D,I,z,T,M,N,R=n(7328),L=n(57981),_=(0,L.Ps)(r||(r=(0,R.Z)(["\n  fragment DefaultThemeFields on Theme {\n    id\n    workspaceId\n    name\n    headingFont\n    headingFontWeight\n    bodyFont\n    bodyFontWeight\n    accentColor\n    logoUrl\n    config\n    priority\n    archived\n    fonts {\n      id\n      name\n      url\n    }\n    createdTime\n    updatedTime\n  }\n"])));(0,L.Ps)(o||(o=(0,R.Z)(["\n  ","\n  mutation CreateTheme($input: CreateThemeInput!) {\n    createTheme(input: $input) {\n      ...DefaultThemeFields\n      docCount\n    }\n  }\n\n  mutation UpdateTheme($input: UpdateThemeInput!) {\n    updateTheme(input: $input) {\n      ...DefaultThemeFields\n      docCount\n    }\n  }\n\n  mutation DuplicateTheme($id: ID!) {\n    duplicateTheme(id: $id) {\n      ...DefaultThemeFields\n    }\n  }\n\n  query GetTheme($id: ID) {\n    theme(id: $id) {\n      ...DefaultThemeFields\n      docCount\n      createdBy {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n\n  query GetThemes($workspaceId: ID, $archived: Boolean) {\n    themes(workspaceId: $workspaceId, archived: $archived) {\n      ...DefaultThemeFields\n      createdBy {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n\n  mutation ArchiveTheme($id: ID!) {\n    archiveTheme(id: $id) {\n      ...DefaultThemeFields\n    }\n  }\n\n  mutation UnarchiveTheme($id: ID!) {\n    unarchiveTheme(id: $id) {\n      ...DefaultThemeFields\n    }\n  }\n"])),_),(0,L.Ps)(i||(i=(0,R.Z)(["\n  query SearchMention($workspaceId: ID!, $query: String!) {\n    search(orgId: $workspaceId, query: $query, types: [user, doc]) {\n      __typename\n      ... on DocResult {\n        id\n        title\n        text\n        archived\n        previewUrl\n        createdBy {\n          id\n          displayName\n          profileImageUrl\n        }\n        organization {\n          id\n        }\n        editors {\n          user {\n            id\n            displayName\n            profileImageUrl\n          }\n          lastViewed\n          lastEdited\n        }\n        docUser {\n          lastViewed\n          lastEdited\n          favorited\n        }\n        orgAccess\n        publicAccess\n        updatedTime\n        createdTime\n        editedTime\n      }\n      ... on User {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n"])));var H=(0,L.Ps)(a||(a=(0,R.Z)(["\n  fragment ReactionFields on Reaction {\n    emoji\n    count\n    targetId\n    targetType\n    docId\n    users {\n      id\n      displayName\n      profileImageUrl\n    }\n  }\n"]))),Z=(0,L.Ps)(c||(c=(0,R.Z)(["\n  fragment CommentAuthorFields on User {\n    id\n    displayName\n    profileImageUrl\n    email\n  }\n"]))),B=(0,L.Ps)(s||(s=(0,R.Z)(["\n  ","\n  ","\n  fragment ReplyFields on Comment {\n    id\n    commentId\n    content\n    createdTime\n    updatedTime\n    archived\n    user {\n      ...CommentAuthorFields\n    }\n    reactions {\n      ...ReactionFields\n    }\n  }\n"])),H,Z),F=(0,L.Ps)(l||(l=(0,R.Z)(["\n  ","\n  ","\n  ","\n  fragment CommentFields on Comment {\n    id\n    docId\n    cardId\n    content\n    targetText\n    targetHtml\n    createdTime\n    updatedTime\n    archived\n    targetId\n    status\n    user {\n      ...CommentAuthorFields\n    }\n    replies {\n      ...ReplyFields\n    }\n    reactions {\n      ...ReactionFields\n    }\n  }\n"])),B,H,Z),W=(0,L.Ps)(u||(u=(0,R.Z)(["\n  fragment DocCollaboratorFields on DocCollaborator {\n    docId\n    user {\n      id\n      displayName\n      email\n      profileImageUrl\n    }\n    permission\n    guest\n    accessLinkId\n  }\n\n  fragment DocInvitationsFields on DocInvitation {\n    id\n    docId\n    email\n    permission\n  }\n"]))),U=(0,L.Ps)(d||(d=(0,R.Z)(["\n  fragment DocChannelFields on DocChannel {\n    id\n    name\n    slug\n    permission\n  }\n"]))),G=(0,L.Ps)(f||(f=(0,R.Z)(["\n  fragment DocEditorsFields on DocEditor {\n    user {\n      id\n      displayName\n      email\n      profileImageUrl\n    }\n    lastEdited\n  }\n"]))),q=(0,L.Ps)(p||(p=(0,R.Z)(["\n  fragment DocSiteFields on Site {\n    id\n    workspaceId\n    name\n    domains {\n      id\n      siteId\n      name\n      status\n    }\n    routes {\n      id\n      siteId\n      docId\n      path\n    }\n    currentDeployment {\n      id\n      buildHost\n      deploymentTime\n    }\n    createdTime\n    updatedTime\n  }\n"])));(0,L.Ps)(m||(m=(0,R.Z)(["\n  ","\n  mutation AddCollaborators(\n    $docId: ID!\n    $collaborators: [DocCollaboratorInput!]!\n  ) {\n    addCollaborators(docId: $docId, collaborators: $collaborators) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n    }\n  }\n"])),W),(0,L.Ps)(h||(h=(0,R.Z)(["\n  ","\n  mutation RemoveCollaborators(\n    $docId: ID!\n    $collaborators: [DocCollaboratorRemovalInput!]!\n  ) {\n    removeCollaborators(docId: $docId, collaborators: $collaborators) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n    }\n  }\n"])),W),(0,L.Ps)(g||(g=(0,R.Z)(["\n  ","\n  mutation AddCollaboratorByAccessLink($docId: ID!) {\n    addCollaboratorByAccessLink(docId: $docId) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n    }\n  }\n"])),W),(0,L.Ps)(v||(v=(0,R.Z)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  query GetDoc($id: ID!) {\n    doc(id: $id) {\n      id\n      title\n      titleEdited\n      archived\n      createdTime\n      updatedTime\n      editedTime\n      savedTime\n      currentSnapshotId\n      publishedSnapshotId\n      publishedTime\n      publicAccess\n      comments {\n        ...CommentFields\n      }\n      reactions {\n        ...ReactionFields\n      }\n      accessLinks {\n        id\n        docId\n        permission\n        token\n        url\n      }\n      orgAccess\n      organization {\n        id\n        name\n        products\n      }\n      theme {\n        ...DefaultThemeFields\n        fonts {\n          id\n          name\n          url\n        }\n      }\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n      editors {\n        ...DocEditorsFields\n      }\n      createdBy {\n        displayName\n        id\n        email\n      }\n      channels {\n        ...DocChannelFields\n      }\n      sites {\n        ...DocSiteFields\n      }\n      site {\n        ...DocSiteFields\n      }\n    }\n  }\n"])),F,W,G,U,q,_,H),(0,L.Ps)(b||(b=(0,R.Z)(["\n  query GetDocRobots($id: ID!) {\n    doc(id: $id) {\n      id\n      title\n      createdTime\n      updatedTime\n      currentSnapshot {\n        id\n        docId\n        content\n      }\n      titleCard {\n        previewUrl\n        text\n      }\n      organization {\n        id\n        name\n        products\n      }\n      createdBy {\n        displayName\n        id\n        email\n      }\n    }\n  }\n"])));var V=(0,L.Ps)(y||(y=(0,R.Z)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  subscription SubscribeToDoc($id: ID!) {\n    doc(id: $id) {\n      ... on DocSubscription {\n        id\n        title\n        titleEdited\n        archived\n        updatedTime\n        editedTime\n        savedTime\n        accessLinks {\n          id\n          docId\n          permission\n          token\n          url\n        }\n        channels {\n          ...DocChannelFields\n        }\n        collaborators {\n          ...DocCollaboratorFields\n        }\n        editors {\n          ...DocEditorsFields\n        }\n        invitations {\n          ...DocInvitationsFields\n        }\n        theme {\n          ...DefaultThemeFields\n        }\n        reactions {\n          ...ReactionFields\n        }\n        orgAccess\n      }\n\n      ... on DocCommentsSubscription {\n        id\n        comments {\n          ...CommentFields\n        }\n      }\n      ... on DocReactionsSubscription {\n        id\n        reactions {\n          ...ReactionFields\n        }\n      }\n    }\n  }\n"])),F,W,G,U,_,H);(0,L.Ps)(x||(x=(0,R.Z)(["\n  mutation UpdateDocTitle($id: ID!, $title: String, $titleEdited: Boolean) {\n    updateDoc(input: { id: $id, title: $title, titleEdited: $titleEdited }) {\n      id\n      title\n      titleEdited\n    }\n  }\n"]))),(0,L.Ps)(j||(j=(0,R.Z)(["\n  mutation UpdateDocOrgAccess($id: ID!, $orgAccess: Permission) {\n    updateDoc(input: { id: $id, orgAccess: $orgAccess }) {\n      id\n      orgAccess\n    }\n  }\n"]))),(0,L.Ps)(w||(w=(0,R.Z)(["\n  mutation UpdateDocPublicAccess($id: ID!, $publicAccess: Permission) {\n    updateDoc(input: { id: $id, publicAccess: $publicAccess }) {\n      id\n      publicAccess\n    }\n  }\n"]))),(0,L.Ps)(O||(O=(0,R.Z)(["\n  mutation UpdateDocAccessLinks($id: ID!, $accessLinks: [AccessLinkInput!]) {\n    updateDoc(input: { id: $id, accessLinks: $accessLinks }) {\n      id\n      accessLinks {\n        permission\n        id\n      }\n    }\n  }\n"]))),(0,L.Ps)(k||(k=(0,R.Z)(["\n  ","\n  mutation UpdateDocTheme($id: ID!, $themeId: String) {\n    updateDoc(input: { id: $id, themeId: $themeId }) {\n      id\n      theme {\n        ...DefaultThemeFields\n      }\n    }\n  }\n"])),_),(0,L.Ps)(C||(C=(0,R.Z)(["\n  ","\n  mutation UpdateDocThemeAndOrgAccess(\n    $id: ID!\n    $themeId: String\n    $orgAccess: Permission\n  ) {\n    updateDoc(input: { id: $id, themeId: $themeId, orgAccess: $orgAccess }) {\n      id\n      orgAccess\n      theme {\n        ...DefaultThemeFields\n      }\n    }\n  }\n"])),_),(0,L.Ps)(P||(P=(0,R.Z)(["\n  mutation InviteMembers($workspaceId: ID!, $invitees: [InvitationInput!]!) {\n    inviteMembers(orgId: $workspaceId, invitees: $invitees) {\n      id\n      name\n      invitations {\n        email\n      }\n    }\n  }\n"]))),(0,L.Ps)(S||(S=(0,R.Z)(["\n  ","\n  ","\n  ","\n  mutation CreateComment($input: CreateCommentInput) {\n    createComment(input: $input) {\n      id\n      docId\n      cardId\n      content\n      targetText\n      targetHtml\n      createdTime\n      updatedTime\n      commentId\n      archived\n      targetId\n      status\n      user {\n        ...CommentAuthorFields\n      }\n      replies {\n        ...ReplyFields\n      }\n      reactions {\n        ...ReactionFields\n      }\n    }\n  }\n"])),B,H,Z),(0,L.Ps)(A||(A=(0,R.Z)(["\n  mutation UpdateComment($input: UpdateCommentInput!) {\n    updateComment(input: $input) {\n      id\n      docId\n      content\n      updatedTime\n    }\n  }\n"]))),(0,L.Ps)(E||(E=(0,R.Z)(["\n  mutation UpdateCommentStatus($input: UpdateCommentStatusInput!) {\n    updateCommentStatus(input: $input) {\n      id\n      status\n      updatedTime\n    }\n  }\n"]))),(0,L.Ps)(D||(D=(0,R.Z)(["\n  mutation RemoveComment($id: ID!) {\n    archiveComment(id: $id) {\n      id\n      archived\n    }\n  }\n"]))),(0,L.Ps)(I||(I=(0,R.Z)(["\n  ","\n  fragment DocReactionsCreate on Doc {\n    reactions {\n      ...ReactionFields\n    }\n  }\n"])),H);var $=(0,L.Ps)(z||(z=(0,R.Z)(["\n  ","\n  ","\n  fragment DocCommentsCreate on Doc {\n    comments {\n      id\n      docId\n      cardId\n      content\n      targetText\n      targetHtml\n      createdTime\n      updatedTime\n      archived\n      targetId\n      status\n      user {\n        ...CommentAuthorFields\n      }\n    }\n  }\n  fragment DocRepliesCreate on Doc {\n    comments {\n      id\n      replies {\n        ...ReplyFields\n      }\n    }\n  }\n  fragment DocCommentsUpdate on Doc {\n    comments {\n      id\n      docId\n      content\n      updatedTime\n      reactions {\n        ...ReactionFields\n      }\n    }\n  }\n  fragment DocRepliesUpdate on Doc {\n    comments {\n      id\n      replies {\n        id\n        docId\n        content\n        updatedTime\n        reactions {\n          ...ReactionFields\n        }\n      }\n    }\n  }\n  fragment DocCommentsRemove on Doc {\n    comments {\n      id\n      archived\n    }\n  }\n  fragment DocRepliesRemove on Doc {\n    comments {\n      id\n      replies {\n        id\n        archived\n      }\n    }\n  }\n"])),B,Z);(0,L.Ps)(T||(T=(0,R.Z)(["\n  ","\n  mutation AddReaction($reactionInput: AddReactionInput!) {\n    addReaction(input: $reactionInput) {\n      ...ReactionFields\n    }\n  }\n"])),H),(0,L.Ps)(M||(M=(0,R.Z)(["\n  ","\n  mutation RemoveReaction($reactionInput: RemoveReactionInput!) {\n    removeReaction(input: $reactionInput) {\n      ...ReactionFields\n    }\n  }\n"])),H),(0,L.Ps)(N||(N=(0,R.Z)(["\n  query GetMemoAnalytics($memoId: ID!) {\n    memoStats(id: $memoId) {\n      memoId\n      uniqueViewers\n      uniqueEditors\n      cardCount\n      lastOpened\n      viewers {\n        user {\n          id\n          displayName\n          email\n          profileImageUrl\n        }\n        visitorId\n        lastOpened\n        cardsViewed\n      }\n      dailyViews {\n        dayCount\n        timezone\n        everyone {\n          date\n          uniqueVisitors\n        }\n        viewers {\n          date\n          uniqueVisitors\n        }\n      }\n    }\n  }\n\n  query GetDocCardsAnalytics($docId: ID!, $userId: ID) {\n    docCardsStats(docId: $docId, userId: $userId) {\n      docId\n      uniqueVisitors\n      uniqueEditors\n      cardCount\n      everyone {\n        cardId\n        viewTimePercent\n        viewersPercent\n      }\n      viewers {\n        cardId\n        viewTimePercent\n        viewersPercent\n      }\n    }\n  }\n"])))},86773:function(e,t,n){n.d(t,{v:function(){return r}});var r={generate:(0,n(37164).kP)("0123456789abcdefghijklmnopqrstuvwxyz",15)}},81188:function(e,t,n){n.d(t,{P9:function(){return f},Yz:function(){return h},yd:function(){return v},z3:function(){return m}});var r=n(31807),o=n(96913),i=n(82236),a=n(21668),c=n(33437),s=n(82282),l=n(19293),u=n(43182),d=n(8388),f=function(e){try{var t=(0,d.dN)(),n=(0,r.Z)(e),l=(0,o.Z)(n,0);if((0,i.Z)(n)||(0,a.Z)(n))return(0,c.Z)(l,new Date,{locale:t});return"".concat((0,s.Z)(n,"PPp",{locale:t}))}catch(e){return console.error("[normalizeDate] Error normalizing date:",e),"date unknown"}},p=function(e){return null==e?void 0:e.reduce(function(e,t){return!e||t.updatedTime>(null==e?void 0:e.updatedTime)?t:e},null)},m=function(e){var t=p(e.replies);return t?e.updatedTime>(null==t?void 0:t.updatedTime)?e.updatedTime:t.updatedTime:e.updatedTime},h=function(e,t){var n=p(e.replies),r=p(t.replies),o=n?n.updatedTime:e.updatedTime,i=r?r.updatedTime:t.updatedTime;return o>i?-1:i>o?1:0},g="createdTime",v=function(e){var t=e.items,n=e.sortBy,o=void 0===n?g:n,a=e.latestTimeGetterFn;return t.slice().sort(function(e,t){return"function"==typeof o?o(e,t):(0,l.Z)((0,r.Z)(e[o]),(0,r.Z)(t[o]))}).reduce(function(e,t){var n=a?(0,r.Z)(a(t)):(0,r.Z)(t[g]),o=new Date;return(0,i.Z)(n)?e.today=e.today.concat(t):1>(0,u.Z)(o,n)?e.thisWeek=e.thisWeek.concat(t):e.earlier=e.earlier.concat(t),e},{today:[],thisWeek:[],earlier:[]})}},31912:function(e,t,n){n.d(t,{Hs:function(){return o},Rf:function(){return i}});var r=n(12741);n(84636);var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length?1===e.length?e[0]:2===e.length?e.join(" and "):e.length<=t?"".concat([e.slice(0,e.length-1).join(", "),e[e.length-1]].join(", and ")):"".concat([e.slice(0,t).join(", "),"".concat(e.length-t," ").concat(e.length-t>1?"others":"other")].join(", and ")):null},i=function(e){var t=e.users,n=e.selfUserId;return o(t?(0,r.Z)(t).sort(function(e){return(null==e?void 0:e.id)===n?-1:1}).map(function(e){return(null==e?void 0:e.id)===n?"You":(null==e?void 0:e.displayName)||""}):[])}},73010:function(e,t,n){n.d(t,{Br:function(){return v},CI:function(){return b}});var r=n(96412),o=n(13089),i=n(41701),a=n(90129),c=n(29017),s=n(48200),l=n(95235),u=n(30733),d=n.n(u),f=n(54073),p=n.n(f),m=n(2784),h=function(e){(0,a.Z)(u,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(u);if(t){var r=(0,s.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function u(){var e;return(0,r.Z)(this,u),e=n.call(this),(0,l.Z)((0,i.Z)(e),"emitResize",void 0),e.emitResize=function(t){e.emit("resize",t)},document.addEventListener("containerResize",e.emitResize),e}return(0,o.Z)(u,[{key:"cleanup",value:function(){document.removeEventListener("containerResize",this.emitResize)}}]),u}(n(98555).v),g=d()(function(){return new h}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=(0,m.useState)(!1),r=n[0],o=n[1],i=(0,m.useMemo)(g,[]);return(0,m.useEffect)(function(){var n,r=p()(function(r){var i=r.target;i&&e.current&&y(e.current,i)&&(clearTimeout(n),o(!0),n=setTimeout(function(){o(!1)},t+100))},t,{leading:!0,trailing:!1,maxWait:t});return i.on("resize",r)},[i,t,e]),r},b=function(e){e.dispatchEvent(new Event("containerResize",{bubbles:!0}))},y=function(e,t){var n=e;do{if(n!==t)continue;return!0}while(n=n.parentElement);return!1}},36393:function(e,t,n){n.d(t,{A:function(){return i},Z:function(){return a}});var r=n(2784),o=n(23015),i="is-dragging-over",a=function(e,t){var n=(0,r.useCallback)(function(n){var r;(!t||t(n))&&(null===(r=e.current)||void 0===r||r.classList.add(i))},[e]),a=(0,r.useCallback)(function(){var t;return null===(t=e.current)||void 0===t?void 0:t.classList.remove(i)},[e]);return{onDragOver:o.Gb,onDragEnter:n,onDragLeave:a,onDrop:a}}},12236:function(e,t,n){n.d(t,{N:function(){return u}});var r=n(96412),o=n(13089),i=n(95235),a=n(6238),c=n.n(a),s=n(37164),l=function(){function e(){(0,r.Z)(this,e),(0,i.Z)(this,"_queue",[]),(0,i.Z)(this,"_handle",0),this._handle=requestAnimationFrame(this._flush.bind(this))}return(0,o.Z)(e,[{key:"_flush",value:function(){this._handle=0;var e=this._queue;this._queue=[],e.forEach(function(e){(0,e.fn)()})}},{key:"push",value:function(e,t){if(t){var n=this._queue.findIndex(function(e){return e.id===t});n>-1?this._queue.splice(n,1,{fn:e,id:t}):this._queue.push({fn:e,id:t})}else this._queue.push({fn:e,id:(0,s.x0)(5)});this._handle||(this._handle=requestAnimationFrame(this._flush.bind(this)))}}]),e}(),u=c()(function(){return new l})},67453:function(e,t,n){n.d(t,{$:function(){return i}});var r=n(87254),o=n(75085),i=function(e){return e&&e.length?e:r.ag._({id:"7ZviFu",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}})}},70982:function(e,t){t.tX=void 0;var n=16/9;t.tX={fluid:n,"16x9":n,letter:11/8.5,a4:11.69/8.27,square:1}}}]);
//# sourceMappingURL=318-62aa7f2e030c214b.js.map